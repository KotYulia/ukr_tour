function initFroalaEditors(){$(".froala-editor").each(function(){if(!$(this).hasClass("froala-editor--active")){var e={};e=$.extend({},e,$(this).data("options")),$(this).froalaEditor(e),$(this).addClass("froala-editor--active")}})}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(A,e){"use strict";function g(e,t,n){var i,r=(t=t||se).createElement("script");if(r.text=e,n)for(i in _e)n[i]&&(r[i]=n[i]);t.head.appendChild(r).parentNode.removeChild(r)}function m(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?fe[he.call(e)]||"object":typeof e}function a(e){var t=!!e&&"length"in e&&e.length,n=m(e);return!be(e)&&!Ee(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function t(e,n,i){return be(n)?Te.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?Te.grep(e,function(e){return e===n!==i}):"string"!=typeof n?Te.grep(e,function(e){return-1<ue.call(n,e)!==i}):Te.filter(n,e,i)}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e){var n={};return Te.each(e.match(Le)||[],function(e,t){n[t]=!0}),n}function u(e){return e}function f(e){throw e}function l(e,t,n,i){var r;try{e&&be(r=e.promise)?r.call(e).done(t).fail(n):e&&be(r=e.then)?r.call(e,t,n):t.apply(undefined,[e].slice(i))}catch(e){n.apply(undefined,[e])}}function i(){se.removeEventListener("DOMContentLoaded",i),A.removeEventListener("load",i),Te.ready()}function r(e,t){return t.toUpperCase()}function h(e){return e.replace(Pe,"ms-").replace($e,r)}function o(){this.expando=Te.expando+o.uid++}function s(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ue.test(e)?JSON.parse(e):e)}function p(e,t,n){var i;if(n===undefined&&1===e.nodeType)if(i="data-"+t.replace(Ke,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=s(n)}catch(r){}We.set(e,t,n)}else n=undefined;return n}function v(e,t,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return Te.css(e,t,"")},l=a(),c=n&&n[3]||(Te.cssNumber[t]?"":"px"),d=(Te.cssNumber[t]||"px"!==c&&+l)&&je.exec(Te.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;s--;)Te.style(e,t,d+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),d/=o;d*=2,Te.style(e,t,d+c),n=n||[]}return n&&(d=+d||+l||0,r=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=r)),r}function b(e){var t,n=e.ownerDocument,i=e.nodeName,r=Ve[i];return r||(t=n.body.appendChild(n.createElement(i)),r=Te.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ve[i]=r)}function E(e,t){for(var n,i,r=[],o=0,s=e.length;o<s;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=Be.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&qe(i)&&(r[o]=b(i))):"none"!==n&&(r[o]="none",Be.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function _(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],t===undefined||t&&c(e,t)?Te.merge([e],n):n}function y(e,t){for(var n=0,i=e.length;n<i;n++)Be.set(e[n],"globalEval",!t||Be.get(t[n],"globalEval"))}function T(e,t,n,i,r){for(var o,s,a,l,c,d,u=t.createDocumentFragment(),f=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===m(o))Te.merge(f,o.nodeType?[o]:o);else if(nt.test(o)){for(s=s||u.appendChild(t.createElement("div")),a=(Qe.exec(o)||["",""])[1].toLowerCase(),l=Je[a]||Je._default,s.innerHTML=l[1]+Te.htmlPrefilter(o)+l[2],d=l[0];d--;)s=s.lastChild;Te.merge(f,s.childNodes),(s=u.firstChild).textContent=""}else f.push(t.createTextNode(o));for(u.textContent="",h=0;o=f[h++];)if(i&&-1<Te.inArray(o,i))r&&r.push(o);else if(c=Te.contains(o.ownerDocument,o),s=_(u.appendChild(o),"script"),c&&y(s),n)for(d=0;o=s[d++];)Ze.test(o.type||"")&&n.push(o);return u}function C(){return!0}function S(){return!1}function w(){try{return se.activeElement}catch(e){}}function x(e,t,n,i,r,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=undefined),t)x(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=undefined):null==r&&("string"==typeof n?(r=i,i=undefined):(r=i,i=n,n=undefined)),!1===r)r=S;else if(!r)return e;return 1===o&&(s=r,(r=function(e){return Te().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=Te.guid++)),e.each(function(){Te.event.add(this,t,r,i,n)})}function R(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")&&Te(e).children("tbody")[0]||e}function I(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function D(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function N(e,t){var n,i,r,o,s,a,l,c;if(1===t.nodeType){if(Be.hasData(e)&&(o=Be.access(e),s=Be.set(t,o),c=o.events))for(r in delete s.handle,s.events={},c)for(n=0,i=c[r].length;n<i;n++)Te.event.add(t,r,c[r][n]);We.hasData(e)&&(a=We.access(e),l=Te.extend({},a),We.set(t,l))}}function O(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Xe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function L(n,i,r,o){i=ce.apply([],i);var e,t,s,a,l,c,d=0,u=n.length,f=u-1,h=i[0],p=be(h);if(p||1<u&&"string"==typeof h&&!ve.checkClone&&ct.test(h))return n.each(function(e){var t=n.eq(e);p&&(i[0]=h.call(this,e,t.html())),L(t,i,r,o)});if(u&&(t=(e=T(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=Te.map(_(e,"script"),I)).length;d<u;d++)l=e,d!==f&&(l=Te.clone(l,!0,!0),a&&Te.merge(s,_(l,"script"))),r.call(n[d],l,d);if(a)for(c=s[s.length-1].ownerDocument,Te.map(s,D),d=0;d<a;d++)l=s[d],Ze.test(l.type||"")&&!Be.access(l,"globalEval")&&Te.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?Te._evalUrl&&Te._evalUrl(l.src):g(l.textContent.replace(dt,""),c,l))}return n}function k(e,t,n){for(var i,r=t?Te.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||Te.cleanData(_(i)),i.parentNode&&(n&&Te.contains(i.ownerDocument,i)&&y(_(i,"script")),i.parentNode.removeChild(i));return e}function M(e,t,n){var i,r,o,s,a=e.style;return(n=n||ft(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||Te.contains(e.ownerDocument,e)||(s=Te.style(e,t)),!ve.pixelBoxStyles()&&ut.test(s)&&ht.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),s!==undefined?s+"":s}function F(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function P(e){if(e in Et)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=bt.length;n--;)if((e=bt[n]+t)in Et)return e}function $(e){var t=Te.cssProps[e];return t||(t=Te.cssProps[e]=P(e)||e),t}function H(e,t,n){var i=je.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function B(e,t,n,i,r,o){var s="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=Te.css(e,n+Ye[s],!0,r)),i?("content"===n&&(l-=Te.css(e,"padding"+Ye[s],!0,r)),"margin"!==n&&(l-=Te.css(e,"border"+Ye[s]+"Width",!0,r))):(l+=Te.css(e,"padding"+Ye[s],!0,r),"padding"!==n?l+=Te.css(e,"border"+Ye[s]+"Width",!0,r):a+=Te.css(e,"border"+Ye[s]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))),l}function W(e,t,n){var i=ft(e),r=M(e,t,i),o="border-box"===Te.css(e,"boxSizing",!1,i),s=o;if(ut.test(r)){if(!n)return r;r="auto"}return s=s&&(ve.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===Te.css(e,"display",!1,i))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(r=parseFloat(r)||0)+B(e,t,n||(o?"border":"content"),s,i,r)+"px"}function U(e,t,n,i,r){return new U.prototype.init(e,t,n,i,r)}function K(){yt&&(!1===se.hidden&&A.requestAnimationFrame?A.requestAnimationFrame(K):A.setTimeout(K,Te.fx.interval),Te.fx.tick())}function z(){return A.setTimeout(function(){_t=undefined}),_t=Date.now()}function j(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=Ye[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Y(e,t,n){for(var i,r=(V.tweeners[t]||[]).concat(V.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function q(e,t,n){var i,r,o,s,a,l,c,d,u="width"in t||"height"in t,f=this,h={},p=e.style,g=e.nodeType&&qe(e),m=Be.get(e,"fxshow");for(i in n.queue||(null==(s=Te._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,Te.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[i],At.test(r)){if(delete t[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||m[i]===undefined)continue;g=!0}h[i]=m&&m[i]||Te.style(e,i)}if((l=!Te.isEmptyObject(t))||!Te.isEmptyObject(h))for(i in u&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Be.get(e,"display")),"none"===(d=Te.css(e,"display"))&&(c?d=c:(E([e],!0),c=e.style.display||c,d=Te.css(e,"display"),E([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===Te.css(e,"float")&&(l||(f.done(function(){p.display=c}),null==c&&(d=p.display,c="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(m?"hidden"in m&&(g=m.hidden):m=Be.access(e,"fxshow",{display:c}),o&&(m.hidden=!g),g&&E([e],!0),f.done(function(){for(i in g||E([e]),Be.remove(e,"fxshow"),h)Te.style(e,i,h[i])})),l=Y(g?m[i]:0,i,f),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}function G(e,t){var n,i,r,o,s;for(n in e)if(r=t[i=h(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(s=Te.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}function V(o,e,t){var n,s,i=0,r=V.prefilters.length,a=Te.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=_t||z(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return a.notifyWith(o,[c,n,t]),n<1&&r?t:(r||a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:Te.extend({},e),opts:Te.extend(!0,{specialEasing:{},easing:Te.easing._default},t),originalProperties:e,originalOptions:t,startTime:_t||z(),duration:t.duration,tweens:[],createTween:function(e,t){var n=Te.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,e])):a.rejectWith(o,[c,e]),this}}),d=c.props;for(G(d,c.opts.specialEasing);i<r;i++)if(n=V.prefilters[i].call(c,o,d,c.opts))return be(n.stop)&&(Te._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return Te.map(d,Y,c),be(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Te.fx.timer(Te.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c}function X(e){return(e.match(Le)||[]).join(" ")}function Q(e){return e.getAttribute&&e.getAttribute("class")||""}function Z(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Le)||[]}function J(n,e,i,r){var t;if(Array.isArray(e))Te.each(e,function(e,t){i||Ft.test(n)?r(n,t):J(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==m(e))r(n,e);else for(t in e)J(n+"["+t+"]",e[t],i,r)}function ee(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(Le)||[];if(be(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function te(t,r,o,s){function a(e){var i;return l[e]=!0,Te.each(t[e]||[],function(e,t){var n=t(r,o,s);return"string"!=typeof n||c||l[n]?c?!(i=n):void 0:(r.dataTypes.unshift(n),a(n),!1)}),i}var l={},c=t===Gt;return a(r.dataTypes[0])||!l["*"]&&a("*")}function ne(e,t){var n,i,r=Te.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Te.extend(!0,e,i),e}function ie(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}function re(e,t,n,i){var r,o,s,a,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],d.unshift(a[1]));break}if(!0!==s)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var oe=[],se=A.document,ae=Object.getPrototypeOf,le=oe.slice,ce=oe.concat,de=oe.push,ue=oe.indexOf,fe={},he=fe.toString,pe=fe.hasOwnProperty,ge=pe.toString,me=ge.call(Object),ve={},be=function be(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Ee=function Ee(e){return null!=e&&e===e.window},_e={type:!0,src:!0,noModule:!0},ye="3.3.1",Te=function(e,t){return new Te.fn.init(e,t)},Ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Te.fn=Te.prototype={jquery:ye,constructor:Te,length:0,toArray:function(){return le.call(this)},get:function(e){return null==e?le.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Te.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Te.each(this,e)},map:function(n){return this.pushStack(Te.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:de,sort:oe.sort,splice:oe.splice},Te.extend=Te.fn.extend=function(e){var t,n,i,r,o,s,a=e||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[l]||{},l++),"object"==typeof a||be(a)||(a={}),l===c&&(a=this,l--);l<c;l++)if(null!=(t=arguments[l]))for(n in t)i=a[n],a!==(r=t[n])&&(d&&r&&(Te.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,s=i&&Array.isArray(i)?i:[]):s=i&&Te.isPlainObject(i)?i:{},a[n]=Te.extend(d,s,r)):r!==undefined&&(a[n]=r));return a},Te.extend({expando:"jQuery"+(ye+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==he.call(e))&&(!(t=ae(e))||"function"==typeof(n=pe.call(t,"constructor")&&t.constructor)&&ge.call(n)===me)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){g(e)},each:function(e,t){var n,i=0;if(a(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Ce,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?Te.merge(n,"string"==typeof e?[e]:e):de.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ue.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,s=!n;r<o;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,s=[];if(a(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return ce.apply([],s)},guid:1,support:ve}),"function"==typeof Symbol&&(Te.fn[Symbol.iterator]=oe[Symbol.iterator]),Te.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){fe["[object "+t+"]"]=t.toLowerCase()});var Ae=function(n){function _(e,t,n,i){var r,o,s,a,l,c,d,u=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:W)!==L&&O(t),t=t||L,M)){if(11!==f&&(l=ve.exec(e)))if(r=l[1]){if(9===f){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(u&&(s=u.getElementById(r))&&H(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(r)),n}if(T.qsa&&!Y[e+" "]&&(!F||!F.test(e))){if(1!==f)u=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ye,Te):t.setAttribute("id",a=B),o=(c=w(e)).length;o--;)c[o]="#"+a+" "+g(c[o]);d=c.join(","),u=be.test(e)&&p(t.parentNode)||t}if(d)try{return Z.apply(n,u.querySelectorAll(d)),n}catch(h){}finally{a===B&&t.removeAttribute("id")}}}return R(e.replace(ae,"$1"),t,n,i)}function e(){function n(e,t){return i.push(e+" ")>C.cacheLength&&delete n[i.shift()],n[e+" "]=t}var i=[];return n}function l(e){return e[B]=!0,e}function r(e){var t=L.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function c(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function i(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function o(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function s(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function a(s){return l(function(o){return o=+o,l(function(e,t){for(var n,i=s([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function p(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function g(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function u(a,e,t){var l=e.dir,c=e.next,d=c||l,u=t&&"parentNode"===d,f=K++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||u)return a(e,t,n);return!1}:function(e,t,n){var i,r,o,s=[U,f];if(n){for(;e=e[l];)if((1===e.nodeType||u)&&a(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||u)if(r=(o=e[B]||(e[B]={}))[e.uniqueID]||(o[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((i=r[d])&&i[0]===U&&i[1]===f)return s[2]=i[2];if((r[d]=s)[2]=a(e,t,n))return!0}return!1}}function f(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function b(e,t,n){for(var i=0,r=t.length;i<r;i++)_(e,t[i],n);return n}function y(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),c&&t.push(a)));return s}function E(h,p,g,m,v,e){return m&&!m[B]&&(m=E(m)),v&&!v[B]&&(v=E(v,e)),l(function(e,t,n,i){var r,o,s,a=[],l=[],c=t.length,d=e||b(p||"*",n.nodeType?[n]:n,[]),u=!h||!e&&p?d:y(d,a,h,n,i),f=g?v||(e?h:c||m)?[]:t:u;if(g&&g(u,f,n,i),m)for(r=y(f,l),m(r,[],n,i),o=r.length;o--;)(s=r[o])&&(f[l[o]]=!(u[l[o]]=s));if(e){if(v||h){if(v){for(r=[],o=f.length;o--;)(s=f[o])&&r.push(u[o]=s);v(null,f=[],r,i)}for(o=f.length;o--;)(s=f[o])&&-1<(r=v?ee(e,s):a[o])&&(e[r]=!(t[r]=s))}}else f=y(f===t?f.splice(c,f.length):f),v?v(null,t,f,i):Z.apply(t,f)})}function h(e){for(var r,t,n,i=e.length,o=C.relative[e[0].type],s=o||C.relative[" "],a=o?1:0,l=u(function(e){return e===r},s,!0),c=u(function(e){return-1<ee(r,e)},s,!0),d=[function(e,t,n){var i=!o&&(n||t!==I)||((r=t).nodeType?l(e,t,n):c(e,t,n));return r=null,i}];a<i;a++)if(t=C.relative[e[a].type])d=[u(f(d),t)];else{if((t=C.filter[e[a].type].apply(null,e[a].matches))[B]){for(n=++a;n<i&&!C.relative[e[n].type];n++);return E(1<a&&f(d),1<a&&g(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),t,a<n&&h(e.slice(a,n)),n<i&&h(e=e.slice(n)),n<i&&g(e))}d.push(t)}return f(d)}function m(m,v){var b=0<v.length,E=0<m.length,e=function(e,t,n,i,r){var o,s,a,l=0,c="0",d=e&&[],u=[],f=I,h=e||E&&C.find.TAG("*",r),p=U+=null==f?1:Math.random()||.1,g=h.length;for(r&&(I=t===L||t||r);c!==g&&null!=(o=h[c]);c++){if(E&&o){for(s=0,t||o.ownerDocument===L||(O(o),n=!M);a=m[s++];)if(a(o,t||L,n)){i.push(o);break}r&&(U=p)}b&&((o=!a&&o)&&l--,e&&d.push(o))}if(l+=c,b&&c!==l){for(s=0;a=v[s++];)a(d,u,t,n);if(e){if(0<l)for(;c--;)d[c]||u[c]||(u[c]=X.call(i));u=y(u)}Z.apply(i,u),r&&!e&&0<u.length&&1<l+v.length&&_.uniqueSort(i)}return r&&(U=p,I=f),d};return b?l(e):e}var v,T,C,A,S,w,x,R,I,D,N,O,L,k,M,F,P,$,H,B="sizzle"+1*new Date,W=n.document,U=0,K=0,z=e(),j=e(),Y=e(),q=function(e,t){return e===t&&(N=!0),0},G={}.hasOwnProperty,V=[],X=V.pop,Q=V.push,Z=V.push,J=V.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(oe),fe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){O()},Ae=u(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(V=J.call(W.childNodes),W.childNodes),V[W.childNodes.length].nodeType}catch(Se){Z={apply:V.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}for(v in T=_.support={},S=_.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=_.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:W;return i!==L&&9===i.nodeType&&i.documentElement&&(k=(L=i).documentElement,M=!S(L),W!==L&&(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=me.test(L.getElementsByClassName),T.getById=r(function(e){return k.appendChild(e).id=B,!L.getElementsByName||!L.getElementsByName(B).length}),T.getById?(C.filter.ID=function(e){var t=e.replace(Ee,_e);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var n=e.replace(Ee,_e);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),C.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},C.find.CLASS=T.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&M)return t.getElementsByClassName(e)},P=[],F=[],(T.qsa=me.test(L.querySelectorAll))&&(r(function(e){k.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||F.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),k.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(T.matchesSelector=me.test($=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector))&&r(function(e){T.disconnectedMatch=$.call(e,"*"),$.call(e,"[s!='']:x"),P.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test(k.compareDocumentPosition),H=t||me.test(k.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return N=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===W&&H(W,e)?-1:t===L||t.ownerDocument===W&&H(W,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return N=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e===L?-1:t===L?1:r?-1:o?1:D?ee(D,e)-ee(D,t):0;if(r===o)return c(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?c(s[i],a[i]):s[i]===W?-1:a[i]===W?1:0}),L},_.matches=function(e,t){return _(e,null,null,t)},_.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&O(e),t=t.replace(de,"='$1']"),T.matchesSelector&&M&&!Y[t+" "]&&(!P||!P.test(t))&&(!F||!F.test(t)))try{var n=$.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Se){}return 0<_(t,L,null,[e]).length},_.contains=function(e,t){return(e.ownerDocument||e)!==L&&O(e),H(e,t)},_.attr=function(e,t){(e.ownerDocument||e)!==L&&O(e);var n=C.attrHandle[t.toLowerCase()],i=n&&G.call(C.attrHandle,t.toLowerCase())?n(e,t,!M):undefined;return i!==undefined?i:T.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},_.escape=function(e){return(e+"").replace(ye,Te)},_.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},_.uniqueSort=function(e){var t,n=[],i=0,r=0;if(N=!T.detectDuplicates,D=!T.sortStable&&e.slice(0),e.sort(q),N){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return D=null,e},A=_.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=A(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=A(t);return n},(C=_.selectors={cacheLength:50,createPseudo:l,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ee,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(Ee,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||_.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&_.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=w(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ee,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=_.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(se," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,g,m){var v="nth"!==p.slice(0,3),b="last"!==p.slice(-4),E="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,s,a,l,c=v!==b?"nextSibling":"previousSibling",d=e.parentNode,u=E&&e.nodeName.toLowerCase(),f=!n&&!E,h=!1;if(d){if(v){for(;c;){for(s=e;s=s[c];)if(E?s.nodeName.toLowerCase()===u:1===s.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[b?d.firstChild:d.lastChild],b&&f){for(h=(a=(i=(r=(o=(s=d)[B]||(s[B]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===U&&i[1])&&i[2],s=a&&d.childNodes[a];s=++a&&s&&s[c]||(h=a=0)||l.pop();)if(1===s.nodeType&&++h&&s===e){r[p]=[U,a,h];break}}else if(f&&(h=a=(i=(r=(o=(s=e)[B]||(s[B]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===U&&i[1]),!1===h)for(;(s=++a&&s&&s[c]||(h=a=0)||l.pop())&&((E?s.nodeName.toLowerCase()!==u:1!==s.nodeType)||!++h||(f&&((r=(o=s[B]||(s[B]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[U,h]),s!==e)););return(h-=m)===g||h%g==0&&0<=h/g}}},PSEUDO:function(e,o){var t,s=C.pseudos[e]||C.setFilters[e.toLowerCase()]||_.error("unsupported pseudo: "+e);return s[B]?s(o):1<s.length?(t=[e,e,"",o],C.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var n,i=s(e,o),r=i.length;r--;)e[n=ee(e,i[r])]=!(t[n]=i[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:l(function(e){var i=[],r=[],a=x(e.replace(ae,"$1"));return a[B]?l(function(e,t,n,i){for(var r,o=a(e,null,i,[]),s=e.length;s--;)(r=o[s])&&(e[s]=!(t[s]=r))}):function(e,t,n){return i[0]=e,a(i,null,n,r),i[0]=null,!r.pop()}}),has:l(function(t){return function(e){return 0<_(t,e).length}}),contains:l(function(t){return t=t.replace(Ee,_e),function(e){return-1<(e.textContent||e.innerText||A(e)).indexOf(t)}}),lang:l(function(n){return fe.test(n||"")||_.error("unsupported lang: "+n),n=n.replace(Ee,_e).toLowerCase(),function(e){var t;do{if(t=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===k},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e
){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[n<0?n+t:n]}),even:a(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:a(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[v]=i(v);for(v in{submit:!0,reset:!0})C.pseudos[v]=o(v);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,w=_.tokenize=function(e,t){var n,i,r,o,s,a,l,c=j[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],l=C.preFilter;s;){for(o in n&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=ce.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ae," ")}),s=s.slice(n.length)),C.filter)!(i=he[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?_.error(e):j(e,a).slice(0)},x=_.compile=function(e,t){var n,i=[],r=[],o=Y[e+" "];if(!o){for(t||(t=w(e)),n=t.length;n--;)(o=h(t[n]))[B]?i.push(o):r.push(o);(o=Y(e,m(r,i))).selector=e}return o},R=_.select=function(e,t,n,i){var r,o,s,a,l,c="function"==typeof e&&e,d=!i&&w(e=c.selector||e);if(n=n||[],1===d.length){if(2<(o=d[0]=d[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&M&&C.relative[o[1].type]){if(!(t=(C.find.ID(s.matches[0].replace(Ee,_e),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=he.needsContext.test(e)?0:o.length;r--&&(s=o[r],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(Ee,_e),be.test(o[0].type)&&p(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&g(o)))return Z.apply(n,i),n;break}}return(c||x(e,d))(i,t,!M,n,!t||be.test(e)&&p(t.parentNode)||t),n},T.sortStable=B.split("").sort(q).join("")===B,T.detectDuplicates=!!N,O(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||t(te,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),_}(A);Te.find=Ae,Te.expr=Ae.selectors,Te.expr[":"]=Te.expr.pseudos,Te.uniqueSort=Te.unique=Ae.uniqueSort,Te.text=Ae.getText,Te.isXMLDoc=Ae.isXML,Te.contains=Ae.contains,Te.escapeSelector=Ae.escape;var Se=function(e,t,n){for(var i=[],r=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Te(e).is(n))break;i.push(e)}return i},we=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},xe=Te.expr.match.needsContext,Re=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Te.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Te.find.matchesSelector(i,e)?[i]:[]:Te.find.matches(e,Te.grep(t,function(e){return 1===e.nodeType}))},Te.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(Te(e).filter(function(){for(t=0;t<i;t++)if(Te.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)Te.find(e,r[t],n);return 1<i?Te.uniqueSort(n):n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&xe.test(e)?Te(e):e||[],!1).length}});var Ie,De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Te.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||Ie,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):be(e)?n.ready!==undefined?n.ready(e):e(Te):Te.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:De.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof Te?t[0]:t,Te.merge(this,Te.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),Re.test(i[1])&&Te.isPlainObject(t))for(i in t)be(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=se.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=Te.fn,Ie=Te(se);var Ne=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};Te.fn.extend({has:function(e){var t=Te(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Te.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],s="string"!=typeof e&&Te(e);if(!xe.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&Te.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?Te.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ue.call(Te(e),this[0]):ue.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Te.uniqueSort(Te.merge(this.get(),Te(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Te.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Se(e,"parentNode")},parentsUntil:function(e,t,n){return Se(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return Se(e,"nextSibling")},prevAll:function(e){return Se(e,"previousSibling")},nextUntil:function(e,t,n){return Se(e,"nextSibling",n)},prevUntil:function(e,t,n){return Se(e,"previousSibling",n)},siblings:function(e){return we((e.parentNode||{}).firstChild,e)},children:function(e){return we(e.firstChild)},contents:function(e){return c(e,"iframe")?e.contentDocument:(c(e,"template")&&(e=e.content||e),Te.merge([],e.childNodes))}},function(i,r){Te.fn[i]=function(e,t){var n=Te.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=Te.filter(t,n)),1<this.length&&(Oe[i]||Te.uniqueSort(n),Ne.test(i)&&n.reverse()),this.pushStack(n)}});var Le=/[^\x20\t\r\n\f]+/g;Te.Callbacks=function(i){i="string"==typeof i?d(i):Te.extend({},i);var r,e,t,n,o=[],s=[],a=-1,l=function(){for(n=n||i.once,t=r=!0;s.length;a=-1)for(e=s.shift();++a<o.length;)!1===o[a].apply(e[0],e[1])&&i.stopOnFalse&&(a=o.length,e=!1);i.memory||(e=!1),r=!1,n&&(o=e?[]:"")},c={add:function(){return o&&(e&&!r&&(a=o.length-1,s.push(e)),function n(e){Te.each(e,function(e,t){be(t)?i.unique&&c.has(t)||o.push(t):t&&t.length&&"string"!==m(t)&&n(t)})}(arguments),e&&!r&&l()),this},remove:function(){return Te.each(arguments,function(e,t){for(var n;-1<(n=Te.inArray(t,o,n));)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?-1<Te.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=e="",this},disabled:function(){return!o},lock:function(){return n=s=[],e||r||(o=e=""),this},locked:function(){return!!n},fireWith:function(e,t){return n||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!t}};return c},Te.extend({Deferred:function(e){var o=[["notify","progress",Te.Callbacks("memory"),Te.Callbacks("memory"),2],["resolve","done",Te.Callbacks("once memory"),Te.Callbacks("once memory"),0,"resolved"],["reject","fail",Te.Callbacks("once memory"),Te.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},"catch":function(e){return s.then(null,e)},pipe:function(){var r=arguments;return Te.Deferred(function(i){Te.each(o,function(e,t){var n=be(r[t[4]])&&r[t[4]];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&be(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){function c(o,s,a,l){return function(){var n=this,i=arguments,t=function(){var e,t;if(!(o<d)){if((e=a.apply(n,i))===s.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,be(t)?l?t.call(e,c(d,s,u,l),c(d,s,f,l)):(d++,t.call(e,c(d,s,u,l),c(d,s,f,l),c(d,s,u,s.notifyWith))):(a!==u&&(n=undefined,i=[e]),(l||s.resolveWith)(n,i))}},r=l?t:function(){try{t()}catch(e){Te.Deferred.exceptionHook&&Te.Deferred.exceptionHook(e,r.stackTrace),d<=o+1&&(a!==f&&(n=undefined,i=[e]),s.rejectWith(n,i))}};o?r():(Te.Deferred.getStackHook&&(r.stackTrace=Te.Deferred.getStackHook()),A.setTimeout(r))}}var d=0;return Te.Deferred(function(e){o[0][3].add(c(0,e,be(i)?i:u,e.notifyWith)),o[1][3].add(c(0,e,be(t)?t:u)),o[2][3].add(c(0,e,be(n)?n:f))}).promise()},promise:function(e){return null!=e?Te.extend(e,s):s}},a={};return Te.each(o,function(e,t){var n=t[2],i=t[5];s[t[1]]=n.add,i&&n.add(function(){r=i},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?undefined:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){var n=arguments.length,t=n,i=Array(t),r=le.call(arguments),o=Te.Deferred(),s=function(t){return function(e){i[t]=this,r[t]=1<arguments.length?le.call(arguments):e,--n||o.resolveWith(i,r)}};if(n<=1&&(l(e,o.done(s(t)).resolve,o.reject,!n),"pending"===o.state()||be(r[t]&&r[t].then)))return o.then();for(;t--;)l(r[t],s(t),o.reject);return o.promise()}});var ke=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Te.Deferred.exceptionHook=function(e,t){A.console&&A.console.warn&&e&&ke.test(e.name)&&A.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Te.readyException=function(e){A.setTimeout(function(){throw e})};var Me=Te.Deferred();Te.fn.ready=function(e){return Me.then(e)["catch"](function(e){Te.readyException(e)}),this},Te.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Te.readyWait:Te.isReady)||(Te.isReady=!0)!==e&&0<--Te.readyWait||Me.resolveWith(se,[Te])}}),Te.ready.then=Me.then,"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll?A.setTimeout(Te.ready):(se.addEventListener("DOMContentLoaded",i),A.addEventListener("load",i));var Fe=function(e,t,n,i,r,o,s){var a=0,l=e.length,c=null==n;if("object"===m(n))for(a in r=!0,n)Fe(e,t,a,n[a],!0,o,s);else if(i!==undefined&&(r=!0,be(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Te(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):o},Pe=/^-ms-/,$e=/-([a-z])/g,He=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};o.uid=1,o.prototype={cache:function(e){var t=e[this.expando];return t||(t={},He(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[h(t)]=n;else for(i in t)r[h(i)]=t[i];return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][h(t)]},access:function(e,t,n){return t===undefined||t&&"string"==typeof t&&n===undefined?this.get(e,t):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,i=e[this.expando];if(i!==undefined){if(t!==undefined){n=(t=Array.isArray(t)?t.map(h):(t=h(t))in i?[t]:t.match(Le)||[]).length;for(;n--;)delete i[t[n]]}(t===undefined||Te.isEmptyObject(i))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!Te.isEmptyObject(t)}};var Be=new o,We=new o,Ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ke=/[A-Z]/g;Te.extend({hasData:function(e){return We.hasData(e)||Be.hasData(e)},data:function(e,t,n){return We.access(e,t,n)},removeData:function(e,t){We.remove(e,t)},_data:function(e,t,n){return Be.access(e,t,n)},_removeData:function(e,t){Be.remove(e,t)}}),Te.fn.extend({data:function(n,e){var t,i,r,o=this[0],s=o&&o.attributes;if(n!==undefined)return"object"==typeof n?this.each(function(){We.set(this,n)}):Fe(this,function(e){var t;if(o&&e===undefined)return(t=We.get(o,n))!==undefined?t:(t=p(o,n))!==undefined?t:void 0;this.each(function(){We.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=We.get(o),1===o.nodeType&&!Be.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(i=s[t].name).indexOf("data-")&&(i=h(i.slice(5)),p(o,i,r[i]));Be.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){We.remove(this,e)})}}),Te.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Be.get(e,t),n&&(!i||Array.isArray(n)?i=Be.access(e,t,Te.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=Te.queue(e,t),i=n.length,r=n.shift(),o=Te._queueHooks(e,t),s=function(){Te.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Be.get(e,n)||Be.access(e,n,{empty:Te.Callbacks("once memory").add(function(){Be.remove(e,[t+"queue",n])})})}}),Te.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?Te.queue(this[0],t):n===undefined?this:this.each(function(){var e=Te.queue(this,t,n);Te._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Te.dequeue(this,t)})},dequeue:function(e){return this.each(function(){Te.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Te.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";s--;)(n=Be.get(o[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,je=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),Ye=["Top","Right","Bottom","Left"],qe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&Te.contains(e.ownerDocument,e)&&"none"===Te.css(e,"display")},Ge=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=s[o];return r},Ve={};Te.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){qe(this)?Te(this).show():Te(this).hide()})}});var Xe=/^(?:checkbox|radio)$/i,Qe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ze=/^$|^module$|\/(?:java|ecma)script/i,Je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td;var et,tt,nt=/<|&#?\w+;/;et=se.createDocumentFragment().appendChild(se.createElement("div")),(tt=se.createElement("input")).setAttribute("type","radio"),tt.setAttribute("checked","checked"),tt.setAttribute("name","t"),et.appendChild(tt),ve.checkClone=et.cloneNode(!0).cloneNode(!0).lastChild.checked,et.innerHTML="<textarea>x</textarea>",ve.noCloneChecked=!!et.cloneNode(!0).lastChild.defaultValue;var it=se.documentElement,rt=/^key/,ot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;Te.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,c,d,u,f,h,p,g,m=Be.get(t);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&Te.find.matchesSelector(it,r),n.guid||(n.guid=Te.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==Te&&Te.event.triggered!==e.type?Te.event.dispatch.apply(t,arguments):undefined}),c=(e=(e||"").match(Le)||[""]).length;c--;)h=g=(a=st.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),h&&(u=Te.event.special[h]||{},h=(r?u.delegateType:u.bindType)||h,u=Te.event.special[h]||{},d=Te.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Te.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=l[h])||((f=l[h]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(h,s)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,d):f.push(d),Te.event.global[h]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,c,d,u,f,h,p,g,m=Be.hasData(e)&&Be.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(Le)||[""]).length;c--;)if(h=g=(a=st.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),h){for(u=Te.event.special[h]||{},f=l[h=(i?u.delegateType:u.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)d=f[o],!r&&g!==d.origType||n&&n.guid!==d.guid||a&&!a.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(f.splice(o,1),d.selector&&f.delegateCount--,u.remove&&u.remove.call(e,d));s&&!f.length&&(u.teardown&&!1!==u.teardown.call(e,p,m.handle)||Te.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)Te.event.remove(e,h+t[c],n,i,!0);Te.isEmptyObject(l)&&Be.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,s,a=Te.event.fix(e),l=new Array(arguments.length),c=(Be.get(this,"events")||{})[a.type]||[],d=Te.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,a)){for(s=Te.event.handlers.call(this,a,c),t=0;(r=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,(i=((Te.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))!==undefined&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,r,o,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},n=0;n<l;n++)s[r=(i=t[n]).selector+" "]===undefined&&(s[r]=i.needsContext?-1<Te(r,this).index(c):Te.find(r,this,null,[c]).length),s[r]&&o.push(i);o.length&&a.push({elem:c,handlers:o})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(t,e){Object.defineProperty(Te.Event.prototype,t,{enumerable:!0,configurable:!0,get:be(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[Te.expando]?e:new Te.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(e){return c(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Te.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Te.Event=function(e,t){if(!(this instanceof Te.Event))return new Te.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?C:S,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Te.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Te.expando]=!0},Te.Event.prototype={constructor:Te.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=C,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=C,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=C,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Te.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&rt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&ot.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Te.event.addProp),Te.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){Te.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=this,i=e.relatedTarget,r=e.handleObj;return i&&(i===n||Te.contains(n,i))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=o),t}}}),Te.fn.extend({on:function(e,t,n,i){return x(this,e,t,n,i)},one:function(e,t,n,i){return x(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Te(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=S),this.each(function(){Te.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,lt=/<script|<style|<link/i,ct=/checked\s*(?:[^=]|=\s*.checked.)/i,dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Te.extend({htmlPrefilter:function(e){return e.replace(at,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Te.contains(e.ownerDocument,e);if(!(ve.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Te.isXMLDoc(e)))for(s=_(a),i=0,r=(o=_(e)).length;i<r;i++)O(o[i],s[i]);if(t)if(n)for(o=o||_(e),s=s||_(a),i=0,r=o.length;i<r;i++)N(o[i],s[i]);else N(e,a);return 0<(s=_(a,"script")).length&&y(s,!l&&_(e,"script")),a},cleanData:function(e){for(var t,n,i,r=Te.event.special,o=0;(n=e[o])!==undefined;o++)if(He(n)){if(t=n[Be.expando]){if(t.events)for(i in t.events)r[i]?Te.event.remove(n,i):Te.removeEvent(n,i,t.handle);n[Be.expando]=undefined}n[We.expando]&&(n[We.expando]=undefined)}}}),Te.fn.extend({detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Fe(this,function(e){return e===undefined?Te.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return L(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||R(this,e).appendChild(e)})},prepend:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=R(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Te.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Te.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!lt.test(e)&&!Je[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=Te.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(Te.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return L(this,arguments,function(e){var t=this.parentNode;Te.inArray(this,n)<0&&(Te.cleanData(_(this)),t&&t.replaceChild(e,this))},n)}}),Te.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){Te.fn[e]=function(e){for(var t,n=[],i=Te(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),Te(i[o])[s](t),de.apply(n,t.get());return this.pushStack(n)}});var ut=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),ft=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=A),t.getComputedStyle(e)},ht=new RegExp(Ye.join("|"),"i");!function(){function e(){if(l){a.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(a).appendChild(l);var e=A.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),i=36===t(e.width),l.style.position="absolute",r=36===l.offsetWidth||"absolute",it.removeChild(a),l=null}}function t(e){return Math.round(parseFloat(e))}var n,i,r,o,s,a=se.createElement("div"),l=se.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ve.clearCloneStyle="content-box"===l.style.backgroundClip,Te.extend(ve,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),r}}))}();var pt=/^(none|table(?!-c[ea]).+)/,gt=/^--/,mt={position:"absolute",visibility:"hidden",display:"block"},vt={letterSpacing:"0",fontWeight:"400"},bt=["Webkit","Moz","ms"],Et=se.createElement("div").style;Te.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=M(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=h(t),l=gt.test(t),c=e.style;if(l||(t=$(a)),s=Te.cssHooks[t]||Te.cssHooks[a],n===undefined)return s&&"get"in s&&(r=s.get(e,!1,i))!==undefined?r:c[t];"string"===(o=typeof n)&&(r=je.exec(n))&&r[1]&&(n=v(e,t,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(Te.cssNumber[a]?"":"px")),ve.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,i))===undefined||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,s,a=h(t);return gt.test(t)||(t=$(a)),(s=Te.cssHooks[t]||Te.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),r===undefined&&(r=M(e,t,i)),"normal"===r&&t in vt&&(r=vt[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),Te.each(["height","width"],function(e,a){Te.cssHooks[a]={get:function(e,t,n){if(t)return!pt.test(Te.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?W(e,a,n):Ge(e,mt,function(){return W(e,a,n)})},set:function(e,t,n){var i,r=ft(e),o="border-box"===Te.css(e,"boxSizing",!1,r),s=n&&B(e,a,n,o,r);return o&&ve.scrollboxSize()===r.position&&(s-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(r[a])-B(e,a,"border",!1,r)-.5)),s&&(i=je.exec(t))&&"px"!==(i[3]||"px")&&(e.style[a]=t,t=Te.css(e,a)),H(e,t,s)}}}),Te.cssHooks.marginLeft=F(ve.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Te.each({margin:"",padding:"",border:"Width"},function(r,o){Te.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+Ye[t]+o]=i[t]||i[t-2]||i[0];return n}},"margin"!==r&&(Te.cssHooks[r+o].set=H)}),Te.fn.extend({css:function(e,t){return Fe(this,function(e,t,n){var i,r,o={},s=0;if(Array.isArray(t)){for(i=ft(e),r=t.length;s<r;s++)o[t[s]]=Te.css(e,t[s],!1,i);return o}return n!==undefined?Te.style(e,t,n):Te.css(e,t)},e,t,1<arguments.length)}}),(Te.Tween=U).prototype={constructor:U,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||Te.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Te.cssNumber[n]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,n=U.propHooks[this.prop];return this.options.duration?this.pos=t=Te.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Te.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){Te.fx.step[e.prop]?Te.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Te.cssProps[e.prop]]&&!Te.cssHooks[e.prop]?e.elem[e.prop]=e.now:Te.style(e.elem,e.prop,e.now+e.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Te.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Te.fx=U.prototype.init,Te.fx.step={};var _t,yt,Tt,Ct,At=/^(?:toggle|show|hide)$/,St=/queueHooks$/;Te.Animation=Te.extend(V,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,je.exec(t),n),n}]},tweener:function(e,t){be(e)?(t=e,e=["*"]):e=e.match(Le);for(var n,i=0,r=e.length;i<r;i++)n=e[i],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?V.prefilters.unshift(e):V.prefilters.push(e)}}),Te.speed=function(e,t,n){var i=e&&"object"==typeof e?Te.extend({},e):{complete:n||!n&&t||be(e)&&e,duration:e,easing:n&&t||t&&!be(t)&&t};return Te.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in Te.fx.speeds?i.duration=Te.fx.speeds[i.duration]:i.duration=Te.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){be(i.old)&&i.old.call(this),i.queue&&Te.dequeue(this,i.queue)},i},Te.fn.extend({fadeTo:function(e,t,n,i){return this.filter(qe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=Te.isEmptyObject(t),o=Te.speed(e,n,i),s=function(){var e=V(this,Te.extend({},t),o);(r||Be.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(r,e,o){var s=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=undefined),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=Te.timers,i=Be.get(this);if(t)i[t]&&i[t].stop&&s(i[t]);else for(t in i)i[t]&&i[t].stop&&St.test(t)&&s(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||Te.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=Be.get(this),n=t[s+"queue"],i=t[s+"queueHooks"],r=Te.timers,o=n?n.length:0;for(t.finish=!0,Te.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),Te.each(["toggle","show","hide"],function(e,i){var r=Te.fn[i];Te.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(j(i,!0),e,t,n)}}),Te.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){Te.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),Te.timers=[],Te.fx.tick=function(){var e,t=0,n=Te.timers;for(_t=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Te.fx.stop(),_t=undefined},Te.fx.timer=function(e){Te.timers.push(e),Te.fx.start()},Te.fx.interval=13,Te.fx.start=function(){yt||(yt=!0,K())},Te.fx.stop=function(){yt=null},Te.fx.speeds={slow:600,fast:200,_default:400},Te.fn.delay=function(i
,e){return i=Te.fx&&Te.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=A.setTimeout(e,i);t.stop=function(){A.clearTimeout(n)}})},Tt=se.createElement("input"),Ct=se.createElement("select").appendChild(se.createElement("option")),Tt.type="checkbox",ve.checkOn=""!==Tt.value,ve.optSelected=Ct.selected,(Tt=se.createElement("input")).value="t",Tt.type="radio",ve.radioValue="t"===Tt.value;var wt,xt=Te.expr.attrHandle;Te.fn.extend({attr:function(e,t){return Fe(this,Te.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Te.removeAttr(this,e)})}}),Te.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?Te.prop(e,t,n):(1===o&&Te.isXMLDoc(e)||(r=Te.attrHooks[t.toLowerCase()]||(Te.expr.match.bool.test(t)?wt:undefined)),n!==undefined?null===n?void Te.removeAttr(e,t):r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=Te.find.attr(e,t))?undefined:i)},attrHooks:{type:{set:function(e,t){if(!ve.radioValue&&"radio"===t&&c(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(Le);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?Te.removeAttr(e,n):e.setAttribute(n,n),n}},Te.each(Te.expr.match.bool.source.match(/\w+/g),function(e,t){var s=xt[t]||Te.find.attr;xt[t]=function(e,t,n){var i,r,o=t.toLowerCase();return n||(r=xt[o],xt[o]=i,i=null!=s(e,t,n)?o:null,xt[o]=r),i}});var Rt=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;Te.fn.extend({prop:function(e,t){return Fe(this,Te.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[Te.propFix[e]||e]})}}),Te.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Te.isXMLDoc(e)||(t=Te.propFix[t]||t,r=Te.propHooks[t]),n!==undefined?r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=Te.find.attr(e,"tabindex");return t?parseInt(t,10):Rt.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ve.optSelected||(Te.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Te.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Te.propFix[this.toLowerCase()]=this}),Te.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,l=0;if(be(t))return this.each(function(e){Te(this).addClass(t.call(this,e,Q(this)))});if((e=Z(t)).length)for(;n=this[l++];)if(r=Q(n),i=1===n.nodeType&&" "+X(r)+" "){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=X(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,l=0;if(be(t))return this.each(function(e){Te(this).removeClass(t.call(this,e,Q(this)))});if(!arguments.length)return this.attr("class","");if((e=Z(t)).length)for(;n=this[l++];)if(r=Q(n),i=1===n.nodeType&&" "+X(r)+" "){for(s=0;o=e[s++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(a=X(i))&&n.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r,s="string"===o||Array.isArray(r);return"boolean"==typeof t&&s?t?this.addClass(r):this.removeClass(r):be(r)?this.each(function(e){Te(this).toggleClass(r.call(this,e,Q(this),t),t)}):this.each(function(){var e,t,n,i;if(s)for(t=0,n=Te(this),i=Z(r);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else r!==undefined&&"boolean"!==o||((e=Q(this))&&Be.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":Be.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+X(Q(n))+" ").indexOf(t))return!0;return!1}});var Dt=/\r/g;Te.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=be(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,Te(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=Te.map(t,function(e){return null==e?"":e+""})),(i=Te.valHooks[this.type]||Te.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,t,"value")!==undefined||(this.value=t))})):t?(i=Te.valHooks[t.type]||Te.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&(e=i.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(Dt,""):null==e?"":e:void 0}}),Te.extend({valHooks:{option:{get:function(e){var t=Te.find.attr(e,"value");return null!=t?t:X(Te.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:r.length;for(i=o<0?l:s?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(t=Te(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=Te.makeArray(t),s=r.length;s--;)((i=r[s]).selected=-1<Te.inArray(Te.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Te.each(["radio","checkbox"],function(){Te.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<Te.inArray(Te(e).val(),t)}},ve.checkOn||(Te.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ve.focusin="onfocusin"in A;var Nt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};Te.extend(Te.event,{trigger:function(e,t,n,i){var r,o,s,a,l,c,d,u,f=[n||se],h=pe.call(e,"type")?e.type:e,p=pe.call(e,"namespace")?e.namespace.split("."):[];if(o=u=s=n=n||se,3!==n.nodeType&&8!==n.nodeType&&!Nt.test(h+Te.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),l=h.indexOf(":")<0&&"on"+h,(e=e[Te.expando]?e:new Te.Event(h,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=null==t?[e]:Te.makeArray(t,[e]),d=Te.event.special[h]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!Ee(n)){for(a=d.delegateType||h,Nt.test(a+h)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(n.ownerDocument||se)&&f.push(s.defaultView||s.parentWindow||A)}for(r=0;(o=f[r++])&&!e.isPropagationStopped();)u=o,e.type=1<r?a:d.bindType||h,(c=(Be.get(o,"events")||{})[e.type]&&Be.get(o,"handle"))&&c.apply(o,t),(c=l&&o[l])&&c.apply&&He(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!He(n)||l&&be(n[h])&&!Ee(n)&&((s=n[l])&&(n[l]=null),Te.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,Ot),n[h](),e.isPropagationStopped()&&u.removeEventListener(h,Ot),Te.event.triggered=undefined,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var i=Te.extend(new Te.Event,n,{type:e,isSimulated:!0});Te.event.trigger(i,null,t)}}),Te.fn.extend({trigger:function(e,t){return this.each(function(){Te.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Te.event.trigger(e,t,n,!0)}}),ve.focusin||Te.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){Te.event.simulate(i,e.target,Te.event.fix(e))};Te.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=Be.access(e,i);t||e.addEventListener(n,r,!0),Be.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Be.access(e,i)-1;t?Be.access(e,i,t):(e.removeEventListener(n,r,!0),Be.remove(e,i))}}});var Lt=A.location,kt=Date.now(),Mt=/\?/;Te.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new A.DOMParser).parseFromString(e,"text/xml")}catch(n){t=undefined}return t&&!t.getElementsByTagName("parsererror").length||Te.error("Invalid XML: "+e),t};var Ft=/\[\]$/,Pt=/\r?\n/g,$t=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;Te.param=function(e,t){var n,i=[],r=function(e,t){var n=be(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!Te.isPlainObject(e))Te.each(e,function(){r(this.name,this.value)});else for(n in e)J(n,e[n],t,r);return i.join("&")},Te.fn.extend({serialize:function(){return Te.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Te.prop(this,"elements");return e?Te.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Te(this).is(":disabled")&&Ht.test(this.nodeName)&&!$t.test(e)&&(this.checked||!Xe.test(e))}).map(function(e,t){var n=Te(this).val();return null==n?null:Array.isArray(n)?Te.map(n,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:n.replace(Pt,"\r\n")}}).get()}});var Bt=/%20/g,Wt=/#.*$/,Ut=/([?&])_=[^&]*/,Kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Yt=/^\/\//,qt={},Gt={},Vt="*/".concat("*"),Xt=se.createElement("a");Xt.href=Lt.href,Te.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:zt.test(Lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Te.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ne(ne(e,Te.ajaxSettings),t):ne(Te.ajaxSettings,e)},ajaxPrefilter:ee(qt),ajaxTransport:ee(Gt),ajax:function(e,t){function n(e,t,n,i){var r,o,s,a,l,c=t;p||(p=!0,h&&A.clearTimeout(h),d=undefined,f=i||"",T.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(a=ie(m,T,n)),a=re(m,a,T,r),r?(m.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(Te.lastModified[u]=l),(l=T.getResponseHeader("etag"))&&(Te.etag[u]=l)),204===e||"HEAD"===m.type?c="nocontent":304===e?c="notmodified":(c=a.state,o=a.data,r=!(s=a.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",r?E.resolveWith(v,[o,c,T]):E.rejectWith(v,[T,c,s]),T.statusCode(y),y=undefined,g&&b.trigger(r?"ajaxSuccess":"ajaxError",[T,m,r?o:s]),_.fireWith(v,[T,c]),g&&(b.trigger("ajaxComplete",[T,m]),--Te.active||Te.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var d,u,f,i,h,r,p,g,o,s,m=Te.ajaxSetup({},t),v=m.context||m,b=m.context&&(v.nodeType||v.jquery)?Te(v):Te.event,E=Te.Deferred(),_=Te.Callbacks("once memory"),y=m.statusCode||{},a={},l={},c="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(p){if(!i)for(i={};t=Kt.exec(f);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(e,t){return null==p&&(e=l[e.toLowerCase()]=l[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==p&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(p)T.always(e[T.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||c;return d&&d.abort(t),n(0,t),this}};if(E.promise(T),m.url=((e||m.url||Lt.href)+"").replace(Yt,Lt.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(Le)||[""],null==m.crossDomain){r=se.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(C){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=Te.param(m.data,m.traditional)),te(qt,m,t,T),p)return T;for(o in(g=Te.event&&m.global)&&0==Te.active++&&Te.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!jt.test(m.type),u=m.url.replace(Wt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Bt,"+")):(s=m.url.slice(u.length),m.data&&(m.processData||"string"==typeof m.data)&&(u+=(Mt.test(u)?"&":"?")+m.data,delete m.data),!1===m.cache&&(u=u.replace(Ut,"$1"),s=(Mt.test(u)?"&":"?")+"_="+kt+++s),m.url=u+s),m.ifModified&&(Te.lastModified[u]&&T.setRequestHeader("If-Modified-Since",Te.lastModified[u]),Te.etag[u]&&T.setRequestHeader("If-None-Match",Te.etag[u])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Vt+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(v,T,m)||p))return T.abort();if(c="abort",_.add(m.complete),T.done(m.success),T.fail(m.error),d=te(Gt,m,t,T)){if(T.readyState=1,g&&b.trigger("ajaxSend",[T,m]),p)return T;m.async&&0<m.timeout&&(h=A.setTimeout(function(){T.abort("timeout")},m.timeout));try{p=!1,d.send(a,n)}catch(C){if(p)throw C;n(-1,C)}}else n(-1,"No Transport");return T},getJSON:function(e,t,n){return Te.get(e,t,n,"json")},getScript:function(e,t){return Te.get(e,undefined,t,"script")}}),Te.each(["get","post"],function(e,r){Te[r]=function(e,t,n,i){return be(t)&&(i=i||n,n=t,t=undefined),Te.ajax(Te.extend({url:e,type:r,dataType:i,data:t,success:n},Te.isPlainObject(e)&&e))}}),Te._evalUrl=function(e){return Te.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},Te.fn.extend({wrapAll:function(e){var t;return this[0]&&(be(e)&&(e=e.call(this[0])),t=Te(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return be(n)?this.each(function(e){Te(this).wrapInner(n.call(this,e))}):this.each(function(){var e=Te(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=be(t);return this.each(function(e){Te(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Te(this).replaceWith(this.childNodes)}),this}}),Te.expr.pseudos.hidden=function(e){return!Te.expr.pseudos.visible(e)},Te.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Te.ajaxSettings.xhr=function(){try{return new A.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Zt=Te.ajaxSettings.xhr();ve.cors=!!Zt&&"withCredentials"in Zt,ve.ajax=Zt=!!Zt,Te.ajaxTransport(function(o){var s,a;if(ve.cors||Zt&&!o.crossDomain)return{send:function(e,t){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);s=function(e){return function(){s&&(s=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Qt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=s(),a=i.onerror=i.ontimeout=s("error"),i.onabort!==undefined?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&A.setTimeout(function(){s&&a()})},s=s("abort");try{i.send(o.hasContent&&o.data||null)}catch(r){if(s)throw r}},abort:function(){s&&s()}}}),Te.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Te.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Te.globalEval(e),e}}}),Te.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Te.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=Te("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),se.head.appendChild(i[0])},abort:function(){r&&r()}}});var Jt,en=[],tn=/(=)\?(?=&|$)|\?\?/;Te.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||Te.expando+"_"+kt++;return this[e]=!0,e}}),Te.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,s=!1!==e.jsonp&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=be(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(tn,"$1"+i):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||Te.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=A[i],A[i]=function(){o=arguments},n.always(function(){r===undefined?Te(A).removeProp(i):A[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,en.push(i)),o&&be(r)&&r(o[0]),o=r=undefined}),"script"}),ve.createHTMLDocument=((Jt=se.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),Te.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(ve.createHTMLDocument?((i=(t=se.implementation.createHTMLDocument("")).createElement("base")).href=se.location.href,t.head.appendChild(i)):t=se),o=!n&&[],(r=Re.exec(e))?[t.createElement(r[1])]:(r=T([e],t,o),o&&o.length&&Te(o).remove(),Te.merge([],r.childNodes)));var i,r,o},Te.fn.load=function(e,t,n){var i,r,o,s=this,a=e.indexOf(" ");return-1<a&&(i=X(e.slice(a)),e=e.slice(0,a)),be(t)?(n=t,t=undefined):t&&"object"==typeof t&&(r="POST"),0<s.length&&Te.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Te("<div>").append(Te.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Te.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Te.fn[t]=function(e){return this.on(t,e)}}),Te.expr.pseudos.animated=function(t){return Te.grep(Te.timers,function(e){return t===e.elem}).length},Te.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c=Te.css(e,"position"),d=Te(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=Te.css(e,"top"),l=Te.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(s=(i=d.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),be(t)&&(t=t.call(e,n,Te.extend({},a))),null!=t.top&&(u.top=t.top-a.top+s),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):d.css(u)}},Te.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){Te.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===Te.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Te.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=Te(e).offset()).top+=Te.css(e,"borderTopWidth",!0),r.left+=Te.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-Te.css(i,"marginTop",!0),left:t.left-r.left-Te.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Te.css(e,"position");)e=e.offsetParent;return e||it})}}),Te.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;Te.fn[t]=function(e){return Fe(this,function(e,t,n){var i;if(Ee(e)?i=e:9===e.nodeType&&(i=e.defaultView),n===undefined)return i?i[r]:e[t];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),Te.each(["top","left"],function(e,n){Te.cssHooks[n]=F(ve.pixelPosition,function(e,t){if(t)return t=M(e,n),ut.test(t)?Te(e).position()[n]+"px":t})}),Te.each({Height:"height",Width:"width"},function(s,a){Te.each({padding:"inner"+s,content:a,"":"outer"+s},function(i,o){Te.fn[o]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return Fe(this,function(e,t,n){var i;return Ee(e)?0===o.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+s],i["scroll"+s],e.body["offset"+s],i["offset"+s],i["client"+s])):n===undefined?Te.css(e,t,r):Te.style(e,t,n,r)},a,n?e:undefined,n)}})}),Te.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){Te.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),Te.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Te.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),Te.proxy=function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),be(e)?(i=le.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(le.call(arguments)))}).guid=e.guid=e.guid||Te.guid++,r):undefined},Te.holdReady=function(e){e?Te.readyWait++:Te.ready(!0)},Te.isArray=Array.isArray,Te.parseJSON=JSON.parse,Te.nodeName=c,Te.isFunction=be,Te.isWindow=Ee,Te.camelCase=h,Te.type=m,Te.now=Date.now,Te.isNumeric=function(e){var t=Te.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return Te});var nn=A.jQuery,rn=A.$;return Te.noConflict=function(e){return A.$===Te&&(A.$=rn),e&&A.jQuery===Te&&(A.jQuery=nn),Te},e||(A.jQuery=A.$=Te),Te}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ActiveStorage={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}function s(e){var t=i(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function r(e,t){return"string"==typeof e&&(t=e,e=document),o(e.querySelectorAll(t))}function i(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function l(e,t,n){var i=2<arguments.length&&n!==undefined?arguments[2]:{},r=e.disabled,o=i.bubbles,s=i.cancelable,a=i.detail,l=document.createEvent("Event");l.initEvent(t,o||!0,s||!0),l.detail=a||{};try{e.disabled=!1,e.dispatchEvent(l)}finally{e.disabled=r}return l}function o(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}function a(e,t){if(e&&"function"==typeof e[t]){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e[t].apply(e,i)}}function n(){N||(N=!0,document.addEventListener("click",c,!0),document.addEventListener("submit",d),document.addEventListener("ajax:before",u))}function c(e){var t=e.target;"INPUT"!=t.tagName&&"BUTTON"!=t.tagName||"submit"!=t.type||!t.form||D.set(t.form,t)}function d(e){f(e)}function u(e){"FORM"==e.target.tagName&&f(e)}function f(e){var t=e.target;if(t.hasAttribute(I))e.preventDefault();else{var n=new R(t),i=n.inputs;i.length&&(e.preventDefault(),t.setAttribute(I,""),i.forEach(p),n.start(function(e){t.removeAttribute(I),e?i.forEach(g):h(t)}))}}function h(e){var t=D.get(e)||i(e,"input[type=submit], button[type=submit]");if(t){var n=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=n}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t);D["delete"](e)}function p(e){e.disabled=!0}function g(e){e.disabled=!1}function m(){window.ActiveStorage&&n()}var v=t(function(e){var t;t=function(d){function c(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+t[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&r)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&i)+t[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&n)+t[3]-1044525330|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+t[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&r)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&i)+t[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&n)+t[7]-45705983|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+t[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&r)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&i)+t[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&n)+t[11]-1990404162|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+t[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&r)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&i)+t[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&n)+t[15]+1236535329|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+t[1]-165796510|0)<<5|n>>>27)+i|0)&r|i&~r)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&i|n&~i)+t[11]+643717713|0)<<14|r>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+t[5]-701558691|0)<<5|n>>>27)+i|0)&r|i&~r)+t[10]+38016083|0)<<9|o>>>23)+n|0)&i|n&~i)+t[15]-660478335|0)<<14|r>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+t[9]+568446438|0)<<5|n>>>27)+i|0)&r|i&~r)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&i|n&~i)+t[3]-187363961|0)<<14|r>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+t[13]-1444681467|0)<<5|n>>>27)+i|0)&r|i&~r)+t[2]-51403784|0)<<9|o>>>23)+n|0)&i|n&~i)+t[7]+1735328473|0)<<14|r>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^r)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^i)+t[11]+1839030562|0)<<16|r>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+t[1]-1530992060|0)<<4|n>>>28)+i|0)^i^r)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^i)+t[7]-155497632|0)<<16|r>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+t[13]+681279174|0)<<4|n>>>28)+i|0)^i^r)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^i)+t[3]-722521979|0)<<16|r>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+t[9]-640364487|0)<<4|n>>>28)+i|0)^i^r)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^i)+t[15]+530742520|0)<<16|r>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|i>>>9)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+t[0]-198630844|0)<<6|n>>>26)+i|0)|~r))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+t[14]-1416354905|0)<<15|r>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+t[12]+1700485571|0)<<6|n>>>26)+i|0)|~r))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+t[10]-1051523|0)<<15|r>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+t[8]+1873313359|0)<<6|n>>>26)+i|0)|~r))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+t[6]-1560198380|0)<<15|r>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+t[4]-145523070|0)<<6|n>>>26)+i|0)|~r))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+t[2]+718787259|0)<<15|r>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|i>>>11)+r|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=r+e[2]|0,e[3]=o+e[3]|0}function u(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function f(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,n,i,r,o,s,a=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)c(l,u(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),55<t)for(c(l,i),t=0;t<16;t+=1)i[t]=0;return r=(r=8*a).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),s=parseInt(r[1],16)||0,i[14]=o,i[15]=s,c(l,i),l}function r(e){var t,n,i,r,o,s,a=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)c(l,f(e.subarray(t-64,t)));for(n=(e=t-64<a?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),55<t)for(c(l,i),t=0;t<16;t+=1)i[t]=0;return r=(r=8*a).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),s=parseInt(r[1],16)||0,i[14]=o,i[15]=s,c(l,i),l}function n(e){var t,n="";for(t=0;t<4;t+=1)n+=g[e>>8*t+4&15]+g[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=n(e[t]);return e.join("")}function o(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function t(e,t){var n,i=e.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=e.charCodeAt(n);return t?o:r}function a(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function l(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function h(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function c(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var n,i,r,o,s=this.byteLength,a=c(e,s),l=s;return t!==d&&(l=c(t,s)),l<a?new ArrayBuffer(0):(n=l-a,i=new ArrayBuffer(n),r=new Uint8Array(i),o=new Uint8Array(this,a,n),r.set(o),i)}}(),p.prototype.append=function(e){return this.appendBinary(o(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)c(this._hash,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},p.prototype.end=function(e){var t,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(o,r),n=s(this._hash),e&&(n=h(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,t){var n,i,r,o=t;if(e[o>>2]|=128<<(o%4<<3),55<o)for(c(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),r=parseInt(n[1],16)||0,e[14]=i,e[15]=r,c(this._hash,e)},p.hash=function(e,t){return p.hashBinary(o(e),t)},p.hashBinary=function(e,t){var n=s(i(e));return t?h(n):n},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var t,n=l(this._buff.buffer,e,!0),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)c(this._hash,f(n.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)o[t>>2]|=i[t]<<(t%4<<3);return this._finish(o,r),n=s(this._hash),e&&(n=h(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=a(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=t(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n=s(r(new Uint8Array(e)));return t?h(n):n},p},e.exports=t()}),b=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),_=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,y=function(){function n(e){b(this,n),this.file=e,
this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return E(n,null,[{key:"create",value:function i(e,t){new n(e).create(t)}}]),E(n,[{key:"create",value:function i(e){var t=this;this.callback=e,this.md5Buffer=new v.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function r(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),n=btoa(t);this.callback(null,n)}}},{key:"fileReaderDidError",value:function e(){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function o(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=_.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}]),n}(),T=function(){function r(e,t,n){var i=this;b(this,r),this.file=e,this.attributes={filename:e.name,content_type:e.type,byte_size:e.size,checksum:t},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",s("csrf-token")),this.xhr.addEventListener("load",function(e){return i.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return i.requestDidError(e)})}return E(r,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function i(e){if(200<=this.status&&this.status<300){var t=this.response,n=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function e(){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function n(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function o(){return this.xhr.status}},{key:"response",get:function o(){var e=this.xhr,t=e.responseType,n=e.response;return"json"==t?n:JSON.parse(n)}}]),r}(),C=function(){function s(e){var t=this;b(this,s),this.blob=e,this.file=e.file;var n=e.directUploadData,i=n.url,r=n.headers;for(var o in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",i,!0),this.xhr.responseType="text",r)this.xhr.setRequestHeader(o,r[o]);this.xhr.addEventListener("load",function(e){return t.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return t.requestDidError(e)})}return E(s,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function r(e){var t=this.xhr,n=t.status,i=t.response;200<=n&&n<300?this.callback(null,i):this.requestDidError(e)}},{key:"requestDidError",value:function e(){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),s}(),A=0,S=function(){function i(e,t,n){b(this,i),this.id=++A,this.file=e,this.url=t,this.delegate=n}return E(i,[{key:"create",value:function e(i){var r=this;y.create(this.file,function(e,t){if(e)i(e);else{var n=new T(r.file,t,r.url);a(r.delegate,"directUploadWillCreateBlobWithXHR",n.xhr),n.create(function(e){if(e)i(e);else{var t=new C(n);a(r.delegate,"directUploadWillStoreFileWithXHR",t.xhr),t.create(function(e){e?i(e):i(null,n.toJSON())})}})}})}}]),i}(),w=function(){function n(e,t){b(this,n),this.input=e,this.file=t,this.directUpload=new S(this.file,this.url,this),this.dispatch("initialize")}return E(n,[{key:"start",value:function e(n){var i=this,r=document.createElement("input");r.type="hidden",r.name=this.input.name,this.input.insertAdjacentElement("beforebegin",r),this.dispatch("start"),this.directUpload.create(function(e,t){e?(r.parentNode.removeChild(r),i.dispatchError(e)):r.value=t.signed_id,i.dispatch("end"),n(e)})}},{key:"uploadRequestDidProgress",value:function i(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function r(e,t){var n=1<arguments.length&&t!==undefined?arguments[1]:{};return n.file=this.file,n.id=this.directUpload.id,l(this.input,"direct-upload:"+e,{detail:n})}},{key:"dispatchError",value:function t(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function o(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function s(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function a(){return this.input.getAttribute("data-direct-upload-url")}}]),n}(),x="input[type=file][data-direct-upload-url]:not([disabled])",R=function(){function t(e){b(this,t),this.form=e,this.inputs=r(e,x).filter(function(e){return e.files.length})}return E(t,[{key:"start",value:function e(t){var n=this,i=this.createDirectUploadControllers(),r=function r(){var e=i.shift();e?e.start(function(e){e?(t(e),n.dispatch("end")):r()}):(t(),n.dispatch("end"))};this.dispatch("start"),r()}},{key:"createDirectUploadControllers",value:function n(){var i=[];return this.inputs.forEach(function(n){o(n.files).forEach(function(e){var t=new w(n,e);i.push(t)})}),i}},{key:"dispatch",value:function i(e,t){var n=1<arguments.length&&t!==undefined?arguments[1]:{};return l(this.form,"direct-uploads:"+e,{detail:n})}}]),t}(),I="data-direct-uploads-processing",D=new WeakMap,N=!1;setTimeout(m,1),e.start=n,e.DirectUpload=S,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("popper.js"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","popper.js","jquery"],t):t(e.bootstrap={},e.Popper,e.jQuery)}(this,function(e,D,N){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function O(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function u(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function a(e){return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function t(){return{bindType:s,delegateType:s,handle:function t(e){return N(e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function n(e){var t=this,n=!1;return N(this).one(k.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||k.triggerTransitionEnd(t)},e),this}function o(){N.fn.emulateTransitionEnd=n,N.event.special[k.TRANSITION_END]=t()}D=D&&D.hasOwnProperty("default")?D["default"]:D,N=N&&N.hasOwnProperty("default")?N["default"]:N;var s="transitionend",l=1e6,c=1e3,k={TRANSITION_END:"bsTransitionEnd",getUID:function tn(e){for(;e+=~~(Math.random()*l),document.getElementById(e););return e},getSelectorFromElement:function nn(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var n=e.getAttribute("href");t=n&&"#"!==n?n.trim():""}return t&&document.querySelector(t)?t:null},getTransitionDurationFromElement:function rn(e){if(!e)return 0;var t=N(e).css("transition-duration"),n=N(e).css("transition-delay"),i=parseFloat(t),r=parseFloat(n);return i||r?(t=t.split(",")[0],n=n.split(",")[0],(parseFloat(t)+parseFloat(n))*c):0},reflow:function on(e){return e.offsetHeight},triggerTransitionEnd:function sn(e){N(e).trigger(s)},supportsTransitionEnd:function an(){return Boolean(s)},isElement:function ln(e){return(e[0]||e).nodeType},typeCheckConfig:function cn(e,t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],o=t[i],s=o&&k.isElement(o)?"element":a(o);if(!new RegExp(r).test(s))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+r+'".')}},findShadowRoot:function dn(e){if(!document.documentElement.attachShadow)return null;if("function"!=typeof e.getRootNode)return e instanceof ShadowRoot?e:e.parentNode?k.findShadowRoot(e.parentNode):null;var t=e.getRootNode();return t instanceof ShadowRoot?t:null}};o();var d="alert",f="4.2.1",h="bs.alert",p="."+h,g=".data-api",m=N.fn[d],v={DISMISS:'[data-dismiss="alert"]'},b={CLOSE:"close"+p,CLOSED:"closed"+p,CLICK_DATA_API:"click"+p+g},E={ALERT:"alert",FADE:"fade",SHOW:"show"},_=function(){function i(e){this._element=e}var e=i.prototype;return e.close=function n(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},e.dispose=function t(){N.removeData(this._element,h),this._element=null},e._getRootElement=function r(e){var t=k.getSelectorFromElement(e),n=!1;return t&&(n=document.querySelector(t)),n||(n=N(e).closest("."+E.ALERT)[0]),n},e._triggerCloseEvent=function o(e){var t=N.Event(b.CLOSE);return N(e).trigger(t),t},e._removeElement=function s(t){var n=this;if(N(t).removeClass(E.SHOW),N(t).hasClass(E.FADE)){var e=k.getTransitionDurationFromElement(t);N(t).one(k.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(e)}else this._destroyElement(t)},e._destroyElement=function a(e){N(e).detach().trigger(b.CLOSED).remove()},i._jQueryInterface=function l(n){return this.each(function(){var e=N(this),t=e.data(h);t||(t=new i(this),e.data(h,t)),"close"===n&&t[n](this)})},i._handleDismiss=function c(t){return function(e){e&&e.preventDefault(),t.close(this)}},O(i,null,[{key:"VERSION",get:function d(){return f}}]),i}();N(document).on(b.CLICK_DATA_API,v.DISMISS,_._handleDismiss(new _)),N.fn[d]=_._jQueryInterface,N.fn[d].Constructor=_,N.fn[d].noConflict=function(){return N.fn[d]=m,_._jQueryInterface};var y="button",T="4.2.1",C="bs.button",A="."+C,S=".data-api",w=N.fn[y],x={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},R={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:'input:not([type="hidden"])',ACTIVE:".active",BUTTON:".btn"},I={CLICK_DATA_API:"click"+A+S,FOCUS_BLUR_DATA_API:"focus"+A+S+" blur"+A+S},M=function(){function n(e){this._element=e}var e=n.prototype;return e.toggle=function o(){var e=!0,t=!0,n=N(this._element).closest(R.DATA_TOGGLE)[0];if(n){var i=this._element.querySelector(R.INPUT);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(x.ACTIVE))e=!1;else{var r=n.querySelector(R.ACTIVE);r&&N(r).removeClass(x.ACTIVE)}if(e){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(x.ACTIVE),N(i).trigger("change")}i.focus(),t=!1}}t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(x.ACTIVE)),e&&N(this._element).toggleClass(x.ACTIVE)},e.dispose=function t(){N.removeData(this._element,C),this._element=null},n._jQueryInterface=function i(t){return this.each(function(){var e=N(this).data(C);e||(e=new n(this),N(this).data(C,e)),"toggle"===t&&e[t]()})},O(n,null,[{key:"VERSION",get:function r(){return T}}]),n}();N(document).on(I.CLICK_DATA_API,R.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var t=e.target;N(t).hasClass(x.BUTTON)||(t=N(t).closest(R.BUTTON)),M._jQueryInterface.call(N(t),"toggle")}).on(I.FOCUS_BLUR_DATA_API,R.DATA_TOGGLE_CARROT,function(e){var t=N(e.target).closest(R.BUTTON)[0];N(t).toggleClass(x.FOCUS,/^focus(in)?$/.test(e.type))}),N.fn[y]=M._jQueryInterface,N.fn[y].Constructor=M,N.fn[y].noConflict=function(){return N.fn[y]=w,M._jQueryInterface};var F="carousel",P="4.2.1",$="bs.carousel",H="."+$,B=".data-api",W=N.fn[F],U=37,K=39,z=500,j=40,Y={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},q={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},G={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},V={SLIDE:"slide"+H,SLID:"slid"+H,KEYDOWN:"keydown"+H,MOUSEENTER:"mouseenter"+H,MOUSELEAVE:"mouseleave"+H,TOUCHSTART:"touchstart"+H,TOUCHMOVE:"touchmove"+H,TOUCHEND:"touchend"+H,POINTERDOWN:"pointerdown"+H,POINTERUP:"pointerup"+H,DRAG_START:"dragstart"+H,LOAD_DATA_API:"load"+H+B,CLICK_DATA_API:"click"+H+B},X={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},Q={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},Z={TOUCH:"touch",PEN:"pen"},J=function(){function o(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector(Q.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var e=o.prototype;return e.next=function t(){this._isSliding||this._slide(G.NEXT)},e.nextWhenVisible=function n(){!document.hidden&&N(this._element).is(":visible")&&"hidden"!==N(this._element).css("visibility")&&this.next()},e.prev=function i(){this._isSliding||this._slide(G.PREV)},e.pause=function r(e){e||(this._isPaused=!0),this._element.querySelector(Q.NEXT_PREV)&&(k.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function s(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function a(e){var t=this;this._activeElement=this._element.querySelector(Q.ACTIVE_ITEM);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)N(this._element).one(V.SLID,function(){return t.to(e)});else{if(n===e)return this.pause(),void this.cycle();var i=n<e?G.NEXT:G.PREV;this._slide(i,this._items[e])}},e.dispose=function l(){N(this._element).off(H),N.removeData(this._element,$),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function c(e){return e=L({},Y,e),k.typeCheckConfig(F,e,q),e},e._handleSwipe=function d(){var e=Math.abs(this.touchDeltaX);if(!(e<=j)){var t=e/this.touchDeltaX;0<t&&this.prev(),t<0&&this.next()}},e._addEventListeners=function u(){var t=this;this._config.keyboard&&N(this._element).on(V.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&N(this._element).on(V.MOUSEENTER,function(e){return t.pause(e)}).on(V.MOUSELEAVE,function(e){return t.cycle(e)}),this._addTouchEventListeners()},e._addTouchEventListeners=function f(){var t=this;if(this._touchSupported){var n=function n(e){t._pointerEvent&&Z[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},i=function i(e){e.originalEvent.touches&&1<e.originalEvent.touches.length?t.touchDeltaX=0:t.touchDeltaX=e.originalEvent.touches[0].clientX-t.touchStartX},r=function r(e){t._pointerEvent&&Z[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},z+t._config.interval))};N(this._element.querySelectorAll(Q.ITEM_IMG)).on(V.DRAG_START,function(e){return e.preventDefault()}),this._pointerEvent?(N(this._element).on(V.POINTERDOWN,function(e){return n(e)}),N(this._element).on(V.POINTERUP,function(e){return r(e)}),this._element.classList.add(X.POINTER_EVENT)):(N(this._element).on(V.TOUCHSTART,function(e){return n(e)}),N(this._element).on(V.TOUCHMOVE,function(e){return i(e)}),N(this._element).on(V.TOUCHEND,function(e){return r(e)}))}},e._keydown=function h(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case U:e.preventDefault(),this.prev();break;case K:e.preventDefault(),this.next()}},e._getItemIndex=function p(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(Q.ITEM)):[],this._items.indexOf(e)},e._getItemByDirection=function g(e,t){var n=e===G.NEXT,i=e===G.PREV,r=this._getItemIndex(t),o=this._items.length-1;if((i&&0===r||n&&r===o)&&!this._config.wrap)return t;var s=(r+(e===G.PREV?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},e._triggerSlideEvent=function m(e,t){var n=this._getItemIndex(e),i=this._getItemIndex(this._element.querySelector(Q.ACTIVE_ITEM)),r=N.Event(V.SLIDE,{relatedTarget:e,direction:t,from:i,to:n});return N(this._element).trigger(r),r},e._setActiveIndicatorElement=function v(e){if(this._indicatorsElement){var t=[].slice.call(this._indicatorsElement.querySelectorAll(Q.ACTIVE));N(t).removeClass(X.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&N(n).addClass(X.ACTIVE)}},e._slide=function b(e,t){var n,i,r,o=this,s=this._element.querySelector(Q.ACTIVE_ITEM),a=this._getItemIndex(s),l=t||s&&this._getItemByDirection(e,s),c=this._getItemIndex(l),d=Boolean(this._interval);if(e===G.NEXT?(n=X.LEFT,i=X.NEXT,r=G.LEFT):(n=X.RIGHT,i=X.PREV,r=G.RIGHT),l&&N(l).hasClass(X.ACTIVE))this._isSliding=!1;else if(!this._triggerSlideEvent(l,r).isDefaultPrevented()&&s&&l){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(l);var u=N.Event(V.SLID,{relatedTarget:l,direction:r,from:a,to:c});if(N(this._element).hasClass(X.SLIDE)){N(l).addClass(i),k.reflow(l),N(s).addClass(n),N(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=f):this._config.interval=this._config.defaultInterval||this._config.interval;var h=k.getTransitionDurationFromElement(s);N(s).one(k.TRANSITION_END,function(){N(l).removeClass(n+" "+i).addClass(X.ACTIVE),N(s).removeClass(X.ACTIVE+" "+i+" "+n),o._isSliding=!1,setTimeout(function(){return N(o._element).trigger(u)},0)}).emulateTransitionEnd(h)}else N(s).removeClass(X.ACTIVE),N(l).addClass(X.ACTIVE),this._isSliding=!1,N(this._element).trigger(u);d&&this.cycle()}},o._jQueryInterface=function E(i){return this.each(function(){var e=N(this).data($),t=L({},Y,N(this).data());"object"==typeof i&&(t=L({},t,i));var n="string"==typeof i?i:t.slide;if(e||(e=new o(this,t),N(this).data($,e)),"number"==typeof i)e.to(i);else if("string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}else t.interval&&(e.pause(),e.cycle())})},o._dataApiClickHandler=function _(e){var t=k.getSelectorFromElement(this);if(t){var n=N(t)[0];if(n&&N(n).hasClass(X.CAROUSEL)){var i=L({},N(n).data(),N(this).data()),r=this.getAttribute("data-slide-to");r&&(i.interval=!1),o._jQueryInterface.call(N(n),i),r&&N(n).data($).to(r),e.preventDefault()}}},O(o,null,[{key:"VERSION",get:function y(){return P}},{key:"Default",get:function y(){return Y}}]),o}();N(document).on(V.CLICK_DATA_API,Q.DATA_SLIDE,J._dataApiClickHandler),N(window).on(V.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(Q.DATA_RIDE)),t=0,n=e.length;t<n;t++){var i=N(e[t]);J._jQueryInterface.call(i,i.data())}}),N.fn[F]=J._jQueryInterface,N.fn[F].Constructor=J,N.fn[F].noConflict=function(){return N.fn[F]=W,J._jQueryInterface};var ee="collapse",te="4.2.1",ne="bs.collapse",ie="."+ne,re=".data-api",oe=N.fn[ee],se={toggle:!0,parent:""},ae={toggle:"boolean",parent:"(string|element)"},le={SHOW:"show"+ie,SHOWN:"shown"+ie,HIDE:"hide"+ie,HIDDEN:"hidden"+ie,CLICK_DATA_API:"click"+ie+re},ce={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},de={WIDTH:"width",HEIGHT:"height"},ue={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},fe=function(){function l(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(ue.DATA_TOGGLE)),i=0,r=n.length;i<r;i++){var o=n[i],s=k.getSelectorFromElement(o),a=[].slice.call(document.querySelectorAll(s)).filter(function(e){return e===t});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=l.prototype;return e.toggle=function t(){N(this._element).hasClass(ce.SHOW)?this.hide():this.show()},e.show=function c(){var e,t,n=this;if(!this._isTransitioning&&!N(this._element).hasClass(ce.SHOW)&&(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(ue.ACTIVES)).filter(function(e){return"string"==typeof n._config.parent?e.getAttribute("data-parent")===n._config.parent:e.classList.contains(ce.COLLAPSE)})).length&&(e=null),!(e&&(t=N(e).not(this._selector).data(ne))&&t._isTransitioning))){var i=N.Event(le.SHOW);if(N(this._element).trigger(i),!i.isDefaultPrevented()){e&&(l._jQueryInterface.call(N(e).not(this._selector),"hide"),t||N(e).data(ne,null));var r=this._getDimension();N(this._element).removeClass(ce.COLLAPSE).addClass(ce.COLLAPSING),this._element.style[r]=0,this._triggerArray.length&&N(this._triggerArray).removeClass(ce.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var o=function o(){N(n._element).removeClass(ce.COLLAPSING).addClass(ce.COLLAPSE).addClass(ce.SHOW),n._element.style[r]="",n.setTransitioning(!1),N(n._element).trigger(le.SHOWN)},s="scroll"+(r[0].toUpperCase()+r.slice(1)),a=k.getTransitionDurationFromElement(this._element);N(this._element).one(k.TRANSITION_END,o).emulateTransitionEnd(a),this._element.style[r]=this._element[s]+"px"}}},e.hide=function d(){var e=this;if(!this._isTransitioning&&N(this._element).hasClass(ce.SHOW)){var t=N.Event(le.HIDE);if(N(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",k.reflow(this._element),N(this._element).addClass(ce.COLLAPSING).removeClass(ce.COLLAPSE).removeClass(ce.SHOW);var i=this._triggerArray.length;if(0<i)for(var r=0;r<i;r++){var o=this._triggerArray[r],s=k.getSelectorFromElement(o);if(null!==s)N([].slice.call(document.querySelectorAll(s))).hasClass(ce.SHOW)||N(o).addClass(ce.COLLAPSED).attr("aria-expanded",!1)}this.setTransitioning(!0);var a=function a(){e.setTransitioning(!1),N(e._element).removeClass(ce.COLLAPSING).addClass(ce.COLLAPSE).trigger(le.HIDDEN)};this._element.style[n]="";var l=k.getTransitionDurationFromElement(this._element);N(this._element).one(k.TRANSITION_END,a).emulateTransitionEnd(l)}}},e.setTransitioning=function n(e){this._isTransitioning=e},e.dispose=function i(){N.removeData(this._element,ne),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function r(e){return(e=L({},se,e)).toggle=Boolean(e.toggle),k.typeCheckConfig(ee,e,ae),e},e._getDimension=function o(){return N(this._element).hasClass(de.WIDTH)?de.WIDTH:de.HEIGHT},e._getParent=function s(){var e,n=this;k.isElement(this._config.parent)?(e=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var t='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(e.querySelectorAll(t));return N(i).each(function(e,t){n._addAriaAndCollapsedClass(l._getTargetFromElement(t),[t])}),e},e._addAriaAndCollapsedClass=function a(e,t){var n=N(e).hasClass(ce.SHOW);t.length&&N(t).toggleClass(ce.COLLAPSED,!n).attr("aria-expanded",n)},l._getTargetFromElement=function u(e){var t=k.getSelectorFromElement(e);return t?document.querySelector(t):null},l._jQueryInterface=function f(i){return this.each(function(){var e=N(this),t=e.data(ne),n=L({},se,e.data(),"object"==typeof i&&i?i:{});if(!t&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),t||(t=new l(this,n),e.data(ne,t)),"string"==typeof i){if("undefined"==typeof t[i])throw new TypeError('No method named "'+i+'"');t[i]()}})},O(l,null,[{key:"VERSION",get:function h(){return te}},{key:"Default",get:function h(){return se}}]),l}();N(document).on(le.CLICK_DATA_API,ue.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=N(this),t=k.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(t));N(i).each(function(){var e=N(this),t=e.data(ne)?"toggle":n.data();fe._jQueryInterface.call(e,t)})}),N.fn[ee]=fe._jQueryInterface,N.fn[ee].Constructor=fe,N.fn[ee].noConflict=function(){return N.fn[ee]=oe,fe._jQueryInterface};var he="dropdown",pe="4.2.1",ge="bs.dropdown",me="."+ge,ve=".data-api",be=N.fn[he],Ee=27,_e=32,ye=9,Te=38,Ce=40,Ae=3,Se=new RegExp(Te+"|"+Ce+"|"+Ee),we={HIDE:"hide"+me,HIDDEN:"hidden"+me,SHOW:"show"+me,SHOWN:"shown"+me,CLICK:"click"+me,CLICK_DATA_API:"click"+me+ve,KEYDOWN_DATA_API:"keydown"+me+ve,KEYUP_DATA_API:"keyup"+me+ve},xe={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},Re={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},Ie={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},De={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Ne={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Oe=function(){function c(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=c.prototype;return e.toggle=function o(){if(!this._element.disabled&&!N(this._element).hasClass(xe.DISABLED)){var e=c._getParentFromElement(this._element),t=N(this._menu).hasClass(xe.SHOW);if(c._clearMenus(),!t){var n={relatedTarget:this._element},i=N.Event(we.SHOW,n);if(N(e).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if(void 0===D)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var r=this._element;"parent"===this._config.reference?r=e:k.isElement(this._config.reference)&&(r=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(r=this._config.reference[0])),"scrollParent"!==this._config.boundary&&N(e).addClass(xe.POSITION_STATIC),this._popper=new D(r,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===N(e).closest(Re.NAVBAR_NAV).length&&N(document.body).children().on("mouseover",null,N.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),N(this._menu).toggleClass(xe.SHOW),N(e).toggleClass(xe.SHOW).trigger(N.Event(we.SHOWN,n))}}}},e.show=function i(){if(!(this._element.disabled||N(this._element).hasClass(xe.DISABLED)||N(this._menu).hasClass(xe.SHOW))){var e={relatedTarget:this._element},t=N.Event(we.SHOW,e),n=c._getParentFromElement(this._element);N(n).trigger(t),t.isDefaultPrevented()||(N(this._menu).toggleClass(xe.SHOW),N(n).toggleClass(xe.SHOW).trigger(N.Event(we.SHOWN,e)))}},e.hide=function r(){if(!this._element.disabled&&!N(this._element).hasClass(xe.DISABLED)&&N(this._menu).hasClass(xe.SHOW)){var e={relatedTarget:this._element},t=N.Event(we.HIDE,e),n=c._getParentFromElement(this._element);N(n).trigger(t),t.isDefaultPrevented()||(N(this._menu).toggleClass(xe.SHOW),N(n).toggleClass(xe.SHOW).trigger(N.Event(we.HIDDEN,e)))}},e.dispose=function t(){N.removeData(this._element,ge),N(this._element).off(me),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function n(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function s(){var t=this;N(this._element).on(we.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},e._getConfig=function a(e){return e=L({},this.constructor.Default,N(this._element).data(),e),k.typeCheckConfig(he,e,this.constructor.DefaultType),e},e._getMenuElement=function l(){if(!this._menu){var e=c._getParentFromElement(this._element);e&&(this._menu=e.querySelector(Re.MENU))}return this._menu},e._getPlacement=function d(){var e=N(this._element.parentNode),t=Ie.BOTTOM;return e.hasClass(xe.DROPUP)?(t=Ie.TOP,N(this._menu).hasClass(xe.MENURIGHT)&&(t=Ie.TOPEND)):e.hasClass(xe.DROPRIGHT)?t=Ie.RIGHT:e.hasClass(xe.DROPLEFT)?t=Ie.LEFT:N(this._menu).hasClass(xe.MENURIGHT)&&(t=Ie.BOTTOMEND),t},e._detectNavbar=function u(){return 0<N(this._element).closest(".navbar").length},e._getPopperConfig=function f(){var t=this,e={};"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=L({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},c._jQueryInterface=function h(t){return this.each(function(){var e=N(this).data(ge);if(e||(e=new c(this,"object"==typeof t?t:null),N(this).data(ge,e)),"string"==typeof t){if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},c._clearMenus=function p(e){if(!e||e.which!==Ae&&("keyup"!==e.type||e.which===ye))for(var t=[].slice.call(document.querySelectorAll(Re.DATA_TOGGLE)),n=0,i=t.length;n<i;n++){var r=c._getParentFromElement(t[n]),o=N(t[n]).data(ge),s={relatedTarget:t[n]};if(e&&"click"===e.type&&(s.clickEvent=e),o){var a=o._menu;if(N(r).hasClass(xe.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===ye)&&N.contains(r,e.target))){var l=N.Event(we.HIDE,s);N(r).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&N(document.body).children().off("mouseover",null,N.noop),t[n].setAttribute("aria-expanded","false"),N(a).removeClass(xe.SHOW),N(r).removeClass(xe.SHOW).trigger(N.Event(we.HIDDEN,s)))}}}},c._getParentFromElement=function g(e){var t,n=k.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},c._dataApiKeydownHandler=function m(e){if((/input|textarea/i.test(e.target.tagName)?!(e.which===_e||e.which!==Ee&&(e.which!==Ce&&e.which!==Te||N(e.target).closest(Re.MENU).length)):Se.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!N(this).hasClass(xe.DISABLED))){var t=c._getParentFromElement(this),n=N(t).hasClass(xe.SHOW);if(n&&(!n||e.which!==Ee&&e.which!==_e)){var i=[].slice.call(t.querySelectorAll(Re.VISIBLE_ITEMS));if(0!==i.length){var r=i.indexOf(e.target);e.which===Te&&0<r&&r--,e.which===Ce&&r<i.length-1&&r++,r<0&&(r=0),i[r].focus()}}else{if(e.which===Ee){var o=t.querySelector(Re.DATA_TOGGLE);N(o).trigger("focus")}N(this).trigger("click")}}},O(c,null,[{key:"VERSION",get:function v(){return pe}},{key:"Default",get:function v(){return De}},{key:"DefaultType",get:function v(){return Ne}}]),c}();N(document).on(we.KEYDOWN_DATA_API,Re.DATA_TOGGLE,Oe._dataApiKeydownHandler).on(we.KEYDOWN_DATA_API,Re.MENU,Oe._dataApiKeydownHandler).on(we.CLICK_DATA_API+" "+we.KEYUP_DATA_API,Oe._clearMenus).on(we.CLICK_DATA_API,Re.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),Oe._jQueryInterface.call(N(this),"toggle")}).on(we.CLICK_DATA_API,Re.FORM_CHILD,function(e){e.stopPropagation()}),N.fn[he]=Oe._jQueryInterface,N.fn[he].Constructor=Oe,
N.fn[he].noConflict=function(){return N.fn[he]=be,Oe._jQueryInterface};var Le="modal",ke="4.2.1",Me="bs.modal",Fe="."+Me,Pe=".data-api",$e=N.fn[Le],He=27,Be={backdrop:!0,keyboard:!0,focus:!0,show:!0},We={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Ue={HIDE:"hide"+Fe,HIDDEN:"hidden"+Fe,SHOW:"show"+Fe,SHOWN:"shown"+Fe,FOCUSIN:"focusin"+Fe,RESIZE:"resize"+Fe,CLICK_DISMISS:"click.dismiss"+Fe,KEYDOWN_DISMISS:"keydown.dismiss"+Fe,MOUSEUP_DISMISS:"mouseup.dismiss"+Fe,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Fe,CLICK_DATA_API:"click"+Fe+Pe},Ke={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},ze={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},je=function(){function r(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(ze.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var e=r.prototype;return e.toggle=function t(e){return this._isShown?this.hide():this.show(e)},e.show=function i(e){var t=this;if(!this._isShown&&!this._isTransitioning){N(this._element).hasClass(Ke.FADE)&&(this._isTransitioning=!0);var n=N.Event(Ue.SHOW,{relatedTarget:e});N(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),N(this._element).on(Ue.CLICK_DISMISS,ze.DATA_DISMISS,function(e){return t.hide(e)}),N(this._dialog).on(Ue.MOUSEDOWN_DISMISS,function(){N(t._element).one(Ue.MOUSEUP_DISMISS,function(e){N(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},e.hide=function o(e){var t=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var n=N.Event(Ue.HIDE);if(N(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=N(this._element).hasClass(Ke.FADE);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),N(document).off(Ue.FOCUSIN),N(this._element).removeClass(Ke.SHOW),N(this._element).off(Ue.CLICK_DISMISS),N(this._dialog).off(Ue.MOUSEDOWN_DISMISS),i){var r=k.getTransitionDurationFromElement(this._element);N(this._element).one(k.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(r)}else this._hideModal()}}},e.dispose=function n(){[window,this._element,this._dialog].forEach(function(e){return N(e).off(Fe)}),N(document).off(Ue.FOCUSIN),N.removeData(this._element,Me),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},e.handleUpdate=function s(){this._adjustDialog()},e._getConfig=function a(e){return e=L({},Be,e),k.typeCheckConfig(Le,e,We),e},e._showElement=function l(e){var t=this,n=N(this._element).hasClass(Ke.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.scrollTop=0,n&&k.reflow(this._element),N(this._element).addClass(Ke.SHOW),this._config.focus&&this._enforceFocus();var i=N.Event(Ue.SHOWN,{relatedTarget:e}),r=function r(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,N(t._element).trigger(i)};if(n){var o=k.getTransitionDurationFromElement(this._dialog);N(this._dialog).one(k.TRANSITION_END,r).emulateTransitionEnd(o)}else r()},e._enforceFocus=function c(){var t=this;N(document).off(Ue.FOCUSIN).on(Ue.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===N(t._element).has(e.target).length&&t._element.focus()})},e._setEscapeEvent=function d(){var t=this;this._isShown&&this._config.keyboard?N(this._element).on(Ue.KEYDOWN_DISMISS,function(e){e.which===He&&(e.preventDefault(),t.hide())}):this._isShown||N(this._element).off(Ue.KEYDOWN_DISMISS)},e._setResizeEvent=function u(){var t=this;this._isShown?N(window).on(Ue.RESIZE,function(e){return t.handleUpdate(e)}):N(window).off(Ue.RESIZE)},e._hideModal=function f(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){N(document.body).removeClass(Ke.OPEN),e._resetAdjustments(),e._resetScrollbar(),N(e._element).trigger(Ue.HIDDEN)})},e._removeBackdrop=function h(){this._backdrop&&(N(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function p(e){var t=this,n=N(this._element).hasClass(Ke.FADE)?Ke.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=Ke.BACKDROP,n&&this._backdrop.classList.add(n),N(this._backdrop).appendTo(document.body),N(this._element).on(Ue.CLICK_DISMISS,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===t._config.backdrop?t._element.focus():t.hide())}),n&&k.reflow(this._backdrop),N(this._backdrop).addClass(Ke.SHOW),!e)return;if(!n)return void e();var i=k.getTransitionDurationFromElement(this._backdrop);N(this._backdrop).one(k.TRANSITION_END,e).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){N(this._backdrop).removeClass(Ke.SHOW);var r=function r(){t._removeBackdrop(),e&&e()};if(N(this._element).hasClass(Ke.FADE)){var o=k.getTransitionDurationFromElement(this._backdrop);N(this._backdrop).one(k.TRANSITION_END,r).emulateTransitionEnd(o)}else r()}else e&&e()},e._adjustDialog=function g(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function m(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function v(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function b(){var r=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(ze.FIXED_CONTENT)),t=[].slice.call(document.querySelectorAll(ze.STICKY_CONTENT));N(e).each(function(e,t){var n=t.style.paddingRight,i=N(t).css("padding-right");N(t).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),N(t).each(function(e,t){var n=t.style.marginRight,i=N(t).css("margin-right");N(t).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=N(document.body).css("padding-right");N(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}N(document.body).addClass(Ke.OPEN)},e._resetScrollbar=function E(){var e=[].slice.call(document.querySelectorAll(ze.FIXED_CONTENT));N(e).each(function(e,t){var n=N(t).data("padding-right");N(t).removeData("padding-right"),t.style.paddingRight=n||""});var t=[].slice.call(document.querySelectorAll(""+ze.STICKY_CONTENT));N(t).each(function(e,t){var n=N(t).data("margin-right");void 0!==n&&N(t).css("margin-right",n).removeData("margin-right")});var n=N(document.body).data("padding-right");N(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},e._getScrollbarWidth=function _(){var e=document.createElement("div");e.className=Ke.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},r._jQueryInterface=function y(n,i){return this.each(function(){var e=N(this).data(Me),t=L({},Be,N(this).data(),"object"==typeof n&&n?n:{});if(e||(e=new r(this,t),N(this).data(Me,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n](i)}else t.show&&e.show(i)})},O(r,null,[{key:"VERSION",get:function T(){return ke}},{key:"Default",get:function T(){return Be}}]),r}();N(document).on(Ue.CLICK_DATA_API,ze.DATA_TOGGLE,function(e){var t,n=this,i=k.getSelectorFromElement(this);i&&(t=document.querySelector(i));var r=N(t).data(Me)?"toggle":L({},N(t).data(),N(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var o=N(t).one(Ue.SHOW,function(e){e.isDefaultPrevented()||o.one(Ue.HIDDEN,function(){N(n).is(":visible")&&n.focus()})});je._jQueryInterface.call(N(t),r,this)}),N.fn[Le]=je._jQueryInterface,N.fn[Le].Constructor=je,N.fn[Le].noConflict=function(){return N.fn[Le]=$e,je._jQueryInterface};var Ye="tooltip",qe="4.2.1",Ge="bs.tooltip",Ve="."+Ge,Xe=N.fn[Ye],Qe="bs-tooltip",Ze=new RegExp("(^|\\s)"+Qe+"\\S+","g"),Je={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},et={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},tt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},nt={SHOW:"show",OUT:"out"},it={HIDE:"hide"+Ve,HIDDEN:"hidden"+Ve,SHOW:"show"+Ve,SHOWN:"shown"+Ve,INSERTED:"inserted"+Ve,CLICK:"click"+Ve,FOCUSIN:"focusin"+Ve,FOCUSOUT:"focusout"+Ve,MOUSEENTER:"mouseenter"+Ve,MOUSELEAVE:"mouseleave"+Ve},rt={FADE:"fade",SHOW:"show"},ot={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},st={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},at=function(){function i(e,t){if(void 0===D)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var e=i.prototype;return e.enable=function t(){this._isEnabled=!0},e.disable=function n(){this._isEnabled=!1},e.toggleEnabled=function r(){this._isEnabled=!this._isEnabled},e.toggle=function o(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=N(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),N(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(N(this.getTipElement()).hasClass(rt.SHOW))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function s(){clearTimeout(this._timeout),N.removeData(this.element,this.constructor.DATA_KEY),N(this.element).off(this.constructor.EVENT_KEY),N(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&N(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function h(){var t=this;if("none"===N(this.element).css("display"))throw new Error("Please use show on visible elements");var e=N.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){N(this.element).trigger(e);var n=k.findShadowRoot(this.element),i=N.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!i)return;var r=this.getTipElement(),o=k.getUID(this.constructor.NAME);r.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&N(r).addClass(rt.FADE);var s="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();N(r).data(this.constructor.DATA_KEY,this),N.contains(this.element.ownerDocument.documentElement,this.tip)||N(r).appendTo(l),N(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new D(this.element,r,{placement:a,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:ot.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function u(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function f(e){return t._handlePopperPlacementChange(e)}}),N(r).addClass(rt.SHOW),"ontouchstart"in document.documentElement&&N(document.body).children().on("mouseover",null,N.noop);var c=function c(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,N(t.element).trigger(t.constructor.Event.SHOWN),e===nt.OUT&&t._leave(null,t)};if(N(this.tip).hasClass(rt.FADE)){var d=k.getTransitionDurationFromElement(this.tip);N(this.tip).one(k.TRANSITION_END,c).emulateTransitionEnd(d)}else c()}},e.hide=function a(e){var t=this,n=this.getTipElement(),i=N.Event(this.constructor.Event.HIDE),r=function r(){t._hoverState!==nt.SHOW&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),N(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};if(N(this.element).trigger(i),!i.isDefaultPrevented()){if(N(n).removeClass(rt.SHOW),"ontouchstart"in document.documentElement&&N(document.body).children().off("mouseover",null,N.noop),this._activeTrigger[st.CLICK]=!1,this._activeTrigger[st.FOCUS]=!1,this._activeTrigger[st.HOVER]=!1,N(this.tip).hasClass(rt.FADE)){var o=k.getTransitionDurationFromElement(n);N(n).one(k.TRANSITION_END,r).emulateTransitionEnd(o)}else r();this._hoverState=""}},e.update=function l(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function c(){return Boolean(this.getTitle())},e.addAttachmentClass=function d(e){N(this.getTipElement()).addClass(Qe+"-"+e)},e.getTipElement=function u(){return this.tip=this.tip||N(this.config.template)[0],this.tip},e.setContent=function f(){var e=this.getTipElement();this.setElementContent(N(e.querySelectorAll(ot.TOOLTIP_INNER)),this.getTitle()),N(e).removeClass(rt.FADE+" "+rt.SHOW)},e.setElementContent=function p(e,t){var n=this.config.html;"object"==typeof t&&(t.nodeType||t.jquery)?n?N(t).parent().is(e)||e.empty().append(t):e.text(N(t).text()):e[n?"html":"text"](t)},e.getTitle=function g(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},e._getContainer=function m(){return!1===this.config.container?document.body:k.isElement(this.config.container)?N(this.config.container):N(document).find(this.config.container)},e._getAttachment=function v(e){return et[e.toUpperCase()]},e._setListeners=function b(){var i=this;this.config.trigger.split(" ").forEach(function(e){if("click"===e)N(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(e){return i.toggle(e)});else if(e!==st.MANUAL){var t=e===st.HOVER?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=e===st.HOVER?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;N(i.element).on(t,i.config.selector,function(e){return i._enter(e)}).on(n,i.config.selector,function(e){return i._leave(e)})}}),N(this.element).closest(".modal").on("hide.bs.modal",function(){i.element&&i.hide()}),this.config.selector?this.config=L({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function E(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},e._enter=function _(e,t){var n=this.constructor.DATA_KEY;(t=t||N(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),N(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?st.FOCUS:st.HOVER]=!0),N(t.getTipElement()).hasClass(rt.SHOW)||t._hoverState===nt.SHOW?t._hoverState=nt.SHOW:(clearTimeout(t._timeout),t._hoverState=nt.SHOW,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===nt.SHOW&&t.show()},t.config.delay.show):t.show())},e._leave=function y(e,t){var n=this.constructor.DATA_KEY;(t=t||N(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),N(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?st.FOCUS:st.HOVER]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=nt.OUT,t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){t._hoverState===nt.OUT&&t.hide()},t.config.delay.hide):t.hide())},e._isWithActiveTrigger=function T(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},e._getConfig=function C(e){return"number"==typeof(e=L({},this.constructor.Default,N(this.element).data(),"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),k.typeCheckConfig(Ye,e,this.constructor.DefaultType),e},e._getDelegateConfig=function A(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},e._cleanTipClass=function S(){var e=N(this.getTipElement()),t=e.attr("class").match(Ze);null!==t&&t.length&&e.removeClass(t.join(""))},e._handlePopperPlacementChange=function w(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},e._fixTransition=function x(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(N(e).removeClass(rt.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},i._jQueryInterface=function R(n){return this.each(function(){var e=N(this).data(Ge),t="object"==typeof n&&n;if((e||!/dispose|hide/.test(n))&&(e||(e=new i(this,t),N(this).data(Ge,e)),"string"==typeof n)){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},O(i,null,[{key:"VERSION",get:function I(){return qe}},{key:"Default",get:function I(){return tt}},{key:"NAME",get:function I(){return Ye}},{key:"DATA_KEY",get:function I(){return Ge}},{key:"Event",get:function I(){return it}},{key:"EVENT_KEY",get:function I(){return Ve}},{key:"DefaultType",get:function I(){return Je}}]),i}();N.fn[Ye]=at._jQueryInterface,N.fn[Ye].Constructor=at,N.fn[Ye].noConflict=function(){return N.fn[Ye]=Xe,at._jQueryInterface};var lt="popover",ct="4.2.1",dt="bs.popover",ut="."+dt,ft=N.fn[lt],ht="bs-popover",pt=new RegExp("(^|\\s)"+ht+"\\S+","g"),gt=L({},at.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),mt=L({},at.DefaultType,{content:"(string|element|function)"}),vt={FADE:"fade",SHOW:"show"},bt={TITLE:".popover-header",CONTENT:".popover-body"},Et={HIDE:"hide"+ut,HIDDEN:"hidden"+ut,SHOW:"show"+ut,SHOWN:"shown"+ut,INSERTED:"inserted"+ut,CLICK:"click"+ut,FOCUSIN:"focusin"+ut,FOCUSOUT:"focusout"+ut,MOUSEENTER:"mouseenter"+ut,MOUSELEAVE:"mouseleave"+ut},_t=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var t=i.prototype;return t.isWithContent=function n(){return this.getTitle()||this._getContent()},t.addAttachmentClass=function r(e){N(this.getTipElement()).addClass(ht+"-"+e)},t.getTipElement=function o(){return this.tip=this.tip||N(this.config.template)[0],this.tip},t.setContent=function s(){var e=N(this.getTipElement());this.setElementContent(e.find(bt.TITLE),this.getTitle());var t=this._getContent();"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find(bt.CONTENT),t),e.removeClass(vt.FADE+" "+vt.SHOW)},t._getContent=function a(){return this.element.getAttribute("data-content")||this.config.content},t._cleanTipClass=function l(){var e=N(this.getTipElement()),t=e.attr("class").match(pt);null!==t&&0<t.length&&e.removeClass(t.join(""))},i._jQueryInterface=function c(n){return this.each(function(){var e=N(this).data(dt),t="object"==typeof n?n:null;if((e||!/dispose|hide/.test(n))&&(e||(e=new i(this,t),N(this).data(dt,e)),"string"==typeof n)){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},O(i,null,[{key:"VERSION",get:function d(){return ct}},{key:"Default",get:function d(){return gt}},{key:"NAME",get:function d(){return lt}},{key:"DATA_KEY",get:function d(){return dt}},{key:"Event",get:function d(){return Et}},{key:"EVENT_KEY",get:function d(){return ut}},{key:"DefaultType",get:function d(){return mt}}]),i}(at);N.fn[lt]=_t._jQueryInterface,N.fn[lt].Constructor=_t,N.fn[lt].noConflict=function(){return N.fn[lt]=ft,_t._jQueryInterface};var yt="scrollspy",Tt="4.2.1",Ct="bs.scrollspy",At="."+Ct,St=".data-api",wt=N.fn[yt],xt={offset:10,method:"auto",target:""},Rt={offset:"number",method:"string",target:"(string|element)"},It={ACTIVATE:"activate"+At,SCROLL:"scroll"+At,LOAD_DATA_API:"load"+At+St},Dt={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},Nt={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},Ot={OFFSET:"offset",POSITION:"position"},Lt=function(){function n(e,t){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+Nt.NAV_LINKS+","+this._config.target+" "+Nt.LIST_ITEMS+","+this._config.target+" "+Nt.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,N(this._scrollElement).on(It.SCROLL,function(e){return n._process(e)}),this.refresh(),this._process()}var e=n.prototype;return e.refresh=function i(){var t=this,e=this._scrollElement===this._scrollElement.window?Ot.OFFSET:Ot.POSITION,r="auto"===this._config.method?e:this._config.method,o=r===Ot.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,n=k.getSelectorFromElement(e);if(n&&(t=document.querySelector(n)),t){var i=t.getBoundingClientRect();if(i.width||i.height)return[N(t)[r]().top+o,n]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},e.dispose=function t(){N.removeData(this._element,Ct),N(this._scrollElement).off(At),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function r(e){if("string"!=typeof(e=L({},xt,"object"==typeof e&&e?e:{})).target){var t=N(e.target).attr("id");t||(t=k.getUID(yt),N(e.target).attr("id",t)),e.target="#"+t}return k.typeCheckConfig(yt,e,Rt),e},e._getScrollTop=function o(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function s(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function a(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function l(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),n<=e){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){this._activeTarget!==this._targets[r]&&e>=this._offsets[r]&&("undefined"==typeof this._offsets[r+1]||e<this._offsets[r+1])&&this._activate(this._targets[r])}}},e._activate=function c(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),n=N([].slice.call(document.querySelectorAll(e.join(","))));n.hasClass(Dt.DROPDOWN_ITEM)?(n.closest(Nt.DROPDOWN).find(Nt.DROPDOWN_TOGGLE).addClass(Dt.ACTIVE),n.addClass(Dt.ACTIVE)):(n.addClass(Dt.ACTIVE),n.parents(Nt.NAV_LIST_GROUP).prev(Nt.NAV_LINKS+", "+Nt.LIST_ITEMS).addClass(Dt.ACTIVE),n.parents(Nt.NAV_LIST_GROUP).prev(Nt.NAV_ITEMS).children(Nt.NAV_LINKS).addClass(Dt.ACTIVE)),N(this._scrollElement).trigger(It.ACTIVATE,{relatedTarget:t})},e._clear=function d(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(e){return e.classList.contains(Dt.ACTIVE)}).forEach(function(e){return e.classList.remove(Dt.ACTIVE)})},n._jQueryInterface=function u(t){return this.each(function(){var e=N(this).data(Ct);if(e||(e=new n(this,"object"==typeof t&&t),N(this).data(Ct,e)),"string"==typeof t){if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},O(n,null,[{key:"VERSION",get:function f(){return Tt}},{key:"Default",get:function f(){return xt}}]),n}();N(window).on(It.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll(Nt.DATA_SPY)),t=e.length;t--;){var n=N(e[t]);Lt._jQueryInterface.call(n,n.data())}}),N.fn[yt]=Lt._jQueryInterface,N.fn[yt].Constructor=Lt,N.fn[yt].noConflict=function(){return N.fn[yt]=wt,Lt._jQueryInterface};var kt="tab",Mt="4.2.1",Ft="bs.tab",Pt="."+Ft,$t=".data-api",Ht=N.fn[kt],Bt={HIDE:"hide"+Pt,HIDDEN:"hidden"+Pt,SHOW:"show"+Pt,SHOWN:"shown"+Pt,CLICK_DATA_API:"click"+Pt+$t},Wt={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},Ut={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},Kt=function(){function i(e){this._element=e}var e=i.prototype;return e.show=function c(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&N(this._element).hasClass(Wt.ACTIVE)||N(this._element).hasClass(Wt.DISABLED))){var e,i,t=N(this._element).closest(Ut.NAV_LIST_GROUP)[0],r=k.getSelectorFromElement(this._element);if(t){var o="UL"===t.nodeName||"OL"===t.nodeName?Ut.ACTIVE_UL:Ut.ACTIVE;i=(i=N.makeArray(N(t).find(o)))[i.length-1]}var s=N.Event(Bt.HIDE,{relatedTarget:this._element}),a=N.Event(Bt.SHOW,{relatedTarget:i});if(i&&N(i).trigger(s),N(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){r&&(e=document.querySelector(r)),this._activate(this._element,t);var l=function l(){var e=N.Event(Bt.HIDDEN,{relatedTarget:n._element}),t=N.Event(Bt.SHOWN,{relatedTarget:i});N(i).trigger(e),N(n._element).trigger(t)};e?this._activate(e,e.parentNode,l):l()}}},e.dispose=function t(){N.removeData(this._element,Ft),this._element=null},e._activate=function l(e,t,n){var i=this,r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?N(t).children(Ut.ACTIVE):N(t).find(Ut.ACTIVE_UL))[0],o=n&&r&&N(r).hasClass(Wt.FADE),s=function s(){return i._transitionComplete(e,r,n)};if(r&&o){var a=k.getTransitionDurationFromElement(r);N(r).removeClass(Wt.SHOW).one(k.TRANSITION_END,s).emulateTransitionEnd(a)}else s()},e._transitionComplete=function s(e,t,n){if(t){N(t).removeClass(Wt.ACTIVE);var i=N(t.parentNode).find(Ut.DROPDOWN_ACTIVE_CHILD)[0];i&&N(i).removeClass(Wt.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(N(e).addClass(Wt.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),k.reflow(e),N(e).addClass(Wt.SHOW),e.parentNode&&N(e.parentNode).hasClass(Wt.DROPDOWN_MENU)){var r=N(e).closest(Ut.DROPDOWN)[0];if(r){var o=[].slice.call(r.querySelectorAll(Ut.DROPDOWN_TOGGLE));N(o).addClass(Wt.ACTIVE)}e.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function r(n){return this.each(function(){var e=N(this),t=e.data(Ft);if(t||(t=new i(this),e.data(Ft,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},O(i,null,[{key:"VERSION",get:function n(){return Mt}}]),i}();N(document).on(Bt.CLICK_DATA_API,Ut.DATA_TOGGLE,function(e){e.preventDefault(),Kt._jQueryInterface.call(N(this),"show")}),N.fn[kt]=Kt._jQueryInterface,N.fn[kt].Constructor=Kt,N.fn[kt].noConflict=function(){return N.fn[kt]=Ht,Kt._jQueryInterface};var zt="toast",jt="4.2.1",Yt="bs.toast",qt="."+Yt,Gt=N.fn[zt],Vt={CLICK_DISMISS:"click.dismiss"+qt,HIDE:"hide"+qt,HIDDEN:"hidden"+qt,SHOW:"show"+qt,SHOWN:"shown"+qt},Xt={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},Qt={animation:"boolean",autohide:"boolean",delay:"number"},Zt={animation:!0,autohide:!0,delay:500},Jt={DATA_DISMISS:'[data-dismiss="toast"]'},en=function(){function i(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var e=i.prototype;return e.show=function r(){var e=this;N(this._element).trigger(Vt.SHOW),this._config.animation&&this._element.classList.add(Xt.FADE);var t=function t(){e._element.classList.remove(Xt.SHOWING),e._element.classList.add(Xt.SHOW),N(e._element).trigger(Vt.SHOWN),e._config.autohide&&e.hide()};if(this._element.classList.remove(Xt.HIDE),this._element.classList.add(Xt.SHOWING),this._config.animation){var n=k.getTransitionDurationFromElement(this._element);N(this._element).one(k.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},e.hide=function n(e){var t=this;this._element.classList.contains(Xt.SHOW)&&(N(this._element).trigger(Vt.HIDE),e?this._close():this._timeout=setTimeout(function(){t._close()},this._config.delay))},e.dispose=function t(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Xt.SHOW)&&this._element.classList.remove(Xt.SHOW),N(this._element).off(Vt.CLICK_DISMISS),N.removeData(this._element,Yt),this._element=null,this._config=null},e._getConfig=function o(e){return e=L({},Zt,N(this._element).data(),"object"==typeof e&&e?e:{}),k.typeCheckConfig(zt,e,this.constructor.DefaultType),e},e._setListeners=function s(){var e=this;N(this._element).on(Vt.CLICK_DISMISS,Jt.DATA_DISMISS,function(){return e.hide(!0)})},e._close=function a(){var e=this,t=function t(){e._element.classList.add(Xt.HIDE),N(e._element).trigger(Vt.HIDDEN)};if(this._element.classList.remove(Xt.SHOW),this._config.animation){var n=k.getTransitionDurationFromElement(this._element);N(this._element).one(k.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},i._jQueryInterface=function l(n){return this.each(function(){var e=N(this),t=e.data(Yt);if(t||(t=new i(this,"object"==typeof n&&n),e.data(Yt,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n](this)}})},O(i,null,[{key:"VERSION",get:function c(){return jt}},{key:"DefaultType",get:function c(){return Qt}}]),i}();N.fn[zt]=en._jQueryInterface,N.fn[zt].Constructor=en,N.fn[zt].noConflict=function(){return N.fn[zt]=Gt,en._jQueryInterface},function(){if(void 0===N)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=N.fn.jquery.split(" ")[0].split("."),t=1,n=2,i=9,r=1,o=4;if(e[0]<n&&e[1]<i||e[0]===t&&e[1]===i&&e[2]<r||e[0]>=o)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),e.Util=k,e.Alert=_,e.Button=M,e.Carousel=J,e.Collapse=fe,e.Dropdown=Oe,e.Modal=je,e.Popover=_t,e.Scrollspy=Lt,e.Tab=Kt,e.Toast=en,e.Tooltip=at,Object.defineProperty(e,"__esModule",{value:!0})}),function(p){var n=!0;p.flexslider=function(m,e){var v=p(m);"undefined"==typeof e.rtl&&"rtl"==p("html").attr("dir")&&(e.rtl=!0),v.vars=p.extend({},p.flexslider.defaults,e);var t,d=v.vars.namespace,b=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,u=("ontouchstart"in window||b||window.DocumentTouch&&document instanceof DocumentTouch)&&v.vars.touch,a="click touchend MSPointerUp keyup",l="",E="vertical"===v.vars.direction,_=v.vars.reverse,y=0<v.vars.itemWidth,T="fade"===v.vars.animation,f=""!==v.vars.asNavFor,h={};p.data(m,"flexslider",v),h={init:function(){v.animating=!1,v.currentSlide=parseInt(v.vars.startAt?v.vars.startAt:0,10),isNaN(v.currentSlide)&&(v.currentSlide=0),v.animatingTo=v.currentSlide,
v.atEnd=0===v.currentSlide||v.currentSlide===v.last,v.containerSelector=v.vars.selector.substr(0,v.vars.selector.search(" ")),v.slides=p(v.vars.selector,v),v.container=p(v.containerSelector,v),v.count=v.slides.length,v.syncExists=0<p(v.vars.sync).length,"slide"===v.vars.animation&&(v.vars.animation="swing"),v.prop=E?"top":v.vars.rtl?"marginRight":"marginLeft",v.args={},v.manualPause=!1,v.stopped=!1,v.started=!1,v.startTimeout=null,v.transitions=!v.vars.video&&!T&&v.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined)return v.pfx=t[n].replace("Perspective","").toLowerCase(),v.prop="-"+v.pfx+"-transform",!0;return!1}(),(v.ensureAnimationEnd="")!==v.vars.controlsContainer&&(v.controlsContainer=0<p(v.vars.controlsContainer).length&&p(v.vars.controlsContainer)),""!==v.vars.manualControls&&(v.manualControls=0<p(v.vars.manualControls).length&&p(v.vars.manualControls)),""!==v.vars.customDirectionNav&&(v.customDirectionNav=2===p(v.vars.customDirectionNav).length&&p(v.vars.customDirectionNav)),v.vars.randomize&&(v.slides.sort(function(){return Math.round(Math.random())-.5}),v.container.empty().append(v.slides)),v.doMath(),v.setup("init"),v.vars.controlNav&&h.controlNav.setup(),v.vars.directionNav&&h.directionNav.setup(),v.vars.keyboard&&(1===p(v.containerSelector).length||v.vars.multipleKeyboard)&&p(document).bind("keyup",function(e){var t=e.keyCode;if(!v.animating&&(39===t||37===t)){var n=v.vars.rtl?37===t?v.getTarget("next"):39===t&&v.getTarget("prev"):39===t?v.getTarget("next"):37===t&&v.getTarget("prev");v.flexAnimate(n,v.vars.pauseOnAction)}}),v.vars.mousewheel&&v.bind("mousewheel",function(e,t){e.preventDefault();var n=t<0?v.getTarget("next"):v.getTarget("prev");v.flexAnimate(n,v.vars.pauseOnAction)}),v.vars.pausePlay&&h.pausePlay.setup(),v.vars.slideshow&&v.vars.pauseInvisible&&h.pauseInvisible.init(),v.vars.slideshow&&(v.vars.pauseOnHover&&v.hover(function(){v.manualPlay||v.manualPause||v.pause()},function(){v.manualPause||v.manualPlay||v.stopped||v.play()}),v.vars.pauseInvisible&&h.pauseInvisible.isHidden()||(0<v.vars.initDelay?v.startTimeout=setTimeout(v.play,v.vars.initDelay):v.play())),f&&h.asNav.setup(),u&&v.vars.touch&&h.touch(),(!T||T&&v.vars.smoothHeight)&&p(window).bind("resize orientationchange focus",h.resize),v.find("img").attr("draggable","false"),setTimeout(function(){v.vars.start(v)},200)},asNav:{setup:function(){v.asNav=!0,v.animatingTo=Math.floor(v.currentSlide/v.move),v.currentItem=v.currentSlide,v.slides.removeClass(d+"active-slide").eq(v.currentItem).addClass(d+"active-slide"),b?(m._slider=v).slides.each(function(){var e=this;e._gesture=new MSGesture,(e._gesture.target=e).addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=p(this),n=t.index();p(v.vars.asNavFor).data("flexslider").animating||t.hasClass("active")||(v.direction=v.currentItem<n?"next":"prev",v.flexAnimate(n,v.vars.pauseOnAction,!1,!0,!0))})}):v.slides.on(a,function(e){e.preventDefault();var t=p(this),n=t.index();(v.vars.rtl?-1*(t.offset().right-p(v).scrollLeft()):t.offset().left-p(v).scrollLeft())<=0&&t.hasClass(d+"active-slide")?v.flexAnimate(v.getTarget("prev"),!0):p(v.vars.asNavFor).data("flexslider").animating||t.hasClass(d+"active-slide")||(v.direction=v.currentItem<n?"next":"prev",v.flexAnimate(n,v.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){v.manualControls?h.controlNav.setupManual():h.controlNav.setupPaging()},setupPaging:function(){var e,t,n="thumbnails"===v.vars.controlNav?"control-thumbs":"control-paging",i=1;if(v.controlNavScaffold=p('<ol class="'+d+"control-nav "+d+n+'"></ol>'),1<v.pagingCount)for(var r=0;r<v.pagingCount;r++){t=v.slides.eq(r),undefined===t.attr("data-thumb-alt")&&t.attr("data-thumb-alt","");var o=""!==t.attr("data-thumb-alt")?o=' alt="'+t.attr("data-thumb-alt")+'"':"";if(e="thumbnails"===v.vars.controlNav?'<img src="'+t.attr("data-thumb")+'"'+o+"/>":'<a href="#">'+i+"</a>","thumbnails"===v.vars.controlNav&&!0===v.vars.thumbCaptions){var s=t.attr("data-thumbcaption");""!==s&&undefined!==s&&(e+='<span class="'+d+'caption">'+s+"</span>")}v.controlNavScaffold.append("<li>"+e+"</li>"),i++}v.controlsContainer?p(v.controlsContainer).append(v.controlNavScaffold):v.append(v.controlNavScaffold),h.controlNav.set(),h.controlNav.active(),v.controlNavScaffold.delegate("a, img",a,function(e){if(e.preventDefault(),""===l||l===e.type){var t=p(this),n=v.controlNav.index(t);t.hasClass(d+"active")||(v.direction=n>v.currentSlide?"next":"prev",v.flexAnimate(n,v.vars.pauseOnAction))}""===l&&(l=e.type),h.setToClearWatchedEvent()})},setupManual:function(){v.controlNav=v.manualControls,h.controlNav.active(),v.controlNav.bind(a,function(e){if(e.preventDefault(),""===l||l===e.type){var t=p(this),n=v.controlNav.index(t);t.hasClass(d+"active")||(n>v.currentSlide?v.direction="next":v.direction="prev",v.flexAnimate(n,v.vars.pauseOnAction))}""===l&&(l=e.type),h.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===v.vars.controlNav?"img":"a";v.controlNav=p("."+d+"control-nav li "+e,v.controlsContainer?v.controlsContainer:v)},active:function(){v.controlNav.removeClass(d+"active").eq(v.animatingTo).addClass(d+"active")},update:function(e,t){1<v.pagingCount&&"add"===e?v.controlNavScaffold.append(p('<li><a href="#">'+v.count+"</a></li>")):1===v.pagingCount?v.controlNavScaffold.find("li").remove():v.controlNav.eq(t).closest("li").remove(),h.controlNav.set(),1<v.pagingCount&&v.pagingCount!==v.controlNav.length?v.update(t,e):h.controlNav.active()}},directionNav:{setup:function(){var e=p('<ul class="'+d+'direction-nav"><li class="'+d+'nav-prev"><a class="'+d+'prev" href="#">'+v.vars.prevText+'</a></li><li class="'+d+'nav-next"><a class="'+d+'next" href="#">'+v.vars.nextText+"</a></li></ul>");v.customDirectionNav?v.directionNav=v.customDirectionNav:v.controlsContainer?(p(v.controlsContainer).append(e),v.directionNav=p("."+d+"direction-nav li a",v.controlsContainer)):(v.append(e),v.directionNav=p("."+d+"direction-nav li a",v)),h.directionNav.update(),v.directionNav.bind(a,function(e){var t;e.preventDefault(),""!==l&&l!==e.type||(t=p(this).hasClass(d+"next")?v.getTarget("next"):v.getTarget("prev"),v.flexAnimate(t,v.vars.pauseOnAction)),""===l&&(l=e.type),h.setToClearWatchedEvent()})},update:function(){var e=d+"disabled";1===v.pagingCount?v.directionNav.addClass(e).attr("tabindex","-1"):v.vars.animationLoop?v.directionNav.removeClass(e).removeAttr("tabindex"):0===v.animatingTo?v.directionNav.removeClass(e).filter("."+d+"prev").addClass(e).attr("tabindex","-1"):v.animatingTo===v.last?v.directionNav.removeClass(e).filter("."+d+"next").addClass(e).attr("tabindex","-1"):v.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=p('<div class="'+d+'pauseplay"><a href="#"></a></div>');v.controlsContainer?(v.controlsContainer.append(e),v.pausePlay=p("."+d+"pauseplay a",v.controlsContainer)):(v.append(e),v.pausePlay=p("."+d+"pauseplay a",v)),h.pausePlay.update(v.vars.slideshow?d+"pause":d+"play"),v.pausePlay.bind(a,function(e){e.preventDefault(),""!==l&&l!==e.type||(p(this).hasClass(d+"pause")?(v.manualPause=!0,v.manualPlay=!1,v.pause()):(v.manualPause=!1,v.manualPlay=!0,v.play())),""===l&&(l=e.type),h.setToClearWatchedEvent()})},update:function(e){"play"===e?v.pausePlay.removeClass(d+"pause").addClass(d+"play").html(v.vars.playText):v.pausePlay.removeClass(d+"play").addClass(d+"pause").html(v.vars.pauseText)}},touch:function(){function e(e){e.stopPropagation(),v.animating?e.preventDefault():(v.pause(),m._gesture.addPointer(e.pointerId),g=0,a=E?v.h:v.w,c=Number(new Date),s=y&&_&&v.animatingTo===v.last?0:y&&_?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:y&&v.currentSlide===v.last?v.limit:y?(v.itemW+v.vars.itemMargin)*v.move*v.currentSlide:_?(v.last-v.currentSlide+v.cloneOffset)*a:(v.currentSlide+v.cloneOffset)*a)}function t(e){e.stopPropagation();var t=e.target._slider;if(t){var n=-e.translationX,i=-e.translationY;g+=E?i:n,l=(t.vars.rtl?-1:1)*g,f=E?Math.abs(g)<Math.abs(-n):Math.abs(g)<Math.abs(-i),e.detail!==e.MSGESTURE_FLAG_INERTIA?(!f||500<Number(new Date)-c)&&(e.preventDefault(),!T&&t.transitions&&(t.vars.animationLoop||(l=g/(0===t.currentSlide&&g<0||t.currentSlide===t.last&&0<g?Math.abs(g)/a+2:1)),t.setProps(s+l,"setTouch"))):setImmediate(function(){m._gesture.stop()})}}function n(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!f&&null!==l){var n=_?-l:l,i=0<n?t.getTarget("next"):t.getTarget("prev");t.canAdvance(i)&&(Number(new Date)-c<550&&50<Math.abs(n)||Math.abs(n)>a/2)?t.flexAnimate(i,t.vars.pauseOnAction):T||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}s=l=o=r=null,g=0}}var r,o,s,a,l,c,i,d,u,f=!1,h=0,p=0,g=0;b?(m.style.msTouchAction="none",m._gesture=new MSGesture,(m._gesture.target=m).addEventListener("MSPointerDown",e,!1),m._slider=v,m.addEventListener("MSGestureChange",t,!1),m.addEventListener("MSGestureEnd",n,!1)):(i=function(e){v.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(v.pause(),a=E?v.h:v.w,c=Number(new Date),h=e.touches[0].pageX,p=e.touches[0].pageY,s=y&&_&&v.animatingTo===v.last?0:y&&_?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:y&&v.currentSlide===v.last?v.limit:y?(v.itemW+v.vars.itemMargin)*v.move*v.currentSlide:_?(v.last-v.currentSlide+v.cloneOffset)*a:(v.currentSlide+v.cloneOffset)*a,r=E?p:h,o=E?h:p,m.addEventListener("touchmove",d,!1),m.addEventListener("touchend",u,!1))},d=function(e){h=e.touches[0].pageX,p=e.touches[0].pageY,l=E?r-p:(v.vars.rtl?-1:1)*(r-h);var t=500;(!(f=E?Math.abs(l)<Math.abs(h-o):Math.abs(l)<Math.abs(p-o))||Number(new Date)-c>t)&&(e.preventDefault(),!T&&v.transitions&&(v.vars.animationLoop||(l/=0===v.currentSlide&&l<0||v.currentSlide===v.last&&0<l?Math.abs(l)/a+2:1),v.setProps(s+l,"setTouch")))},u=function(){if(m.removeEventListener("touchmove",d,!1),v.animatingTo===v.currentSlide&&!f&&null!==l){var e=_?-l:l,t=0<e?v.getTarget("next"):v.getTarget("prev");v.canAdvance(t)&&(Number(new Date)-c<550&&50<Math.abs(e)||Math.abs(e)>a/2)?v.flexAnimate(t,v.vars.pauseOnAction):T||v.flexAnimate(v.currentSlide,v.vars.pauseOnAction,!0)}m.removeEventListener("touchend",u,!1),s=l=o=r=null},m.addEventListener("touchstart",i,!1))},resize:function(){!v.animating&&v.is(":visible")&&(y||v.doMath(),T?h.smoothHeight():y?(v.slides.width(v.computedW),v.update(v.pagingCount),v.setProps()):E?(v.viewport.height(v.h),v.setProps(v.h,"setTotal")):(v.vars.smoothHeight&&h.smoothHeight(),v.newSlides.width(v.computedW),v.setProps(v.computedW,"setTotal")))},smoothHeight:function(e){if(!E||T){var t=T?v:v.viewport;e?t.animate({height:v.slides.eq(v.animatingTo).innerHeight()},e):t.innerHeight(v.slides.eq(v.animatingTo).innerHeight())}},sync:function(e){var t=p(v.vars.sync).data("flexslider"),n=v.animatingTo;switch(e){case"animate":t.flexAnimate(n,v.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause()}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=p(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=h.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){h.pauseInvisible.isHidden()?v.startTimeout?clearTimeout(v.startTimeout):v.pause():v.started?v.play():0<v.vars.initDelay?setTimeout(v.play,v.vars.initDelay):v.play()})}},isHidden:function(){var e=h.pauseInvisible.getHiddenProp();return!!e&&document[e]},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(t),t=setTimeout(function(){l=""},3e3)}},v.flexAnimate=function(e,t,n,i,r){if(v.vars.animationLoop||e===v.currentSlide||(v.direction=e>v.currentSlide?"next":"prev"),f&&1===v.pagingCount&&(v.direction=v.currentItem<e?"next":"prev"),!v.animating&&(v.canAdvance(e,r)||n)&&v.is(":visible")){if(f&&i){var o=p(v.vars.asNavFor).data("flexslider");if(v.atEnd=0===e||e===v.count-1,o.flexAnimate(e,!0,!1,!0,r),v.direction=v.currentItem<e?"next":"prev",o.direction=v.direction,Math.ceil((e+1)/v.visible)-1===v.currentSlide||0===e)return v.currentItem=e,v.slides.removeClass(d+"active-slide").eq(e).addClass(d+"active-slide"),!1;v.currentItem=e,v.slides.removeClass(d+"active-slide").eq(e).addClass(d+"active-slide"),e=Math.floor(e/v.visible)}if(v.animating=!0,v.animatingTo=e,t&&v.pause(),v.vars.before(v),v.syncExists&&!r&&h.sync("animate"),v.vars.controlNav&&h.controlNav.active(),y||v.slides.removeClass(d+"active-slide").eq(e).addClass(d+"active-slide"),v.atEnd=0===e||e===v.last,v.vars.directionNav&&h.directionNav.update(),e===v.last&&(v.vars.end(v),v.vars.animationLoop||v.pause()),T)u?(v.slides.eq(v.currentSlide).css({opacity:0,zIndex:1}),v.slides.eq(e).css({opacity:1,zIndex:2}),v.wrapup(c)):(v.slides.eq(v.currentSlide).css({zIndex:1}).animate({opacity:0},v.vars.animationSpeed,v.vars.easing),v.slides.eq(e).css({zIndex:2}).animate({opacity:1},v.vars.animationSpeed,v.vars.easing,v.wrapup));else{var s,a,l,c=E?v.slides.filter(":first").height():v.computedW;y?(s=v.vars.itemMargin,a=(l=(v.itemW+s)*v.move*v.animatingTo)>v.limit&&1!==v.visible?v.limit:l):a=0===v.currentSlide&&e===v.count-1&&v.vars.animationLoop&&"next"!==v.direction?_?(v.count+v.cloneOffset)*c:0:v.currentSlide===v.last&&0===e&&v.vars.animationLoop&&"prev"!==v.direction?_?0:(v.count+1)*c:_?(v.count-1-e+v.cloneOffset)*c:(e+v.cloneOffset)*c,v.setProps(a,"",v.vars.animationSpeed),v.transitions?(v.vars.animationLoop&&v.atEnd||(v.animating=!1,v.currentSlide=v.animatingTo),v.container.unbind("webkitTransitionEnd transitionend"),v.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(v.ensureAnimationEnd),v.wrapup(c)}),clearTimeout(v.ensureAnimationEnd),v.ensureAnimationEnd=setTimeout(function(){v.wrapup(c)},v.vars.animationSpeed+100)):v.container.animate(v.args,v.vars.animationSpeed,v.vars.easing,function(){v.wrapup(c)})}v.vars.smoothHeight&&h.smoothHeight(v.vars.animationSpeed)}},v.wrapup=function(e){T||y||(0===v.currentSlide&&v.animatingTo===v.last&&v.vars.animationLoop?v.setProps(e,"jumpEnd"):v.currentSlide===v.last&&0===v.animatingTo&&v.vars.animationLoop&&v.setProps(e,"jumpStart")),v.animating=!1,v.currentSlide=v.animatingTo,v.vars.after(v)},v.animateSlides=function(){!v.animating&&n&&v.flexAnimate(v.getTarget("next"))},v.pause=function(){clearInterval(v.animatedSlides),v.animatedSlides=null,v.playing=!1,v.vars.pausePlay&&h.pausePlay.update("play"),v.syncExists&&h.sync("pause")},v.play=function(){v.playing&&clearInterval(v.animatedSlides),v.animatedSlides=v.animatedSlides||setInterval(v.animateSlides,v.vars.slideshowSpeed),v.started=v.playing=!0,v.vars.pausePlay&&h.pausePlay.update("pause"),v.syncExists&&h.sync("play")},v.stop=function(){v.pause(),v.stopped=!0},v.canAdvance=function(e,t){var n=f?v.pagingCount-1:v.last;return!!t||(!(!f||v.currentItem!==v.count-1||0!==e||"prev"!==v.direction)||(!f||0!==v.currentItem||e!==v.pagingCount-1||"next"===v.direction)&&(!(e===v.currentSlide&&!f)&&(!!v.vars.animationLoop||(!v.atEnd||0!==v.currentSlide||e!==n||"next"===v.direction)&&(!v.atEnd||v.currentSlide!==n||0!==e||"next"!==v.direction))))},v.getTarget=function(e){return"next"===(v.direction=e)?v.currentSlide===v.last?0:v.currentSlide+1:0===v.currentSlide?v.last:v.currentSlide-1},v.setProps=function(e,t,n){var i,r=(i=e||(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo,function(){if(y)return"setTouch"===t?e:_&&v.animatingTo===v.last?0:_?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:v.animatingTo===v.last?v.limit:i;switch(t){case"setTotal":return _?(v.count-1-v.currentSlide+v.cloneOffset)*e:(v.currentSlide+v.cloneOffset)*e;case"setTouch":return e;case"jumpEnd":return _?e:v.count*e;case"jumpStart":return _?v.count*e:e;default:return e}}()*(v.vars.rtl?1:-1)+"px");v.transitions&&(r=E?"translate3d(0,"+r+",0)":"translate3d("+(v.vars.rtl?-1:1)*parseInt(r)+"px,0,0)",n=n!==undefined?n/1e3+"s":"0s",v.container.css("-"+v.pfx+"-transition-duration",n),v.container.css("transition-duration",n)),v.args[v.prop]=r,(v.transitions||n===undefined)&&v.container.css(v.args),v.container.css("transform",r)},v.setup=function(e){var t,n;T?(v.vars.rtl?v.slides.css({width:"100%","float":"right",marginLeft:"-100%",position:"relative"}):v.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(u?v.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+v.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(v.currentSlide).css({opacity:1,zIndex:2}):0==v.vars.fadeFirstSlide?v.slides.css({opacity:0,display:"block",zIndex:1}).eq(v.currentSlide).css({zIndex:2}).css({opacity:1}):v.slides.css({opacity:0,display:"block",zIndex:1}).eq(v.currentSlide).css({zIndex:2}).animate({opacity:1},v.vars.animationSpeed,v.vars.easing)),v.vars.smoothHeight&&h.smoothHeight()):("init"===e&&(v.viewport=p('<div class="'+d+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(v).append(v.container),v.cloneCount=0,v.cloneOffset=0,_&&(n=p.makeArray(v.slides).reverse(),v.slides=p(n),v.container.empty().append(v.slides))),v.vars.animationLoop&&!y&&(v.cloneCount=2,v.cloneOffset=1,"init"!==e&&v.container.find(".clone").remove(),v.container.append(h.uniqueID(v.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(h.uniqueID(v.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),v.newSlides=p(v.vars.selector,v),t=_?v.count-1-v.currentSlide+v.cloneOffset:v.currentSlide+v.cloneOffset,E&&!y?(v.container.height(200*(v.count+v.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){v.newSlides.css({display:"block"}),v.doMath(),v.viewport.height(v.h),v.setProps(t*v.h,"init")},"init"===e?100:0)):(v.container.width(200*(v.count+v.cloneCount)+"%"),v.setProps(t*v.computedW,"init"),setTimeout(function(){v.doMath(),v.vars.rtl,v.newSlides.css({width:v.computedW,marginRight:v.computedM,"float":"left",display:"block"}),v.vars.smoothHeight&&h.smoothHeight()},"init"===e?100:0)));y||v.slides.removeClass(d+"active-slide").eq(v.currentSlide).addClass(d+"active-slide"),v.vars.init(v)},v.doMath=function(){var e=v.slides.first(),t=v.vars.itemMargin,n=v.vars.minItems,i=v.vars.maxItems;v.w=v.viewport===undefined?v.width():v.viewport.width(),v.h=e.height(),v.boxPadding=e.outerWidth()-e.width(),y?(v.itemT=v.vars.itemWidth+t,v.itemM=t,v.minW=n?n*v.itemT:v.w,v.maxW=i?i*v.itemT-t:v.w,v.itemW=v.minW>v.w?(v.w-t*(n-1))/n:v.maxW<v.w?(v.w-t*(i-1))/i:v.vars.itemWidth>v.w?v.w:v.vars.itemWidth,v.visible=Math.floor(v.w/v.itemW),v.move=0<v.vars.move&&v.vars.move<v.visible?v.vars.move:v.visible,v.pagingCount=Math.ceil((v.count-v.visible)/v.move+1),v.last=v.pagingCount-1,v.limit=1===v.pagingCount?0:v.vars.itemWidth>v.w?v.itemW*(v.count-1)+t*(v.count-1):(v.itemW+t)*v.count-v.w-t):(v.itemW=v.w,v.itemM=t,v.pagingCount=v.count,v.last=v.count-1),v.computedW=v.itemW-v.boxPadding,v.computedM=v.itemM},v.update=function(e,t){v.doMath(),y||(e<v.currentSlide?v.currentSlide+=1:e<=v.currentSlide&&0!==e&&(v.currentSlide-=1),v.animatingTo=v.currentSlide),v.vars.controlNav&&!v.manualControls&&("add"===t&&!y||v.pagingCount>v.controlNav.length?h.controlNav.update("add"):("remove"===t&&!y||v.pagingCount<v.controlNav.length)&&(y&&v.currentSlide>v.last&&(v.currentSlide-=1,v.animatingTo-=1),h.controlNav.update("remove",v.last))),v.vars.directionNav&&h.directionNav.update()},v.addSlide=function(e,t){var n=p(e);v.count+=1,v.last=v.count-1,E&&_?t!==undefined?v.slides.eq(v.count-t).after(n):v.container.prepend(n):t!==undefined?v.slides.eq(t).before(n):v.container.append(n),v.update(t,"add"),v.slides=p(v.vars.selector+":not(.clone)",v),v.setup(),v.vars.added(v)},v.removeSlide=function(e){var t=isNaN(e)?v.slides.index(p(e)):e;v.count-=1,v.last=v.count-1,isNaN(e)?p(e,v.slides).remove():E&&_?v.slides.eq(v.last).remove():v.slides.eq(e).remove(),v.doMath(),v.update(t,"remove"),v.slides=p(v.vars.selector+":not(.clone)",v),v.setup(),v.vars.removed(v)},h.init()},p(window).blur(function(){n=!1}).focus(function(){n=!0}),p.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){},rtl:!1},p.fn.flexslider=function(i){if(i===undefined&&(i={}),"object"==typeof i)return this.each(function(){var e=p(this),t=i.selector?i.selector:".slides > li",n=e.find(t);1===n.length&&!1===i.allowOneSlide||0===n.length?(n.fadeIn(400),i.start&&i.start(e)):e.data("flexslider")===undefined&&new p.flexslider(this,i)});var e=p(this).data("flexslider");switch(i){case"play":e.play();break;case"pause":e.pause();break;case"stop":e.stop();break;case"next":e.flexAnimate(e.getTarget("next"),!0);break;case"prev":case"previous":e.flexAnimate(e.getTarget("prev"),!0);break;default:"number"==typeof i&&e.flexAnimate(i,!0)}}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){"function"==typeof define&&define.amd?define(["jquery","../version","../keycode"],e):e(jQuery)}(function(C){function l(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=n(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,s)}function s(){C.datepicker._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function u(e,t){for(var n in C.extend(e,t),t)null==t[n]&&(e[n]=t[n]);return e}var a;return C.extend(C.ui,{datepicker:{version:"1.12.1"}}),C.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var n,i,r;i="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(r=this._newInst(C(e),i)).settings=C.extend({},t||{}),"input"===n?this._connectDatepicker(e,r):i&&this._inlineDatepicker(e,r)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?n(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var n=C(e);t.append=C([]),t.trigger=C([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),C.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n,i,r,o=this._get(t,"appendText"),s=this._get(t,"isRTL");t.append&&t.append.remove(),o&&(t.append=C("<span class='"+this._appendClass+"'>"+o+"</span>"),e[s?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(n=this._get(t,"showOn"))&&"both"!==n||e.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(t,"buttonText"),r=this._get(t,"buttonImage"),t.trigger=C(this._get(t,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:r,alt:i,title:i}):C("<button type='button'></button>").addClass(this._triggerClass).html(r?C("<img/>").attr({src:r,alt:i,title:i}):i)),e[s?"before":"after"](t.trigger),t.trigger.on("click",function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===e[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==e[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(r=i=n=0;r<e.length;r++)e[r].length>n&&(n=e[r].length,i=r);return i},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(e,t){var n=C(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv),C.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,r){var o,s,a,l,c,d=this._dialogInst;return d||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),C("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",d)),u(d.settings,i||{}),t=t&&t.constructor===Date?this._formatDate(d,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+l,a/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var t,n=C(e),i=C.data(e,"datepicker");n.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),C.removeData(e,"datepicker"),"input"===t?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||n.removeClass(this.markerClassName).empty(),a===i&&(a=null))},_enableDatepicker:function(t){var e,n,i=C(t),r=C.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,n,i=C(t),r=C.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return C.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i,r,o,s,a=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?C.extend({},C.datepicker._defaults):a?"all"===t?C.extend({},a.settings):this._get(a,t):null;i=t||{},"string"==typeof t&&((i={})[t]=n),a&&(this._curInst===a&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),u(a.settings,i),null!==o&&i.dateFormat!==undefined&&i.minDate===undefined&&(a.settings.minDate=this._formatDate(a,o)),null!==s&&i.dateFormat!==undefined&&i.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(C(e),a),this._autoSize(a),this._setDate(a,r),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t,n,i,r=C.datepicker._getInst(e.target),o=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,
C.datepicker._datepickerShowing)switch(e.keyCode){case 9:C.datepicker._hideDatepicker(),o=!1;break;case 13:return(i=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",r.dpDiv))[0]&&C.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,i[0]),(t=C.datepicker._get(r,"onSelect"))?(n=C.datepicker._formatDate(r),t.apply(r.input?r.input[0]:null,[n,r])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&C.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&C.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,s?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,s?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?C.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,n,i=C.datepicker._getInst(e.target);if(C.datepicker._get(i,"constrainInput"))return t=C.datepicker._possibleChars(C.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!t||-1<t.indexOf(n)},_doKeyUp:function(e){var t=C.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{C.datepicker.parseDate(C.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,C.datepicker._getFormatConfig(t))&&(C.datepicker._setDateFromField(t),C.datepicker._updateAlternate(t),C.datepicker._updateDatepicker(t))}catch(n){}return!0},_showDatepicker:function(e){var t,n,i,r,o,s,a;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=C("input",e.parentNode)[0]),C.datepicker._isDisabledDatepicker(e)||C.datepicker._lastInput===e)||(t=C.datepicker._getInst(e),C.datepicker._curInst&&C.datepicker._curInst!==t&&(C.datepicker._curInst.dpDiv.stop(!0,!0),t&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(i=(n=C.datepicker._get(t,"beforeShow"))?n.apply(e,[e,t]):{})&&(u(t.settings,i),t.lastVal=null,C.datepicker._lastInput=e,C.datepicker._setDateFromField(t),C.datepicker._inDialog&&(e.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(e),C.datepicker._pos[1]+=e.offsetHeight),r=!1,C(e).parents().each(function(){return!(r|="fixed"===C(this).css("position"))}),o={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(t),o=C.datepicker._checkOffset(t,o,r),t.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),t.inline||(s=C.datepicker._get(t,"showAnim"),a=C.datepicker._get(t,"duration"),t.dpDiv.css("z-index",l(C(e))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[s]?t.dpDiv.show(s,C.datepicker._get(t,"showOptions"),a):t.dpDiv[s||"show"](s?a:null),C.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),C.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(a=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,n=this._getNumberOfMonths(e),i=n[1],r=17,o=e.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&s.apply(o.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",r*i+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:C(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-o:0,t.left-=n&&t.left===e.input.offset().left?C(document).scrollLeft():0,t.top-=n&&t.top===e.input.offset().top+s?C(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>a&&i<a?Math.abs(t.left+i-a):0),t.top-=Math.min(t.top,t.top+r>l&&r<l?Math.abs(r+s):0),t},_findPos:function(e){for(var t,n=this._getInst(e),i=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||C.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(t=C(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,n,i,r,o=this._curInst;!o||e&&o!==C.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(o,"showAnim"),n=this._get(o,"duration"),i=function(){C.datepicker._tidyDialog(o)},C.effects&&(C.effects.effect[t]||C.effects[t])?o.dpDiv.hide(t,C.datepicker._get(o,"showOptions"),n,i):o.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?n:null,i),t||i(),this._datepickerShowing=!1,(r=this._get(o,"onClose"))&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(C.datepicker._curInst){var t=C(e.target),n=C.datepicker._getInst(t[0]);(t[0].id===C.datepicker._mainDivId||0!==t.parents("#"+C.datepicker._mainDivId).length||t.hasClass(C.datepicker.markerClassName)||t.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!t.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===n)||C.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=C(e),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,t+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(e){var t,n=C(e),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(t=new Date,i.selectedDay=t.getDate(),i.drawMonth=i.selectedMonth=t.getMonth(),i.drawYear=i.selectedYear=t.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(e,t,n){var i=C(e),r=this._getInst(i[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(e,t,n,i){var r,o=C(e);C(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((r=this._getInst(o[0])).selectedDay=r.currentDay=C("a",i).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=n,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var t=C(e);this._selectDate(t,"")},_selectDate:function(e,t){var n,i=C(e),r=this._getInst(i[0]);t=null!=t?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,n,i,r=this._get(e,"altField");r&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),i=this.formatDate(t,n,this._getFormatConfig(e)),C(r).val(i))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,o,e){if(null==n||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;var i,t,r,s,a=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,u=(e?e.dayNames:null)||this._defaults.dayNames,f=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,h=(e?e.monthNames:null)||this._defaults.monthNames,p=-1,g=-1,m=-1,v=-1,b=!1,E=function(e){var t=i+1<n.length&&n.charAt(i+1)===e;return t&&i++,t},_=function(e){var t=E(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=new RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),r=o.substring(a).match(i);if(!r)throw"Missing number at position "+a;return a+=r[0].length,parseInt(r[0],10)},y=function(e,t,n){var i=-1,r=C.map(E(e)?n:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(C.each(r,function(e,t){var n=t[1];if(o.substr(a,n.length).toLowerCase()===n.toLowerCase())return i=t[0],a+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+a},T=function(){if(o.charAt(a)!==n.charAt(i))throw"Unexpected literal at position "+a;a++};for(i=0;i<n.length;i++)if(b)"'"!==n.charAt(i)||E("'")?T():b=!1;else switch(n.charAt(i)){case"d":m=_("d");break;case"D":y("D",d,u);break;case"o":v=_("o");break;case"m":g=_("m");break;case"M":g=y("M",f,h);break;case"y":p=_("y");break;case"@":p=(s=new Date(_("@"))).getFullYear(),g=s.getMonth()+1,m=s.getDate();break;case"!":p=(s=new Date((_("!")-this._ticksTo1970)/1e4)).getFullYear(),g=s.getMonth()+1,m=s.getDate();break;case"'":E("'")?T():b=!0;break;default:T()}if(a<o.length&&(r=o.substr(a),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=c?0:-100)),-1<v)for(g=1,m=v;;){if(m<=(t=this._getDaysInMonth(p,g-1)))break;g++,m-=t}if((s=this._daylightSavingAdjust(new Date(p,g-1,m))).getFullYear()!==p||s.getMonth()+1!==g||s.getDate()!==m)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,e,t){if(!e)return"";var i,r=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,o=(t?t.dayNames:null)||this._defaults.dayNames,s=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,a=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=i+1<n.length&&n.charAt(i+1)===e;return t&&i++,t},c=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},d=function(e,t,n,i){return l(e)?i[t]:n[t]},u="",f=!1;if(e)for(i=0;i<n.length;i++)if(f)"'"!==n.charAt(i)||l("'")?u+=n.charAt(i):f=!1;else switch(n.charAt(i)){case"d":u+=c("d",e.getDate(),2);break;case"D":u+=d("D",e.getDay(),r,o);break;case"o":u+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",e.getMonth()+1,2);break;case"M":u+=d("M",e.getMonth(),s,a);break;case"y":u+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":f=!0;break;default:u+=n.charAt(i)}return u},_possibleChars:function(n){var i,e="",t=!1,r=function(e){var t=i+1<n.length&&n.charAt(i+1)===e;return t&&i++,t};for(i=0;i<n.length;i++)if(t)"'"!==n.charAt(i)||r("'")?e+=n.charAt(i):t=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":r("'")?e+="'":t=!0;break;default:e+=n.charAt(i)}return e},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,s=this._getFormatConfig(e);try{o=this.parseDate(n,i,s)||r}catch(a){i=t?"":i}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=i?o.getDate():0,e.currentMonth=i?o.getMonth():0,e.currentYear=i?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(l,e,t){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=null==e||""===e?t:"string"==typeof e?function(e){try{return C.datepicker.parseDate(C.datepicker._get(l,"dateFormat"),e,C.datepicker._getFormatConfig(l))}catch(a){}for(var t=(e.toLowerCase().match(/^c/)?C.datepicker._getDate(l):null)||new Date,n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=o.exec(e);s;){switch(s[2]||"d"){case"d":case"D":r+=parseInt(s[1],10);break;case"w":case"W":r+=7*parseInt(s[1],10);break;case"m":case"M":i+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i))}s=o.exec(e)}return new Date(n,i,r)}(e):"number"==typeof e?isNaN(e)?t:n(e):new Date(e.getTime());return(i=i&&"Invalid Date"===i.toString()?t:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),r===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){C.datepicker._adjustDate(n,-t,"M")},next:function(){C.datepicker._adjustDate(n,+t,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(n)},selectDay:function(){return C.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(n,this,"Y"),!1}};C(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,o,s,a,l,c,d,u,f,h,p,g,m,v,b,E,_,y,T,C,A,S,w,x,R,I,D,N,O,L,k,M,F,P,$,H,B=new Date,W=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),U=this._get(e,"isRTL"),K=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),j=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),V=1!==Y[0]||1!==Y[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),J=e.drawMonth-q,ee=e.drawYear;if(J<0&&(J+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-Y[0]*Y[1]+1,Z.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,J,1))>t;)--J<0&&(J=11,ee--);for(e.drawMonth=J,e.drawYear=ee,n=this._get(e,"prevText"),n=j?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,J-G,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=j?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,J+G,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>",s=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:W,s=j?this.formatDate(s,a,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=K?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(U?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),f=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),E=this._getDefaultDate(e),_="",T=0;T<Y[0];T++){for(C="",this.maxRows=4,A=0;A<Y[1];A++){if(S=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay)),w=" ui-corner-all",x="",V){if(x+="<div class='ui-datepicker-group",1<Y[1])switch(A){case 0:x+=" ui-datepicker-group-first",w=" ui-corner-"+(U?"right":"left");break;case Y[1]-1:x+=" ui-datepicker-group-last",w=" ui-corner-"+(U?"left":"right");break;default:x+=" ui-datepicker-group-middle",w=""}x+="'>"}for(x+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+w+"'>"+(/all|left/.test(w)&&0===T?U?o:i:"")+(/all|right/.test(w)&&0===T?U?i:o:"")+this._generateMonthYearHeader(e,J,ee,Q,Z,0<T||0<A,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",R=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",y=0;y<7;y++)R+="<th scope='col'"+(5<=(y+d+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+f[I=(y+d)%7]+"'>"+h[I]+"</span></th>";for(x+=R+"</tr></thead><tbody>",D=this._getDaysInMonth(ee,J),ee===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),N=(this._getFirstDayOfMonth(ee,J)-d+7)%7,O=Math.ceil((N+D)/7),L=V&&this.maxRows>O?this.maxRows:O,this.maxRows=L,k=this._daylightSavingAdjust(new Date(ee,J,1-N)),M=0;M<L;M++){for(x+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(k)+"</td>":"",y=0;y<7;y++)P=m?m.apply(e.input?e.input[0]:null,[k]):[!0,""],H=($=k.getMonth()!==J)&&!b||!P[0]||Q&&k<Q||Z&&Z<k,F+="<td class='"+(5<=(y+d+6)%7?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(k.getTime()===S.getTime()&&J===e.selectedMonth&&e._keyEvent||E.getTime()===k.getTime()&&E.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!v?"":" "+P[1]+(k.getTime()===X.getTime()?" "+this._currentClass:"")+(k.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+($&&!v||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+k.getMonth()+"' data-year='"+k.getFullYear()+"'")+">"+($&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+k.getDate()+"</span>":"<a class='ui-state-default"+(k.getTime()===W.getTime()?" ui-state-highlight":"")+(k.getTime()===X.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#'>"+k.getDate()+"</a>")+"</td>",k.setDate(k.getDate()+1),k=this._daylightSavingAdjust(k);x+=F+"</tr>"}11<++J&&(J=0,ee++),C+=x+="</tbody></table>"+(V?"</div>"+(0<Y[0]&&A===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}_+=C}return _+=c,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,n,i,r,o,s,a){var l,c,d,u,f,h,p,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),E="<div class='ui-datepicker-title'>",_="";if(o||!m)_+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=i.getMonth())&&(!c||d<=r.getMonth())&&(_+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");_+="</select>"}if(b||(E+=_+(!o&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)E+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(u=this._get(e,"yearRange").split(":"),f=(new Date).getFullYear(),p=(h=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t})(u[0]),g=Math.max(p,h(u[1]||"")),p=i?Math.max(p,i.getFullYear()):p,g=r?Math.min(g,r.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",E+=e.yearshtml,e.yearshtml=null}return E+=this._get(e,"yearSuffix"),b&&(E+=(!o&&m&&v?"":"&#xa0;")+_),E+="</div>"},_adjustInstDate:function(e,t,n){var i=e.selectedYear+("Y"===n?t:0),r=e.selectedMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&t<n?n:t;return i&&i<r?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(t<0?t:r[0]*r[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),C.fn.datepicker=function(e,t){if(!this.length)return this;C.datepicker.initialized||(C(document).on("mousedown",C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof t?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this].concat(n)):C.datepicker._attachDatepicker(this,e)}):C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(n))},C.datepicker=new e,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.12.1",C.datepicker}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(d){var o,n=0,a=Array.prototype.slice;return d.cleanData=(o=d.cleanData,function(e){var t,n,i;for(i=0;null!=(n=e[i]);i++)try{(t=d._data(n,"events"))&&t.remove&&d(n).triggerHandler("remove")}catch(r){}o(e)}),d.widget=function(e,n,t){var i,r,o,s={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return t||(t=n,n=d.Widget),d.isArray(t)&&(t=d.extend.apply(null,[{}].concat(t))),d.expr[":"][l.toLowerCase()]=function(e){return!!d.data(e,l)},d[a]=d[a]||{},i=d[a][e],r=d[a][e]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},d.extend(r,i,{version:t.version,_proto:d.extend({},t),_childConstructors:[]}),(o=new n).options=d.widget.extend({},o.options),d.each(t,function(t,o){d.isFunction(o)?s[t]=function(){function i(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var e,t=this._super,n=this._superApply;return this._super=i,this._superApply=r,e=o.apply(this,arguments),this._super=t,this._superApply=n,e}}():s[t]=o}),r.prototype=d.widget.extend(o,{widgetEventPrefix:i&&o.widgetEventPrefix||e},s,{constructor:r,namespace:a,widgetName:e,widgetFullName:l}),i?(d.each(i._childConstructors,function(e,t){var n=t.prototype;d.widget(n.namespace+"."+n.widgetName,r,t._proto)}),delete i._childConstructors):n._childConstructors.push(r),d.widget.bridge(e,r),r},d.widget.extend=function(e){for(var t,n,i=a.call(arguments,1),r=0,o=i.length;r<o;r++)for(t in i[r])n=i[r][t],i[r].hasOwnProperty(t)&&n!==undefined&&(d.isPlainObject(n)?e[t]=d.isPlainObject(e[t])?d.widget.extend({},e[t],n):d.widget.extend({},n):e[t]=n);return e},d.widget.bridge=function(o,t){var s=t.prototype.widgetFullName||o;d.fn[o]=function(n){var e="string"==typeof n,i=a.call(arguments,1),r=this;return e?this.length||"instance"!==n?this.each(function(){var e,t=d.data(this,s);return"instance"===n?(r=t,!1):t?d.isFunction(t[n])&&"_"!==n.charAt(0)?(e=t[n].apply(t,i))!==t&&e!==undefined?(r=e&&e.jquery?r.pushStack(e.get()):e,!1):void 0:d.error("no such method '"+n+"' for "+o+" widget instance"):d.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):r=undefined:(i.length&&(n=d.widget.extend.apply(null,[n].concat(i))),this.each(function(){var e=d.data(this,s);e?(e.option(n||{}),e._init&&e._init()):d.data(this,s,new t(n,this))})),r}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=d(t||this.defaultElement||this)[0],this.element=d(t),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=d(),this.hoverable=d(),this.focusable=d(),this.classesElementLookup={},t!==this&&(d.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=d(t.style?t.ownerDocument:t.document||t),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){var n=this;this._destroy(),d.each(this.classesElementLookup,function(e,t){n._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:d.noop,widget:function(){return this.element},option:function(e,t){var n,i,r,o=e;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(i=o[e]=d.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(e=n.pop(),1===arguments.length)return i[e]===undefined?null:i[e];i[e]=t}else{if(1===arguments.length)return this.options[e]===undefined?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,n,i;for(t in e)i=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&i&&i.length&&(n=d(i.get()),this._removeClass(i,t),n.addClass(this._classes({element:n,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){function e(e,t){var n,i;for(i=0;i<e.length;i++)n=s.classesElementLookup[e[i]]||d(),n=r.add?d(d.unique(n.get().concat(r.element.get()))):d(n.not(r.element).get()),s.classesElementLookup[e[i]]=n,o.push(e[i]),t&&r.classes[e[i]]&&o.push(r.classes[e[i]])}var o=[],s=this;return r=d.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&e(r.keys.match(/\S+/g)||[],!0),r.extra&&e(r.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(n){var i=this;d.each(i.classesElementLookup,function(e,t){-1!==d.inArray(n.target,t)&&(i.classesElementLookup[e]=d(t.not(n.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(s,a,e){var l,c=this;"boolean"!=typeof s&&(e=a,a=s,s=!1),e?(a=l=d(a),this.bindings=this.bindings.add(a)):(e=a,a=this.element,l=this.widget()),d.each(e,function(e,t){function n(){if(s||!0!==c.options.disabled&&!d(this).hasClass("ui-state-disabled"))return("string"==typeof t?c[t]:t).apply(c,arguments)}"string"!=typeof t&&(n.guid=t.guid=t.guid||n.guid||d.guid++);var i=e.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+c.eventNamespace,o=i[2];o?l.on(r,o,n):a.on(r,n)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=d(this.bindings.not(e).get()),this.focusable=d(this.focusable.not(e).get()),this.hoverable=d(this.hoverable.not(e).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(d(
e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(d(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(d(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(d(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,n){var i,r,o=this.options[e];if(n=n||{},(t=d.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],r=t.originalEvent)for(i in r)i in t||(t[i]=r[i]);return this.element.trigger(t,n),!(d.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(o,s){d.Widget.prototype["_"+o]=function(t,e,n){var i;"string"==typeof e&&(e={effect:e});var r=e?!0===e||"number"==typeof e?s:e.effect||s:o;"number"==typeof(e=e||{})&&(e={duration:e}),i=!d.isEmptyObject(e),e.complete=n,e.delay&&t.delay(e.delay),i&&d.effects&&d.effects.effect[r]?t[o](e):r!==o&&t[r]?t[r](e.duration,e.easing,n):t.queue(function(e){d(this)[o](),n&&n.call(t[0]),e()})}}),d.widget}),function(e){"function"==typeof define&&define.amd?define(["jquery","../widget"],e):e(jQuery)}(function(l){var o=/ui-corner-([a-z]){2,6}/g;return l.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];l.each(this.options.items,function(r,e){var t,o={};if(e)return"controlgroupLabel"===r?((t=s.element.find(e)).each(function(){var e=l(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(t.get()))):void(l.fn[r]&&(o=s["_"+r+"Options"]?s["_"+r+"Options"]("middle"):{classes:{}},s.element.find(e).each(function(){var e=l(this),t=e[r]("instance"),n=l.widget.extend({},o);if("button"!==r||!e.parent(".ui-spinner").length){t||(t=e[r]()[r]("instance")),t&&(n.classes=s._resolveClassesValues(n.classes,t)),e[r](n);var i=e[r]("widget");l.data(i[0],"ui-controlgroup-data",t||e[r]("instance")),a.push(i[0])}})))}),this.childWidgets=l(l.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=l(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var r={};return l.each(n,function(e){var t=i.options.classes[e]||"";t=l.trim(t.replace(o,"")),r[e]=(t+" "+n[e]).replace(/\s+/g," ")}),r},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var r,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(l.each(["first","last"],function(e,t){var n=r[t]().data("ui-controlgroup-data");if(n&&o["_"+n.widgetName+"Options"]){var i=o["_"+n.widgetName+"Options"](1===r.length?"only":t);i.classes=o._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)}else o._updateCornerClass(r[t](),t)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","../widget"],e):e(jQuery)}(function(l){var o=/ui-corner-([a-z]){2,6}/g;return l.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];l.each(this.options.items,function(r,e){var t,o={};if(e)return"controlgroupLabel"===r?((t=s.element.find(e)).each(function(){var e=l(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(t.get()))):void(l.fn[r]&&(o=s["_"+r+"Options"]?s["_"+r+"Options"]("middle"):{classes:{}},s.element.find(e).each(function(){var e=l(this),t=e[r]("instance"),n=l.widget.extend({},o);if("button"!==r||!e.parent(".ui-spinner").length){t||(t=e[r]()[r]("instance")),t&&(n.classes=s._resolveClassesValues(n.classes,t)),e[r](n);var i=e[r]("widget");l.data(i[0],"ui-controlgroup-data",t||e[r]("instance")),a.push(i[0])}})))}),this.childWidgets=l(l.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=l(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var r={};return l.each(n,function(e){var t=i.options.classes[e]||"";t=l.trim(t.replace(o,"")),r[e]=(t+" "+n[e]).replace(/\s+/g," ")}),r},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var r,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(l.each(["first","last"],function(e,t){var n=r[t]().data("ui-controlgroup-data");if(n&&o["_"+n.widgetName+"Options"]){var i=o["_"+n.widgetName+"Options"](1===r.length?"only":t);i.classes=o._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)}else o._updateCornerClass(r[t](),t)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],e):e(jQuery)}(function(o){var e;return o.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===o.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,t){var n="iconPosition"!==e,i=n?this.options.iconPosition:t,r="top"===i||"bottom"===i;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=o("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,t),this._attachIcon(i),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=o("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=e.showLabel===undefined?this.options.showLabel:e.showLabel,n=e.icon===undefined?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),(this.element[0].disabled=t)&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==o.uiBackCompat&&(o.widget("ui.button",o.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),o.fn.button=(e=o.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(o.ui.checkboxradio||o.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),o.fn.buttonset=function(e,t,n){return o.ui.controlgroup||o.error("Controlgroup widget missing"),"option"===e&&"items"===t&&n?this.controlgroup.apply(this,[e,"items.button",n]):"option"===e&&"items"===t?this.controlgroup.apply(this,[e,"items.button"]):("object"==typeof e&&e.items&&(e.items={button:e.items}),this.controlgroup.apply(this,arguments))}),o.ui.button}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(r){var o=!1;return r(document).on("mouseup",function(){o=!1}),r.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===r.data(e.target,t.widgetName+".preventClickEvent"))return r.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,i=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&r(e.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===r.data(e.target,this.widgetName+".preventClickEvent")&&r.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&r.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,o=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(i){return i.extend(i.expr[":"],{data:i.expr.createPseudo?i.expr.createPseudo(function(t){return function(e){return!!i.data(e,t)}}):function(e,t,n){return!!i.data(e,n[3])}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(o){return o.ui.plugin={add:function(e,t,n){var i,r=o.ui[e].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([t,n[i]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(o){return o.fn.scrollParent=function(e){var t=this.css("position"),n="absolute"===t,i=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=o(this);return(!n||"static"!==e.css("position"))&&i.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&r.length?r:o(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(E){return E.widget("ui.draggable",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<E(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=E(this);return E("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=E.ui.safeActiveElement(this.document[0]);E(e.target).closest(t).length||E.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),E.ui.ddmanager&&(E.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===E(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),E.ui.ddmanager&&!t.dropBehaviour&&E.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),E.ui.ddmanager&&E.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new E.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",E.ui.ddmanager&&E.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,n=!1;return E.ui.ddmanager&&!this.options.dropBehaviour&&(n=E.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||E.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?E(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),E.ui.ddmanager&&E.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),E.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new E.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!E(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,n=E.isFunction(t.helper),i=n?E(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),E.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&E.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,i=this.options,r=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(t=E(i.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=i.containment:this.containment=[0,0,E(r).width()-this.helperProportions.width-this.margins.left,(E(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[E(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,E(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,E(window).scrollLeft()+E(window).width()-this.helperProportions.width-this.margins.left,E(window).scrollTop()+(E(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,n){return n=n||this._uiHash(),E.ui.plugin.call(this,e,[t,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),E.Widget.prototype._trigger.call(this,e,t,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),E.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,n){var i=E.extend({},e,{item:n.element});n.sortables=[],E(n.options.connectToSortable).each(function(){var e=E(this).sortable("instance");e&&!e.options.disabled&&(n.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,i))})},stop:function(t,e,n){var i=E.extend({},e,{item:n.element});n.cancelHelperRemoval=!1,E.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(n,i,r){E.each(r.sortables,function(){var e=!1,t=this;t.positionAbs=r.positionAbs,t.helperProportions=r.helperProportions,t.offset.click=r.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,E.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&E.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,r._parent=i.helper.parent(),t.currentItem=i.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return i.helper[0]},n.target=t.currentItem[0],t._mouseCapture(n,!0),t._mouseStart(n,!0,!0),t.offset.click.top=r.offset.click.top,
t.offset.click.left=r.offset.click.left,t.offset.parent.left-=r.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=r.offset.parent.top-t.offset.parent.top,r._trigger("toSortable",n),r.dropped=t.element,E.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,t.fromOutside=r),t.currentItem&&(t._mouseDrag(n),i.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",n,t._uiHash(t)),t._mouseStop(n,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,E.each(r.sortables,function(){this.refreshPositions()}))})}}),E.ui.plugin.add("draggable","cursor",{start:function(e,t,n){var i=E("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(e,t,n){var i=n.options;i._cursor&&E("body").css("cursor",i._cursor)}}),E.ui.plugin.add("draggable","opacity",{start:function(e,t,n){var i=E(t.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,t,n){var i=n.options;i._opacity&&E(t.helper).css("opacity",i._opacity)}}),E.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,t,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],s=n.document[0];o!==s&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-E(s).scrollTop()<i.scrollSensitivity?r=E(s).scrollTop(E(s).scrollTop()-i.scrollSpeed):E(window).height()-(e.pageY-E(s).scrollTop())<i.scrollSensitivity&&(r=E(s).scrollTop(E(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-E(s).scrollLeft()<i.scrollSensitivity?r=E(s).scrollLeft(E(s).scrollLeft()-i.scrollSpeed):E(window).width()-(e.pageX-E(s).scrollLeft())<i.scrollSensitivity&&(r=E(s).scrollLeft(E(s).scrollLeft()+i.scrollSpeed)))),!1!==r&&E.ui.ddmanager&&!i.dropBehaviour&&E.ui.ddmanager.prepareOffsets(n,e)}}),E.ui.plugin.add("draggable","snap",{start:function(e,t,n){var i=n.options;n.snapElements=[],E(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var e=E(this),t=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,n){var i,r,o,s,a,l,c,d,u,f,h=n.options,p=h.snapTolerance,g=t.offset.left,m=g+n.helperProportions.width,v=t.offset.top,b=v+n.helperProportions.height;for(u=n.snapElements.length-1;0<=u;u--)l=(a=n.snapElements[u].left-n.margins.left)+n.snapElements[u].width,d=(c=n.snapElements[u].top-n.margins.top)+n.snapElements[u].height,m<a-p||l+p<g||b<c-p||d+p<v||!E.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,E.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==h.snapMode&&(i=Math.abs(c-b)<=p,r=Math.abs(d-v)<=p,o=Math.abs(a-m)<=p,s=Math.abs(l-g)<=p,i&&(t.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(t.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:a-n.helperProportions.width}).left),s&&(t.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),f=i||r||o||s,"outer"!==h.snapMode&&(i=Math.abs(c-v)<=p,r=Math.abs(d-b)<=p,o=Math.abs(a-g)<=p,s=Math.abs(l-m)<=p,i&&(t.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(t.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:a}).left),s&&(t.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(i||r||o||s||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,E.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=i||r||o||s||f)}}),E.ui.plugin.add("draggable","stack",{start:function(e,t,n){var i,r=n.options,o=E.makeArray(E(r.stack)).sort(function(e,t){return(parseInt(E(e).css("zIndex"),10)||0)-(parseInt(E(t).css("zIndex"),10)||0)});o.length&&(i=parseInt(E(o[0]).css("zIndex"),10)||0,E(o).each(function(e){E(this).css("zIndex",i+e)}),this.css("zIndex",i+o.length))}}),E.ui.plugin.add("draggable","zIndex",{start:function(e,t,n){var i=E(t.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,t,n){var i=n.options;i._zIndex&&E(t.helper).css("zIndex",i._zIndex)}}),E.ui.draggable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(b){return b.widget("ui.resizable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===b(e).css("overflow"))return!1;var n=t&&"left"===t?"scrollLeft":"scrollTop",i=!1;return 0<e[n]||(e[n]=1,i=0<e[n],e[n]=0,i)},_create:function(){var e,t=this.options,n=this;this._addClass("ui-resizable"),b.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&b(this.element).on("mouseenter",function(){t.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){t.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){b(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,t,n,i,r,o=this.options,s=this;if(this.handles=o.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=b(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},t=0;t<n.length;t++)i="ui-resizable-"+(e=b.trim(n[t])),r=b("<div>"),this._addClass(r,"ui-resizable-handle "+i),r.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(r);this._renderAxis=function(e){var t,n,i,r;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=b(this.handles[t]),this._on(this.handles[t],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=b(this.handles[t],this.element),r=/sw|ne|nw|se|n|s/.test(t)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(i,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var t,n,i=!1;for(t in this.handles)((n=b(this.handles[t])[0])===e.target||b.contains(n,e.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(e){var t,n,i,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(t+=b(r.containment).scrollLeft()||0,n+=b(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:t,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,n,i=this.originalMousePosition,r=this.axis,o=e.pageX-i.left||0,s=e.pageY-i.top||0,a=this._change[r];return this._updatePrevProperties(),a&&(t=a.apply(this,[e,o,s]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,n,i,r,o,s,a,l=this.options,c=this;return this._helper&&(i=(n=(t=this._proportionallyResizeElements).length&&/textarea/i.test(t[0].nodeName))&&this._hasScroll(t[0],"left")?0:c.sizeDiff.height,r=n?0:c.sizeDiff.width,o={width:c.helper.width()-r,height:c.helper.height()-i},s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(b.extend(o,{top:a,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),o&&c&&(e.left=a-t.minWidth),i&&c&&(e.left=a-t.maxWidth),s&&d&&(e.top=l-t.minHeight),r&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(r[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(e,t,n){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,n]))},sw:function(e,t,n){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,n]))},ne:function(e,t,n){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,n]))},nw:function(e,t,n){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,n]))}},_propagate:function(e,t){b.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),b.ui.plugin.add("resizable","animate",{stop:function(t){var n=b(this).resizable("instance"),e=n.options,i=n._proportionallyResizeElements,r=i.length&&/textarea/i.test(i[0].nodeName),o=r&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,a={width:n.size.width-s,height:n.size.height-o},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(b.extend(a,c&&l?{top:c,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&b(i[0]).css({width:e.width,height:e.height}),n._updateCache(e),n._propagate("resize",t)}})}}),b.ui.plugin.add("resizable","containment",{start:function(){var n,i,e,t,r,o,s,a=b(this).resizable("instance"),l=a.options,c=a.element,d=l.containment,u=d instanceof b?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(a.containerElement=b(u),/document/.test(d)||d===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}):(n=b(u),i=[],b(["Top","Right","Left","Bottom"]).each(function(e,t){i[e]=a._num(n.css("padding"+t))}),a.containerOffset=n.offset(),a.containerPosition=n.position(),a.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},e=a.containerOffset,t=a.containerSize.height,r=a.containerSize.width,o=a._hasScroll(u,"left")?u.scrollWidth:r,s=a._hasScroll(u)?u.scrollHeight:t,a.parentData={element:u,left:e.left,top:e.top,width:o,height:s}))},resize:function(e){var t,n,i,r,o=b(this).resizable("instance"),s=o.options,a=o.containerOffset,l=o.position,c=o._aspectRatio||e.shiftKey,d={top:0,left:0},u=o.containerElement,f=!0;u[0]!==document&&/static/.test(u.css("position"))&&(d=a),l.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-d.left),c&&(o.size.height=o.size.width/o.aspectRatio,f=!1),o.position.left=s.helper?a.left:0),l.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,f=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),i&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),t=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-a.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-a.top)),t+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-t,c&&(o.size.height=o.size.width/o.aspectRatio,f=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,c&&(o.size.width=o.size.height*o.aspectRatio,f=!1)),f||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=b(this).resizable("instance"),t=e.options,n=e.containerOffset,i=e.containerPosition,r=e.containerElement,o=b(e.helper),s=o.offset(),a=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(r.css("position"))&&b(this).css({left:s.left-i.left-n.left,width:a,height:l}),e._helper&&!t.animate&&/static/.test(r.css("position"))&&b(this).css({left:s.left-i.left-n.left,width:a,height:l})}}),b.ui.plugin.add("resizable","alsoResize",{start:function(){var e=b(this).resizable("instance").options;b(e.alsoResize).each(function(){var e=b(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,n){var t=b(this).resizable("instance"),i=t.options,r=t.originalSize,o=t.originalPosition,s={height:t.size.height-r.height||0,width:t.size.width-r.width||0,top:t.position.top-o.top||0,left:t.position.left-o.left||0};b(i.alsoResize).each(function(){var e=b(this),i=b(this).data("ui-resizable-alsoresize"),r={},t=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(t,function(e,t){var n=(i[t]||0)+(s[t]||0);n&&0<=n&&(r[t]=n||null)}),e.css(r)})},stop:function(){b(this).removeData("ui-resizable-alsoresize")}}),b.ui.plugin.add("resizable","ghost",{start:function(){var e=b(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==b.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=b(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=b(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),b.ui.plugin.add("resizable","grid",{resize:function(){var e,t=b(this).resizable("instance"),n=t.options,i=t.size,r=t.originalSize,o=t.originalPosition,s=t.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,c=a[1]||1,d=Math.round((i.width-r.width)/l)*l,u=Math.round((i.height-r.height)/c)*c,f=r.width+d,h=r.height+u,p=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<h,m=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=a,m&&(f+=l),v&&(h+=c),p&&(f-=l),g&&(h-=c),/^(se|s|e)$/.test(s)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(s)?(t.size.width=f,t.size.height=h,t.position.top=o.top-u):/^(sw)$/.test(s)?(t.size.width=f,t.size.height=h,t.position.left=o.left-d):((h-c<=0||f-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<h-c?(t.size.height=h,t.position.top=o.top-u):(h=c-e.height,t.size.height=h,t.position.top=o.top+r.height-h),0<f-l?(t.size.width=f,t.position.left=o.left-d):(f=l-e.width,t.size.width=f,t.position.left=o.left+r.width-f))}}),b.ui.resizable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(l){function c(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}return l.ui.focusable=function(e,t){var n,i,r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(i=(n=e.parentNode).name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&(0<(r=l("img[usemap='#"+i+"']")).length&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(o=!e.disabled)&&(s=l(e).closest("fieldset")[0])&&(o=!s.disabled):o="a"===a&&e.href||t,o&&l(e).is(":visible")&&c(l(e)))},l.extend(l.expr[":"],{focusable:function(e){return l.ui.focusable(e,null!=l.attr(e,"tabindex"))}}),l.ui.focusable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(w){return function(){function T(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function C(e,t){return parseInt(w.css(e,t),10)||0}function t(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:w.isWindow(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var r,A=Math.max,S=Math.abs,i=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,n=w.fn.position;w.position={scrollbarWidth:function(){if(r!==undefined)return r;var e,t,n=w("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return w("body").append(n),e=i.offsetWidth,n.css("overflow","scroll"),e===(t=i.offsetWidth)&&(t=n[0].clientWidth),n.remove(),r=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),i="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?w.position.scrollbarWidth():0,height:i?w.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=w(e||window),n=w.isWindow(t[0]),i=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:n,isDocument:i,offset:!n&&!i?w(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},w.fn.position=function(u){if(!u||!u.of)return n.apply(this,arguments);u=w.extend({},u);var f,h,p,g,m,e,v=w(u.of),b=w.position.getWithinInfo(u.within),E=w.position.getScrollInfo(b),_=(u.collision||"flip").split(" "),y={};return e=t(v),v[0].preventDefault&&(u.at="left top"),h=e.width,p=e.height,g=e.offset,m=w.extend({},g),w.each(["my","at"],function(){var e,t,n=(u[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",e=s.exec(n[0]),t=s.exec(n[1]),y[this]=[e?e[0]:0,t?t[0]:0],u[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===u.at[0]?m.left+=h:"center"===u.at[0]&&(m.left+=h/2),"bottom"===u.at[1]?m.top+=p:"center"===u.at[1]&&(m.top+=p/2),f=T(y.at,h,p),m.left+=f[0],m.top+=f[1],this.each(function(){var n,e,s=w(this),a=s.outerWidth(),l=s.outerHeight(),t=C(this,"marginLeft"),i=C(this,"marginTop"),r=a+t+C(this,"marginRight")+E.width,o=l+i+C(this,"marginBottom")+E.height,c=w.extend({},m),d=T(y.my,s.outerWidth(),s.outerHeight());"right"===u.my[0]?c.left-=a:"center"===u.my[0]&&(c.left-=a/2),"bottom"===u.my[1]?c.top-=l:"center"===u.my[1]&&(c.top-=l/2),c.left+=d[0],c.top+=d[1],n={marginLeft:t,marginTop:i},w.each(["left","top"],function(e,t){w.ui.position[_[e]]&&w.ui.position[_[e]][t](c,{targetWidth:h,targetHeight:p,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:o,offset:[f[0]+d[0],f[1]+d[1]],my:u.my,at:u.at,within:b,elem:s})}),u.using&&(e=function(e){var t=g.left-c.left,n=t+h-a,i=g.top-c.top,r=i+p-l,o={target:{element:v,left:g.left,top:g.top,width:h,height:p},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:n<0?"left":0<t?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};h<a&&S(t+n)<h&&(o.horizontal="center"),p<l&&S(i+r)<p&&(o.vertical="middle"),A(S(t),S(n))>A(S(i),S(r))?o.important="horizontal":o.important="vertical",u.using.call(this,e,o)}),s.offset(w.extend(c,{using:e}))})},w.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=e.left-t.collisionPosition.marginLeft,a=r-s,l=s+t.collisionWidth-o-r;t.collisionWidth>o?0<a&&l<=0?(n=e.left+a+t.collisionWidth-o-r,e.left+=a-n):e.left=0<l&&a<=0?r:l<a?r+o-t.collisionWidth:r:0<a?e.left+=a:0<l?e.left-=l:e.left=A(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,a=r-s,l=s+t.collisionHeight-o-r;t.collisionHeight>o?0<a&&l<=0?(n=e.top+a+t.collisionHeight-o-r,e.top+=a-n):e.top=0<l&&a<=0?r:l<a?r+o-t.collisionHeight:r:0<a?e.top+=a:0<l?e.top-=l:e.top=A(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,l=e.left-t.collisionPosition.marginLeft,c=l-a,d=l+t.collisionWidth-s-a,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];c<0?((n=e.left+u+f+h+t.collisionWidth-s-o)<0||n<S(c))&&(e.left+=u+f+h):0<d&&(0<(i=e.left-t.collisionPosition.marginLeft+u+f+h-a)||S(i)<d)&&(e.left+=u+f+h)},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-a,d=l+t.collisionHeight-s-a,u="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,h=-2*t.offset[1];c<0?((i=e.top+u+f+h+t.collisionHeight-s-o)<0||i<S(c))&&(e.top+=u+f+h):0<d&&(0<(n=e.top-t.collisionPosition.marginTop+u+f+h-a)||S(n)<d)&&(e.top+=u+f+h)}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}}}(),w.ui.position}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./focusable"],e):e(jQuery)}(function(i){return i.extend(i.expr[":"],{tabbable:function(e){var t=i.attr(e,"tabindex"),n=null!=t;return(!n||0<=t)&&i.ui.focusable(e,n)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],e):e(jQuery)}(function(l){return l.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=l(this).css(e).offset().top;t<0&&l(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(
this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&l.fn.draggable&&this._makeDraggable(),this.options.resizable&&l.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?l(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:l.noop,enable:l.noop,close:function(e){var t=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||l.ui.safeBlur(l.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+l(this).css("z-index")}).get(),r=Math.max.apply(null,i);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!t&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=l(l.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(e){function t(){var e=l.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||l.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=l("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===l.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===l.ui.keyCode.TAB&&!e.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),n=t.filter(":first"),i=t.filter(":last");e.target!==i[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){i.trigger("focus")}),e.preventDefault()):(this._delay(function(){n.trigger("focus")}),e.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=l("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){l(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=l("<button type='button'></button>").button({label:l("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=l("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=l("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=l("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var r=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),l.isEmptyObject(e)||l.isArray(e)&&!e.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(l.each(e,function(e,t){var n,i;t=l.isFunction(t)?{click:t,text:e}:t,t=l.extend({type:"button"},t),n=t.click,i={icon:t.icon,iconPosition:t.iconPosition,showLabel:t.showLabel,icons:t.icons,text:t.text},delete t.click,delete t.icon,delete t.iconPosition,delete t.showLabel,delete t.icons,"boolean"==typeof t.text&&delete t.text,l("<button></button>",t).button(i).appendTo(r.uiButtonSet).on("click",function(){n.apply(r.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var o=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){o._addClass(l(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",e,r(t))},drag:function(e,t){o._trigger("drag",e,r(t))},stop:function(e,t){var n=t.offset.left-o.document.scrollLeft(),i=t.offset.top-o.document.scrollTop();s.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:o.window},o._removeClass(l(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",e,r(t))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var s=this,a=this.options,e=a.resizable,t=this.uiDialog.css("position"),n="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:n,start:function(e,t){s._addClass(l(this),"ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",e,o(t))},resize:function(e,t){s._trigger("resize",e,o(t))},stop:function(e,t){var n=s.uiDialog.offset(),i=n.left-s.document.scrollLeft(),r=n.top-s.document.scrollTop();a.height=s.uiDialog.height(),a.width=s.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=r?"+":"")+r,of:s.window},s._removeClass(l(this),"ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",e,o(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=l(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=l.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=!1,r={};l.each(e,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(r[e]=t)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var n,i,r=this.uiDialog;"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:l("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((n=r.is(":data(ui-draggable)"))&&!t&&r.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((i=r.is(":data(ui-resizable)"))&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),i||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=l(this);return l("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!l(e.target).closest(".ui-dialog").length||!!l(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=l("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==l.uiBackCompat&&l.widget("ui.dialog",l.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),l.ui.dialog}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../ie","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(h){return h.widget("ui.sortable",h.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return t<=e&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),h.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),h(e.target).parents().each(function(){if(h.data(this,r.widgetName+"-item")===r)return n=h(this),!1}),h.data(e.target,r.widgetName+"-item")===r&&(n=h(e.target)),!!n&&(!(this.options.handle&&!t&&(h(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,n){var i,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},h.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=h("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",e,this._uiHash(this));return h.ui.ddmanager&&(h.ui.ddmanager.current=this),h.ui.ddmanager&&!o.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,n,i,r,o=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==s&&h.ui.ddmanager&&!o.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(i=(n=this.items[t]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===i||h.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&h.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),h.ui.ddmanager&&h.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(h.ui.ddmanager&&!this.options.dropBehaviour&&h.ui.ddmanager.drop(this,e),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,h(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new h.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),h.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?h(this.domPosition.prev).after(this.currentItem):h(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},h(e).each(function(){var e=(h(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&n.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t.each(function(){n.push(h(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||a<i+c&&i+c<l,f="y"===this.options.axis||o<t+d&&t+d<s,h=u&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!i||!r)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){function t(){s.push(this)}var n,i,r,o,s=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;0<=n;n--)for(i=(r=h(l[n],this.document[0])).length-1;0<=i;i--)(o=h.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([h.isFunction(o.options.items)?o.options.items.call(o.element):h(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([h.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):h(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;0<=n;n--)a[n][0].each(t);return h(s)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=h.grep(this.items,function(e){for(var t=0;t<n.length;t++)if(n[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,n,i,r,o,s,a,l,c=this.items,d=[[h.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):h(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(t=u.length-1;0<=t;t--)for(n=(i=h(u[t],this.document[0])).length-1;0<=n;n--)(r=h.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(d.push([h.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):h(r.options.items,r.element),r]),this.containers.push(r));for(t=d.length-1;0<=t;t--)for(o=d[t][1],n=0,l=(s=d[t][0]).length;n<l;n++)(a=h(s[n])).data(this.widgetName+"-item",o),c.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(n=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?h(this.options.toleranceElement,n.item):n.item,e||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)r=this.containers[t].element.offset(),this.containers[t].containerCache.left=r.left,this.containers[t].containerCache.top=r.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var e=n.currentItem[0].nodeName.toLowerCase(),t=h("<"+e+">",n.document[0]);return n._addClass(t,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(t,"ui-sortable-helper"),"tbody"===e?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),h("<tr>",n.document[0]).appendTo(t)):"tr"===e?n._createTrPlaceholder(n.currentItem,t):"img"===e&&t.attr("src",n.currentItem.attr("src")),i||t.css("visibility","hidden"),t},update:function(e,t){i&&!r.forcePlaceholderSize||(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=h(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(e,t){var n=this;e.children().each(function(){h("<td>&#160;</td>",n.document[0]).attr("colspan",h(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,n,i,r,o,s,a,l,c,d,u=null,f=null;for(t=this.containers.length-1;0<=t;t--)if(!h.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(u&&h.contains(this.containers[t].element[0],u.element[0]))continue;u=this.containers[t],f=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(i=1e4,r=null,o=(c=u.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",d=c?"pageX":"pageY",n=this.items.length-1;0<=n;n--)h.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[o],l=!1,e[d]-a>this.items[n][s]/2&&(l=!0),Math.abs(e[d]-a)<i&&(i=Math.abs(e[d]-a),r=this.items[n],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var t=this.options,n=h.isFunction(t.helper)?h(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||h("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!t.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!t.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),h.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&h.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&h.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=h(i.containment)[0],t=h(i.containment).offset(),n="hidden"!==h(e).css("overflow"),this.containment=[t.left+(parseInt(h(e).css("borderLeftWidth"),10)||0)+(parseInt(h(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(h(e).css("borderTopWidth"),10)||0)+(parseInt(h(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(h(e).css("borderLeftWidth"),10)||0)-(parseInt(h(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(h(e).css("borderTopWidth"),10)||0)-(parseInt(h(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(e){var t,n,i=this.options,r=e.pageX,o=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(t=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-i.grid[1]:t+i.grid[1]:t,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],
r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(t,n,i){return function(e){i._trigger(t,e,n._uiHash(n))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===h.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||h([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","../escape-selector","../keycode","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}(function(c){var r;return c.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(r=/#.*$/,function(e){var t,n;t=e.href.replace(r,""),n=location.href.replace(r,"");try{t=decodeURIComponent(t)}catch(i){}try{n=decodeURIComponent(n)}catch(i){}return 1<e.hash.length&&t===n}),_create:function(){var t=this,e=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,e.collapsible),this._processTabs(),e.active=this._initialActive(),c.isArray(e.disabled)&&(e.disabled=c.unique(e.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(e.active):this.active=c(),this._refresh(),this.active.length&&this.load(e.active)},_initialActive:function(){var n=this.options.active,e=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(e,t){if(c(t).attr("aria-controls")===i)return n=e,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!e&&0),!e&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):c()}},_tabKeydown:function(e){var t=c(c.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(t),i=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:n++;break;case c.ui.keyCode.UP:case c.ui.keyCode.LEFT:i=!1,n--;break;case c.ui.keyCode.END:n=this.anchors.length-1;break;case c.ui.keyCode.HOME:n=0;break;case c.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case c.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),e.ctrlKey||e.metaKey||(t.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===c.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===c.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===c.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,t){function n(){return i<e&&(e=0),e<0&&(e=i),e}for(var i=this.tabs.length-1;-1!==c.inArray(n(),this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=c.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!c.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=c()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=c()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,e=this.tabs,t=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){c(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){c(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return c("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=c(),this.anchors.each(function(e,t){var n,i,r,o=c(t).uniqueId().attr("id"),s=c(t).closest("li"),a=s.attr("aria-controls");l._isLocal(t)?(r=(n=t.hash).substring(1),i=l.element.find(l._sanitizeSelector(n))):(n="#"+(r=s.attr("aria-controls")||c({}).uniqueId()[0].id),(i=l.element.find(n)).length||(i=l._createPanel(r)).insertAfter(l.panels[e-1]||l.tablist),i.attr("aria-live","polite")),i.length&&(l.panels=l.panels.add(i)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":r,"aria-labelledby":o}),i.attr("aria-labelledby",o)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),e&&(this._off(e.not(this.tabs)),this._off(t.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return c("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var t,n,i;for(c.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),i=0;n=this.tabs[i];i++)t=c(n),!0===e||-1!==c.inArray(i,e)?(t.attr("aria-disabled","true"),this._addClass(t,null,"ui-state-disabled")):(t.removeAttr("aria-disabled"),this._removeClass(t,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var n={};e&&c.each(e.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,t=this.element.parent();"fill"===e?(n=t.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=c(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(n-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=c(this).outerHeight(!0)}),this.panels.each(function(){c(this).height(Math.max(0,n-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.panels.each(function(){n=Math.max(n,c(this).height("").height())}).height(n))},_eventHandler:function(e){var t=this.options,n=this.active,i=c(e.currentTarget).closest("li"),r=i[0]===n[0],o=r&&t.collapsible,s=o?c():this._getPanelForTab(i),a=n.length?this._getPanelForTab(n):c(),l={oldTab:n,oldPanel:a,newTab:o?c():i,newPanel:s};e.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||r&&!t.collapsible||!1===this._trigger("beforeActivate",e,l)||(t.active=!o&&this.tabs.index(i),this.active=r?c():i,this.xhr&&this.xhr.abort(),a.length||s.length||c.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(i),e),this._toggle(e,l))},_toggle:function(e,t){function n(){r.running=!1,r._trigger("activate",e,t)}function i(){r._addClass(t.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&r.options.show?r._show(o,r.options.show,n):(o.show(),n())}var r=this,o=t.newPanel,s=t.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){r._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),i()}):(this._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),i()),s.attr("aria-hidden","true"),t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&s.length?t.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var t,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),t=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:t,currentTarget:t,preventDefault:c.noop}))},_findActive:function(e){return!1===e?c():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+c.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){c.data(this,"ui-tabs-destroy")?c(this).remove():c(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=c(this),t=e.data("ui-tabs-aria-controls");t?e.attr("aria-controls",t).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var e=this.options.disabled;!1!==e&&(n===undefined?e=!1:(n=this._getIndex(n),e=c.isArray(e)?c.map(e,function(e){return e!==n?e:null}):c.map(this.tabs,function(e,t){return t!==n?t:null})),this._setOptionDisabled(e))},disable:function(e){var t=this.options.disabled;if(!0!==t){if(e===undefined)t=!0;else{if(e=this._getIndex(e),-1!==c.inArray(e,t))return;t=c.isArray(t)?c.merge([e],t).sort():[e]}this._setOptionDisabled(t)}},load:function(e,i){e=this._getIndex(e);var r=this,n=this.tabs.eq(e),t=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),s={tab:n,panel:o},a=function(e,t){"abort"===t&&r.panels.stop(!1,!0),r._removeClass(n,"ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};this._isLocal(t[0])||(this.xhr=c.ajax(this._ajaxSettings(t,i,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),r._trigger("load",i,s),a(n,t)},1)}).fail(function(e,t){setTimeout(function(){a(e,t)},1)})))},_ajaxSettings:function(e,n,i){var r=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,t){return r._trigger("beforeLoad",n,c.extend({jqXHR:e,ajaxSettings:t},i))}}},_getPanelForTab:function(e){var t=c(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+t))}}),!1!==c.uiBackCompat&&c.widget("ui.tabs",c.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),c.ui.tabs}),function(d,l){"use strict";var c;d.rails!==l&&d.error("jquery-ujs has already been loaded!");var e=d(document);d.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return d("meta[name=csrf-token]").attr("content")},csrfParam:function(){return d("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=c.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){d('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(e,t,n){var i=d.Event(t);return e.trigger(i,n),!1!==i.result},confirm:function(e){return confirm(e)},ajax:function(e){return d.ajax(e)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==l&&!1!==e.data("remote")},handleRemote:function(i){var e,t,n,r,o,s;if(c.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,o=i.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType,i.is("form")){e=i.data("ujs:submit-button-formmethod")||i.attr("method"),t=i.data("ujs:submit-button-formaction")||i.attr("action"),n=d(i[0]).serializeArray();var a=i.data("ujs:submit-button");a&&(n.push(a),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(c.inputChangeSelector)?(e=i.data("method"),t=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(c.buttonClickSelector)?(e=i.data("method")||"get",t=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(e=i.data("method"),t=c.href(i),n=i.data("params")||null);return s={type:e||"GET",data:n,dataType:o,beforeSend:function(e,t){if(t.dataType===l&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!c.fire(i,"ajax:beforeSend",[e,t]))return!1;i.trigger("ajax:send",e)},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:c.isCrossDomain(t)},r&&(s.xhrFields={withCredentials:r}),t&&(s.url=t),c.ajax(s)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(e){var t=c.href(e),n=e.data("method"),i=e.attr("target"),r=c.csrfToken(),o=c.csrfParam(),s=d('<form method="post" action="'+t+'"></form>'),a='<input name="_method" value="'+n+'" type="hidden" />';o===l||r===l||c.isCrossDomain(t)||(a+='<input name="'+o+'" value="'+r+'" type="hidden" />'),i&&s.attr("target",i),s.hide().append(a).appendTo("body"),s.submit()},formElements:function(e,t){return e.is("form")?d(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){c.formElements(e,c.disableSelector).each(function(){c.disableFormElement(d(this))})},disableFormElement:function(e){var t,n;t=e.is("button")?"html":"val",(n=e.data("disable-with"))!==l&&(e.data("ujs:enable-with",e[t]()),e[t](n)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(e){c.formElements(e,c.enableSelector).each(function(){c.enableFormElement(d(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")!==l&&(e[t](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,n=e.data("confirm"),i=!1;if(!n)return!0;if(c.fire(e,"confirm")){try{i=c.confirm(n)}catch(r){(console.error||console.log).call(console,r.stack||r)}t=c.fire(e,"confirm:complete",[i])}return i&&t},blankInputs:function(e,t,n){var i,r,o,s=d(),a=t||"input,textarea",l=e.find(a),c={};return l.each(function(){(i=d(this)).is("input[type=radio]")?(o=i.attr("name"),c[o]||(0===e.find('input[type=radio]:checked[name="'+o+'"]').length&&(r=e.find('input[type=radio][name="'+o+'"]'),s=s.add(r)),c[o]=o)):(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):!!i.val())===n&&(s=s.add(i))}),!!s.length&&s},nonBlankInputs:function(e,t){return c.blankInputs(e,t,!0)},stopEverything:function(e){return d(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");t!==l&&(e.data("ujs:enable-with",e.html()),e.html(t)),e.bind("click.railsDisable",function(e){return c.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==l&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},c.fire(e,"rails:attachBindings")&&(d.ajaxPrefilter(function(e,t,n){e.crossDomain||c.CSRFProtection(n)}),d(window).on("pageshow.rails",function(){d(d.rails.enableSelector).each(function(){var e=d(this);e.data("ujs:disabled")&&d.rails.enableFormElement(e)}),d(d.rails.linkDisableSelector).each(function(){var e=d(this);e.data("ujs:disabled")&&d.rails.enableElement(e)})}),e.on("ajax:complete",c.linkDisableSelector,function(){c.enableElement(d(this))}),e.on("ajax:complete",c.buttonDisableSelector,function(){c.enableFormElement(d(this))}),e.on("click.rails",c.linkClickSelector,function(e){var t=d(this),n=t.data("method"),i=t.data("params"),r=e.metaKey||e.ctrlKey;if(!c.allowAction(t))return c.stopEverything(e);if(!r&&t.is(c.linkDisableSelector)&&c.disableElement(t),c.isRemote(t)){if(r&&(!n||"GET"===n)&&!i)return!0;var o=c.handleRemote(t);return!1===o?c.enableElement(t):o.fail(function(){c.enableElement(t)}),!1}return n?(c.handleMethod(t),!1):void 0}),e.on("click.rails",c.buttonClickSelector,function(e){var t=d(this);if(!c.allowAction(t)||!c.isRemote(t))return c.stopEverything(e);t.is(c.buttonDisableSelector)&&c.disableFormElement(t);var n=c.handleRemote(t);return!1===n?c.enableFormElement(t):n.fail(function(){c.enableFormElement(t)}),!1}),e.on("change.rails",c.inputChangeSelector,function(e){var t=d(this);return c.allowAction(t)&&c.isRemote(t)?(c.handleRemote(t),!1):c.stopEverything(e)}),e.on("submit.rails",c.formSubmitSelector,function(e){var t,n,i=d(this),r=c.isRemote(i);if(!c.allowAction(i))return c.stopEverything(e);if(i.attr("novalidate")===l)if(i.data("ujs:formnovalidate-button")===l){if((t=c.blankInputs(i,c.requiredInputSelector,!1))&&c.fire(i,"ajax:aborted:required",[t]))return c.stopEverything(e)}else i.data("ujs:formnovalidate-button",l);if(r){if(n=c.nonBlankInputs(i,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(i)},13);var o=c.fire(i,"ajax:aborted:file",[n]);return o||setTimeout(function(){c.enableFormElements(i)},13),o}return c.handleRemote(i),!1}setTimeout(function(){c.disableFormElements(i)},13)}),e.on("click.rails",c.formInputClickSelector,function(e){var t=d(this);if(!c.allowAction(t))return c.stopEverything(e);var n=t.attr("name"),i=n?{name:n,value:t.val()}:null,r=t.closest("form");0===r.length&&(r=d("#"+t.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",t.attr("formnovalidate")),r.data("ujs:submit-button-formaction",t.attr("formaction")),r.data("ujs:submit-button-formmethod",t.attr("formmethod"))}),e.on("ajax:send.rails",c.formSubmitSelector,function(e){this===e.target&&c.disableFormElements(d(this))}),e.on("ajax:complete.rails",c.formSubmitSelector,function(e){this===e.target&&c.enableFormElements(d(this))}),d(function(){c.refreshCSRFTokens()}))}(jQuery),function(){window.ActiveAdmin={}}.call(this),function(){var e;e=function(){if($(".batch_actions_selector li a").click(function(e){var t,n;return e.stopPropagation(),e.preventDefault(),(t=$(this).data("confirm"))?ActiveAdmin.modal_dialog(t,$(this).data("inputs"),(n=this,function(e){return $(n).trigger("confirm:complete",e)})):$(this).trigger("confirm:complete")}),$(".batch_actions_selector li a").on("confirm:complete",function(e,t){var n;return(n=JSON.stringify(t))?$("#batch_action_inputs").removeAttr("disabled").val(n):$("#batch_action_inputs").attr("disabled","disabled"),$("#batch_action").val($(this).data("action")),$("#collection_selection").submit()}),$(".batch_actions_selector").length&&$(":checkbox.toggle_all").length)return $(".paginated_collection table.index_table").length?$(".paginated_collection table.index_table").tableCheckboxToggler():$(".paginated_collection").checkboxToggler(),$(document).on("change",".paginated_collection :checkbox",function(){return $(".paginated_collection :checkbox:checked").length?$(".batch_actions_selector").each(function(){return $(this).aaDropdownMenu("enable")}):$(".batch_actions_selector").each(function(){return $(this).aaDropdownMenu("disable")})})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){ActiveAdmin.CheckboxToggler=function(){function e(e,t){var n;this.options=e,this.container=t,n={},this.options=$.extend(n,this.options),this._init(),this._bind()}return e.prototype._init=function(){if(!this.container)throw new Error("Container element not found");if(this.$container=$(this.container),!this.$container.find(".toggle_all").length)throw new Error('"toggle all" checkbox not found');return this.toggle_all_checkbox=this.$container.find(".toggle_all"),this.checkboxes=this.$container.find(":checkbox").not(this.toggle_all_checkbox)},e.prototype._bind=function(){var t,e;return this.checkboxes.change((t=this,function(e){return t._didChangeCheckbox(e.target)})),this.toggle_all_checkbox.change((e=this,function(){return e._didChangeToggleAllCheckbox()}))},e.prototype._didChangeCheckbox=function(){var e,t,n;return e=(t=this.checkboxes.filter(":checked").length)===this.checkboxes.length,n=0<t&&t<this.checkboxes.length,this.toggle_all_checkbox.prop({checked:e,indeterminate:n})},e.prototype._didChangeToggleAllCheckbox=function(){var e;return e=this.toggle_all_checkbox.prop("checked"),this.checkboxes.prop({checked:e}),e},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e}(),$.widget.bridge("checkboxToggler",ActiveAdmin.CheckboxToggler)}.call(this),function(){var e;ActiveAdmin.DropdownMenu=function(){function e(e,t){var n;this.options=e,this.element=t,this.$element=$(this.element),n={fadeInDuration:20,fadeOutDuration:100,onClickActionItemCallback:null},this.options=$.extend(n,this.options),this.isOpen=!1,this.$menuButton=this.$element.find(".dropdown_menu_button"),this.$menuList=this.$element.find(".dropdown_menu_list_wrapper"),this._buildMenuList(),this._bind()}return e.prototype.open=function(){return this.isOpen=!0,this.$menuList.fadeIn(this.options.fadeInDuration),this._position(),this},e.prototype.close=function(){return this.isOpen=!1,this.$menuList.fadeOut(this.options.fadeOutDuration),this},e.prototype.destroy=function(){return this.$element=null,this},e.prototype.isDisabled=function(){return this.$menuButton.hasClass("disabled")},e.prototype.disable=function(){return this.$menuButton.addClass("disabled")},e.prototype.enable=function(){return this.$menuButton.removeClass("disabled")},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e.prototype._buildMenuList=function(){return this.$nipple=$('<div class="dropdown_menu_nipple"></div>'),this.$menuList.prepend(this.$nipple),this.$menuList.hide()},e.prototype._bind=function(){var e,t;return $("body").click((e=this,function(){if(e.isOpen)return e.close()})),this.$menuButton.click((t=this,function(){return t.isDisabled()||(t.isOpen?t.close():t.open()),!1}))},e.prototype._position=function(){var e,t,n,i,r,o,s,a;return this.$menuList.css("top",this.$menuButton.position().top+this.$menuButton.outerHeight()+10),n=(t=this.$menuButton.position().left)+2*(e=this.$menuButton.outerWidth()/2),o=this.$menuList.outerWidth()/2,s=this.$nipple.outerWidth()/2,a=$(window).width(),r=t+e+o,(i=t+e-o)<0?(this.$menuList.css("left",t),this.$nipple.css("left",e-s)):a<r?(this.$menuList.css("right",a-n),this.$nipple.css("right",e-s)):(this.$menuList.css("left",i),this.$nipple.css("left",o-s))},e}(),$.widget.bridge("aaDropdownMenu",ActiveAdmin.DropdownMenu),e=function(){return $(".dropdown_menu").aaDropdownMenu()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){ActiveAdmin.flash=function(){function e(e,t,n){this.message=e,this.type=null!=t?t:"notice",this.reference=jQuery("<div>").addClass("flash flash_"+this.type).text(this.message),jQuery(".flashes").append(this.reference),null!=n&&this.close_after(n)}return e.error=function(e,t){return new this(e,"error",t)},e.notice=function(e,t){return new this(e,"notice",t)},e.prototype.reference=function(){return this.reference},e.prototype.close_after=function(e){return setTimeout((t=this,function(){return t.close()}),1e3*e);var t},e.prototype.close=function(){return this.reference.remove()},e}()}.call(this),function(){var e,a;$(function(){return $(document).on("click","a.button.has_many_remove",function(e){var t,n;return e.preventDefault(),t=$(this).closest(".has_many_container"),n=$(this).closest("fieldset"),a(t),t.trigger("has_many_remove:before",[n,t]),n.remove(),t.trigger("has_many_remove:after",[n,t])}),$(document).on("click","a.button.has_many_add",function(e){var t,n,i,r,o,s;if(e.preventDefault(),(o=$(this).closest(".has_many_container")).trigger(t=$.Event("has_many_add:before"),[o]),!t.isDefaultPrevented())return r=o.data("has_many_index")||o.children("fieldset").length-1,o.data({has_many_index:++r}),s=new RegExp($(this).data("placeholder"),"g"),i=$(this).data("html").replace(s,r),n=$(i).insertBefore(this),a(o),o.trigger("has_many_add:after",[n,o])}),$(document).on("change",'.has_many_container[data-sortable] :input[name$="[_destroy]"]',function(){return a($(this).closest(".has_many"))}),e(),$(document).on("has_many_add:after",".has_many_container",e)}),e=function(){var e;return(e=$(".has_many_container[data-sortable]:not(.ui-sortable)")).sortable({items:"> fieldset",handle:"> ol > .handle",stop:a}),e.each(a)},a=function(e){var n,i;return e=e instanceof jQuery?e:$(this),n=e.data("sortable"),i=parseInt(e.data("sortable-start")||0,10),e.children("fieldset").each(function(){var e,t;if(e=$(this).find("> ol > .input > :input[name$='[_destroy]']"),(t=$(this).find("> ol > .input > :input[name$='["+n+"]']")).length)return t.val(e.is(":checked")?"":i++)})}}.call(this),function(){ActiveAdmin.modal_dialog=function(e,t,n){var i,r,o,s,a,l,c,d,u,f,h,p;for(l in s='<form id="dialog_confirm" title="'+e+'"><ul>',t){if(f=t[l],/^(datepicker|checkbox|text|number)$/.test(f))p="input";else if("textarea"===f)p="textarea";else{if(!$.isArray(f))throw new Error("Unsupported input type: {"+l+": "+f+"}");p=(d=["select","option",f,""])[0],r=d[1],c=d[2],f=d[3]}a="datepicker"===f?f:"",s+="<li>\n<label>"+(l.charAt(0).toUpperCase()+l.slice(1))+"</label>\n<"+p+' name="'+l+'" class="'+a+'" type="'+f+'">'+(c?function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)h=c[e],i=$("<"+r+"/>"),$.isArray(h)?i.text(h[0]).val(h[1]):i.text(h),n.push(i.wrap("<div>").parent().html());return n}().join(""):"")+"</"+p+"></li>",p=(u=[])[0],r=u[1],c=u[2],f=u[3],a=u[4]}return s+="</ul></form>",o=$(s).appendTo("body"),$("body").trigger("modal_dialog:before_open",[o]),o.dialog({modal:!0,open:function(){return $("body").trigger("modal_dialog:after_open",[o])},dialogClass:"active_admin_dialog",buttons:{OK:function(){return n($(this).serializeObject()),$(this).dialog("close")},Cancel:function(){return $(this).dialog("close").remove()}}})}}.call(this),function(){var e;ActiveAdmin.PerPage=function(){function e(e,t){this.options=e,this.element=t,this.$element=$(this.element),this._init(),this._bind()}return e.prototype._init=function(){return this.$params=this._queryParams()},e.prototype._bind=function(){return this.$element.change((e=this,function(){return e.$params.per_page=e.$element.val(),delete e.$params.page,"undefined"!=typeof Turbolinks?Turbolinks.visit(window.location.href.split("?")[0]+"?"+$.param(e.$params)):location.search=$.param(e.$params)}));var e},e.prototype._queryParams=function(){var e,t,n,i;for(n=window.location.search.substring(1),t={},i=/([^&=]+)=([^&]*)/g;e=i.exec(n);)t[this._decode(e[1])]=this._decode(e[2]);return t},e.prototype._decode=function(e){
return decodeURIComponent(e.replace(/\+/g,"%20"))},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e}(),$.widget.bridge("perPage",ActiveAdmin.PerPage),e=function(){return $(".pagination_per_page select").perPage()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var t=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;ActiveAdmin.TableCheckboxToggler=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype._init=function(){return n.__super__._init.apply(this,arguments)},n.prototype._bind=function(){return n.__super__._bind.apply(this,arguments),this.$container.find("tbody td").click((t=this,function(e){if("checkbox"!==e.target.type)return t._didClickCell(e.target)}));var t},n.prototype._didChangeCheckbox=function(e){return n.__super__._didChangeCheckbox.apply(this,arguments),$(e).parents("tr").toggleClass("selected",e.checked)},n.prototype._didChangeToggleAllCheckbox=function(){return this.$container.find("tbody tr").toggleClass("selected",n.__super__._didChangeToggleAllCheckbox.apply(this,arguments))},n.prototype._didClickCell=function(e){return $(e).parent("tr").find(":checkbox").click()},n}(ActiveAdmin.CheckboxToggler),$.widget.bridge("tableCheckboxToggler",ActiveAdmin.TableCheckboxToggler)}.call(this),function(){$.ui.dialog.prototype._focusTabbable=function(){return this.uiDialog.focus()}}.call(this),function(){$.fn.serializeObject=function(){var e,t,n,i,r;for(i={},e=0,t=(r=this.serializeArray()).length;e<t;e++)i[(n=r[e]).name]=n.value;return i}}.call(this),function(){var e;e=function(){var e;if((e=$(".table_tools .batch_actions_selector")).length)return e.next().css({width:"calc(100% - 10px - "+e.outerWidth()+"px)","float":"right"})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $(document).on("focus","input.datepicker:not(.hasDatepicker)",function(){var e,t,n;if("date"!==(t=$(this))[0].type)return e={dateFormat:"yy-mm-dd"},n=t.data("datepicker-options"),t.datepicker($.extend(e,n))})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $(".clear_filters_btn").click(function(e){var i,r,o;return r=window.location.search.slice(1).split("&"),o=/^(q\[|q%5B|q%5b|page|commit)/,"undefined"!=typeof Turbolinks?(Turbolinks.visit(window.location.href.split("?")[0]+"?"+function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)(i=r[e]).match(o)||n.push(i);return n}().join("&")),e.preventDefault()):window.location.search=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)(i=r[e]).match(o)||n.push(i);return n}().join("&")}),$(".filter_form").submit(function(e){if($(this).find(":input").filter(function(){return""===this.value}).prop("disabled",!0),"undefined"!=typeof Turbolinks)return Turbolinks.visit(window.location.href.split("?")[0]+"?"+$(this).serialize()),e.preventDefault()}),$(".filter_form_field.select_and_search select").change(function(){return $(this).siblings("input").prop({name:"q["+this.value+"]"})})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $("#active_admin_content .tabs").tabs()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t)}:n(window.jQuery)}(function(ze){var a=function(e,t){this.id=++ze.FE.ID,this.opts=ze.extend(!0,{},ze.extend({},a.DEFAULTS,"object"==typeof t&&t));var n=JSON.stringify(this.opts);ze.FE.OPTS_MAPPING[n]=ze.FE.OPTS_MAPPING[n]||this.id,this.sid=ze.FE.OPTS_MAPPING[n],ze.FE.SHARED[this.sid]=ze.FE.SHARED[this.sid]||{},this.shared=ze.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=ze(e),this.$oel.data("froala.editor",this),this.o_doc=e.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var i=ze(this.o_win).scrollTop();this.$oel.on("froala.doInit",ze.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=ze(this.doc),this.$win=ze(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(ze.FE.PLUGINS)),this.opts.initOnClick?(this.load(ze.FE.MODULES),this.$el.on("touchstart.init",function(){ze(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){ze(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",ze.proxy(function(e){if("touchend"==e.type&&!this.$el.data("touched"))return!0;if(1===e.which||!e.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(ze.FE.MODULES),this.load(ze.FE.PLUGINS);var t=e.originalEvent&&e.originalEvent.originalTarget;t&&"IMG"==t.tagName&&ze(t).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==e.type&&this.image&&e.originalEvent&&e.originalEvent.target&&ze(e.originalEvent.target).is("img")&&setTimeout(ze.proxy(function(){this.image.edit(ze(e.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this)),this.events.trigger("initializationDelayed")):(this.load(ze.FE.MODULES),this.load(ze.FE.PLUGINS),ze(this.o_win).scrollTop(i),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};a.DEFAULTS={initOnClick:!1,pluginsEnabled:null},a.MODULES={},a.PLUGINS={},a.VERSION="2.7.1",a.INSTANCES=[],a.OPTS_MAPPING={},a.SHARED={},a.ID=0,a.prototype._init=function(){var e=this.$oel.prop("tagName");this.$oel.closest("label").length;var t=ze.proxy(function(){"TEXTAREA"!=e&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=ze('<iframe src="about:blank" frameBorder="0">'),this.$wp=ze("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document):(this.$el=ze("<div></div>"),this.el=this.$el.get(0),this.$wp=ze("<div></div>").append(this.$el),this.$box.html(this.$wp)),this.$oel.trigger("froala.doInit")},this),n=ze.proxy(function(){this.$box=ze("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,ze.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,ze.proxy(function(){this.events.trigger("form.reset")},this)),t()},this),i=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),r=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),o=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?o():"TEXTAREA"==e?n():"A"==e?i():"IMG"==e?r():"BUTTON"==e||"INPUT"==e?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,o()):t()},a.prototype.load=function(e){for(var t in e)if(e.hasOwnProperty(t)){if(this[t])continue;if(ze.FE.PLUGINS[t]&&this.opts.pluginsEnabled.indexOf(t)<0)continue;if(this[t]=new e[t](this),this[t]._init&&(this[t]._init(),this.opts.initOnClick&&"core"==t))return!1}},a.prototype.destroy=function(){this.shared.count--,this.events.$off();var e=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var t in this.shared)this.shared.hasOwnProperty(t)&&(this.shared[t],ze.FE.SHARED[this.sid][t]=null);ze.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(e),ze.FE.INSTANCES.splice(ze.FE.INSTANCES.indexOf(this),1)},ze.fn.froalaEditor=function(r){for(var o=[],e=0;e<arguments.length;e++)o.push(arguments[e]);if("string"==typeof r){var s=[];return this.each(function(){var e=ze(this).data("froala.editor");if(e){var t,n;if(0<r.indexOf(".")&&e[r.split(".")[0]]?(e[r.split(".")[0]]&&(t=e[r.split(".")[0]]),n=r.split(".")[1]):(t=e,n=r.split(".")[0]),!t[n])return ze.error("Method "+r+" does not exist in Froala Editor.");var i=t[n].apply(e,o.slice(1));void 0===i?s.push(this):0===s.length&&s.push(i)}}),1==s.length?s[0]:s}if("object"==typeof r||!r)return this.each(function(){ze(this).data("froala.editor")||new a(this,r)})},ze.fn.froalaEditor.Constructor=a,ze.FroalaEditor=a,ze.FE=a,ze.FE.XS=0,ze.FE.SM=1,ze.FE.MD=2,ze.FE.LG=3;var e="a-z\\u0080-\\u009f\\u00a1-\\uffff0-9";if(ze.FE.LinkRegExCommon="((["+e+"])|(["+e+"](\\.|-|_))){1,}["+e+"]{1,}",ze.FE.LinkRegExEnd="((:[0-9]{1,5})|)(((\\/|\\?|#)[a-z\\u00a1-\\uffff0-9@?\\|!^=%&amp;/~+#-_{}]*)|())",ze.FE.LinkRegExTLD="(("+ze.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",ze.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/"+ze.FE.LinkRegExCommon+")",ze.FE.LinkRegExAuth="((ftp|http|https):\\/\\/[\\u0021-\\uffff]{1,}@"+ze.FE.LinkRegExCommon+")",ze.FE.LinkRegExWWW="(www\\."+ze.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",ze.FE.LinkRegEx="("+ze.FE.LinkRegExTLD+"|"+ze.FE.LinkRegExHTTP+"|"+ze.FE.LinkRegExWWW+"|"+ze.FE.LinkRegExAuth+")"+ze.FE.LinkRegExEnd,ze.FE.LinkProtocols=["mailto","tel","sms","notes","data"],ze.FE.MAIL_REGEX=/.+@.+\..+/i,ze.FE.MODULES.helpers=function(o){function s(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}function e(){var e={},t=s();if(0<t)e.msie=!0;else{var n=navigator.userAgent.toLowerCase(),i=/(edge)[ \/]([\w.]+)/.exec(n)||/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r={browser:i[1]||"",version:i[2]||"0"};i[1]&&(e[r.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function t(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!r()}function n(){return/(Android)/g.test(navigator.userAgent)&&!r()}function i(){return/(Blackberry)/g.test(navigator.userAgent)}function r(){return/(Windows Phone)/gi.test(navigator.userAgent)}function a(){return n()||t()||i()}function l(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function c(e){return parseInt(e,10)||0}function d(){var e=ze('<div class="fr-visibility-helper"></div>').appendTo("body:first"),t=c(e.css("margin-left"));return e.remove(),t}function u(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function f(e){return!!/^(https?:|ftps?:|)\/\//i.test(e)&&(e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),new RegExp("^"+ze.FE.LinkRegEx+"$","gi").test(e))}function h(e){if(/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(e))return e;if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!f(e)&&!f("http:"+e))return""}else{if(new RegExp("^("+ze.FE.LinkProtocols.join("|")+"):\\/\\/","i").test(e))return e;e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}")}return e}function p(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:("#"+t((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+t(e[2])+t(e[3])).toUpperCase():""}catch(s){return null}}function m(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function v(e){var t=(e.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(t)<0){if(!A){var n=ze('<div dir="'+("rtl"==o.opts.direction?"rtl":"auto")+'" style="text-align: '+o.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');ze("body:first").append(n);var i=n.find("#s1").get(0).getBoundingClientRect().left,r=n.find("#s2").get(0).getBoundingClientRect().left;n.remove(),A=i<r?"left":"right"}t=A}return t}function b(){return null==S&&(S=0<=navigator.platform.toUpperCase().indexOf("MAC")),S}function E(){function e(e,t){var o=e[t];e[t]=function(e){var t,n=!1,i=!1;if(e&&e.match(a)){e=e.replace(a,""),this.parentNode||(s.appendChild(this),i=!0);var r=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),n=!0),t=o.call(r,"#"+this.id+" "+e),n&&(this.id=""),i&&s.removeChild(this),t}return o.call(this,e)}}var s=o.o_doc.createElement("div");try{s.querySelectorAll(":scope *")}catch(t){var a=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll"),e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}function _(){return o.o_win.pageYOffset?o.o_win.pageYOffset:o.o_doc.documentElement&&o.o_doc.documentElement.scrollTop?o.o_doc.documentElement.scrollTop:o.o_doc.body.scrollTop?o.o_doc.body.scrollTop:0}function y(){return o.o_win.pageXOffset?o.o_win.pageXOffset:o.o_doc.documentElement&&o.o_doc.documentElement.scrollLeft?o.o_doc.documentElement.scrollLeft:o.o_doc.body.scrollLeft?o.o_doc.body.scrollLeft:0}function T(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this,n=this;if(!document.documentElement.contains(t))return null;do{if(n.matches(e))return n;n=n.parentElement}while(null!==n);return null})}function C(){o.browser=e(),E(),T()}var A,S=null;return{_init:C,isIOS:t,isMac:b,isAndroid:n,isBlackberry:i,isWindowsPhone:r,isMobile:a,requestAnimationFrame:l,getPX:c,screenSize:d,isTouch:u,sanitizeURL:h,isArray:p,RGBToHex:g,HEXtoRGB:m,isURL:f,getAlignment:v,scrollTop:_,scrollLeft:y}},ze.FE.MODULES.events=function(a){function e(e,t,n){v(e,t,n)}function t(){e(a.$el,"cut copy paste beforepaste",function(e){_(e.type,[e])})}function n(){e(a.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){_(e.type,[e])}),m("mousedown",function(){for(var e=0;e<ze.FE.INSTANCES.length;e++)ze.FE.INSTANCES[e]!=a&&ze.FE.INSTANCES[e].popups&&ze.FE.INSTANCES[e].popups.areVisible()&&ze.FE.INSTANCES[e].$el.find(".fr-marker").remove()})}function i(){e(a.$el,"keydown keypress keyup input",function(e){_(e.type,[e])})}function r(){e(a.$win,a._mousedown,function(e){_("window.mousedown",[e]),f()}),e(a.$win,a._mouseup,function(e){_("window.mouseup",[e])}),e(a.$win,"cut copy keydown keyup touchmove touchend",function(e){_("window."+e.type,[e])})}function o(){e(a.$doc,"dragend drop",function(e){_("document."+e.type,[e])})}function s(e){if(void 0===e&&(e=!0),!a.$wp)return!1;if(a.helpers.isIOS()&&a.$win.get(0).focus(),!a.core.hasFocus()&&e){var t=a.$win.scrollTop();return a.browser.msie&&a.$box&&a.$box.css("position","fixed"),a.browser.msie&&a.$wp&&a.$wp.css("overflow","visible"),h(),a.$el.focus(),f(),a.browser.msie&&a.$box&&a.$box.css("position",""),a.browser.msie&&a.$wp&&a.$wp.css("overflow","auto"),t!=a.$win.scrollTop()&&a.$win.scrollTop(t),!1}if(!a.core.hasFocus()||0<a.$el.find(".fr-marker").length)return!1;if(a.selection.info(a.el).atStart&&a.selection.isCollapsed()&&null!=a.html.defaultTag()){var n=a.markers.insert();if(n&&!a.node.blockParent(n)){ze(n).remove();var i=a.$el.find(a.html.blockTagsQuery()).get(0);i&&(ze(i).prepend(ze.FE.MARKERS),a.selection.restore())}else n&&ze(n).remove()}}function l(){e(a.$el,"focus",function(e){p()&&(s(!1),!1===x&&_(e.type,[e]))}),e(a.$el,"blur",function(e){p()&&!0===x&&(_(e.type,[e]),f())}),m("focus",function(){x=!0}),m("blur",function(){x=!1})}function c(){a.helpers.isMobile()?(a._mousedown="touchstart",a._mouseup="touchend",a._move="touchmove",a._mousemove="touchmove"):(a._mousedown="mousedown",a._mouseup="mouseup",a._move="",a._mousemove="mousemove")}function d(e){var t=ze(e.currentTarget);return a.edit.isDisabled()||a.node.hasClass(t.get(0),"fr-disabled")?(e.preventDefault(),!1):"mousedown"===e.type&&1!==e.which||(a.helpers.isMobile()||e.preventDefault(),(a.helpers.isAndroid()||a.helpers.isWindowsPhone())&&0===t.parents(".fr-dropdown-menu").length&&(e.preventDefault(),e.stopPropagation()),t.addClass("fr-selected"),void a.events.trigger("commands.mousedown",[t]))}function u(e,t){var n=ze(e.currentTarget);if(a.edit.isDisabled()||a.node.hasClass(n.get(0),"fr-disabled"))return e.preventDefault(),!1;if("mouseup"===e.type&&1!==e.which)return!0;if(!a.node.hasClass(n.get(0),"fr-selected"))return!0;if("touchmove"!=e.type){if(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!a.node.hasClass(n.get(0),"fr-selected"))return a.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(a.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),n.data("dragging")||n.attr("disabled"))return n.removeData("dragging"),!1;var i=n.data("timeout");i&&(clearTimeout(i),n.removeData("timeout")),t.apply(a,[e])}else n.data("timeout")||n.data("timeout",setTimeout(function(){n.data("dragging",!0)},100))}function f(){S=!0}function h(){S=!1}function p(){return S}function g(e,t,n){v(e,a._mousedown,t,function(e){a.edit.isDisabled()||d(e)},!0),v(e,a._mouseup+" "+a._move,t,function(e){a.edit.isDisabled()||u(e,n)},!0),v(e,"mousedown click mouseup",t,function(e){a.edit.isDisabled()||e.stopPropagation()},!0),m("window.mouseup",function(){a.edit.isDisabled()||(e.find(t).removeClass("fr-selected"),f())})}function m(e,t,n){var i,r=e.split(" ");if(1<r.length){for(var o=0;o<r.length;o++)m(r[o],t,n);return!0}void 0===n&&(n=!1),i=0!==e.indexOf("shared.")?w[e]=w[e]||[]:a.shared._events[e]=a.shared._events[e]||[],n?i.unshift(t):i.push(t)}function v(e,t,n,i,r){"function"==typeof n&&(r=i,i=n,n=!1);var o=r?a.shared.$_events:R,s=r?a.sid:a.id;n?e.on(t.split(" ").join(".ed"+s+" ")+".ed"+s,n,i):e.on(t.split(" ").join(".ed"+s+" ")+".ed"+s,i),o.push([e,t.split(" ").join(".ed"+s+" ")+".ed"+s])}function b(e){for(var t=0;t<e.length;t++)e[t][0].off(e[t][1])}function E(){b(R),R=[],0===a.shared.count&&(b(a.shared.$_events),a.shared.$_events=[])}function _(e,t,n){if(!a.edit.isDisabled()||n){var i,r;if(0!==e.indexOf("shared."))i=w[e];else{if(0<a.shared.count)return!1;i=a.shared._events[e]}if(i)for(var o=0;o<i.length;o++)if(!1===(r=i[o].apply(a,t)))return!1;return!1!==(r=a.$oel.triggerHandler("froalaEditor."+e,ze.merge([a],t||[])))&&r}}function y(e,t,n){if(!a.edit.isDisabled()||n){var i,r;if(0!==e.indexOf("shared."))i=w[e];else{if(0<a.shared.count)return!1;i=a.shared._events[e]}if(i)for(var o=0;o<i.length;o++)void 0!==(r=i[o].apply(a,[t]))&&(t=r);return void 0!==(r=a.$oel.triggerHandler("froalaEditor."+e,ze.merge([a],[t])))&&(t=r),t}}function T(){for(var e in w)w.hasOwnProperty(e)&&delete w[e]}function C(){for(var e in a.shared._events)a.shared._events.hasOwnProperty(e)&&delete a.shared._events[e]}function A(){a.shared.$_events=a.shared.$_events||[],a.shared._events={},c(),n(),r(),o(),i(),l(),f(),t(),m("destroy",T),m("shared.destroy",C)}var S,w={},x=!1,R=[];return{_init:A,on:m,trigger:_,bindClick:g,disableBlur:h,enableBlur:f,blurActive:p,focus:s,chainTrigger:y,$on:v,$off:E}},ze.FE.MODULES.node=function(s){function a(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function l(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&0<=ze.FE.BLOCK_TAGS.indexOf(e.tagName.toLowerCase())}function e(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()}function t(e,t){if(!e)return!0;if(e.querySelector("table"))return!1;var n=a(e);1==n.length&&l(n[0])&&(n=a(n[0]));for(var i=!1,r=0;r<n.length;r++){var o=n[r];if(!(t&&s.node.hasClass(o,"fr-marker")||o.nodeType==Node.TEXT_NODE&&0===o.textContent.length)){if("BR"!=o.tagName&&0<(o.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length)return!1;if(i)return!1;"BR"==o.tagName&&(i=!0)}}return!(e.querySelectorAll(ze.FE.VOID_ELEMENTS.join(",")).length-e.querySelectorAll("br").length||e.querySelector(s.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||1<e.querySelectorAll(ze.FE.BLOCK_TAGS.join(",")).length||e.querySelector(s.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function n(e){for(;e&&e.parentNode!==s.el&&(!e.parentNode||!s.node.hasClass(e.parentNode,"fr-inner"));)if(l(e=e.parentNode))return e;return null}function i(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!0),t.push(s.el),0<=t.indexOf(e.parentNode)||e.parentNode&&s.node.hasClass(e.parentNode,"fr-inner")||e.parentNode&&0<=ze.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)&&n)return null;for(;t.indexOf(e.parentNode)<0&&e.parentNode&&!s.node.hasClass(e.parentNode,"fr-inner")&&(ze.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)<0||!n)&&(!l(e)||!l(e.parentNode)||!n);)e=e.parentNode;return e}function c(e){var t={},n=e.attributes;if(n)for(var i=0;i<n.length;i++){var r=n[i];t[r.nodeName]=r.value}return t}function r(e){for(var t="",n=c(e),i=Object.keys(n).sort(),r=0;r<i.length;r++){var o=i[r],s=n[o];s.indexOf("'")<0&&0<=s.indexOf('"')?t+=" "+o+"='"+s+"'":(0<=s.indexOf('"')&&0<=s.indexOf("'")&&(s=s.replace(/"/g,"&quot;")),t+=" "+o+'="'+s+'"')}return t}function o(e){for(var t=e.attributes,n=t.length-1;0<=n;n--){var i=t[n];e.removeAttribute(i.nodeName)}}function d(e){return"<"+e.tagName.toLowerCase()+r(e)+">"}function u(e){return"</"+e.tagName.toLowerCase()+">"}function f(e,t){void 0===t&&(t=!0);for(var n=e.previousSibling;n&&t&&s.node.hasClass(n,"fr-marker");)n=n.previousSibling;return!n||n.nodeType==Node.TEXT_NODE&&""===n.textContent&&f(n)}function h(e,t){void 0===t&&(t=!0);for(var n=e.nextSibling;n&&t&&s.node.hasClass(n,"fr-marker");)n=n.nextSibling;return!n||n.nodeType==Node.TEXT_NODE&&""===n.textContent&&h(n)}function p(e){return e&&e.nodeType==Node.ELEMENT_NODE&&0<=ze.FE.VOID_ELEMENTS.indexOf((e.tagName||"").toLowerCase())}function g(e){return!!e&&0<=["UL","OL"].indexOf(e.tagName)}function m(e){return e===s.el}function v(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&0<=(e.getAttribute("class")||"").indexOf("fr-deletable")}function b(e){return e===s.doc.activeElement&&(!s.doc.hasFocus||s.doc.hasFocus())&&!!(m(e)||e.type||e.href||~e.tabIndex)}function E(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function _(e,t){return e instanceof ze&&(e=e.get(0)),e&&e.classList&&e.classList.contains(t)}function y(e){return s.browser.msie?e:{acceptNode:e}}return{isBlock:l,isEmpty:t,blockParent:n,deepestParent:i,rawAttributes:c,attributes:r,clearAttributes:o,openTagString:d,closeTagString:u,isFirstSibling:f,isLastSibling:h,isList:g,isLink:e,isElement:m,contents:a,isVoid:p,hasFocus:b,isEditable:E,isDeletable:v,hasClass:_,filter:y}},ze.FE.INVISIBLE_SPACE="&#8203;",ze.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",ze.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",ze.FE.MARKERS=ze.FE.START_MARKER+ze.FE.END_MARKER,ze.FE.MODULES.markers=function(c){function d(e,t){return ze('<span class="fr-marker" data-id="'+t+'" data-type="'+e+'" style="display: '+(c.browser.safari?"none":"inline-block")+'; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",c.doc)[0]}function e(e,t,n){var i,r,o;try{var s=e.cloneRange();if(s.collapse(t),s.insertNode(d(t,n)),!0===t)for(o=(i=c.$el.find('span.fr-marker[data-type="true"][data-id="'+n+'"]').get(0)).nextSibling;o&&o.nodeType===Node.TEXT_NODE&&0===o.textContent.length;)ze(o).remove(),o=i.nextSibling;if(!0===t&&!e.collapsed){for(;!c.node.isElement(i.parentNode)&&!o;)ze(i.parentNode).after(i),o=i.nextSibling;if(o&&o.nodeType===Node.ELEMENT_NODE&&c.node.isBlock(o)){for(r=[o];o=r[0],(r=c.node.contents(o))[0]&&c.node.isBlock(r[0]););ze(o).prepend(ze(i))}}if(!1===t&&!e.collapsed){if((o=(i=c.$el.find('span.fr-marker[data-type="false"][data-id="'+n+'"]').get(0)).previousSibling)&&o.nodeType===Node.ELEMENT_NODE&&c.node.isBlock(o)){for(r=[o];o=r[r.length-1],(r=c.node.contents(o))[r.length-1]&&c.node.isBlock(r[r.length-1]););ze(o).append(ze(i))}i.parentNode&&0<=["TD","TH"].indexOf(i.parentNode.tagName)&&i.parentNode.previousSibling&&!i.previousSibling&&ze(i.parentNode.previousSibling).append(i)}var a=c.$el.find('span.fr-marker[data-type="'+t+'"][data-id="'+n+'"]').get(0);return a&&(a.style.display="none"),a}catch(l){return null}}function l(){if(!c.$wp)return null;try{var e=c.selection.ranges(0),t=e.commonAncestorContainer;if(t!=c.el&&0===c.$el.find(t).length)return null;var n=e.cloneRange(),i=e.cloneRange();n.collapse(!0);var r=ze('<span class="fr-marker" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",c.doc)[0];if(n.insertNode(r),r=c.$el.find("span.fr-marker").get(0)){for(var o=r.nextSibling;o&&o.nodeType===Node.TEXT_NODE&&0===o.textContent.length;)ze(o).remove(),o=c.$el.find("span.fr-marker").get(0).nextSibling;return c.selection.clear(),c.selection.get().addRange(i),r}return null}catch(s){}}function t(){c.selection.isCollapsed()||c.selection.remove();var e=c.$el.find(".fr-marker").get(0);if(null==e&&(e=l()),null==e)return null;var t=c.node.deepestParent(e);if(t||(t=c.node.blockParent(e))&&"LI"!=t.tagName&&(t=null),t)if(c.node.isBlock(t)&&c.node.isEmpty(t))"LI"!=t.tagName||t.parentNode.firstElementChild!=t||c.node.isEmpty(t.parentNode)?ze(t).replaceWith('<span class="fr-marker"></span>'):ze(t).append('<span class="fr-marker"></span>');else if(c.cursor.isAtStart(e,t))ze(t).before('<span class="fr-marker"></span>'),ze(e).remove();else if(c.cursor.isAtEnd(e,t))ze(t).after('<span class="fr-marker"></span>'),ze(e).remove();else{for(var n=e,i="",r="";n=n.parentNode,i+=c.node.closeTagString(n),r=c.node.openTagString(n)+r,n!=t;);ze(e).replaceWith('<span id="fr-break"></span>');var o=c.node.openTagString(t)+ze(t).html()+c.node.closeTagString(t);o=o.replace(/<span id="fr-break"><\/span>/g,i+'<span class="fr-marker"></span>'+r),ze(t).replaceWith(o)}return c.$el.find(".fr-marker").get(0)}function n(e){var t=e.clientX,n=e.clientY;u();var i,r=null;if(void 0!==c.doc.caretPositionFromPoint?(i=c.doc.caretPositionFromPoint(t,n),(r=c.doc.createRange()).setStart(i.offsetNode,i.offset),r.setEnd(i.offsetNode,i.offset)):void 0!==c.doc.caretRangeFromPoint&&(i=c.doc.caretRangeFromPoint(t,n),(r=c.doc.createRange()).setStart(i.startContainer,i.startOffset),r.setEnd(i.startContainer,i.startOffset)),null!==r&&void 0!==c.win.getSelection){var o=c.win.getSelection();o.removeAllRanges(),o.addRange(r)}else if(void 0!==c.doc.body.createTextRange)try{(r=c.doc.body.createTextRange()).moveToPoint(t,n);var s=r.duplicate();s.moveToPoint(t,n),r.setEndPoint("EndToEnd",s),r.select()}catch(a){return!1}l()}function u(){c.$el.find(".fr-marker").remove()}return{place:e,insert:l,split:t,insertAtPoint:n,remove:u}},ze.FE.MODULES.selection=function(E){function s(){var e="";return E.win.getSelection?e=E.win.getSelection():E.doc.getSelection?e=E.doc.getSelection():E.doc.selection&&(e=E.doc.selection.createRange().text),e.toString()}function _(){return E.win.getSelection?E.win.getSelection():E.doc.getSelection?E.doc.getSelection():E.doc.selection.createRange()}function d(e){var t=_(),n=[];if(t&&t.getRangeAt&&t.rangeCount){n=[];for(var i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i))}else n=E.doc.createRange?[E.doc.createRange()]:[];return void 0!==e?n[e]:n}function y(){var e=_();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(E){}}function e(){var e=_();try{if(e.rangeCount){var t,n=d(0),i=n.startContainer;if(i.nodeType==Node.TEXT_NODE&&n.startOffset==(i.textContent||"").length&&i.nextSibling&&(i=i.nextSibling),i.nodeType==Node.ELEMENT_NODE){var r=!1;if(0<i.childNodes.length&&i.childNodes[n.startOffset]){for(t=i.childNodes[n.startOffset];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;if(t&&t.textContent.replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&(i=t,r=!0),!r&&1<i.childNodes.length&&0<n.startOffset&&i.childNodes[n.startOffset-1]){for(t=i.childNodes[n.startOffset-1];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;t&&t.textContent.replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&(i=t,r=!0)}}else!n.collapsed&&i.nextSibling&&i.nextSibling.nodeType==Node.ELEMENT_NODE&&(t=i.nextSibling)&&t.textContent.replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&(i=t,r=!0);!r&&0<i.childNodes.length&&ze(i.childNodes[0]).text().replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(i.childNodes[0].tagName)<0&&(i=i.childNodes[0])}for(;i.nodeType!=Node.ELEMENT_NODE&&i.parentNode;)i=i.parentNode;for(var o=i;o&&"HTML"!=o.tagName;){if(o==E.el)return i;o=ze(o).parent()[0]}}}catch(C){}return E.el}function t(){var e=_();try{if(e.rangeCount){var t,n=d(0),i=n.endContainer;if(i.nodeType==Node.ELEMENT_NODE){var r=!1;0<i.childNodes.length&&i.childNodes[n.endOffset]&&ze(i.childNodes[n.endOffset]).text()===s()?(i=i.childNodes[n.endOffset],r=!0):!n.collapsed&&i.previousSibling&&i.previousSibling.nodeType==Node.ELEMENT_NODE?(t=i.previousSibling)&&t.textContent.replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&(i=t,r=!0):!n.collapsed&&0<i.childNodes.length&&i.childNodes[n.endOffset]&&((t=i.childNodes[n.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&t&&t.textContent.replace(/\u200B/g,"")===s().replace(/\u200B/g,"")&&(i=t,r=!0)),!r&&0<i.childNodes.length&&ze(i.childNodes[i.childNodes.length-1]).text()===s()&&["BR","IMG","HR"].indexOf(i.childNodes[i.childNodes.length-1].tagName)<0&&(i=i.childNodes[i.childNodes.length-1])}for(i.nodeType==Node.TEXT_NODE&&0===n.endOffset&&i.previousSibling&&i.previousSibling.nodeType==Node.ELEMENT_NODE&&(i=i.previousSibling);i.nodeType!=Node.ELEMENT_NODE&&i.parentNode;)i=i.parentNode;for(var o=i;o&&"HTML"!=o.tagName;){if(o==E.el)return i;o=ze(o).parent()[0]}}}catch(C){}return E.el}function u(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&0<n.childNodes.length&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function n(){var e,t=[],n=_();if(f()&&n.rangeCount){var i=d();for(e=0;e<i.length;e++){var r,o=i[e],s=u(o.startContainer,o.startOffset),a=u(o.endContainer,o.endOffset);E.node.isBlock(s)&&t.indexOf(s)<0&&t.push(s),(r=E.node.blockParent(s))&&t.indexOf(r)<0&&t.push(r);for(var l=[],c=s;c!==a&&c!==E.el;)l.indexOf(c)<0&&c.children&&c.children.length?(l.push(c),c=c.children[0]):c.nextSibling?c=c.nextSibling:c.parentNode&&(c=c.parentNode,l.push(c)),E.node.isBlock(c)&&l.indexOf(c)<0&&t.indexOf(c)<0&&(c!==a||0<o.endOffset)&&t.push(c);E.node.isBlock(a)&&t.indexOf(a)<0&&0<o.endOffset&&t.push(a),(r=E.node.blockParent(a))&&t.indexOf(r)<0&&t.push(r)}}for(
e=t.length-1;0<e;e--)ze(t[e]).find(t).length&&("LI"!=t[e].tagName||0<t[e].children.length&&0<=t.indexOf(t[e].children[0]))&&t.splice(e,1);return t}function T(){if(E.$wp){E.markers.remove();var e,t,n=d(),i=[];for(t=0;t<n.length;t++)if(n[t].startContainer!==E.doc||E.browser.msie){var r=(e=n[t]).collapsed,o=E.markers.place(e,!0,t),s=E.markers.place(e,!1,t);void 0!==o&&o||!r||(ze(".fr-marker").remove(),E.selection.setAtEnd(E.el)),E.el.normalize(),E.browser.safari&&!r&&((e=E.doc.createRange()).setStartAfter(o),e.setEndBefore(s),i.push(e))}if(E.browser.safari&&i.length)for(E.selection.clear(),t=0;t<i.length;t++)E.selection.get().addRange(i[t])}}function C(){var e,t=E.el.querySelectorAll('.fr-marker[data-type="true"]');if(!E.$wp)return E.markers.remove(),!1;if(0===t.length)return!1;if(E.browser.msie||E.browser.edge)for(e=0;e<t.length;e++)t[e].style.display="inline-block";E.core.hasFocus()||E.browser.msie||E.browser.webkit||E.$el.focus(),y();var n=_();for(e=0;e<t.length;e++){var i=ze(t[e]).data("id"),r=t[e],o=E.doc.createRange(),s=E.$el.find('.fr-marker[data-type="false"][data-id="'+i+'"]');(E.browser.msie||E.browser.edge)&&s.css("display","inline-block");var a=null;if(0<s.length){s=s[0];try{for(var l,c=!1,d=r.nextSibling;d&&d.nodeType==Node.TEXT_NODE&&0===d.textContent.length;)d=(l=d).nextSibling,ze(l).remove();for(var u=s.nextSibling;u&&u.nodeType==Node.TEXT_NODE&&0===u.textContent.length;)u=(l=u).nextSibling,ze(l).remove();if(r.nextSibling==s||s.nextSibling==r){for(var f=r.nextSibling==s?r:s,h=f==r?s:r,p=f.previousSibling;p&&p.nodeType==Node.TEXT_NODE&&0===p.length;)p=(l=p).previousSibling,ze(l).remove();if(p&&p.nodeType==Node.TEXT_NODE)for(;p&&p.previousSibling&&p.previousSibling.nodeType==Node.TEXT_NODE;)p.previousSibling.textContent=p.previousSibling.textContent+p.textContent,p=p.previousSibling,ze(p.nextSibling).remove();for(var g=h.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0===g.length;)g=(l=g).nextSibling,ze(l).remove();if(g&&g.nodeType==Node.TEXT_NODE)for(;g&&g.nextSibling&&g.nextSibling.nodeType==Node.TEXT_NODE;)g.nextSibling.textContent=g.textContent+g.nextSibling.textContent,g=g.nextSibling,ze(g.previousSibling).remove();if(p&&(E.node.isVoid(p)||E.node.isBlock(p))&&(p=null),g&&(E.node.isVoid(g)||E.node.isBlock(g))&&(g=null),p&&g&&p.nodeType==Node.TEXT_NODE&&g.nodeType==Node.TEXT_NODE){ze(r).remove(),ze(s).remove();var m=p.textContent.length;p.textContent=p.textContent+g.textContent,ze(g).remove(),E.spaces.normalize(p),o.setStart(p,m),o.setEnd(p,m),c=!0}else!p&&g&&g.nodeType==Node.TEXT_NODE?(ze(r).remove(),ze(s).remove(),E.spaces.normalize(g),a=ze(E.doc.createTextNode("\u200b")),ze(g).before(a),o.setStart(g,0),o.setEnd(g,0),c=!0):!g&&p&&p.nodeType==Node.TEXT_NODE&&(ze(r).remove(),ze(s).remove(),E.spaces.normalize(p),a=ze(E.doc.createTextNode("\u200b")),ze(p).after(a),o.setStart(p,p.textContent.length),o.setEnd(p,p.textContent.length),c=!0)}var v,b;if(!c)(E.browser.chrome||E.browser.edge)&&r.nextSibling==s?(v=A(s,o,!0)||o.setStartAfter(s),b=A(r,o,!1)||o.setEndBefore(r)):(r.previousSibling==s&&(s=(r=s).nextSibling),s.nextSibling&&"BR"===s.nextSibling.tagName||!s.nextSibling&&E.node.isBlock(r.previousSibling)||r.previousSibling&&"BR"==r.previousSibling.tagName||(r.style.display="inline",s.style.display="inline",a=ze(E.doc.createTextNode("\u200b"))),v=A(r,o,!0)||ze(r).before(a)&&o.setStartBefore(r),b=A(s,o,!1)||ze(s).after(a)&&o.setEndAfter(s)),"function"==typeof v&&v(),"function"==typeof b&&b()}catch(R){}}a&&a.remove();try{n.addRange(o)}catch(R){}}E.markers.remove()}function A(e,t,n){var i,r=e.previousSibling,o=e.nextSibling;return r&&o&&r.nodeType==Node.TEXT_NODE&&o.nodeType==Node.TEXT_NODE?(i=r.textContent.length,n?(o.textContent=r.textContent+o.textContent,ze(r).remove(),ze(e).remove(),E.spaces.normalize(o),function(){t.setStart(o,i)}):(r.textContent=r.textContent+o.textContent,ze(o).remove(),ze(e).remove(),E.spaces.normalize(r),function(){t.setEnd(r,i)})):r&&!o&&r.nodeType==Node.TEXT_NODE?(i=r.textContent.length,n?(E.spaces.normalize(r),function(){t.setStart(r,i)}):(E.spaces.normalize(r),function(){t.setEnd(r,i)})):!(!o||r||o.nodeType!=Node.TEXT_NODE)&&(n?(E.spaces.normalize(o),function(){t.setStart(o,0)}):(E.spaces.normalize(o),function(){t.setEnd(o,0)}))}function S(){return!0}function w(){for(var e=d(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function i(e){var t,n,i=!1,r=!1;if(E.win.getSelection){var o=E.win.getSelection();o.rangeCount&&((n=(t=o.getRangeAt(0)).cloneRange()).selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),i=""===n.toString(),n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),r=""===n.toString())}else E.doc.selection&&"Control"!=E.doc.selection.type&&((n=(t=E.doc.selection.createRange()).duplicate()).moveToElementText(e),n.setEndPoint("EndToStart",t),i=""===n.text,n.moveToElementText(e),n.setEndPoint("StartToEnd",t),r=""===n.text);return{atStart:i,atEnd:r}}function r(){if(w())return!1;E.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+ze.FE.INVISIBLE_SPACE+"</span>");var e=!1,t=i(E.el);return t.atStart&&t.atEnd&&(e=!0),E.$el.find(".fr-mk").remove(),e}function o(e,t){void 0===t&&(t=!0);var n=ze(e).html();n&&n.replace(/\u200b/g,"").length!=n.length&&ze(e).html(n.replace(/\u200b/g,""));for(var i=E.node.contents(e),r=0;r<i.length;r++)i[r].nodeType!=Node.ELEMENT_NODE?ze(i[r]).remove():(o(i[r],0===r),0===r&&(t=!1));e.nodeType==Node.TEXT_NODE?ze(e).replaceWith('<span data-first="true" data-text="true"></span>'):t&&ze(e).attr("data-first",!0)}function a(){return 0===ze(this).find("fr-inner").length}function x(e,t){var n=E.node.contents(e.get(0));0<=["TD","TH"].indexOf(e.get(0).tagName)&&1==e.find(".fr-marker").length&&E.node.hasClass(n[0],"fr-marker")&&e.attr("data-del-cell",!0);for(var i=0;i<n.length;i++){var r=n[i];E.node.hasClass(r,"fr-marker")?t=(t+1)%2:t?0<ze(r).find(".fr-marker").length?t=x(ze(r),t):["TD","TH"].indexOf(r.tagName)<0&&!E.node.hasClass(r,"fr-inner")?!E.opts.keepFormatOnDelete||0<E.$el.find("[data-first]").length?ze(r).remove():o(r):E.node.hasClass(r,"fr-inner")?0===ze(r).find(".fr-inner").length?ze(r).html("<br>"):ze(r).find(".fr-inner").filter(a).html("<br>"):(ze(r).empty(),ze(r).attr("data-del-cell",!0)):0<ze(r).find(".fr-marker").length&&(t=x(ze(r),t))}return t}function f(){try{if(!E.$wp)return!1;for(var e=d(0).commonAncestorContainer;e&&!E.node.isElement(e);)e=e.parentNode;return!!E.node.isElement(e)}catch(_){return!1}}function l(){if(w())return!0;var e;T();var t=function(e){for(var t=e.previousSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var n=t;t=t.previousSibling,ze(n).remove()}return t},n=function(e){for(var t=e.nextSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var n=t;t=t.nextSibling,ze(n).remove()}return t},i=E.$el.find('.fr-marker[data-type="true"]');for(e=0;e<i.length;e++)for(var r=i[e];!(t(r)||E.node.isBlock(r.parentNode)||E.$el.is(r.parentNode)||E.node.hasClass(r.parentNode,"fr-inner"));)ze(r.parentNode).before(r);var o=E.$el.find('.fr-marker[data-type="false"]');for(e=0;e<o.length;e++){for(var s=o[e];!(n(s)||E.node.isBlock(s.parentNode)||E.$el.is(s.parentNode)||E.node.hasClass(s.parentNode,"fr-inner"));)ze(s.parentNode).after(s);s.parentNode&&E.node.isBlock(s.parentNode)&&E.node.isEmpty(s.parentNode)&&!E.$el.is(s.parentNode)&&!E.node.hasClass(s.parentNode,"fr-inner")&&E.opts.keepFormatOnDelete&&ze(s.parentNode).after(s)}if(S()){x(E.$el,0);var a=E.$el.find('[data-first="true"]');if(a.length)E.$el.find(".fr-marker").remove(),a.append(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS).removeAttr("data-first"),a.attr("data-text")&&a.replaceWith(a.html());else for(E.$el.find("table").filter(function(){return 0<ze(this).find("[data-del-cell]").length&&ze(this).find("[data-del-cell]").length==ze(this).find("td, th").length}).remove(),E.$el.find("[data-del-cell]").removeAttr("data-del-cell"),i=E.$el.find('.fr-marker[data-type="true"]'),e=0;e<i.length;e++){var l=i[e],c=l.nextSibling,d=E.$el.find('.fr-marker[data-type="false"][data-id="'+ze(l).data("id")+'"]').get(0);if(d){if(l&&(!c||c!=d)){var u=E.node.blockParent(l),f=E.node.blockParent(d),h=!1,p=!1;if(u&&0<=["UL","OL"].indexOf(u.tagName)&&(h=!(u=null)),f&&0<=["UL","OL"].indexOf(f.tagName)&&(p=!(f=null)),ze(l).after(d),u!=f)if(null!=u||h)if(null!=f||p||0!==ze(u).parentsUntil(E.$el,"table").length)u&&f&&0===ze(u).parentsUntil(E.$el,"table").length&&0===ze(f).parentsUntil(E.$el,"table").length&&(ze(u).append(ze(f).html()),ze(f).remove());else{for(c=u;!c.nextSibling&&c.parentNode!=E.el;)c=c.parentNode;for(c=c.nextSibling;c&&"BR"!=c.tagName;){var g=c.nextSibling;ze(u).append(c),c=g}c&&"BR"==c.tagName&&ze(c).remove()}else{var m=E.node.deepestParent(l);m?(ze(m).after(ze(f).html()),ze(f).remove()):0===ze(f).parentsUntil(E.$el,"table").length&&(ze(l).next().after(ze(f).html()),ze(f).remove())}}}else d=ze(l).clone().attr("data-type",!1),ze(l).after(d)}}E.opts.keepFormatOnDelete||E.html.fillEmptyBlocks(),E.html.cleanEmptyTags(!0),E.clean.lists(),E.spaces.normalize();var v=E.$el.find(".fr-marker:last").get(0),b=E.$el.find(".fr-marker:first").get(0);void 0!==v&&void 0!==b&&!v.nextSibling&&b.previousSibling&&"BR"==b.previousSibling.tagName&&E.node.isElement(v.parentNode)&&E.node.isElement(b.parentNode)&&E.$el.append("<br>"),C()}function c(e,t){if(!e||0<e.getElementsByClassName("fr-marker").length)return!1;for(var n=e.firstChild;n&&(E.node.isBlock(n)||t&&!E.node.isVoid(n)&&n.nodeType==Node.ELEMENT_NODE);)n=(e=n).firstChild;e.innerHTML=ze.FE.MARKERS+e.innerHTML}function h(e,t){if(!e||0<e.getElementsByClassName("fr-marker").length)return!1;for(var n=e.lastChild;n&&(E.node.isBlock(n)||t&&!E.node.isVoid(n)&&n.nodeType==Node.ELEMENT_NODE);)n=(e=n).lastChild;var i=E.doc.createElement("SPAN");i.setAttribute("id","fr-sel-markers"),i.innerHTML=ze.FE.MARKERS,e.appendChild(i);var r=e.querySelector("#fr-sel-markers");r.outerHTML=r.innerHTML}function R(e,t){void 0===t&&(t=!0);for(var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;)n=n.previousSibling;return n?(E.node.isBlock(n)?h(n):"BR"==n.tagName?ze(n).before(ze.FE.MARKERS):ze(n).after(ze.FE.MARKERS),!0):!!t&&(E.node.isBlock(e)?c(e):ze(e).before(ze.FE.MARKERS),!0)}function p(e,t){void 0===t&&(t=!0);for(var n=e.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;)n=n.nextSibling;return n?(E.node.isBlock(n)?c(n):ze(n).before(ze.FE.MARKERS),!0):!!t&&(E.node.isBlock(e)?h(e):ze(e).after(ze.FE.MARKERS),!0)}return{text:s,get:_,ranges:d,clear:y,element:e,endElement:t,save:T,restore:C,isCollapsed:w,isFull:r,inEditor:f,remove:l,blocks:n,info:i,setAtEnd:h,setAtStart:c,setBefore:R,setAfter:p,rangeElement:u}},ze.extend(ze.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),ze.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},ze.FE.MODULES.clean=function(l){function r(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&0<=e.getAttribute("class").indexOf("fr-marker"))return!1;var t,n=l.node.contents(e),i=[];for(t=0;t<n.length;t++)n[t].nodeType!=Node.ELEMENT_NODE||l.node.isVoid(n[t])?n[t].nodeType==Node.TEXT_NODE&&(n[t].textContent=n[t].textContent.replace(/\u200b/g,"")):n[t].textContent.replace(/\u200b/g,"").length!=n[t].textContent.length&&r(n[t]);if(e.nodeType==Node.ELEMENT_NODE&&!l.node.isVoid(e)&&(e.normalize(),n=l.node.contents(e),i=e.querySelectorAll(".fr-marker"),n.length-i.length==0)){for(t=0;t<n.length;t++)if((n[t].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(t=0;t<i.length;t++)e.parentNode.insertBefore(i[t].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function a(e,t){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return t?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&0<=["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName))return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var n=document.createElement("div"),i=e.cloneNode(!0);return n.appendChild(i),n.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var r=e.childNodes;if(0===r.length)return e.outerHTML;for(var o="",s=0;s<r.length;s++)"PRE"==e.tagName&&(t=!0),o+=a(r[s],t);return l.node.openTagString(e)+o+l.node.closeTagString(e)}function o(e){return M=[],(e=(e=(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return M.push(e),"[FROALA.EDITOR.SCRIPT "+(M.length-1)+"]"})).replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(e){return M.push(e),"[FROALA.EDITOR.NOSCRIPT "+(M.length-1)+"]"})).replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,function(e){return M.push(e),"[FROALA.EDITOR.IFRAME "+(M.length-1)+"]"})).replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function s(e){return(e=(e=(e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("script")?"":M[parseInt(t,10)]})).replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("noscript")?"":M[parseInt(t,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})).replace(/\[FROALA\.EDITOR\.IFRAME ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("iframe")?"":M[parseInt(t,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})).replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function c(e){var t=e.replace(/;;/gi,";");return";"!=(t=t.replace(/^;/gi,"")).charAt(t.length)&&(t+=";"),t}function d(e){var t;for(t in e)if(e.hasOwnProperty(t)){var n=t.match(L),i=null;"style"==t&&l.opts.htmlAllowedStyleProps.length&&(i=e[t].match(k)),n&&i?e[t]=c(i.join(";")):n&&("style"!=t||i)||delete e[t]}for(var r="",o=Object.keys(e).sort(),s=0;s<o.length;s++)e[t=o[s]].indexOf('"')<0?r+=" "+t+'="'+e[t]+'"':r+=" "+t+"='"+e[t]+"'";return r}function u(e,t,n){if(l.opts.fullPage){var i=l.html.extractDoctype(n),r=d(l.html.extractNodeAttrs(n,"html"));return t=null==t?l.html.extractNode(n,"head")||"<title></title>":t,i+"<html"+r+"><head"+d(l.html.extractNodeAttrs(n,"head"))+">"+t+"</head><body"+d(l.html.extractNodeAttrs(n,"body"))+">"+e+"</body></html>"}return e}function f(e,t){var n,i=ze("<div>"+e+"</div>"),r="";if(i){var o=l.node.contents(i.get(0));for(n=0;n<o.length;n++)t(o[n]);for(o=l.node.contents(i.get(0)),n=0;n<o.length;n++)r+=a(o[n])}return r}function h(e,t,n){var i=e=o(e),r=null;return l.opts.fullPage&&(i=l.html.extractNode(e,"body")||(0<=e.indexOf("<body")?"":e),n&&(r=l.html.extractNode(e,"head")||"")),i=f(i,t),r&&(r=f(r,t)),s(u(i,r,e))}function e(e){return e.replace(/\u200b/g,"").length==e.length?e:l.clean.exec(e,r)}function t(){var e=l.el.querySelectorAll(Object.keys(ze.FE.HTML5Map).join(","));if(e.length){var t=!1;l.el.querySelector(".fr-marker")||(l.selection.save(),t=!0);for(var n=0;n<e.length;n++)""===l.node.attributes(e[n])&&ze(e[n]).replaceWith("<"+ze.FE.HTML5Map[e[n].tagName]+">"+e[n].innerHTML+"</"+ze.FE.HTML5Map[e[n].tagName]+">");t&&l.selection.restore()}}function p(e){var t=l.doc.createElement("DIV");return t.innerText=e,t.textContent}function i(e){if("SPAN"==e.tagName&&0<=(e.getAttribute("class")||"").indexOf("fr-marker"))return!1;if("PRE"==e.tagName&&m(e),e.nodeType==Node.ELEMENT_NODE&&(e.getAttribute("data-fr-src")&&0!==e.getAttribute("data-fr-src").indexOf("blob:")&&e.setAttribute("data-fr-src",l.helpers.sanitizeURL(p(e.getAttribute("data-fr-src")))),e.getAttribute("href")&&e.setAttribute("href",l.helpers.sanitizeURL(p(e.getAttribute("href")))),e.getAttribute("src")&&e.setAttribute("src",l.helpers.sanitizeURL(p(e.getAttribute("src")))),0<=["TABLE","TBODY","TFOOT","TR"].indexOf(e.tagName)&&(e.innerHTML=e.innerHTML.trim())),!l.opts.pasteAllowLocalImages&&e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.tagName&&e.getAttribute("data-fr-src")&&0===e.getAttribute("data-fr-src").indexOf("file://"))return e.parentNode.removeChild(e),!1;if(e.nodeType==Node.ELEMENT_NODE&&ze.FE.HTML5Map[e.tagName]&&""===l.node.attributes(e)){var t=ze.FE.HTML5Map[e.tagName],n="<"+t+">"+e.innerHTML+"</"+t+">";e.insertAdjacentHTML("beforebegin",n),(e=e.previousSibling).parentNode.removeChild(e.nextSibling)}if(l.opts.htmlAllowComments||e.nodeType!=Node.COMMENT_NODE)if(e.tagName&&e.tagName.match(O))e.parentNode.removeChild(e);else if(e.tagName&&!e.tagName.match(N))"svg"===e.tagName?e.parentNode.removeChild(e):l.browser.safari&&"path"==e.tagName&&e.parentNode&&"svg"==e.parentNode.tagName||(e.outerHTML=e.innerHTML);else{var i=e.attributes;if(i)for(var r=i.length-1;0<=r;r--){var o=i[r],s=o.nodeName.match(L),a=null;"style"==o.nodeName&&l.opts.htmlAllowedStyleProps.length&&(a=o.value.match(k)),s&&a?o.value=c(a.join(";")):s&&("style"!=o.nodeName||a)||e.removeAttribute(o.nodeName)}}else 0!==e.data.indexOf("[FROALA.EDITOR")&&e.parentNode.removeChild(e)}function g(e){for(var t=l.node.contents(e),n=0;n<t.length;n++)t[n].nodeType!=Node.TEXT_NODE&&g(t[n]);i(e)}function m(e){var t=e.innerHTML;0<=t.indexOf("\n")&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function n(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i=!1),e=e.replace(/<br> */g,"<br>");var r,o=ze.merge([],l.opts.htmlAllowedTags);for(r=0;r<t.length;r++)0<=o.indexOf(t[r])&&o.splice(o.indexOf(t[r]),1);var s=ze.merge([],l.opts.htmlAllowedAttrs);for(r=0;r<n.length;r++)0<=s.indexOf(n[r])&&s.splice(s.indexOf(n[r]),1);return s.push("data-fr-.*"),s.push("fr-.*"),N=new RegExp("^"+o.join("$|^")+"$","gi"),L=new RegExp("^"+s.join("$|^")+"$","gi"),O=new RegExp("^"+l.opts.htmlRemoveTags.join("$|^")+"$","gi"),k=l.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+l.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,h(e,g,!0)}function v(){for(var e=l.el.querySelectorAll("blockquote + blockquote"),t=0;t<e.length;t++){var n=e[t];l.node.attributes(n)==l.node.attributes(n.previousSibling)&&(ze(n).prev().append(ze(n).html()),ze(n).remove())}}function b(){for(var e=l.el.querySelectorAll("tr"),t=0;t<e.length;t++){for(var n=e[t].children,i=!0,r=0;r<n.length;r++)if("TH"!=n[r].tagName){i=!1;break}if(!1!==i&&0!==n.length){for(var o=e[t];o&&"TABLE"!=o.tagName&&"THEAD"!=o.tagName;)o=o.parentNode;var s=o;"THEAD"!=s.tagName&&(s=l.doc.createElement("THEAD"),o.insertBefore(s,o.firstChild)),s.appendChild(e[t])}}}function E(){var e=l.html.defaultTag();if(e)for(var t=l.el.querySelectorAll("td > "+e+", th > "+e),n=0;n<t.length;n++)""===l.node.attributes(t[n])&&ze(t[n]).replaceWith(t[n].innerHTML+"<br>")}function _(){b(),E()}function y(){var e=[],t=function(e){return!l.node.isList(e.parentNode)};do{if(e.length){var n=e[0],i=l.doc.createElement("ul");n.parentNode.insertBefore(i,n);do{var r=n;n=n.nextSibling,i.appendChild(r)}while(n&&"LI"==n.tagName)}e=[];for(var o=l.el.querySelectorAll("li"),s=0;s<o.length;s++)t(o[s])&&e.push(o[s])}while(0<e.length)}function T(){for(var e=l.el.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var n=e[t];if(l.node.isList(n.previousSibling)&&l.node.openTagString(n)==l.node.openTagString(n.previousSibling)){for(var i=l.node.contents(n),r=0;r<i.length;r++)n.previousSibling.appendChild(i[r]);n.parentNode.removeChild(n)}}}function C(){var e,t,n=function(e){e.querySelector("LI")||(t=!0,e.parentNode.removeChild(e))};do{t=!1;var i=l.el.querySelectorAll("li:empty");for(e=0;e<i.length;e++)i[e].parentNode.removeChild(i[e]);var r=l.el.querySelectorAll("ul, ol");for(e=0;e<r.length;e++)n(r[e])}while(!0===t)}function A(){for(var e=l.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),t=0;t<e.length;t++){var n=e[t],i=n.previousSibling;i&&("LI"==i.tagName?i.appendChild(n):ze(n).wrap("<li></li>"))}}function S(){for(var e=l.el.querySelectorAll("li > ul, li > ol"),t=0;t<e.length;t++){var n=e[t];if(n.nextSibling){var i=n.nextSibling,r=ze("<li>");ze(n.parentNode).after(r);do{var o=i;i=i.nextSibling,r.append(o)}while(i)}}}function w(){for(var e=l.el.querySelectorAll("li > ul, li > ol"),t=0;t<e.length;t++){var n=e[t];if(l.node.isFirstSibling(n))ze(n).before("<br/>");else if(n.previousSibling&&"BR"==n.previousSibling.tagName){for(var i=n.previousSibling.previousSibling;i&&l.node.hasClass(i,"fr-marker");)i=i.previousSibling;i&&"BR"!=i.tagName&&ze(n.previousSibling).remove()}}}function x(){for(var e=l.el.querySelectorAll("li:empty"),t=0;t<e.length;t++)ze(e[t]).remove()}function R(){for(var e=l.el.querySelectorAll("ul, ol"),t=0;t<e.length;t++)for(var n=l.node.contents(e[t]),i=null,r=n.length-1;0<=r;r--)"LI"!=n[r].tagName?(i||(i=ze("<li>")).insertBefore(n[r]),i.prepend(n[r])):i=null}function I(){y(),T(),R(),C(),A(),S(),w(),x()}function D(){l.opts.fullPage&&ze.merge(l.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var N,O,L,k,M=[];return{_init:D,html:n,toHTML5:t,tables:_,lists:I,quotes:v,invisibleSpaces:e,exec:h}},ze.FE.MODULES.spaces=function(l){function i(e,t){var n=e.previousSibling,i=e.nextSibling,r=e.textContent,o=e.parentNode;if(!l.html.isPreformatted(o)){t&&(r=r.replace(/[\f\n\r\t\v ]{2,}/g," "),i&&"BR"!==i.tagName&&!l.node.isBlock(i)||!l.node.isBlock(o)&&!l.node.isLink(o)||(r=r.replace(/[\f\n\r\t\v ]{1,}$/g,"")),n&&"BR"!==n.tagName&&!l.node.isBlock(n)||!l.node.isBlock(o)&&!l.node.isLink(o)||(r=r.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===r&&(n&&n.nodeType!=Node.TEXT_NODE||i&&i.nodeType!=Node.TEXT_NODE)&&(r="")),r=r.replace(new RegExp(ze.FE.UNICODE_NBSP,"g")," ");for(var s="",a=0;a<r.length;a++)32!=r.charCodeAt(a)||0!==a&&32!=s.charCodeAt(a-1)?s+=r[a]:s+=ze.FE.UNICODE_NBSP;(!i||i&&l.node.isBlock(i)||i&&i.nodeType==Node.ELEMENT_NODE&&l.win.getComputedStyle(i)&&"block"==l.win.getComputedStyle(i).display)&&(s=s.replace(/ $/,ze.FE.UNICODE_NBSP)),!n||l.node.isVoid(n)||l.node.isBlock(n)||(1!==(s=s.replace(/^\u00A0([^ $])/," $1")).length||160!==s.charCodeAt(0)||!i||l.node.isVoid(i)||l.node.isBlock(i)||(s=" ")),s=s.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),e.textContent!=s&&(e.textContent=s)}}function a(e,t){if(void 0!==e&&e||(e=l.el),void 0===t&&(t=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)i(e,t);else if(e.nodeType==Node.ELEMENT_NODE)for(var n=l.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,l.node.filter(function(e){for(var t=e.parentNode;t&&t!==l.el;){if("STYLE"==t.tagName||"IFRAME"==t.tagName)return!1;if("PRE"===t.tagName)return!1;t=t.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!l.node.hasClass(e.parentNode,"fr-marker")}),!1);n.nextNode();)i(n.currentNode,t)}function e(){for(var e=[],t=l.el.querySelectorAll(".fr-marker"),n=0;n<t.length;n++){for(var i=null,r=(i=l.node.blockParent(t[n])||t[n]).nextSibling,o=i.previousSibling;r&&"BR"==r.tagName;)r=r.nextSibling;for(;o&&"BR"==o.tagName;)o=o.previousSibling;i&&e.indexOf(i)<0&&e.push(i),o&&e.indexOf(o)<0&&e.push(o),r&&e.indexOf(r)<0&&e.push(r)}for(var s=0;s<e.length;s++)a(e[s])}return{normalize:a,normalizeAroundCursor:e}},ze.FE.UNICODE_NBSP=String.fromCharCode(160),ze.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],ze.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],ze.extend(ze.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon",".fr-inner"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),ze.FE.MODULES.html=function(T){function d(){return T.opts.enter==ze.FE.ENTER_P?"p":T.opts.enter==ze.FE.ENTER_DIV?"div":T.opts.enter==ze.FE.ENTER_BR?null:void 0}function a(e,t){return!(!e||e===T.el)&&(t?-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName)||a(e.parentNode,t):-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName))}function o(e){var t,n=[],i=[];if(e){var r=T.el.querySelectorAll(".fr-marker");for(t=0;t<r.length;t++){var o=T.node.blockParent(r[t])||r[t];if(o){var s=o.nextSibling,a=o.previousSibling;o&&i.indexOf(o)<0&&T.node.isBlock(o)&&i.push(o),a&&T.node.isBlock(a)&&i.indexOf(a)<0&&i.push(a),s&&T.node.isBlock(s)&&i.indexOf(s)<0&&i.push(s)}}}else i=T.el.querySelectorAll(f());var l=f();for(l+=","+ze.FE.VOID_ELEMENTS.join(","),l+=", .fr-inner",l+=","+T.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",t=i.length-1;0<=t;t--)if(!(i[t].textContent&&0<i[t].textContent.replace(/\u200B|\n/g,"").length||0<i[t].querySelectorAll(l).length)){for(var c=T.node.contents(i[t]),d=!1,u=0;u<c.length;u++)if(c[u].nodeType!=Node.COMMENT_NODE&&c[u].textContent&&0<c[u].textContent.replace(/\u200B|\n/g,"").length){d=!0;break}d||n.push(i[t])}return n}function e(){return ze.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function f(){return ze.FE.BLOCK_TAGS.join(", ")}function t(e){var t,n,i=ze.merge([],ze.FE.VOID_ELEMENTS);i=ze.merge(i,T.opts.htmlAllowedEmptyTags),void 0===e&&(i=ze.merge(i,ze.FE.BLOCK_TAGS)),t=T.el.querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)");do{n=!1;for(var r=0;r<t.length;r++)0!==t[r].attributes.length&&void 0===t[r].getAttribute("href")||(t[r].parentNode.removeChild(t[r]),n=!0);t=T.el.querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)")}while(t.length&&n)}function s(e,t){var n=d();if(t&&(n="div"),n){for(var i=T.doc.createDocumentFragment(),r=null,o=!1,s=e.firstChild,a=!1;s;){var l=s.nextSibling;if(s.nodeType==Node.ELEMENT_NODE&&(T.node.isBlock(s)||0<=T.opts.htmlDoNotWrapTags.indexOf(s.tagName.toLowerCase())&&!T.node.hasClass(s,"fr-marker")))r=null,i.appendChild(s.cloneNode(!0));else if(s.nodeType!=Node.ELEMENT_NODE&&s.nodeType!=Node.TEXT_NODE)r=null,i.appendChild(s.cloneNode(!0));else if("BR"==s.tagName)null==r?(r=T.doc.createElement(n),t&&r.setAttribute("class","fr-temp-div"),r.setAttribute("data-empty",!0),r.appendChild(s.cloneNode(!0)),i.appendChild(r),a=!0):!1===o&&(r.appendChild(T.doc.createElement("br")),t&&r.setAttribute("class","fr-temp-div"),r.setAttribute("data-empty",!0)),r=null;else{var c=s.textContent;s.nodeType==Node.TEXT_NODE&&0===c.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==r&&(r=T.doc.createElement(n),t&&r.setAttribute("class","fr-temp-div"),i.appendChild(r),a=!(o=!1)),r.appendChild(s.cloneNode(!0)),o||T.node.hasClass(s,"fr-marker")||s.nodeType==Node.TEXT_NODE&&0===c.replace(/ /g,"").length||(o=!0))}s=l}a&&(e.innerHTML="",e.appendChild(i))}}function l(e,t){for(var n=0;n<e.length;n++)s(e[n],t)}function n(e,t,n,i){if(!T.$wp)return!1;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);var r=T.$wp.scrollTop();s(T.el,e),i&&l(T.el.querySelectorAll(".fr-inner"),e),t&&l(T.el.querySelectorAll("td, th"),e),n&&l(T.el.querySelectorAll("blockquote"),e),r!=T.$wp.scrollTop()&&T.$wp.scrollTop(r)}function i(){T.$el.find("div.fr-temp-div").each(function(){ze(this).attr("data-empty")||0<=["LI"].indexOf(this.parentNode.tagName)||T.node.isBlock(this.nextSibling)&&!ze(this.nextSibling).hasClass("fr-temp-div")?ze(this).replaceWith(ze(this).html()):ze(this).replaceWith(ze(this).html()+"<br>")}),T.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===ze(this).attr("class")}).removeAttr("class")}function r(e){for(var t=o(e),n=0;n<t.length;n++){var i=t[n];"false"===i.getAttribute("contenteditable")||i.querySelector(T.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||T.node.isVoid(i)||"TABLE"!=i.tagName&&"TBODY"!=i.tagName&&"TR"!=i.tagName&&"UL"!=i.tagName&&"OL"!=i.tagName&&i.appendChild(T.doc.createElement("br"))}if(T.browser.msie&&T.opts.enter==ze.FE.ENTER_BR){var r=T.node.contents(T.el);r.length&&r[r.length-1].nodeType==Node.TEXT_NODE&&T.$el.append("<br>")}}function c(){return T.$el.get(0).querySelectorAll(f())}function u(e){if(void 0===e&&(e=T.el),e&&0<=["SCRIPT","STYLE","PRE"].indexOf(e.tagName))return!1;for(var t=T.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,T.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);t.nextNode();){var n=t.currentNode;if(!a(n.parentNode,!0)){var i=T.node.isBlock(n.parentNode)||T.node.isElement(n.parentNode),r=n.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(i){var o=n.previousSibling,s=n.nextSibling;o&&s&&" "==r?r=T.node.isBlock(o)&&T.node.isBlock(s)?"":"\n":(o||(r=r.replace(/^ */,"")),s||(r=r.replace(/ *$/,"")))}n.textContent=r}}}function h(e,t,n){var i=new RegExp(t,"gi").exec(e);return i?i[n]:null}function p(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function C(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function g(e,t){var n=e.parentNode;if(n&&(T.node.isBlock(n)||T.node.isElement(n))&&["TD","TH"].indexOf(n.tagName)<0){for(var i=e.previousSibling,r=e.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.replace(/\n|\r/g,"").length;)i=i.previousSibling;i&&n&&"BR"!=i.tagName&&!T.node.isBlock(i)&&!r&&0<n.textContent.replace(/\u200B/g,"").length&&0<i.textContent.length&&!T.node.hasClass(i,"fr-marker")&&(T.el==n&&!r&&T.opts.enter==ze.FE.ENTER_BR&&T.browser.msie||(t&&T.selection.save(),e.parentNode.removeChild(e),t&&T.selection.restore()))}else!n||T.node.isBlock(n)||T.node.isElement(n)||e.previousSibling||e.nextSibling||g(e.parentNode,t)}function m(){var e,t,n=T.selection.element(),i=[];if(e=T.node.isBlock(n)?n:T.node.blockParent(n)){var r=e.nextSibling,o=e.previousSibling;e&&i.indexOf(e)<0&&i.push(e),o&&T.node.isBlock(o)&&i.indexOf(o)<0&&i.push(o),r&&T.node.isBlock(r)&&i.indexOf(r)<0&&i.push(r)}var s=[];for(t=0;t<i.length;t++)for(var a=i[t].querySelectorAll("br"),l=0;l<a.length;l++)s.indexOf(a[l])<0&&s.push(a[l]);if(n.parentNode==T.el){var c=T.el.children;for(t=0;t<c.length;t++)"BR"==c[t].tagName&&s.indexOf(c[t])<0&&s.push(c[t])}return s}function v(e,t){var n,i=null;if(e)for(i=m(),n=0;n<i.length;n++)g(i[n],t);else for(i=T.el.getElementsByTagName("br"),n=0;n<i.length;n++)g(i[n],t)}function b(){T.opts.htmlUntouched||(t(),n()),u(),T.opts.htmlUntouched||(T.spaces.normalize(null,!0),T.html.fillEmptyBlocks(),T.clean.quotes(),T.clean.lists(),T.clean.tables(),T.clean.toHTML5(),T.html.cleanBRs()),T.selection.restore(),E(),
T.placeholder.refresh()}function E(){T.core.isEmpty()&&(null!=d()?T.el.querySelector(f())||T.el.querySelector(T.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(T.core.hasFocus()?(T.$el.html("<"+d()+">"+ze.FE.MARKERS+"<br/></"+d()+">"),T.selection.restore()):T.$el.html("<"+d()+"><br/></"+d()+">")):T.el.querySelector("*:not(.fr-marker):not(br)")||(T.core.hasFocus()?(T.$el.html(ze.FE.MARKERS+"<br/>"),T.selection.restore()):T.$el.html("<br/>")))}function _(e,t){return h(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function A(e,t){var n=ze("<div "+(h(e,"<"+t+"([^>]*?)>",1)||"")+">");return T.node.rawAttributes(n.get(0))}function y(e){return h(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function S(e,t){T.opts.htmlExecuteScripts?e.html(t):e.get(0).innerHTML=t}function w(e){var t=T.clean.html(e||"",[],[],T.opts.fullPage);if(T.opts.fullPage){var n=_(t,"body")||(0<=t.indexOf("<body")?"":t),i=A(t,"body"),r=_(t,"head")||"<title></title>",o=A(t,"head"),s=ze("<div>").append(r).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName))&&this.parentNode.removeChild(this)}).end().html().trim();r=ze("<div>").append(r).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)?this.outerHTML:""}).toArray().join("");var a=y(t),l=A(t,"html");S(T.$el,s+"\n"+n),T.node.clearAttributes(T.el),T.$el.attr(i),T.$el.addClass("fr-view"),T.$el.attr("spellcheck",T.opts.spellcheck),T.$el.attr("dir",T.opts.direction),S(T.$head,r),T.node.clearAttributes(T.$head.get(0)),T.$head.attr(o),T.node.clearAttributes(T.$html.get(0)),T.$html.attr(l),T.iframe_document.doctype.parentNode.replaceChild(p(a,T.iframe_document),T.iframe_document.doctype)}else S(T.$el,t);var c=T.edit.isDisabled();T.edit.on(),T.core.injectStyle(T.opts.iframeStyle),b(),T.opts.useClasses||(T.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),T.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),c&&T.edit.off(),T.events.trigger("html.set")}function x(e){var t,n=/(#[^\s\+>~\.\[:]+)/g,i=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,o=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,s=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,l=/([^\s\+>~\.\[:]+)/g;return(t=/:not\(([^\)]*)\)/g).test(e)&&(e=e.replace(t,"     $1 ")),100*(e.match(n)||[]).length+10*(e.match(i)||[]).length+10*(e.match(r)||[]).length+10*(e.match(s)||[]).length+10*(e.match(a)||[]).length+(e.match(o)||[]).length+((e=(e=e.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).match(l)||[]).length}function R(e){if(T.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.getAttribute&&""===e.getAttribute("style")&&e.removeAttribute("style"),e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll('[class=""],[style=""]'),n=0;n<t.length;n++){var i=t[n];""===i.getAttribute("class")&&i.removeAttribute("class"),""===i.getAttribute("style")&&i.removeAttribute("style")}}function I(e,t){return e[3]-t[3]}function D(e,t){if(!T.$wp)return T.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var n="";T.events.trigger("html.beforeGet");var i,r,o=[],s={},a=[];if(!T.opts.useClasses&&!t){var l=new RegExp("^"+T.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(i=0;i<T.doc.styleSheets.length;i++){var c,d=0;try{c=T.doc.styleSheets[i].cssRules,T.doc.styleSheets[i].ownerNode&&"STYLE"==T.doc.styleSheets[i].ownerNode.nodeType&&(d=1)}catch(A){}if(c)for(var u=0,f=c.length;u<f;u++)if(c[u].selectorText&&0<c[u].style.cssText.length){var h,p=c[u].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{h=T.el.querySelectorAll(p)}catch(A){h=[]}for(r=0;r<h.length;r++){!h[r].getAttribute("fr-original-style")&&h[r].getAttribute("style")?(h[r].setAttribute("fr-original-style",h[r].getAttribute("style")),o.push(h[r])):h[r].getAttribute("fr-original-style")||o.push(h[r]),s[h[r]]||(s[h[r]]={});for(var g=1e3*d+x(c[u].selectorText),m=c[u].style.cssText.split(";"),v=0;v<m.length;v++){var b=m[v].trim().split(":")[0];b.match(l)||(s[h[r]][b]||(s[h[r]][b]=0)<=(h[r].getAttribute("fr-original-style")||"").indexOf(b+":")&&(s[h[r]][b]=1e4),g>=s[h[r]][b]&&(s[h[r]][b]=g,m[v].trim().length&&a.push([h[r],b.trim(),m[v].trim().split(":")[1].trim(),g])))}}}}for(a.sort(I),i=0;i<a.length;i++){var E=a[i];E[0].style[E[1]]=E[2]}for(i=0;i<o.length;i++)if(o[i].getAttribute("class")&&(o[i].setAttribute("fr-original-class",o[i].getAttribute("class")),o[i].removeAttribute("class")),0<(o[i].getAttribute("fr-original-style")||"").trim().length){var _=o[i].getAttribute("fr-original-style").split(";");for(r=0;r<_.length;r++)0<_[r].indexOf(":")&&(o[i].style[_[r].split(":")[0].trim()]=_[r].split(":")[1].trim())}}if(T.core.isEmpty()?T.opts.fullPage&&(n=C(T.iframe_document),n+="<html"+T.node.attributes(T.$html.get(0))+">"+T.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),T.opts.fullPage?(n=C(T.iframe_document),T.$el.removeClass("fr-view"),n+="<html"+T.node.attributes(T.$html.get(0))+">"+T.$html.html()+"</html>",T.$el.addClass("fr-view")):n=T.$el.html()),!T.opts.useClasses&&!t)for(i=0;i<o.length;i++)o[i].getAttribute("fr-original-class")&&(o[i].setAttribute("class",o[i].getAttribute("fr-original-class")),o[i].removeAttribute("fr-original-class")),o[i].getAttribute("fr-original-style")?(o[i].setAttribute("style",o[i].getAttribute("fr-original-style")),o[i].removeAttribute("fr-original-style")):o[i].removeAttribute("style");T.opts.fullPage&&(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,"")).replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,"")).replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,"")).replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")).replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>')).replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),T.opts.htmlSimpleAmpersand&&(n=n.replace(/\&amp;/gi,"&")),T.events.trigger("html.afterGet"),e||(n=n.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),n=T.clean.invisibleSpaces(n),n=T.clean.exec(n,R);var y=T.events.chainTrigger("html.get",n);return"string"==typeof y&&(n=y),n.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function N(){var e=function(e,t){for(;t&&(t.nodeType==Node.TEXT_NODE||!T.node.isBlock(t))&&!T.node.isElement(t);)t&&t.nodeType!=Node.TEXT_NODE&&ze(e).wrapInner(T.node.openTagString(t)+T.node.closeTagString(t)),t=t.parentNode;t&&e.innerHTML==t.innerHTML&&(e.innerHTML=t.outerHTML)},t=function(){var e,t=null;return T.win.getSelection?(e=T.win.getSelection())&&e.rangeCount&&((t=e.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(t=t.parentNode)):(e=T.doc.selection)&&"Control"!=e.type&&(t=e.createRange().parentElement()),null!=t&&(0<=ze.inArray(T.el,ze(t).parents())||t==T.el)?t:null},n="";if(void 0!==T.win.getSelection){T.browser.mozilla&&(T.selection.save(),1<T.$el.find('.fr-marker[data-type="false"]').length&&(T.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),T.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),T.$el.find(".fr-marker").not('[data-id="0"]').remove()),T.selection.restore());for(var i=T.selection.ranges(),r=0;r<i.length;r++){var o=document.createElement("div");o.appendChild(i[r].cloneContents());var s=o.children;if(s.length){var a=s[s.length-1];("P"==a.tagName&&T.opts.enter==ze.FroalaEditor.ENTER_P||"DIV"==a.tagName&&T.opts.enter==ze.FroalaEditor.ENTER_DIV)&&T.node.isEmpty(a)&&o.removeChild(a)}e(o,t()),0<ze(o).find(".fr-element").length&&(o=T.el),n+=o.innerHTML}}else void 0!==T.doc.selection&&"Text"==T.doc.selection.type&&(n=T.doc.selection.createRange().htmlText);return n}function O(e){var t=T.doc.createElement("div");return t.innerHTML=e,null!==t.querySelector(f())}function L(e){var t=T.doc.createElement("div");return t.innerHTML=e,T.selection.setAtEnd(t),t.innerHTML}function k(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function M(e){if(!T.html.defaultTag())return e;var t=T.doc.createElement("div");t.innerHTML=e;for(var n=t.querySelectorAll(":scope > "+T.html.defaultTag()),i=n.length-1;0<=i;i--){var r=n[i];T.node.isBlock(r.previousSibling)||(r.previousSibling&&!T.node.isEmpty(r)&&ze("<br>").insertAfter(r.previousSibling),r.outerHTML=r.innerHTML)}return t.innerHTML}function F(e,t,n){var i;if(T.selection.isCollapsed()||T.selection.remove(),i=(i=t?e:T.clean.html(e)).replace(/\r|\n/g," "),e.indexOf('class="fr-marker"')<0&&(i=L(i)),T.core.isEmpty()&&!T.opts.keepFormatOnDelete&&O(i))T.el.innerHTML=i;else{var r=T.markers.insert();if(r){T.node.isLastSibling(r)&&ze(r).parent().hasClass("fr-deletable")&&ze(r).insertAfter(ze(r).parent());var o=T.node.blockParent(r);if((O(i)||n)&&(T.node.deepestParent(r)||o&&"LI"==o.tagName)){if(o&&"LI"==o.tagName&&(i=M(i)),!(r=T.markers.split()))return!1;r.outerHTML=i}else r.outerHTML=i}else T.el.innerHTML=T.el.innerHTML+i}b(),T.keys.positionCaret(),T.events.trigger("html.inserted")}function P(e){var t=null;if(void 0===e&&(t=T.selection.element()),T.opts.keepFormatOnDelete)return!1;var n,i,r=t?(t.textContent.match(/\u200B/g)||[]).length-t.querySelectorAll(".fr-marker").length:0;if((T.el.textContent.match(/\u200B/g)||[]).length-T.el.querySelectorAll(".fr-marker").length==r)return!1;do{i=!1,n=T.el.querySelectorAll("*:not(.fr-marker)");for(var o=0;o<n.length;o++){var s=n[o];if(t!=s){var a=s.textContent;0===s.children.length&&1===a.length&&8203==a.charCodeAt(0)&&"TD"!==s.tagName&&(ze(s).remove(),i=!0)}}}while(i)}function $(){if(T.$wp){var e=function(){P(),T.placeholder&&setTimeout(T.placeholder.refresh,0)};T.events.on("mouseup",e),T.events.on("keydown",e),T.events.on("contentChanged",E)}}return{defaultTag:d,isPreformatted:a,emptyBlocks:o,emptyBlockTagsQuery:e,blockTagsQuery:f,fillEmptyBlocks:r,cleanEmptyTags:t,cleanWhiteTags:P,cleanBlankSpaces:u,blocks:c,getDoctype:C,set:w,get:D,getSelected:N,insert:F,wrap:n,unwrap:i,escapeEntities:k,checkIfEmpty:E,extractNode:_,extractNodeAttrs:A,extractDoctype:y,cleanBRs:v,_init:$}},ze.extend(ze.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),ze.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function i(){if(!e.$wp)return!1;n(),e.$iframe&&(e.events.on("keyup keydown",function(){setTimeout(t,0)},!0),e.events.on("commands.after html.set init initialized paste.after",t))}return{_init:i,syncIframe:t,refresh:n}},ze.extend(ze.FE.DEFAULTS,{language:null}),ze.FE.LANGUAGE={},ze.FE.MODULES.language=function(e){function t(e){return i&&i.translation[e]&&i.translation[e].length?i.translation[e]:e}function n(){ze.FE.LANGUAGE&&(i=ze.FE.LANGUAGE[e.opts.language]),i&&i.direction&&(e.opts.direction=i.direction)}var i;return{_init:n,translate:t}},ze.extend(ze.FE.DEFAULTS,{placeholderText:"Type something"}),ze.FE.MODULES.placeholder=function(d){function e(){d.$placeholder||u();var e=d.opts.iframe?d.$iframe.prev().outerHeight(!0):d.$el.prev().outerHeight(!0),t=0,n=0,i=0,r=0,o=0,s=0,a=d.node.contents(d.el),l=ze(d.selection.element()).css("text-align");if(a.length&&a[0].nodeType==Node.ELEMENT_NODE){var c=ze(a[0]);(!d.opts.toolbarInline||0<d.$el.prev().length)&&d.ready&&(t=d.helpers.getPX(c.css("margin-top")),r=d.helpers.getPX(c.css("padding-top")),n=d.helpers.getPX(c.css("margin-left")),i=d.helpers.getPX(c.css("margin-right")),o=d.helpers.getPX(c.css("padding-left")),s=d.helpers.getPX(c.css("padding-right"))),d.$placeholder.css("font-size",c.css("font-size")),d.$placeholder.css("line-height",c.css("line-height"))}else d.$placeholder.css("font-size",d.$el.css("font-size")),d.$placeholder.css("line-height",d.$el.css("line-height"));d.$wp.addClass("show-placeholder"),d.$placeholder.css({marginTop:Math.max(d.helpers.getPX(d.$el.css("margin-top")),t)+e,paddingTop:Math.max(d.helpers.getPX(d.$el.css("padding-top")),r),paddingLeft:Math.max(d.helpers.getPX(d.$el.css("padding-left")),o),marginLeft:Math.max(d.helpers.getPX(d.$el.css("margin-left")),n),paddingRight:Math.max(d.helpers.getPX(d.$el.css("padding-right")),s),marginRight:Math.max(d.helpers.getPX(d.$el.css("margin-right")),i),textAlign:l}).text(d.language.translate(d.opts.placeholderText||d.$oel.attr("placeholder")||"")),d.$placeholder.html(d.$placeholder.text().replace(/\n/g,"<br>"))}function t(){d.$wp.removeClass("show-placeholder")}function n(){return!d.$wp||d.node.hasClass(d.$wp.get(0),"show-placeholder")}function i(){if(!d.$wp)return!1;d.core.isEmpty()?e():t()}function u(){d.$placeholder=ze('<span class="fr-placeholder"></span>'),d.$wp.append(d.$placeholder)}function r(){if(!d.$wp)return!1;d.events.on("init input keydown keyup contentChanged initialized",i)}return{_init:r,show:e,hide:t,refresh:i,isVisible:n}},ze.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(t){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),s=!1}function i(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),s=!0}function r(){return s}function o(){e.events.on("focus",function(){r()?e.edit.off():e.edit.on()})}var s=!1;return{_init:o,on:n,off:i,disableDesign:t,isDisabled:r}},ze.extend(ze.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),ze.FE.MODULES.core=function(r){function e(e){if(r.opts.iframe){r.$head.find("style[data-fr-style], link[data-fr-style]").remove(),r.$head.append('<style data-fr-style="true">'+e+"</style>");for(var t=0;t<r.opts.iframeStyleFiles.length;t++){var n=ze('<link data-fr-style="true" rel="stylesheet" href="'+r.opts.iframeStyleFiles[t]+'">');n.get(0).addEventListener("load",r.size.syncIframe),r.$head.append(n)}}}function o(){r.opts.iframe||r.$el.addClass("fr-element fr-view")}function t(){if(r.$box.addClass("fr-box"+(r.opts.editorClass?" "+r.opts.editorClass:"")),r.$wp.addClass("fr-wrapper"),o(),r.opts.iframe){r.$iframe.addClass("fr-iframe"),r.$el.addClass("fr-view");for(var e=0;e<r.o_doc.styleSheets.length;e++){var t;try{t=r.o_doc.styleSheets[e].cssRules}catch(s){}if(t)for(var n=0,i=t.length;n<i;n++)!t[n].selectorText||0!==t[n].selectorText.indexOf(".fr-view")&&0!==t[n].selectorText.indexOf(".fr-element")||0<t[n].style.cssText.length&&(0===t[n].selectorText.indexOf(".fr-view")?r.opts.iframeStyle+=t[n].selectorText.replace(/\.fr-view/g,"body")+"{"+t[n].style.cssText+"}":r.opts.iframeStyle+=t[n].selectorText.replace(/\.fr-element/g,"body")+"{"+t[n].style.cssText+"}")}}"auto"!=r.opts.direction&&r.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+r.opts.direction),r.$el.attr("dir",r.opts.direction),r.$wp.attr("dir",r.opts.direction),1<r.opts.zIndex&&r.$box.css("z-index",r.opts.zIndex),r.opts.theme&&r.$box.addClass(r.opts.theme+"-theme"),r.opts.tabIndex=r.opts.tabIndex||r.$oel.attr("tabIndex"),r.opts.tabIndex&&r.$el.attr("tabIndex",r.opts.tabIndex)}function n(){return r.node.isEmpty(r.el)}function s(){r.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!r.win.FormData,progress:"upload"in new XMLHttpRequest}}function i(e,t){var n=new XMLHttpRequest;for(var i in n.open(t,e,!0),r.opts.requestWithCredentials&&(n.withCredentials=!0),r.opts.requestHeaders)r.opts.requestHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,r.opts.requestHeaders[i]);return n}function a(e){"TEXTAREA"==r.$oel.get(0).tagName&&r.$oel.val(e),r.$wp&&("TEXTAREA"==r.$oel.get(0).tagName?(r.$el.html(""),r.$wp.html(""),r.$box.replaceWith(r.$oel),r.$oel.show()):(r.$wp.replaceWith(e),r.$el.html(""),r.$box.removeClass("fr-view fr-ltr fr-box "+(r.opts.editorClass||"")),r.opts.theme&&r.$box.addClass(r.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function l(){return r.browser.mozilla&&r.helpers.isMobile()?r.selection.inEditor():r.node.hasFocus(r.el)||0<r.$el.find("*:focus").length}function c(e){if(!e)return!1;var t=e.data("instance");return!!t&&t.id==r.id}function d(){if(ze.FE.INSTANCES.push(r),s(),r.$wp){t(),r.html.set(r._original_html),r.$el.attr("spellcheck",r.opts.spellcheck),r.helpers.isMobile()&&(r.$el.attr("autocomplete",r.opts.spellcheck?"on":"off"),r.$el.attr("autocorrect",r.opts.spellcheck?"on":"off"),r.$el.attr("autocapitalize",r.opts.spellcheck?"on":"off")),r.opts.disableRightClick&&r.events.$on(r.$el,"contextmenu",function(e){if(2==e.button)return!1});try{r.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==r.$oel.get(0).tagName&&(r.events.on("contentChanged",function(){r.$oel.val(r.html.get())}),r.events.on("form.submit",function(){r.$oel.val(r.html.get())}),r.events.on("form.reset",function(){r.html.set(r._original_html)}),r.$oel.val(r.html.get())),r.helpers.isIOS()&&r.events.$on(r.$doc,"selectionchange",function(){r.$doc.get(0).hasFocus()||r.$win.get(0).focus()}),r.events.trigger("init")}return{_init:d,destroy:a,isEmpty:n,getXHR:i,injectStyle:e,hasFocus:l,sameInstance:c}},ze.FE.MODULES.cursorLists=function(g){function m(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function v(e){for(var t=e;!g.node.isList(t);)t=t.parentNode;return t}function e(e){var t,n=m(e),i=n.nextSibling,r=n.previousSibling,o=g.html.defaultTag();if(g.node.isEmpty(n,!0)&&i){for(var s="",a="",l=e.parentNode;!g.node.isList(l)&&l.parentNode&&"LI"!==l.parentNode.tagName;)s=g.node.openTagString(l)+s,a+=g.node.closeTagString(l),l=l.parentNode;s=g.node.openTagString(l)+s,a+=g.node.closeTagString(l);var c="";for(c=l.parentNode&&"LI"==l.parentNode.tagName?a+"<li>"+ze.FE.MARKERS+"<br>"+s:o?a+"<"+o+">"+ze.FE.MARKERS+"<br></"+o+">"+s:a+ze.FE.MARKERS+"<br>"+s,ze(n).html('<span id="fr-break"></span>');["UL","OL"].indexOf(l.tagName)<0||l.parentNode&&"LI"===l.parentNode.tagName;)l=l.parentNode;var d=g.node.openTagString(l)+ze(l).html()+g.node.closeTagString(l);d=d.replace(/<span id="fr-break"><\/span>/g,c),ze(l).replaceWith(d),g.$el.find("li:empty").remove()}else if(r&&i||!g.node.isEmpty(n,!0)){for(var u="<br>",f=e.parentNode;f&&"LI"!=f.tagName;)u=g.node.openTagString(f)+u+g.node.closeTagString(f),f=f.parentNode;ze(n).before("<li>"+u+"</li>"),ze(e).remove()}else if(r){t=v(n);for(var h=ze.FE.MARKERS+"<br>",p=e.parentNode;p&&"LI"!=p.tagName;)h=g.node.openTagString(p)+h+g.node.closeTagString(p),p=p.parentNode;t.parentNode&&"LI"==t.parentNode.tagName?ze(t.parentNode).after("<li>"+h+"</li>"):o?ze(t).after("<"+o+">"+h+"</"+o+">"):ze(t).after(h),ze(n).remove()}else(t=v(n)).parentNode&&"LI"==t.parentNode.tagName?i?ze(t.parentNode).before(g.node.openTagString(n)+ze.FE.MARKERS+"<br></li>"):ze(t.parentNode).after(g.node.openTagString(n)+ze.FE.MARKERS+"<br></li>"):o?ze(t).before("<"+o+">"+ze.FE.MARKERS+"<br></"+o+">"):ze(t).before(ze.FE.MARKERS+"<br>"),ze(n).remove()}function t(e){for(var t=m(e),n="",i=e,r="",o="";i!=t;){var s="A"==(i=i.parentNode).tagName&&g.cursor.isAtEnd(e,i)?"fr-to-remove":"";r=g.node.openTagString(ze(i).clone().addClass(s).get(0))+r,o=g.node.closeTagString(i)+o}n=o+n+r+ze.FE.MARKERS,ze(e).replaceWith('<span id="fr-break"></span>');var a=g.node.openTagString(t)+ze(t).html()+g.node.closeTagString(t);a=a.replace(/<span id="fr-break"><\/span>/g,n),ze(t).replaceWith(a)}function n(e){for(var t=m(e),n=ze.FE.MARKERS,i="",r=e,o=!1;r!=t;){var s="A"==(r=r.parentNode).tagName&&g.cursor.isAtEnd(e,r)?"fr-to-remove":"";o||r==t||g.node.isBlock(r)||(o=!0,i+=ze.FE.INVISIBLE_SPACE),i=g.node.openTagString(ze(r).clone().addClass(s).get(0))+i,n+=g.node.closeTagString(r)}var a=i+n;ze(e).remove(),ze(t).after(a)}function i(e){var t=m(e),n=t.previousSibling;if(n){n=ze(n).find(g.html.blockTagsQuery()).get(-1)||n,ze(e).replaceWith(ze.FE.MARKERS);var i=g.node.contents(n);i.length&&"BR"==i[i.length-1].tagName&&ze(i[i.length-1]).remove(),ze(t).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==t&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))});for(var r,o=g.node.contents(t)[0];o&&!g.node.isList(o);)r=o.nextSibling,ze(n).append(o),o=r;for(n=t.previousSibling;o;)r=o.nextSibling,ze(n).append(o),o=r;ze(t).remove()}else{var s=v(t);if(ze(e).replaceWith(ze.FE.MARKERS),s.parentNode&&"LI"==s.parentNode.tagName){var a=s.previousSibling;g.node.isBlock(a)?(ze(t).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==t&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))}),ze(a).append(ze(t).html())):ze(s).before(ze(t).html())}else{var l=g.html.defaultTag();l&&0===ze(t).find(g.html.blockTagsQuery()).length?ze(s).before("<"+l+">"+ze(t).html()+"</"+l+">"):(ze(s).before(ze(t).html()),g.html.wrap())}ze(t).remove(),0===ze(s).find("li").length&&ze(s).remove()}}function r(e){var t,n=m(e),i=n.nextSibling;if(i){(t=g.node.contents(i)).length&&"BR"==t[0].tagName&&ze(t[0]).remove(),ze(i).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))});for(var r,o=e,s=g.node.contents(i)[0];s&&!g.node.isList(s);)r=s.nextSibling,ze(o).after(s),o=s,s=r;for(;s;)r=s.nextSibling,ze(n).append(s),s=r;ze(e).replaceWith(ze.FE.MARKERS),ze(i).remove()}else{for(var a=n;!a.nextSibling&&a!=g.el;)a=a.parentNode;if(a==g.el)return!1;if(a=a.nextSibling,g.node.isBlock(a))ze.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0&&(ze(e).replaceWith(ze.FE.MARKERS),(t=g.node.contents(n)).length&&"BR"==t[t.length-1].tagName&&ze(t[t.length-1]).remove(),ze(n).append(ze(a).html()),ze(a).remove());else for((t=g.node.contents(n)).length&&"BR"==t[t.length-1].tagName&&ze(t[t.length-1]).remove(),ze(e).replaceWith(ze.FE.MARKERS);a&&!g.node.isBlock(a)&&"BR"!=a.tagName;)ze(n).append(ze(a)),a=a.nextSibling}}return{_startEnter:e,_middleEnter:t,_endEnter:n,_backspace:i,_del:r}},ze.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],ze.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],ze.FE.MODULES.cursor=function(h){function o(e){return!!e&&(!!h.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?o(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&o(e.parentNode)))}function s(e){return!!e&&(!!h.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?s(e.previousSibling):!e.previousSibling&&(!(e.previousSibling||!h.node.hasClass(e.parentNode,"fr-inner"))||s(e.parentNode))))}function p(e,t){return!!e&&e!=h.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?p(e.previousSibling,t):!e.previousSibling&&(e.parentNode==t||p(e.parentNode,t)))}function g(e,t){return!!e&&e!=h.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?g(e.nextSibling,t):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==t||g(e.parentNode,t)))}function a(e){return 0<ze(e).parentsUntil(h.$el,"LI").length&&0===ze(e).parentsUntil("LI","TABLE").length}function l(e,t){var n=new RegExp("([\\uD83C-\\uDBFF\\uDC00-\\uDFFF\\u200D]+)"+(t?"":"$"),"i"),i=e.match(n);return i?i[0].length:1}function c(e){var t=0<ze(e).parentsUntil(h.$el,"BLOCKQUOTE").length,n=h.node.deepestParent(e,[],!t);if(n&&"BLOCKQUOTE"==n.tagName){var i=h.node.deepestParent(e,[ze(e).parentsUntil(h.$el,"BLOCKQUOTE").get(0)]);i&&i.previousSibling&&(n=i)}if(null!==n){var r,o=n.previousSibling;if(h.node.isBlock(n)&&h.node.isEditable(n)&&o&&ze.FE.NO_DELETE_TAGS.indexOf(o.tagName)<0)if(h.node.isDeletable(o))ze(o).remove(),ze(e).replaceWith(ze.FE.MARKERS);else if(h.node.isEditable(o))if(h.node.isBlock(o))if(h.node.isEmpty(o)&&!h.node.isList(o))ze(o).remove(),ze(e).after(h.opts.keepFormatOnDelete?ze.FE.INVISIBLE_SPACE:"");else{if(h.node.isList(o)&&(o=ze(o).find("li:last").get(0)),(r=h.node.contents(o)).length&&"BR"==r[r.length-1].tagName&&ze(r[r.length-1]).remove(),"BLOCKQUOTE"==o.tagName&&"BLOCKQUOTE"!=n.tagName)for(r=h.node.contents(o);r.length&&h.node.isBlock(r[r.length-1]);)o=r[r.length-1],r=h.node.contents(o);else if("BLOCKQUOTE"!=o.tagName&&"BLOCKQUOTE"==n.tagName)for(r=h.node.contents(n);r.length&&h.node.isBlock(r[0]);)n=r[0],r=h.node.contents(n);h.node.isEmpty(n)?(ze(e).remove(),h.selection.setAtEnd(o,h.opts.keepFormatOnDelete)):(ze(e).replaceWith(ze.FE.MARKERS),ze(o).append(n.innerHTML)),ze(n).remove()}else ze(e).replaceWith(ze.FE.MARKERS),"BLOCKQUOTE"==n.tagName&&o.nodeType==Node.ELEMENT_NODE?ze(o).remove():(ze(o).after(h.node.isEmpty(n)?"":ze(n).html()),ze(n).remove(),"BR"==o.tagName&&ze(o).remove())}}function d(e){for(var t=e;!t.previousSibling;)if(t=t.parentNode,h.node.isElement(t))return!1;var n;if(t=t.previousSibling,!h.node.isBlock(t)&&h.node.isEditable(t)){for(n=h.node.contents(t);t.nodeType!=Node.TEXT_NODE&&!h.node.isDeletable(t)&&n.length&&h.node.isEditable(t);)t=n[n.length-1],n=h.node.contents(t);if(t.nodeType==Node.TEXT_NODE){var i=t.textContent,r=i.length;h.opts.tabSpaces&&i.length>=h.opts.tabSpaces&&0===i.substr(i.length-h.opts.tabSpaces,i.length-1).replace(/ /g,"").replace(new RegExp(ze.FE.UNICODE_NBSP,"g"),"").length&&(r=i.length-h.opts.tabSpaces),t.textContent=i.substring(0,r-l(i));var o=i.length!=t.textContent.length;0===t.textContent.length?o&&h.opts.keepFormatOnDelete?ze(t).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS):(2!=t.parentNode.childNodes.length||t.parentNode!=e.parentNode)&&1!=t.parentNode.childNodes.length||h.node.isBlock(t.parentNode)||h.node.isElement(t.parentNode)?(ze(t).after(ze.FE.MARKERS),h.node.isElement(t.parentNode)&&!e.nextSibling&&t.previousSibling&&"BR"==t.previousSibling.tagName&&ze(e).after("<br>"),t.parentNode.removeChild(t)):(ze(t.parentNode).after(ze.FE.MARKERS),ze(t.parentNode).remove()):ze(t).after(ze.FE.MARKERS)}else h.node.isDeletable(t)?(ze(t).after(ze.FE.MARKERS),ze(t).remove()):e.nextSibling&&"BR"==e.nextSibling.tagName&&h.node.isVoid(t)&&"BR"!=t.tagName?(ze(e.nextSibling).remove(),ze(e).replaceWith(ze.FE.MARKERS)):!1!==h.events.trigger("node.remove",[ze(t)])&&(ze(t).after(ze.FE.MARKERS),ze(t).remove())}else if(ze.FE.NO_DELETE_TAGS.indexOf(t.tagName)<0&&(h.node.isEditable(t)||h.node.isDeletable(t)))if(h.node.isDeletable(t))ze(e).replaceWith(ze.FE.MARKERS),ze(t).remove();else if(h.node.isEmpty(t)&&!h.node.isList(t))ze(t).remove(),ze(e).replaceWith(ze.FE.MARKERS);else{for(h.node.isList(t)&&(t=ze(t).find("li:last").get(0)),(n=h.node.contents(t))&&"BR"==n[n.length-1].tagName&&ze(n[n.length-1]).remove(),n=h.node.contents(t);n&&h.node.isBlock(n[n.length-1]);)t=n[n.length-1],n=h.node.contents(t);ze(t).append(ze.FE.MARKERS);for(var s=e;!s.previousSibling;)s=s.parentNode;for(;s&&"BR"!==s.tagName&&!h.node.isBlock(s);){var a=s;s=s.nextSibling,ze(t).append(a)}s&&"BR"==s.tagName&&ze(s).remove(),ze(e).remove()}else e.nextSibling&&"BR"==e.nextSibling.tagName&&ze(e.nextSibling).remove()}function e(){var e=!1,t=h.markers.insert();if(!t)return!0;for(var n=t.parentNode;n&&!h.node.isElement(n);){if("false"===n.getAttribute("contenteditable"))return ze(t).replaceWith(ze.FE.MARKERS),h.selection.restore(),!1;if("true"===n.getAttribute("contenteditable"))break;n=n.parentNode}h.el.normalize();var i=t.previousSibling;if(i){var r=i.textContent;r&&r.length&&8203==r.charCodeAt(r.length-1)&&(1==r.length?ze(i).remove():i.textContent=i.textContent.substr(0,r.length-l(r)))}return o(t)?e=d(t):s(t)?a(t)&&p(t,ze(t).parents("li:first").get(0))?h.cursorLists._backspace(t):c(t):e=d(t),ze(t).remove(),f(),h.html.fillEmptyBlocks(!0),h.opts.htmlUntouched||(h.html.cleanEmptyTags(),h.clean.quotes(),h.clean.lists()),h.spaces.normalizeAroundCursor(),h.selection.restore(),e}function u(e){var t=0<ze(e).parentsUntil(h.$el,"BLOCKQUOTE").length,n=h.node.deepestParent(e,[],!t);if(n&&"BLOCKQUOTE"==n.tagName){var i=h.node.deepestParent(e,[ze(e).parentsUntil(h.$el,"BLOCKQUOTE").get(0)]);i&&i.nextSibling&&(n=i)}if(null!==n){var r,o=n.nextSibling;if(h.node.isBlock(n)&&(h.node.isEditable(n)||h.node.isDeletable(n))&&o&&ze.FE.NO_DELETE_TAGS.indexOf(o.tagName)<0)if(h.node.isDeletable(o))ze(o).remove(),ze(e).replaceWith(ze.FE.MARKERS);else if(h.node.isBlock(o)&&h.node.isEditable(o))if(h.node.isList(o))if(h.node.isEmpty(n,!0))ze(n).remove(),ze(o).find("li:first").prepend(ze.FE.MARKERS);else{var s=ze(o).find("li:first");"BLOCKQUOTE"==n.tagName&&((r=h.node.contents(n)).length&&h.node.isBlock(r[r.length-1])&&(n=r[r.length-1])),0===s.find("ul, ol").length&&(ze(e).replaceWith(ze.FE.MARKERS),s.find(h.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==s.get(0)&&ze(this).replaceWith(ze(this).html()+(h.node.isEmpty(this)?"":"<br>"))}),ze(n).append(h.node.contents(s.get(0))),s.remove(),0===ze(o).find("li").length&&ze(o).remove())}else{if((r=h.node.contents(o)).length&&"BR"==r[0].tagName&&ze(r[0]).remove(),"BLOCKQUOTE"!=o.tagName&&"BLOCKQUOTE"==n.tagName)for(r=h.node.contents(n);r.length&&h.node.isBlock(r[r.length-1]);)n=r[r.length-1],r=h.node.contents(n);else if("BLOCKQUOTE"==o.tagName&&"BLOCKQUOTE"!=n.tagName)for(r=h.node.contents(o);r.length&&h.node.isBlock(r[0]);)o=r[0],r=h.node.contents(o);ze(e).replaceWith(ze.FE.MARKERS),ze(n).append(o.innerHTML),ze(o).remove()}else{for(ze(e).replaceWith(ze.FE.MARKERS);o&&"BR"!==o.tagName&&!h.node.isBlock(o)&&h.node.isEditable(o);){var a=o;o=o.nextSibling,ze(n).append(a)}o&&"BR"==o.tagName&&h.node.isEditable(o)&&ze(o).remove()}}}function n(e){for(var t=e;!t.nextSibling;)if(t=t.parentNode,h.node.isElement(t))return!1;if("BR"==(t=t.nextSibling).tagName&&h.node.isEditable(t))if(t.nextSibling){if(h.node.isBlock(t.nextSibling)&&h.node.isEditable(t.nextSibling)){if(!(ze.FE.NO_DELETE_TAGS.indexOf(t.nextSibling.tagName)<0))return void ze(t).remove();t=t.nextSibling,ze(t.previousSibling).remove()}}else if(o(t)){if(a(e))h.cursorLists._del(e);else h.node.deepestParent(t)&&((!h.node.isEmpty(h.node.blockParent(t))||(h.node.blockParent(t).nextSibling&&ze.FE.NO_DELETE_TAGS.indexOf(h.node.blockParent(t).nextSibling.tagName))<0)&&ze(t).remove(),u(e));return}var n;if(!h.node.isBlock(t)&&h.node.isEditable(t)){for(n=h.node.contents(t);t.nodeType!=Node.TEXT_NODE&&n.length&&!h.node.isDeletable(t)&&h.node.isEditable(t);)t=n[0],n=h.node.contents(t);t.nodeType==Node.TEXT_NODE?(ze(t).before(ze.FE.MARKERS),t.textContent.length&&(t.textContent=t.textContent.substring(l(
t.textContent,!0),t.textContent.length))):h.node.isDeletable(t)?(ze(t).before(ze.FE.MARKERS),ze(t).remove()):!1!==h.events.trigger("node.remove",[ze(t)])&&(ze(t).before(ze.FE.MARKERS),ze(t).remove()),ze(e).remove()}else if(ze.FE.NO_DELETE_TAGS.indexOf(t.tagName)<0&&(h.node.isEditable(t)||h.node.isDeletable(t)))if(h.node.isDeletable(t))ze(e).replaceWith(ze.FE.MARKERS),ze(t).remove();else if(h.node.isList(t))e.previousSibling?(ze(t).find("li:first").prepend(e),h.cursorLists._backspace(e)):(ze(t).find("li:first").prepend(ze.FE.MARKERS),ze(e).remove());else if((n=h.node.contents(t))&&"BR"==n[0].tagName&&ze(n[0]).remove(),n&&"BLOCKQUOTE"==t.tagName){var i=n[0];for(ze(e).before(ze.FE.MARKERS);i&&"BR"!=i.tagName;){var r=i;i=i.nextSibling,ze(e).before(r)}i&&"BR"==i.tagName&&ze(i).remove()}else ze(e).after(ze(t).html()).after(ze.FE.MARKERS),ze(t).remove()}function t(){var e=h.markers.insert();if(!e)return!1;if(h.el.normalize(),o(e))if(a(e))if(0===ze(e).parents("li:first").find("ul, ol").length)h.cursorLists._del(e);else{var t=ze(e).parents("li:first").find("ul:first, ol:first").find("li:first");(t=t.find(h.html.blockTagsQuery()).get(-1)||t).prepend(e),h.cursorLists._backspace(e)}else u(e);else n((s(e),e));ze(e).remove(),f(),h.html.fillEmptyBlocks(!0),h.opts.htmlUntouched||(h.html.cleanEmptyTags(),h.clean.quotes(),h.clean.lists()),h.spaces.normalizeAroundCursor(),h.selection.restore()}function f(){for(var e=h.el.querySelectorAll("blockquote:empty"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}function i(){h.$el.find(".fr-to-remove").each(function(){for(var e=h.node.contents(this),t=0;t<e.length;t++)e[t].nodeType==Node.TEXT_NODE&&(e[t].textContent=e[t].textContent.replace(/\u200B/g,""));ze(this).replaceWith(this.innerHTML)})}function m(e,t,n){var i,r=h.node.deepestParent(e,[],!n);if(r&&"BLOCKQUOTE"==r.tagName)return g(e,r)?((i=h.html.defaultTag())?ze(r).after("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):ze(r).after(ze.FE.MARKERS+"<br>"),ze(e).remove()):b(e,t,n),!1;if(null==r)(i=h.html.defaultTag())&&h.node.isElement(e.parentNode)?ze(e).replaceWith("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):!e.previousSibling||ze(e.previousSibling).is("br")||e.nextSibling?ze(e).replaceWith("<br>"+ze.FE.MARKERS):ze(e).replaceWith("<br>"+ze.FE.MARKERS+"<br>");else{var o=e,s="";h.node.isBlock(r)&&!t||(s="<br/>");var a,l="",c="",d="",u="";(i=h.html.defaultTag())&&h.node.isBlock(r)&&(d="<"+i+">",u="</"+i+">",r.tagName==i.toUpperCase()&&(d=h.node.openTagString(ze(r).clone().removeAttr("id").get(0))));do{if(o=o.parentNode,!t||o!=r||t&&!h.node.isBlock(r))if(l+=h.node.closeTagString(o),o==r&&h.node.isBlock(r))c=d+c;else{var f="A"==o.tagName&&g(e,o)?"fr-to-remove":"";c=h.node.openTagString(ze(o).clone().addClass(f).get(0))+c}}while(o!=r);s=l+s+c+(e.parentNode==r&&h.node.isBlock(r)?"":ze.FE.INVISIBLE_SPACE)+ze.FE.MARKERS,h.node.isBlock(r)&&!ze(r).find("*:last").is("br")&&ze(r).append("<br/>"),ze(e).after('<span id="fr-break"></span>'),ze(e).remove(),r.nextSibling&&!h.node.isBlock(r.nextSibling)||h.node.isBlock(r)||ze(r).after("<br>"),a=(a=!t&&h.node.isBlock(r)?h.node.openTagString(r)+ze(r).html()+u:h.node.openTagString(r)+ze(r).html()+h.node.closeTagString(r)).replace(/<span id="fr-break"><\/span>/g,s),ze(r).replaceWith(a)}}function v(e,t,n){var i,r=h.node.deepestParent(e,[],!n);if(r&&"TABLE"==r.tagName)return ze(r).find("td:first, th:first").prepend(e),v(e,t,n);if(r&&"BLOCKQUOTE"==r.tagName){if(p(e,r))return(i=h.html.defaultTag())?ze(r).before("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):ze(r).before(ze.FE.MARKERS+"<br>"),ze(e).remove(),!1;g(e,r)?m(e,t,!0):b(e,t,!0)}if(null==r)(i=h.html.defaultTag())&&h.node.isElement(e.parentNode)?ze(e).replaceWith("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):ze(e).replaceWith("<br>"+ze.FE.MARKERS);else{if(h.node.isBlock(r))if(t)ze(e).remove(),ze(r).prepend("<br>"+ze.FE.MARKERS);else{if(h.node.isEmpty(r,!0))return m(e,t,n);if(h.opts.keepFormatOnDelete){for(var o=e,s=ze.FE.INVISIBLE_SPACE;o!=r&&!h.node.isElement(o);)o=o.parentNode,s=h.node.openTagString(o)+s+h.node.closeTagString(o);ze(r).before(s)}else ze(r).before(h.node.openTagString(ze(r).clone().removeAttr("id").get(0))+"<br>"+h.node.closeTagString(r))}else ze(r).before("<br>");ze(e).remove()}}function b(e,t,n){var i=h.node.deepestParent(e,[],!n);if(null==i)h.html.defaultTag()&&e.parentNode===h.el?ze(e).replaceWith("<"+h.html.defaultTag()+">"+ze.FE.MARKERS+"<br></"+h.html.defaultTag()+">"):(e.nextSibling&&!h.node.isBlock(e.nextSibling)||ze(e).after("<br>"),ze(e).replaceWith("<br>"+ze.FE.MARKERS));else{var r=e,o="";"PRE"==i.tagName&&(t=!0),h.node.isBlock(i)&&!t||(o="<br>");var s="",a="";do{var l=r;if(r=r.parentNode,"BLOCKQUOTE"==i.tagName&&h.node.isEmpty(l)&&!h.node.hasClass(l,"fr-marker")&&0<ze(l).find(e).length&&ze(l).after(e),("BLOCKQUOTE"!=i.tagName||!g(e,r)&&!p(e,r))&&(!t||r!=i||t&&!h.node.isBlock(i))){s+=h.node.closeTagString(r);var c="A"==r.tagName&&g(e,r)?"fr-to-remove":"";a=h.node.openTagString(ze(r).clone().addClass(c).removeAttr("id").get(0))+a}}while(r!=i);var d=i==e.parentNode&&h.node.isBlock(i)||e.nextSibling;if("BLOCKQUOTE"==i.tagName){e.previousSibling&&h.node.isBlock(e.previousSibling)&&e.nextSibling&&"BR"==e.nextSibling.tagName&&(ze(e.nextSibling).after(e),e.nextSibling&&"BR"==e.nextSibling.tagName&&ze(e.nextSibling).remove());var u=h.html.defaultTag();o=s+o+(u?"<"+u+">":"")+ze.FE.MARKERS+"<br>"+(u?"</"+u+">":"")+a}else o=s+o+a+(d?"":ze.FE.INVISIBLE_SPACE)+ze.FE.MARKERS;ze(e).replaceWith('<span id="fr-break"></span>');var f=h.node.openTagString(i)+ze(i).html()+h.node.closeTagString(i);f=f.replace(/<span id="fr-break"><\/span>/g,o),ze(i).replaceWith(f)}}function r(e){var t=h.markers.insert();if(!t)return!0;h.el.normalize();var n=!1;0<ze(t).parentsUntil(h.$el,"BLOCKQUOTE").length&&(n=!(e=!1)),ze(t).parentsUntil(h.$el,"TD, TH").length&&(n=!1),o(t)?!a(t)||e||n?m(t,e,n):h.cursorLists._endEnter(t):s(t)?!a(t)||e||n?v(t,e,n):h.cursorLists._startEnter(t):!a(t)||e||n?b(t,e,n):h.cursorLists._middleEnter(t),i(),h.html.fillEmptyBlocks(!0),h.opts.htmlUntouched||(h.html.cleanEmptyTags(),h.clean.lists()),h.spaces.normalizeAroundCursor(),h.selection.restore()}return{enter:r,backspace:e,del:t,isAtEnd:g,isAtStart:p}},ze.FE.ENTER_P=0,ze.FE.ENTER_DIV=1,ze.FE.ENTER_BR=2,ze.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},ze.extend(ze.FE.DEFAULTS,{enter:ze.FE.ENTER_P,multiLine:!0,tabSpaces:0}),ze.FE.MODULES.keys=function(o){function s(e){N=null,o.opts.multiLine?o.helpers.isIOS()?N=o.snapshot.get():(e.preventDefault(),e.stopPropagation(),o.selection.isCollapsed()||o.selection.remove(),o.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function a(e){e.preventDefault(),e.stopPropagation(),o.opts.multiLine&&(o.selection.isCollapsed()||o.selection.remove(),o.cursor.enter(!0))}function l(){setTimeout(function(){o.events.disableBlur(),o.events.focus()},0)}function c(e){N=null,o.selection.isCollapsed()?o.helpers.isIOS()?N=o.snapshot.get():(o.cursor.backspace(),e.preventDefault(),e.stopPropagation()):(e.preventDefault(),e.stopPropagation(),o.selection.remove(),o.html.fillEmptyBlocks()),o.placeholder.refresh()}function d(e){e.preventDefault(),e.stopPropagation(),""===o.selection.text()?o.cursor.del():o.selection.remove(),o.placeholder.refresh()}function u(e){var t=o.selection.element();if(!o.helpers.isMobile()&&t&&"A"==t.tagName){e.preventDefault(),e.stopPropagation(),o.selection.isCollapsed()||o.selection.remove();var n=o.markers.insert();if(n){var i=n.previousSibling;!n.nextSibling&&n.parentNode&&"A"==n.parentNode.tagName?(n.parentNode.insertAdjacentHTML("afterend","&nbsp;"+ze.FE.MARKERS),n.parentNode.removeChild(n)):(i&&i.nodeType==Node.TEXT_NODE&&1==i.textContent.length&&160==i.textContent.charCodeAt(0)?i.textContent=i.textContent+" ":n.insertAdjacentHTML("beforebegin","&nbsp;"),n.outerHTML=ze.FE.MARKERS),o.selection.restore()}}}function e(){if(o.browser.mozilla&&o.selection.isCollapsed()&&!D){var e=o.selection.ranges(0),t=e.startContainer,n=e.startOffset;t&&t.nodeType==Node.TEXT_NODE&&n<=t.textContent.length&&0<n&&32==t.textContent.charCodeAt(n-1)&&(o.selection.save(),o.spaces.normalize(),o.selection.restore())}}function t(){o.selection.isFull()&&setTimeout(function(){var e=o.html.defaultTag();e?o.$el.html("<"+e+">"+ze.FE.MARKERS+"<br/></"+e+">"):o.$el.html(ze.FE.MARKERS+"<br/>"),o.selection.restore(),o.placeholder.refresh(),o.button.bulkRefresh(),o.undo.saveStep()},0)}function f(e){if(0<o.opts.tabSpaces)if(o.selection.isCollapsed()){o.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var t="",n=0;n<o.opts.tabSpaces;n++)t+="&nbsp;";o.html.insert(t),o.placeholder.refresh(),o.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?o.commands.outdent():o.commands.indent()}function n(){D=!1}function i(){D=!1}function r(){return D}function h(e){o.events.disableBlur();var t=e.which;if(16===t)return!0;if(t===ze.FE.KEYCODE.IME)return D=!0;D=!1;var n=_(t)&&!b(e),i=t==ze.FE.KEYCODE.BACKSPACE||t==ze.FE.KEYCODE.DELETE;if((o.selection.isFull()&&!o.opts.keepFormatOnDelete&&!o.placeholder.isVisible()||i&&o.placeholder.isVisible()&&o.opts.keepFormatOnDelete)&&(n||i)){var r=o.html.defaultTag();if(r?o.$el.html("<"+r+">"+ze.FE.MARKERS+"<br/></"+r+">"):o.$el.html(ze.FE.MARKERS+"<br/>"),o.selection.restore(),!_(t))return e.preventDefault(),!0}t==ze.FE.KEYCODE.ENTER?e.shiftKey?a(e):s(e):t===ze.FE.KEYCODE.BACKSPACE&&(e.metaKey||e.ctrlKey)?l():t!=ze.FE.KEYCODE.BACKSPACE||b(e)||e.altKey?t!=ze.FE.KEYCODE.DELETE||b(e)||e.altKey||e.shiftKey?t==ze.FE.KEYCODE.SPACE?u(e):t==ze.FE.KEYCODE.TAB?f(e):b(e)||!_(e.which)||o.selection.isCollapsed()||e.ctrlKey||o.selection.remove():o.placeholder.isVisible()?(e.preventDefault(),e.stopPropagation()):d(e):o.placeholder.isVisible()?(e.preventDefault(),e.stopPropagation()):c(e),o.events.enableBlur()}function p(e){for(var t=o.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,o.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);t.nextNode();){var n=t.currentNode;n.textContent=n.textContent.replace(/\u200B/gi,"")}}function g(){if(!o.$wp)return!0;var e;o.opts.height||o.opts.heightMax?(e=o.position.getBoundingRect().top,(o.helpers.isIOS()||o.helpers.isAndroid())&&(e-=o.helpers.scrollTop()),o.opts.iframe&&(e+=o.$iframe.offset().top),e>o.$wp.offset().top-o.helpers.scrollTop()+o.$wp.height()-20&&o.$wp.scrollTop(e+o.$wp.scrollTop()-(o.$wp.height()+o.$wp.offset().top)+o.helpers.scrollTop()+20)):(e=o.position.getBoundingRect().top,o.opts.toolbarBottom&&(e+=o.opts.toolbarStickyOffset),(o.helpers.isIOS()||o.helpers.isAndroid())&&(e-=o.helpers.scrollTop()),o.opts.iframe&&(e+=o.$iframe.offset().top,e-=o.helpers.scrollTop()),(e+=o.opts.toolbarStickyOffset)>o.o_win.innerHeight-20&&ze(o.o_win).scrollTop(e+o.helpers.scrollTop()-o.o_win.innerHeight+20),e=o.position.getBoundingRect().top,o.opts.toolbarBottom||(e-=o.opts.toolbarStickyOffset),(o.helpers.isIOS()||o.helpers.isAndroid())&&(e-=o.helpers.scrollTop()),o.opts.iframe&&(e+=o.$iframe.offset().top,e-=o.helpers.scrollTop()),e<o.$tb.height()+20&&0<=e&&ze(o.o_win).scrollTop(e+o.helpers.scrollTop()-o.$tb.height()-20))}function m(){var e=o.selection.element(),t=o.node.blockParent(e);if(t&&"DIV"==t.tagName&&o.selection.info(t).atStart){var n=o.html.defaultTag();t.previousSibling&&"DIV"!=t.previousSibling.tagName&&n&&"div"!=n&&(o.selection.save(),ze(t).replaceWith("<"+n+">"+t.innerHTML+"</"+n+">"),o.selection.restore())}}function v(e){if(o.helpers.isIOS()&&e&&N)if(e.which==ze.FE.KEYCODE.ENTER)o.snapshot.restore(N),o.cursor.enter();else if(e.which==ze.FE.KEYCODE.BACKSPACE){var t=o.snapshot.get();o.snapshot.restore(N),o.cursor.backspace(),o.el.innerHTML!==t.html&&o.snapshot.restore(t)}if(o.helpers.isAndroid()&&o.browser.mozilla)return!0;if(D)return!1;if(!o.selection.isCollapsed())return!0;if(e&&(e.which===ze.FE.KEYCODE.META||e.which==ze.FE.KEYCODE.CTRL))return!0;if(e&&E(e.which))return!0;e&&e.which==ze.FE.KEYCODE.ENTER&&o.helpers.isIOS()&&m(),e&&(e.which==ze.FE.KEYCODE.ENTER||e.which==ze.FE.KEYCODE.BACKSPACE||37<=e.which&&e.which<=40&&!o.browser.msie)&&g(),o.html.cleanBRs(!0,!0);var n=function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&0<t.replace(/\u200B/gi,"").length)},i=function(e){var t=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!o.helpers.isIOS()||0===((e.textContent||"").match(t)||[]).length},r=o.selection.element();n(r)&&!o.node.hasClass(r,"fr-marker")&&"IFRAME"!=r.tagName&&i(r)&&(o.selection.save(),p(r),o.selection.restore())}function b(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function E(e){if(e>=ze.FE.KEYCODE.ARROW_LEFT&&e<=ze.FE.KEYCODE.ARROW_DOWN)return!0}function _(e){if(e>=ze.FE.KEYCODE.ZERO&&e<=ze.FE.KEYCODE.NINE)return!0;if(e>=ze.FE.KEYCODE.NUM_ZERO&&e<=ze.FE.KEYCODE.NUM_MULTIPLY)return!0;if(e>=ze.FE.KEYCODE.A&&e<=ze.FE.KEYCODE.Z)return!0;if(o.browser.webkit&&0===e)return!0;switch(e){case ze.FE.KEYCODE.SPACE:case ze.FE.KEYCODE.QUESTION_MARK:case ze.FE.KEYCODE.NUM_PLUS:case ze.FE.KEYCODE.NUM_MINUS:case ze.FE.KEYCODE.NUM_PERIOD:case ze.FE.KEYCODE.NUM_DIVISION:case ze.FE.KEYCODE.SEMICOLON:case ze.FE.KEYCODE.FF_SEMICOLON:case ze.FE.KEYCODE.DASH:case ze.FE.KEYCODE.EQUALS:case ze.FE.KEYCODE.FF_EQUALS:case ze.FE.KEYCODE.COMMA:case ze.FE.KEYCODE.PERIOD:case ze.FE.KEYCODE.SLASH:case ze.FE.KEYCODE.APOSTROPHE:case ze.FE.KEYCODE.SINGLE_QUOTE:case ze.FE.KEYCODE.OPEN_SQUARE_BRACKET:case ze.FE.KEYCODE.BACKSLASH:case ze.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function y(e){var t=e.which;if(b(e)||37<=t&&t<=40||!_(t)&&t!=ze.FE.KEYCODE.DELETE&&t!=ze.FE.KEYCODE.BACKSPACE&&t!=ze.FE.KEYCODE.ENTER&&t!=ze.FE.KEYCODE.IME)return!0;R||(I=o.snapshot.get(),o.undo.canDo()||o.undo.saveStep()),clearTimeout(R),R=setTimeout(function(){R=null,o.undo.saveStep()},Math.max(250,o.opts.typingTimer))}function T(e){var t=e.which;if(b(e)||37<=t&&t<=40)return!0;I&&R?(o.undo.saveStep(I),I=null):void 0!==t&&0!==t||I||R||o.undo.saveStep()}function C(){R&&(clearTimeout(R),o.undo.saveStep(),I=null)}function A(e){var t=e.which;return b(e)||t==ze.FE.KEYCODE.F5}function S(e){return(!e||"BR"!=e.tagName)&&0===(e.textContent||"").length&&e.querySelector&&!e.querySelector(":scope > br")}function w(e){var t=o.el.childNodes,n=o.html.defaultTag();return!(!e.target||e.target===o.el)||0===t.length||void(o.$el.outerHeight()-e.offsetY<=10?S(t[t.length-1])&&(n?o.$el.append("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):o.$el.append(ze.FE.MARKERS+"<br>"),o.selection.restore(),g()):e.offsetY<=10&&S(t[0])&&(n?o.$el.prepend("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):o.$el.prepend(ze.FE.MARKERS+"<br>"),o.selection.restore(),g()))}function x(){if(o.events.on("keydown",y),o.events.on("input",e),o.events.on("mousedown",i),o.events.on("keyup input",T),o.events.on("keypress",n),o.events.on("keydown",h),o.events.on("keyup",v),o.events.on("html.inserted",v),o.events.on("cut",t),o.events.on("click",w),!o.browser.edge&&o.el.msGetInputContext)try{o.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){D=!0}),o.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){D=!1,v()})}catch(ze){}}var R,I,D=!1,N=null;return{_init:x,ctrlKey:b,isCharacter:_,isArrow:E,forceUndo:C,isIME:r,isBrowserAction:A,positionCaret:g}},ze.FE.MODULES.accessibility=function(u){function a(t){t&&t.length&&(t.data("blur-event-set")||t.parents(".fr-popup").length||(u.events.$on(t,"blur",function(){var e=t.parents(".fr-toolbar, .fr-popup").data("instance")||u;e.events.blurActive()&&e.events.trigger("blur"),e.events.enableBlur()},!0),t.data("blur-event-set",!0)),(t.parents(".fr-toolbar, .fr-popup").data("instance")||u).events.disableBlur(),t.focus(),u.shared.$f_el=t)}function f(e,t){var n=t?"last":"first",i=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[n]();if(i.length)return a(i),!0}function o(e){return e.is("input, textarea")&&t(),u.events.disableBlur(),e.focus(),!0}function h(e,t){var n=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(t?":last":":first");if(n.length)return o(n);if(u.shared.with_kb){var i=e.find(".fr-active-item:visible:first");if(i.length)return o(i);var r=e.find("[tabIndex]:visible:first");if(r.length)return o(r)}}function t(){0===u.$el.find(".fr-marker").length&&u.core.hasFocus()&&u.selection.save()}function p(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function e(i){var r=i.children().not(".fr-buttons");r.data("mouseenter-event-set")||(u.events.$on(r,"mouseenter","[tabIndex]",function(e){var t=i.data("instance")||u;if(!D)return e.stopPropagation(),void e.preventDefault();var n=r.find(":focus:first");n.length&&!n.is("input, button, textarea")&&(t.events.disableBlur(),n.blur(),t.events.disableBlur(),t.events.focus())}),r.data("mouseenter-event-set",!0)),!h(r)&&u.shared.with_kb&&f(i.find(".fr-buttons"))}function n(e){u.core.hasFocus()||(u.events.disableBlur(),u.events.focus()),u.accessibility.saveSelection(),u.events.disableBlur(),u.$el.blur(),u.selection.clear(),u.events.disableBlur(),u.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()}function s(){var e=u.popups.areVisible();if(e){var t=e.find(".fr-buttons");return t.find("button:focus, .fr-group span:focus").length?!f(e.data("instance").$tb):!f(t)}return!f(u.$tb)}function l(){var e=null;return u.shared.$f_el.is(".fr-dropdown.fr-active")?e=u.shared.$f_el:u.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=u.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function i(e,t,n){if(u.shared.$f_el){var i=l();i&&(u.button.click(i),u.shared.$f_el=i);var r,o=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),s=o.index(u.shared.$f_el);if(0===s&&!n||s==o.length-1&&n)t&&(e.parent().is(".fr-popup")&&(r=!h(e.parent().children().not(".fr-buttons"),!n)),!1===r&&(u.shared.$f_el=null)),t&&!1===r||f(e,!n);else a(ze(o.get(s+(n?1:-1))));return!1}}function c(e,t){return i(e,t,!0)}function d(e,t){return i(e,t)}function r(e){if(u.shared.$f_el){var t;if(u.shared.$f_el.is(".fr-dropdown.fr-active"))return a(t=e?u.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():u.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last()),!1;if(u.shared.$f_el.is("a.fr-command"))return(t=e?u.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():u.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(t=e?u.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():u.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),a(t),!1}}function g(){return u.shared.$f_el&&u.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?v():r(!0)}function m(){return r()}function v(){if(u.shared.$f_el){if(u.shared.$f_el.hasClass("fr-dropdown"))u.button.click(u.shared.$f_el);else if(u.shared.$f_el.is("button.fr-back")){u.opts.toolbarInline&&(u.events.disableBlur(),u.events.focus());var e=u.popups.areVisible(u);e&&(u.shared.with_kb=!1),u.button.click(u.shared.$f_el),A(e)}else{if(u.events.disableBlur(),u.button.click(u.shared.$f_el),u.shared.$f_el.attr("data-popup")){var t=u.popups.areVisible(u);t&&t.data("popup-button",u.shared.$f_el)}else if(u.shared.$f_el.attr("data-modal")){var n=u.modals.areVisible(u);n&&n.data("modal-button",u.shared.$f_el)}u.shared.$f_el=null}return!1}}function b(){u.shared.$f_el&&(u.events.disableBlur(),u.shared.$f_el.blur(),u.shared.$f_el=null),!1!==u.events.trigger("toolbar.focusEditor")&&(u.events.disableBlur(),u.events.focus())}function E(e){if(u.shared.$f_el){var t=l();return t?(u.button.click(t),a(t)):e.parent().find(".fr-back:visible").length?(u.shared.with_kb=!1,u.opts.toolbarInline&&(u.events.disableBlur(),u.events.focus()),u.button.exec(e.parent().find(".fr-back:visible:first")),A(e.parent())):u.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(p(u),u.shared.$f_el=null,!1!==u.events.trigger("toolbar.esc")&&(u.popups.hide(e.parent()),u.opts.toolbarInline&&u.toolbar.showInline(null,!0),A(e.parent()))):b()),!1}}function _(e,t){var n=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which,r=!1;return i!=ze.FE.KEYCODE.TAB||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ARROW_RIGHT||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.TAB||n||!e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ARROW_LEFT||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ARROW_UP||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ARROW_DOWN||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ENTER||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.ESC||n||e.shiftKey||e.altKey?i!=ze.FE.KEYCODE.F10||n||e.shiftKey||!e.altKey||(r=s()):r=E(t):r=v():r=g():r=m():r=d(t):r=d(t,!0):r=c(t):r=c(t,!0),u.shared.$f_el||void 0!==r||(r=!0),!r&&u.keys.isBrowserAction(e)&&(r=!0),!!r||(e.preventDefault(),e.stopPropagation(),!1)}function y(i){i&&i.length&&(u.events.$on(i,"keydown",function(e){if(!ze(e.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var t=i.parents(".fr-popup").data("instance")||i.data("instance")||u;u.shared.with_kb=!0;var n=t.accessibility.exec(e,i);return u.shared.with_kb=!1,n},!0),u.events.$on(i,"mouseenter","[tabIndex]",function(e){var t=i.parents(".fr-popup").data("instance")||i.data("instance")||u;if(!D)return e.stopPropagation(),void e.preventDefault();var n=ze(e.currentTarget);t.shared.$f_el&&t.shared.$f_el.not(n)&&t.accessibility.focusEditor()},!0))}function T(e){var t=u.popups.get(e),n=C(e);y(t.find(".fr-buttons")),u.events.$on(t,"mouseenter","tabIndex",n._tiMouseenter,!0),u.events.$on(t.children().not(".fr-buttons"),"keydown","[tabIndex]",n._tiKeydown,!0),u.popups.onHide(e,function(){p(t.data("instance")||u)}),u.popups.onShow(e,function(){D=!1,setTimeout(function(){D=!0},0)})}function C(c){var d=u.popups.get(c);return{_tiKeydown:function(e){var t=d.data("instance")||u;if(!1===t.events.trigger("popup.tab",[e]))return!1;var n=e.which,i=d.find(":focus:first");if(ze.FE.KEYCODE.TAB==n){e.preventDefault();var r=d.children().not(".fr-buttons"),o=r.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),s=o.indexOf(this)+(e.shiftKey?-1:1);if(0<=s&&s<o.length)return t.events.disableBlur(),ze(o[s]).focus(),e.stopPropagation(),!1;var a=d.find(".fr-buttons");if(a.length&&f(a,!!e.shiftKey))return e.stopPropagation(),!1;if(h(r))return e.stopPropagation(),!1}else{if(ze.FE.KEYCODE.ENTER!=n)return ze.FE.KEYCODE.ESC==n?(e.preventDefault(),e.stopPropagation(),p(t),t.popups.isVisible(c)&&d.find(".fr-back:visible").length?(t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(d.find(".fr-back:visible:first")),A(d)):t.popups.isVisible(c)&&d.find(".fr-dismiss:visible").length?t.button.exec(d.find(".fr-dismiss:visible:first")):(t.popups.hide(c),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),A(d)),!1):ze.FE.KEYCODE.SPACE==n&&(i.is(".fr-submit")||i.is(".fr-dismiss"))?(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(i),!0):t.keys.isBrowserAction(e)?void e.stopPropagation():i.is("input[type=text], textarea")?void e.stopPropagation():ze.FE.KEYCODE.SPACE==n&&(i.is(".fr-link-attr")||i.is("input[type=file]"))?void e.stopPropagation():(e.stopPropagation(),e.preventDefault(),!1);var l=null;0<d.find(".fr-submit:visible").length?l=d.find(".fr-submit:visible:first"):d.find(".fr-dismiss:visible").length&&(l=d.find(".fr-dismiss:visible:first")),l&&(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(l))}},_tiMouseenter:function(){x(d.data("instance")||u)}}}function A(e){var t=e.data("popup-button");t&&setTimeout(function(){a(t),e.data("popup-button",null)},0)}function S(e){var t=e.data("modal-button");t&&setTimeout(function(){a(t),e.data("modal-button",null)},0)}function w(){return null!=u.shared.$f_el}function x(e){var t=u.popups.areVisible(e);t&&t.data("popup-button",null)}function R(e){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey;if(e.which!=ze.FE.KEYCODE.F10||t||e.shiftKey||!e.altKey)return!0;u.shared.with_kb=!0;var n=u.popups.areVisible(u),i=!1;return n&&(i=h(n.children().not(".fr-buttons"))),i||s(),u.shared.with_kb=!1,e.preventDefault(),e.stopPropagation(),!1}function I(){u.$wp?u.events.on("keydown",R,!0):u.events.$on(u.$win,"keydown",R,!0),u.events.on("mousedown",function(e){x(u),u.shared.$f_el&&(p(u),e.stopPropagation(),u.events.disableBlur(),u.shared.$f_el=null)},!0),u.events.on("blur",function(){u.shared.$f_el=null,x(u)},!0)}var D=!0;return{_init:I,registerPopup:T,registerToolbar:y,focusToolbarElement:a,focusToolbar:f,focusContent:h,focusPopup:e,focusModal:n,focusEditor:b,focusPopupButton:A,focusModalButton:S,hasFocus:w,exec:_,saveSelection:t,restoreSelection:p}},ze.FE.MODULES.format=function(A){function l(e,t){var n="<"+e;for(var i in t)t.hasOwnProperty(i)&&(n+=" "+i+'="'+t[i]+'"');return n+">"}function s(e){return"</"+e+">"}function d(e,t){var n=e;for(var i in t)t.hasOwnProperty(i)&&(n+="id"==i?"#"+t[i]:"class"==i?"."+t[i]:"["+i+'="'+t[i]+'"]');return n}function u(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function S(e,t,n){if(e){if(A.node.isBlock(e))return S(e.firstChild,t,n),!1;for(var i=ze(l(t,n)).insertBefore(e),r=e;r&&!ze(r).is(".fr-marker")&&0===ze(r).find(".fr-marker").length&&"UL"!=r.tagName&&"OL"!=r.tagName;){var o=r;r=r.nextSibling,i.append(o)}if(r)(ze(r).find(".fr-marker").length||"UL"==r.tagName||"OL"==r.tagName)&&S(r.firstChild,t,n);else{for(var s=i.get(0).parentNode;s&&!s.nextSibling&&!A.node.isElement(s);)s=s.parentNode;if(s){var a=s.nextSibling;a&&(A.node.isBlock(a)?S(a.firstChild,t,n):S(a,t,n))}}i.is(":empty")&&i.remove()}}function n(e,t){var n;if(void 0===t&&(t={}),t.style&&delete t.style,A.selection.isCollapsed())A.markers.insert(),A.$el.find(".fr-marker").replaceWith(l(e,t)+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+s(e)),A.selection.restore();else{var i;A.selection.save(),S(A.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,e,t);do{for(i=A.$el.find(d(e,t)+" > "+d(e,t)),n=0;n<i.length;n++)i[n].outerHTML=i[n].innerHTML}while(i.length);A.el.normalize();var r=A.el.querySelectorAll(".fr-marker");for(n=0;n<r.length;n++){var o=ze(r[n]);!0===o.data("type")?u(o.get(0).nextSibling,d(e,t))&&o.next().prepend(o):u(o.get(0).previousSibling,d(e,t))&&o.prev().append(o)}A.selection.restore()}}function w(e,t,n,i){if(!i){var r=!1;if(!0===e.data("type"))for(;A.node.isFirstSibling(e.get(0))&&!e.parent().is(A.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),r=!0;else if(!1===e.data("type"))for(;A.node.isLastSibling(e.get(0))&&!e.parent().is(A.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),r=!0;if(r)return!0}if(e.parents(t).length||void 0===t){var o="",s="",a=e.parent();if(a.is(A.$el)||A.node.isBlock(a.get(0)))return!1;for(;!A.node.isBlock(a.parent().get(0))&&(void 0===t||void 0!==t&&!u(a.get(0),d(t,n)));)o+=A.node.closeTagString(a.get(0)),s=A.node.openTagString(a.get(0))+s,a=a.parent();var l=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var c=a.html().replace(/<span id="mark"><\/span>/,o+A.node.closeTagString(a.get(0))+s+l+o+A.node.openTagString(a.get(0))+s);return a.replaceWith(A.node.openTagString(a.get(0))+c+A.node.closeTagString(a.get(0))),!0}return!1}function f(e,t,n,i){for(var r=A.node.contents(e.get(0)),o=0;o<r.length;o++){var s=r[o];if(A.node.hasClass(s,"fr-marker"))t=(t+1)%2;else if(t)if(0<ze(s).find(".fr-marker").length)t=f(ze(s),t,n,i);else{for(var a=ze(s).find(n||"*"),l=a.length-1;0<=l;l--){var c=a[l];A.node.isBlock(c)||A.node.isVoid(c)||void 0!==n&&!u(c,d(n,i))||(c.outerHTML=c.innerHTML)}void 0===n&&s.nodeType==Node.ELEMENT_NODE&&!A.node.isVoid(s)&&!A.node.isBlock(s)||u(s,d(n,i))?ze(s).replaceWith(s.innerHTML):void 0===n&&s.nodeType==Node.ELEMENT_NODE&&A.node.isBlock(s)&&A.node.clearAttributes(s)}else 0<ze(s).find(".fr-marker").length&&(t=f(ze(s),t,n,i))}return t}function i(e,t){void 0===t&&(t={}),t.style&&delete t.style;var n=A.selection.isCollapsed();A.selection.save();for(var i=!0;i;){i=!1;for(var r=A.$el.find(".fr-marker"),o=0;o<r.length;o++){var s=ze(r[o]),a=null;if(s.attr("data-cloned")||n||(a=s.clone().removeClass("fr-marker").addClass("fr-clone"),!0===s.data("type")?s.attr("data-cloned",!0).after(a):s.attr("data-cloned",!0).before(a)),w(s,e,t,n)){i=!0;break}}}f(A.$el,0,e,t),n||(A.$el.find(".fr-marker").remove(),A.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),n&&A.$el.find(".fr-marker").before(ze.FE.INVISIBLE_SPACE).after(ze.FE.INVISIBLE_SPACE),A.html.cleanEmptyTags(),A.el.normalize(),A.selection.restore()}function e(e,t){o(e,t)?i(e,t):n(e,t)}function x(e,t){var n=ze(e);n.css(t,""),""===n.attr("style")&&n.replaceWith(n.html())}function R(e,t){return 0===ze(e).attr("style").indexOf(t+":")||0<=ze(e).attr("style").indexOf(";"+t+":")||0<=ze(e).attr("style").indexOf("; "+t+":")}function t(e,t){var n,i;if(A.selection.isCollapsed()){A.markers.insert();var r=(i=A.$el.find(".fr-marker")).parent();if(A.node.openTagString(r.get(0))=='<span style="'+e+": "+r.css(e)+';">'){if(A.node.isEmpty(r.get(0)))r.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>");else{var o={};o[e]=t,w(i,"span",o,!0),i=A.$el.find(".fr-marker"),t?i.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>"):i.replaceWith(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS)}A.html.cleanEmptyTags()}else A.node.isEmpty(r.get(0))&&r.is("span")?(i.replaceWith(ze.FE.MARKERS),r.css(e,t)):i.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>");A.selection.restore()}else{if(A.selection.save(),null==t||"color"==e&&0<A.$el.find(".fr-marker").parents("u, a").length){var s=A.$el.find(".fr-marker");for(n=0;n<s.length;n++)if(!0===(i=ze(s[n])).data("type"))for(;A.node.isFirstSibling(i.get(0))&&!i.parent().is(A.$el)&&!A.node.isElement(i.parent().get(0))&&!A.node.isBlock(i.parent().get(0));)i.parent().before(i);else for(;A.node.isLastSibling(i.get(0))&&!i.parent().is(A.$el)&&!A.node.isElement(i.parent().get(0))&&!A.node.isBlock(i.parent().get(0));)i.parent().after(i)}var a=A.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,l={"class":"fr-unprocessed"};for(t&&(l.style=e+": "+t+";"),S(a,"span",l),A.$el.find(".fr-marker + .fr-unprocessed").each(function(){ze(this).prepend(ze(this).prev())}),A.$el.find(".fr-unprocessed + .fr-marker").each(function(){ze(this).prev().append(this)}),(t||"").match(/\dem$/)&&A.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");0<A.$el.find("span.fr-unprocessed").length;){var c=A.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(c.parent().get(0).normalize(),c.parent().is("span")&&1==c.parent().get(0).childNodes.length){c.parent().css(e,t);var d=c;c=c.parent(),d.replaceWith(d.html())}var u=c.find("span");for(n=u.length-1;0<=n;n--)x(u[n],e);var f=c.parentsUntil(A.$el,"span[style]"),h=[];for(n=f.length-1;0<=n;n--)R(f[n],e)||h.push(f[n]);if((f=f.not(h)).length){for(var p="",g="",m="",v="",b=c.get(0);b=b.parentNode,ze(b).addClass("fr-split"),p+=A.node.closeTagString(b),g=A.node.openTagString(ze(b).clone().addClass("fr-split").get(0))+g,f.get(0)!=b&&(m+=A.node.closeTagString(b),v=A.node.openTagString(ze(b).clone().addClass("fr-split").get(0))+v),f.get(0)!=b;);var E=p+A.node.openTagString(ze(f.get(0)).clone().css(e,t||"").get(0))+v+c.css(e,"").get(0).outerHTML+m+"</span>"+g;c.replaceWith('<span id="fr-break"></span>');var _=f.get(0).outerHTML;ze(f.get(0)).replaceWith(_.replace(/<span id="fr-break"><\/span>/g,E))}}for(;0<A.$el.find(".fr-split:empty"
).length;)A.$el.find(".fr-split:empty").remove();A.$el.find(".fr-split").removeClass("fr-split"),A.$el.find('span[style=""]').removeAttr("style"),A.$el.find('span[class=""]').removeAttr("class"),A.html.cleanEmptyTags(),ze(A.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||ze(this).replaceWith(this.innerHTML)}),A.el.normalize();var y=A.$el.find("span[style] + span[style]");for(n=0;n<y.length;n++){var T=ze(y[n]),C=ze(y[n]).prev();T.get(0).previousSibling==C.get(0)&&A.node.openTagString(T.get(0))==A.node.openTagString(C.get(0))&&(T.prepend(C.html()),C.remove())}A.$el.find("span[style] span[style]").each(function(){if(0<=ze(this).attr("style").indexOf("font-size")){var e=ze(this).parents("span[style]");0<=e.attr("style").indexOf("background-color")&&(ze(this).attr("style",ze(this).attr("style")+";"+e.attr("style")),w(ze(this),"span[style]",{},!1))}}),A.el.normalize(),A.selection.restore()}}function r(e){t(e,null)}function o(e,t){void 0===t&&(t={}),t.style&&delete t.style;var n=A.selection.ranges(0),i=n.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&0<i.childNodes.length&&i.childNodes[n.startOffset]&&(i=i.childNodes[n.startOffset]),!n.collapsed&&i.nodeType==Node.TEXT_NODE&&n.startOffset==(i.textContent||"").length){for(;!A.node.isBlock(i.parentNode)&&!i.nextSibling;)i=i.parentNode;i.nextSibling&&(i=i.nextSibling)}for(var r=i;r&&r.nodeType==Node.ELEMENT_NODE&&!u(r,d(e,t));)r=r.firstChild;if(r&&r.nodeType==Node.ELEMENT_NODE&&u(r,d(e,t)))return!0;var o=i;for(o&&o.nodeType!=Node.ELEMENT_NODE&&(o=o.parentNode);o&&o.nodeType==Node.ELEMENT_NODE&&o!=A.el&&!u(o,d(e,t));)o=o.parentNode;return!(!o||o.nodeType!=Node.ELEMENT_NODE||o==A.el||!u(o,d(e,t)))}return{is:o,toggle:e,apply:n,remove:i,applyStyle:t,removeStyle:r}},ze.extend(ze.FE.DEFAULTS,{indentMargin:20}),ze.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},ze.FE.RegisterCommand=function(e,t){ze.FE.COMMANDS[e]=t},ze.FE.MODULES.commands=function(s){function r(e){return s.html.defaultTag()&&(e="<"+s.html.defaultTag()+">"+e+"</"+s.html.defaultTag()+">"),e}function t(e,t){if(!1!==s.events.trigger("commands.before",ze.merge([e],t||[]))){var n=ze.FE.COMMANDS[e]&&ze.FE.COMMANDS[e].callback||a[e],i=!0,r=!1;ze.FE.COMMANDS[e]&&(void 0!==ze.FE.COMMANDS[e].focus&&(i=ze.FE.COMMANDS[e].focus),void 0!==ze.FE.COMMANDS[e].accessibilityFocus&&(r=ze.FE.COMMANDS[e].accessibilityFocus)),(!s.core.hasFocus()&&i&&!s.popups.areVisible()||!s.core.hasFocus()&&r&&s.accessibility.hasFocus())&&s.events.focus(!0),ze.FE.COMMANDS[e]&&!1!==ze.FE.COMMANDS[e].undo&&(s.$el.find(".fr-marker").length&&(s.events.disableBlur(),s.selection.restore()),s.undo.saveStep()),n&&n.apply(s,ze.merge([e],t||[])),s.events.trigger("commands.after",ze.merge([e],t||[])),ze.FE.COMMANDS[e]&&!1!==ze.FE.COMMANDS[e].undo&&s.undo.saveStep()}}function e(e,t){s.format.toggle(t)}function n(e){s.selection.save(),s.html.wrap(!0,!0,!0,!0),s.selection.restore();for(var t=s.selection.blocks(),n=0;n<t.length;n++)if("LI"!=t[n].tagName&&"LI"!=t[n].parentNode.tagName){var i=ze(t[n]),r="rtl"==s.opts.direction||"rtl"==i.css("direction")?"margin-right":"margin-left",o=s.helpers.getPX(i.css(r));i.css(r,Math.max(o+e*s.opts.indentMargin,0)||""),i.removeClass("fr-temp-div")}s.selection.save(),s.html.unwrap(),s.selection.restore()}function i(e){return function(){t(e)}}function o(){s.events.on("keydown",function(e){var t=s.selection.element();if(t&&"HR"==t.tagName&&!s.keys.isArrow(e.which))return e.preventDefault(),!1}),s.events.on("keyup",function(e){var t=s.selection.element();if(t&&"HR"==t.tagName)if(e.which==ze.FE.KEYCODE.ARROW_LEFT||e.which==ze.FE.KEYCODE.ARROW_UP){if(t.previousSibling)return s.node.isBlock(t.previousSibling)?s.selection.setAtEnd(t.previousSibling):ze(t).before(ze.FE.MARKERS),s.selection.restore(),!1}else if((e.which==ze.FE.KEYCODE.ARROW_RIGHT||e.which==ze.FE.KEYCODE.ARROW_DOWN)&&t.nextSibling)return s.node.isBlock(t.nextSibling)?s.selection.setAtStart(t.nextSibling):ze(t).after(ze.FE.MARKERS),s.selection.restore(),!1}),s.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),s.events.on("mouseup",function(){var e=s.selection.element();e==s.selection.endElement()&&e&&"HR"==e.tagName&&(e.nextSibling&&(s.node.isBlock(e.nextSibling)?s.selection.setAtStart(e.nextSibling):ze(e).after(ze.FE.MARKERS)),s.selection.restore())})}var a={bold:function(){e("bold","strong")},subscript:function(){s.format.is("sup")&&s.format.remove("sup"),e("subscript","sub")},superscript:function(){s.format.is("sub")&&s.format.remove("sub"),e("superscript","sup")},italic:function(){e("italic","em")},strikeThrough:function(){e("strikeThrough","s")},underline:function(){e("underline","u")},undo:function(){s.undo.run()},redo:function(){s.undo.redo()},indent:function(){n(1)},outdent:function(){n(-1)},show:function(){s.opts.toolbarInline&&s.toolbar.showInline(null,!0)},insertHR:function(){s.selection.remove();var e="";s.core.isEmpty()&&(e=r(e="<br>")),s.html.insert('<hr id="fr-just">'+e);var t,n=s.$el.find("hr#fr-just");if(n.removeAttr("id"),0===n.next().length){var i=s.html.defaultTag();i?n.after(ze("<"+i+">").append("<br>")):n.after("<br>")}n.prev().is("hr")?t=s.selection.setAfter(n.get(0),!1):n.next().is("hr")?t=s.selection.setBefore(n.get(0),!1):s.selection.setAfter(n.get(0),!1)||s.selection.setBefore(n.get(0),!1),t||void 0===t||(e=r(e=ze.FE.MARKERS+"<br>"),n.after(e)),s.selection.restore()},clearFormatting:function(){s.format.remove()},selectAll:function(){s.doc.execCommand("selectAll",!1,!1)}},l={};for(var c in a)a.hasOwnProperty(c)&&(l[c]=i(c));return ze.extend(l,{exec:t,_init:o})},ze.FE.MODULES.data=function(o){function c(e){return e}function e(e){if(!e)return e;for(var t="",n=c("charCodeAt"),i=c("fromCharCode"),r=h.indexOf(e[0]),o=1;o<e.length-2;o++){for(var s=d(++r),a=e[n](o),l="";/[0-9-]/.test(e[o+1]);)l+=e[++o];a=u(a,s,l=parseInt(l,10)||0),a^=r-1&31,t+=String[i](a)}return t}function d(e){for(var t=e.toString(),n=0,i=0;i<t.length;i++)n+=parseInt(t.charAt(i),10);return 10<n?n%9+1:n}function u(e,t,n){for(var i=Math.abs(n);0<i--;)e-=t;return n<0&&(e+=123),e}function t(e){return!(!e||"block"===e.css("display")||(e.remove(),0))}function s(){return t(l)||t(f)}function a(){if(10<i&&o.destroy(),!o.$box)return!1;o.$wp.prepend(g(c(g("NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==")))),l=o.$wp.find("> div:first"),f=l.find("> a"),"rtl"==o.opts.direction&&l.css("left","auto").css("right",0).setAttribute("direction","rtl"),i++}function n(){var e=o.o_win.FEK;try{e=e||localStorage&&localStorage.FEK}catch(f){}e=e||o.opts.key||[""];var t=g(c("ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9=="));"string"==typeof e&&(e=[e]),o.ul=!0;for(var n=0;n<e.length;n++){var i=g(e[n])||"";if(!(i!==g(c(g("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&i.indexOf(p,i.length-p.length)<0&&[g("9qqG-7amjlwq=="),g("KA3B3C2A6D1D5H5H1A3=="),g("QzbzvxyB2yA-9m=="),g("ji1kacwmgG5bc=="),g("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(p)<0)){o.ul=!1;break}}var r=new Image;!0===o.ul&&(a(),r.src=c(g(t))+"u"),o.events.on("contentChanged",function(){!0===o.ul&&s()&&a()}),o.events.on("destroy",function(){l&&l.length&&l.remove()},!0)}var l,f,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=function(){for(var e=0,t=document.domain,n=t.split("."),i="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),g=c(e),i=0;return{_init:n}},ze.extend(ze.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),ze.FE.MODULES.paste=function(y){function n(e,t){try{y.win.localStorage.setItem("fr-copied-html",e),y.win.localStorage.setItem("fr-copied-text",t)}catch(i){}}function i(e){var t=y.html.getSelected();n(t,ze("<div>").html(t).text()),"cut"==e.type&&(y.undo.saveStep(),setTimeout(function(){y.selection.save(),y.html.wrap(),y.selection.restore(),y.events.focus(),y.undo.saveStep()},0))}function e(e){if(h)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===y.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(y.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var t="",n=e.clipboardData.types;if(y.helpers.isArray(n))for(var i=0;i<n.length;i++)t+=n[i]+";";else t=n;if(d="",/text\/rtf/.test(t)&&(u=e.clipboardData.getData("text/rtf")),/text\/html/.test(t)?d=e.clipboardData.getData("text/html"):/text\/rtf/.test(t)&&y.browser.safari?d=u:/text\/plain/.test(t)&&!y.browser.mozilla&&(d=y.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==d)return o(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;d=null}return r(),!1}function t(e){if(e.originalEvent&&(e=e.originalEvent),e&&e.dataTransfer&&e.dataTransfer.getData){var t="",n=e.dataTransfer.types;if(y.helpers.isArray(n))for(var i=0;i<n.length;i++)t+=n[i]+";";else t=n;if(d="",/text\/rtf/.test(t)&&(u=e.dataTransfer.getData("text/rtf")),/text\/html/.test(t)?d=e.dataTransfer.getData("text/html"):/text\/rtf/.test(t)&&y.browser.safari?d=u:/text\/plain/.test(t)&&!this.browser.mozilla&&(d=y.html.escapeEntities(e.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==d){if(y.keys.forceUndo(),w=y.snapshot.get(),y.selection.remove(),!1!==y.markers.insertAtPoint(e)){var r=y.el.querySelector(".fr-marker");return ze(r).replaceWith(ze.FE.MARKERS),o(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1}}else d=null}}function r(){y.selection.save(),y.events.disableBlur(),d=null,f?(f.html(""),y.browser.edge&&y.opts.iframe&&y.$el.append(f)):(f=ze('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%;" tabIndex="-1"></div>'),y.browser.safari?(f.css("top",y.$sc.scrollTop()),y.$el.after(f)):y.browser.edge&&y.opts.iframe?y.$el.append(f):y.$box.after(f),y.events.on("destroy",function(){f.remove()})),f.focus(),y.win.setTimeout(o,1)}function T(e){var t;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var n,i=["style","script","applet","embed","noframes","noscript"];for(t=0;t<i.length;t++){var r=new RegExp("<"+i[t]+".*?"+i[t]+"(.*?)>","gi");e=e.replace(r,"")}for(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");(e=(n=e).replace(/<[^\/>][^>]*><\/[^>]+>/gi,""))!=n;);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=(e=(e=y.clean.html(e,y.opts.pasteDeniedTags,y.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var o=y.o_doc.createElement("div");o.innerHTML=e;var s=o.querySelectorAll("li[data-indent]");for(t=0;t<s.length;t++){var a=s[t],l=a.previousElementSibling;if(l&&"LI"==l.tagName){var c=l.querySelector(":scope > ul, :scope > ol");c||(c=document.createElement("ul"),l.appendChild(c)),c.appendChild(a)}else a.removeAttribute("data-indent")}return y.html.cleanBlankSpaces(o),o.innerHTML}function C(e){var t,n=null,i=y.doc.createElement("div");i.innerHTML=e;var r=i.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(t=0;t<r.length;t++)(n=r[t]).outerHTML="<"+(y.html.defaultTag()||"DIV")+">"+n.innerHTML+"</"+(y.html.defaultTag()||"DIV")+">";for(t=(r=i.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;0<=t;t--)(n=r[t]).outerHTML=n.innerHTML;var o=function(e){for(var t=y.node.contents(e),n=0;n<t.length;n++)t[n].nodeType!=Node.TEXT_NODE&&t[n].nodeType!=Node.ELEMENT_NODE?t[n].parentNode.removeChild(t[n]):o(t[n])};return o(i),i.innerHTML}function o(){y.browser.edge&&y.opts.iframe&&y.$box.after(f),w||(y.keys.forceUndo(),w=y.snapshot.get()),null===d&&(d=f.get(0).innerHTML,y.selection.restore(),y.events.enableBlur());var e=d.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),t=y.events.chainTrigger("paste.beforeCleanup",d);t&&"string"==typeof t&&(d=t),(!e||e&&!1!==y.events.trigger("paste.wordPaste",[d]))&&s(d,e)}function s(e,t,n){var i,r=null,o=null;0<=e.toLowerCase().indexOf("<body")&&(e=(e=e.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1")).replace(/ \n/g," ").replace(/\n /g," ").replace(/([^>])\n([^<])/g,"$1 $2"));var s=!1;if(0<=e.indexOf('id="docs-internal-guid')&&(e=e.replace(/^[\w\W\s\S]* id="docs-internal-guid[^>]*>([\w\W\s\S]*)<\/b>[\w\W\s\S]*$/g,"$1"),s=!0),!t){var a=y.opts.htmlAllowedStyleProps;y.opts.htmlAllowedStyleProps=y.opts.pasteAllowedStyleProps,y.opts.htmlAllowComments=!1,e=y.clean.html(e,y.opts.pasteDeniedTags,y.opts.pasteDeniedAttrs),y.opts.htmlAllowedStyleProps=a,y.opts.htmlAllowComments=!0,e=(e=S(e)).replace(/\r|\n|\t/g,"");var l=y.doc.createElement("div");l.innerHTML=e;var c=null,d=null;try{c=y.win.localStorage.getItem("fr-copied-html"),d=y.win.localStorage.getItem("fr-copied-text")}catch(_){}d&&l.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==d.replace(/(\u00A0)/gi," ").replace(/(\r|\n)+([ ]+[\r\n]+)*/gi," ")&&(e=c),e=e.replace(/^ */g,"").replace(/ *$/g,"")}!t||y.wordPaste&&n||(0===(e=e.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(e="<table>"+e+"</table>"),e=S(e=T(e))),y.opts.pastePlain&&(e=C(e));var u=y.events.chainTrigger("paste.afterCleanup",e);if("string"==typeof u&&(e=u),""!==e){var f=y.o_doc.createElement("div");f.innerHTML=e,y.spaces.normalize(f);var h=f.getElementsByTagName("span");for(i=h.length-1;0<=i;i--){var p=h[i];0===p.attributes.length&&(p.outerHTML=p.innerHTML)}var g=y.selection.element(),m=!1;if(g&&ze(g).parentsUntil(y.el,"ul, ol").length&&(m=!0),m){var v=f.children;1==v.length&&0<=["OL","UL"].indexOf(v[0].tagName)&&(v[0].outerHTML=v[0].innerHTML)}if(!s){var b=f.getElementsByTagName("br");for(i=b.length-1;0<=i;i--){var E=b[i];y.node.isBlock(E.previousSibling)&&E.parentNode.removeChild(E)}}if(y.opts.enter==ze.FE.ENTER_BR)for(i=(r=f.querySelectorAll("p, div")).length-1;0<=i;i--)0===(o=r[i]).attributes.length&&(o.outerHTML=o.innerHTML+(o.nextSibling&&!y.node.isEmpty(o)?"<br>":""));else if(y.opts.enter==ze.FE.ENTER_DIV)for(i=(r=f.getElementsByTagName("p")).length-1;0<=i;i--)(o=r[i]).outerHTML="<div>"+o.innerHTML+"</div>";else y.opts.enter==ze.FE.ENTER_P&&f.childNodes.length&&"P"==f.childNodes[0].tagName&&(f.childNodes[0].outerHTML=f.childNodes[0].innerHTML);e=f.innerHTML,y.html.insert(e,!0)}A(),y.undo.saveStep(w),w=null,y.undo.saveStep()}function A(){y.events.trigger("paste.after")}function a(){return u}function S(e){var t,n=y.o_doc.createElement("div");n.innerHTML=e;for(var i=n.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+ze.FE.VOID_ELEMENTS.join("):not(")+")");i.length;){for(t=0;t<i.length;t++)i[t].parentNode.removeChild(i[t]);i=n.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+ze.FE.VOID_ELEMENTS.join("):not(")+")")}for(var r=n.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");r.length;){var o=r[r.length-1];if(y.html.defaultTag()&&"div"!=y.html.defaultTag())o.querySelector(y.html.blockTagsQuery())?o.outerHTML=o.innerHTML:o.outerHTML="<"+y.html.defaultTag()+">"+o.innerHTML+"</"+y.html.defaultTag()+">";else{var s=o.querySelectorAll("*");!s.length||"BR"!==s[s.length-1].tagName&&0===o.innerText.length?o.outerHTML=o.innerHTML+"<br>":o.outerHTML=o.innerHTML}r=n.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(r=n.querySelectorAll("div:not([style])");r.length;){for(t=0;t<r.length;t++){var a=r[t],l=a.innerHTML.replace(/\u0009/gi,"").trim();a.outerHTML=l}r=n.querySelectorAll("div:not([style])")}return n.innerHTML}function l(){y.el.addEventListener("copy",i),y.el.addEventListener("cut",i),y.el.addEventListener("paste",e,{capture:!0}),y.events.on("drop",t),y.browser.msie&&y.browser.version<11&&(y.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){h=!1},50),h=!0)},!0),y.events.on("beforepaste",e)),y.events.on("destroy",c)}function c(){y.el.removeEventListener("copy",i),y.el.removeEventListener("cut",i),y.el.removeEventListener("paste",e)}var d,u,f,w,h=!1;return{_init:l,removeEmptyTags:S,getRtfClipboard:a,saveCopiedText:n,clean:s}},ze.extend(ze.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),ze.FE.SHORTCUTS_MAP={},ze.FE.RegisterShortcut=function(e,t,n,i,r,o){ze.FE.SHORTCUTS_MAP[(r?"^":"")+(o?"@":"")+e]={cmd:t,val:n,letter:i,shift:r,option:o},ze.FE.DEFAULTS.shortcutsEnabled.push(t)},ze.FE.RegisterShortcut(ze.FE.KEYCODE.E,"show",null,"E",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.B,"bold",null,"B",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.I,"italic",null,"I",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.U,"underline",null,"U",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),ze.FE.MODULES.shortcuts=function(a){function e(e){if(!a.opts.shortcutsHint)return null;if(!i)for(var t in i={},ze.FE.SHORTCUTS_MAP)ze.FE.SHORTCUTS_MAP.hasOwnProperty(t)&&0<=a.opts.shortcutsEnabled.indexOf(ze.FE.SHORTCUTS_MAP[t].cmd)&&(i[ze.FE.SHORTCUTS_MAP[t].cmd+"."+(ze.FE.SHORTCUTS_MAP[t].val||"")]={shift:ze.FE.SHORTCUTS_MAP[t].shift,option:ze.FE.SHORTCUTS_MAP[t].option,letter:ze.FE.SHORTCUTS_MAP[t].letter});var n=i[e];return n?(a.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(n.shift?a.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(n.option?a.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+n.letter:null}function t(e){if(!a.core.hasFocus())return!0;var t=e.which,n=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey;if("keyup"==e.type&&l&&t!=ze.FE.KEYCODE.META)return l=!1;"keydown"==e.type&&(l=!1);var i=(e.shiftKey?"^":"")+(e.altKey?"@":"")+t;if(n&&ze.FE.SHORTCUTS_MAP[i]){var r=ze.FE.SHORTCUTS_MAP[i].cmd;if(r&&0<=a.opts.shortcutsEnabled.indexOf(r)){var o,s=ze.FE.SHORTCUTS_MAP[i].val;if(r&&!s?o=a.$tb.find('.fr-command[data-cmd="'+r+'"]'):r&&s&&(o=a.$tb.find('.fr-command[data-cmd="'+r+'"][data-param1="'+s+'"]')),o.length)return e.preventDefault(),e.stopPropagation(),o.parents(".fr-toolbar").data("instance",a),"keydown"==e.type&&(a.button.exec(o),l=!0),!1;if(r&&a.commands[r])return e.preventDefault(),e.stopPropagation(),"keydown"==e.type&&(a.commands[r](),l=!0),!1}}}function n(){a.events.on("keydown",t,!0),a.events.on("keyup",t,!0)}var i=null,l=!1;return{_init:n,get:e}},ze.FE.MODULES.snapshot=function(a){function n(e){for(var t=e.parentNode.childNodes,n=0,i=null,r=0;r<t.length;r++){if(i){var o=t[r].nodeType===Node.TEXT_NODE&&""===t[r].textContent,s=i.nodeType===Node.TEXT_NODE&&t[r].nodeType===Node.TEXT_NODE;o||s||n++}if(t[r]==e)return n;i=t[r]}}function t(e){var t=[];if(!e.parentNode)return[];for(;!a.node.isElement(e);)t.push(n(e)),e=e.parentNode;return t.reverse()}function i(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function r(e){return{scLoc:t(e.startContainer),scOffset:i(e.startContainer,e.startOffset),ecLoc:t(e.endContainer),ecOffset:i(e.endContainer,e.endOffset)}}function e(){var e={};if(a.events.trigger("snapshot.before"),e.html=(a.$wp?a.$el.html():a.$oel.get(0).outerHTML).replace(/ style=""/g,""),e.ranges=[],a.$wp&&a.selection.inEditor()&&a.core.hasFocus())for(var t=a.selection.ranges(),n=0;n<t.length;n++)e.ranges.push(r(t[n]));return a.events.trigger("snapshot.after",[e]),e}function l(e){for(var t=a.el,n=0;n<e.length;n++)t=t.childNodes[e[n]];return t}function o(e,t){try{var n=l(t.scLoc),i=t.scOffset,r=l(t.ecLoc),o=t.ecOffset,s=a.doc.createRange();s.setStart(n,i),s.setEnd(r,o),e.addRange(s)}catch(c){}}function s(e){a.$el.html()!=e.html&&(a.opts.htmlExecuteScripts?a.$el.html(e.html):a.el.innerHTML=e.html);var t=a.selection.get();a.selection.clear(),a.events.focus(!0);for(var n=0;n<e.ranges.length;n++)o(t,e.ranges[n])}function c(e,t){return e.html==t.html&&(!a.core.hasFocus()||JSON.stringify(e.ranges)==JSON.stringify(t.ranges))}return{get:e,restore:s,equal:c}},ze.FE.MODULES.undo=function(n){function e(e){var t=e.which;n.keys.ctrlKey(e)&&(90==t&&e.shiftKey&&e.preventDefault(),90==t&&e.preventDefault())}function t(){return!(0===n.undo_stack.length||n.undo_index<=1)}function i(){return n.undo_index!=n.undo_stack.length}function r(e){if(!n.undo_stack||n.undoing||n.el.querySelector(".fr-marker"))return!1;void 0===e?(e=n.snapshot.get(),n.undo_stack[n.undo_index-1]&&n.snapshot.equal(n.undo_stack[n.undo_index-1],e)||(o(),n.undo_stack.push(e),n.undo_index++,e.html!=u&&(n.events.trigger("contentChanged"),u=e.html))):(o(),0<n.undo_index?n.undo_stack[n.undo_index-1]=e:(n.undo_stack.push(e),n.undo_index++))}function o(){if(!n.undo_stack||n.undoing)return!1;for(;n.undo_stack.length>n.undo_index;)n.undo_stack.pop()}function s(){if(1<n.undo_index){n.undoing=!0;var e=n.undo_stack[--n.undo_index-1];clearTimeout(n._content_changed_timer),n.snapshot.restore(e),u=e.html,n.popups.hideAll(),n.toolbar.enable(),n.events.trigger("contentChanged"),n.events.trigger("commands.undo"),n.undoing=!1}}function a(){if(n.undo_index<n.undo_stack.length){n.undoing=!0;var e=n.undo_stack[n.undo_index++];clearTimeout(n._content_changed_timer),n.snapshot.restore(e),u=e.html,n.popups.hideAll(),n.toolbar.enable(),n.events.trigger("contentChanged"),n.events.trigger("commands.redo"),n.undoing=!1}}function l(){n.undo_index=0,n.undo_stack=[]}function c(){n.undo_stack=[]}function d(){l(),n.events.on("initialized",function(){u=(n.$wp?n.$el.html():n.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),n.events.on("blur",function(){n.el.querySelector(".fr-dragging")||n.undo.saveStep()}),n.events.on("keydown",e),n.events.on("destroy",c)}var u=null;return{_init:d,run:s,redo:a,canDo:t,canRedo:i,dropRedo:o,reset:l,saveStep:r}},ze.FE.ICON_DEFAULT_TEMPLATE="font_awesome",ze.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},ze.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},ze.FE.DefineIconTemplate=function(e,t){ze.FE.ICON_TEMPLATES[e]=t},ze.FE.DefineIcon=function(e,t){ze.FE.ICONS[e]=t},ze.FE.MODULES.icon=function(){function e(n){var e=null,i=ze.FE.ICONS[n];if(void 0!==i){var t=i.template||ze.FE.ICON_DEFAULT_TEMPLATE;t&&(t=ze.FE.ICON_TEMPLATES[t])&&(e=t.replace(/\[([a-zA-Z]*)\]/g,function(e,t){return"NAME"==t?i[t]||n:i[t]}))}return e||n}function t(e){var t=ze.FE.ICONS[e],n=ze.FE.ICON_DEFAULT_TEMPLATE;return void 0!==t?n=t.template||ze.FE.ICON_DEFAULT_TEMPLATE:n}return{create:e,getTemplate:t}},ze.extend(ze.FE.DEFAULTS,{tooltips:!0}),ze.FE.MODULES.tooltip=function(r){function i(){r.$tooltip&&r.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function o(e,t){if(e.data("title")||e.data("title",e.attr("title")),!e.data("title"))return!1;r.$tooltip||s(),e.removeAttr("title"),r.$tooltip.text(r.language.translate(e.data("title"))),r.$tooltip.addClass("fr-visible");var n=e.offset().left+(e.outerWidth()-r.$tooltip.outerWidth())/2;n<0&&(n=0),n+r.$tooltip.outerWidth()>ze(r.o_win).width()&&(n=ze(r.o_win).width()-r.$tooltip.outerWidth()),void 0===t&&(t=r.opts.toolbarBottom);var i=t?e.offset().top-r.$tooltip.height():e.offset().top+e.outerHeight();r.$tooltip.css("position",""),r.$tooltip.css("left",n),r.$tooltip.css("top",Math.ceil(i)),"static"!=ze(r.o_doc).find("body:first").css("position")?(r.$tooltip.css("margin-left",-ze(r.o_doc).find("body:first").offset().left),r.$tooltip.css("margin-top",-ze(r.o_doc).find("body:first").offset().top)):(r.$tooltip.css("margin-left",""),r.$tooltip.css("margin-top",""))}function e(e,t,n){r.opts.tooltips&&!r.helpers.isMobile()&&(r.events.$on(e,"mouseenter",t,function(e){r.node.hasClass(e.currentTarget,"fr-disabled")||r.edit.isDisabled()||o(ze(e.currentTarget),n)},!0),r.events.$on(e,"mouseleave "+r._mousedown+" "+r._mouseup,t,function(){i()},!0))}function s(){r.opts.tooltips&&!r.helpers.isMobile()&&(r.shared.$tooltip?r.$tooltip=r.shared.$tooltip:(r.shared.$tooltip=ze('<div class="fr-tooltip"></div>'),r.$tooltip=r.shared.$tooltip,r.opts.theme&&r.$tooltip.addClass(r.opts.theme+"-theme"),ze(r.o_doc).find("body:first").append(r.$tooltip)),r.events.on("shared.destroy",function(){r.$tooltip.html("").removeData().remove(),r.$tooltip=null},!0))}return{hide:i,to:o,bind:e}},ze.FE.MODULES.button=function(h){function s(e,t,n){for(var i=ze(),r=0;r<e.length;r++){var o=ze(e[r]);if(o.is(t)&&(i=i.add(o)),n&&o.is(".fr-dropdown")){var s=o.next().find(t);i=i.add(s)}}return i}function l(e,t){var n,i=ze();if(!e)return i;for(n in i=(i=i.add(s(y,e,t))).add(s(T,e,t)),h.shared.popups)if(h.shared.popups.hasOwnProperty(n)){var r=h.shared.popups[n].children().find(e);i=i.add(r)}for(n in h.shared.modals)if(h.shared.modals.hasOwnProperty(n)){var o=h.shared.modals[n].$modal.find(e);i=i.add(o)}return i}function i(e){var t=e.next(),n=h.node.hasClass(e.get(0),"fr-active"),i=l(".fr-dropdown.fr-active").not(e),r=e.parents(".fr-toolbar, .fr-popup").data("instance")||h;if(r.helpers.isIOS()&&!r.el.querySelector(".fr-marker")&&(r.selection.save(),r.selection.clear(),r.selection.restore()),!n){var o=e.data("cmd");t.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),ze.FE.COMMANDS[o]&&ze.FE.COMMANDS[o].refreshOnShow&&ze.FE.COMMANDS[o].refreshOnShow.apply(r,[e,t]),t.css("left",e.offset().left-e.parent().offset().left-("rtl"==h.opts.direction?t.width()-e.outerWidth():0)),t.addClass("test-height");var s=t.outerHeight();t.removeClass("test-height"),t.css("top","").css("bottom",""),!h.opts.toolbarBottom&&t.offset().top+e.outerHeight()+s<ze(h.o_doc).height()?t.css("top",e.position().top+e.outerHeight()):t.css("bottom",h.$tb.height()-e.position().top)}e.addClass("fr-blink").toggleClass("fr-active"),e.hasClass("fr-active")?(t.attr("aria-hidden",!1),e.attr("aria-expanded",!0)):(t.attr("aria-hidden",!0),e.attr("aria-expanded",!1)),setTimeout(function(){e.removeClass("fr-blink")},300),t.css("margin-left",""),t.offset().left+t.outerWidth()>h.$sc.offset().left+h.$sc.width()&&t.css("margin-left",-(t.offset().left+t.outerWidth()-h.$sc.offset().left-h.$sc.width())),i.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),i.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==e.parents(".fr-popup").length||h.opts.toolbarInline||(h.node.hasClass(e.get(0),"fr-active")?h.$tb.css("zIndex",(h.opts.zIndex||1)+4):h.$tb.css("zIndex",""));var a=t.find("a.fr-command.fr-active:first");h.helpers.isMobile()||(a.length?h.accessibility.focusToolbarElement(a):h.accessibility.focusToolbarElement(e))}function t(e){e.addClass("fr-blink"),setTimeout(function(){e.removeClass("fr-blink")},500);for(var t=e.data("cmd"),n=[];void 0!==e.data("param"+(n.length+1));)n.push(e.data("param"+(n.length+1)));var i=l(".fr-dropdown.fr-active");i.length&&(i.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),i.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(t,n)}function r(e){t(e)}function n(e){var t=e.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==e.parents(".fr-popup").length||e.data("popup")||t.popups.hideAll(),t.popups.areVisible()&&!t.popups.areVisible(t)){for(var n=0;n<ze.FE.INSTANCES.length;n++)ze.FE.INSTANCES[n]!=t&&ze.FE.INSTANCES[n].popups&&ze.FE.INSTANCES[n].popups.areVisible()&&ze.FE.INSTANCES[n].$el.find(".fr-marker").remove();t.popups.hideAll()}h.node.hasClass(e.get(0),"fr-dropdown")?i(e):(r(e),ze.FE.COMMANDS[e.data("cmd")]&&!1!==ze.FE.COMMANDS[e.data("cmd")].refreshAfterCallback&&t.button.bulkRefresh())}function o(e){n(ze(e.currentTarget))}function a(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function c(e){e.preventDefault(),e.stopPropagation()}function d(e){if(e.stopPropagation(),!h.helpers.isMobile())return!1}function e(t,e){h.events.bindClick(t,".fr-command:not(.fr-disabled)",o),h.events.$on(t,h._mousedown+" "+h._mouseup+" "+h._move,".fr-dropdown-menu",c,!0),h.events.$on(t,h._mousedown+" "+h._mouseup+" "+h._move,".fr-dropdown-menu .fr-dropdown-wrapper",d,!0);var n=t.get(0).ownerDocument,i="defaultView"in n?n.defaultView:n.parentWindow,r=function(e){(!e||e.type==h._mouseup&&e.target!=ze("html").get(0)||"keydown"==e.type&&(h.keys.isCharacter(e.which)&&!h.keys.ctrlKey(e)||e.which==ze.FE.KEYCODE.ESC))&&a(t)}
;h.events.$on(ze(i),h._mouseup+" resize keydown",r,!0),h.opts.iframe&&h.events.$on(h.$win,h._mouseup,r,!0),h.node.hasClass(t.get(0),"fr-popup")?ze.merge(T,t.find(".fr-btn").toArray()):ze.merge(y,t.find(".fr-btn").toArray()),h.tooltip.bind(t,".fr-btn, .fr-title",e)}function p(e,t){var n="";if(t.html)"function"==typeof t.html?n+=t.html.call(h):n+=t.html;else{var i=t.options;for(var r in"function"==typeof i&&(i=i()),n+='<ul class="fr-dropdown-list" role="presentation">',i)if(i.hasOwnProperty(r)){var o=h.shortcuts.get(e+"."+r);o=o?'<span class="fr-shortcut">'+o+"</span>":"",n+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+r+'" title="'+i[r]+'">'+h.language.translate(i[r])+"</a></li>"}n+="</ul>"}return n}function u(e,t,n){if(h.helpers.isMobile()&&!1===t.showOnMobile)return"";var i,r=t.displaySelection;if("function"==typeof r&&(r=r(h)),r){var o="function"==typeof t.defaultSelection?t.defaultSelection(h):t.defaultSelection;i='<span style="width:'+(t.displaySelectionWidth||100)+'px">'+h.language.translate(o||t.title)+"</span>"}else i=h.icon.create(t.icon||e),i+='<span class="fr-sr-only">'+(h.language.translate(t.title)||"")+"</span>";var s=t.popup?' data-popup="true"':"",a=t.modal?' data-modal="true"':"",l=h.shortcuts.get(e+".");l=l?" ("+l+")":"";var c=e+"-"+h.id,d="dropdown-menu-"+c,u='<button id="'+c+'"type="button" tabIndex="-1" role="button"'+(t.toggle?' aria-pressed="false"':"")+("dropdown"==t.type?' aria-controls="'+d+'" aria-expanded="false" aria-haspopup="true"':"")+(t.disabled?' aria-disabled="true"':"")+' title="'+(h.language.translate(t.title)||"")+l+'" class="fr-command fr-btn'+("dropdown"==t.type?" fr-dropdown":"")+" fr-btn-"+h.icon.getTemplate(t.icon)+(t.displaySelection?" fr-selection":"")+(t.back?" fr-back":"")+(t.disabled?" fr-disabled":"")+(n?"":" fr-hidden")+'" data-cmd="'+e+'"'+s+a+">"+i+"</button>";if("dropdown"==t.type){var f='<div id="'+d+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+c+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';f+=p(e,t),u+=f+="</div></div></div>"}return u}function f(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i],o=ze.FE.COMMANDS[r];if(!(o&&void 0!==o.plugin&&h.opts.pluginsEnabled.indexOf(o.plugin)<0))if(o){n+=u(r,o,void 0===t||0<=t.indexOf(r))}else"|"==r?n+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==r&&(n+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return n}function g(e){var t,n=e.parents(".fr-popup, .fr-toolbar").data("instance")||h,i=e.data("cmd");h.node.hasClass(e.get(0),"fr-dropdown")?t=e.next():(e.removeClass("fr-active"),e.attr("aria-pressed")&&e.attr("aria-pressed",!1)),ze.FE.COMMANDS[i]&&ze.FE.COMMANDS[i].refresh?ze.FE.COMMANDS[i].refresh.apply(n,[e,t]):h.refresh[i]&&n.refresh[i](e,t)}function m(r){var o=h.$tb&&h.$tb.data("instance")||h;if(!1===h.events.trigger("buttons.refresh"))return!0;setTimeout(function(){for(var e=o.selection.inEditor()&&o.core.hasFocus(),t=0;t<r.length;t++){var n=ze(r[t]),i=n.data("cmd");0===n.parents(".fr-popup").length?e||ze.FE.COMMANDS[i]&&ze.FE.COMMANDS[i].forcedRefresh?o.button.refresh(n):h.node.hasClass(n.get(0),"fr-dropdown")||(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)):n.parents(".fr-popup").is(":visible")&&o.button.refresh(n)}},0)}function v(){m(y),m(T)}function b(){y=[],T=[]}function E(){clearTimeout(C),C=setTimeout(v,50)}function _(){h.opts.toolbarInline?h.events.on("toolbar.show",v):(h.events.on("mouseup",E),h.events.on("keyup",E),h.events.on("blur",E),h.events.on("focus",E),h.events.on("contentChanged",E),h.helpers.isMobile()&&h.events.$on(h.$doc,"selectionchange",v)),h.events.on("shared.destroy",b)}var y=[];(h.opts.toolbarInline||h.opts.toolbarContainer)&&(h.shared.buttons||(h.shared.buttons=[]),y=h.shared.buttons);var T=[];h.shared.popup_buttons||(h.shared.popup_buttons=[]),T=h.shared.popup_buttons;var C=null;return{_init:_,buildList:f,bindCommands:e,refresh:g,bulkRefresh:v,exec:t,click:n,hideActiveDropdowns:a,getButtons:l}},ze.FE.MODULES.modals=function(l){function e(e){return f[e]}function r(e,t){var n='<div tabIndex="-1" class="fr-modal'+(l.opts.theme?" "+l.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return n+='<div class="fr-modal-head">'+e+'<i title="'+l.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',n+='<div tabIndex="-1" class="fr-modal-body">'+t+"</div>",ze(n+="</div></div>")}function t(n,e,t){if(l.shared.$overlay||(l.shared.$overlay=ze('<div class="fr-overlay">').appendTo("body:first")),u=l.shared.$overlay,l.opts.theme&&u.addClass(l.opts.theme+"-theme"),!f[n]){var i=r(e,t);f[n]={$modal:i,$head:i.find(".fr-modal-head"),$body:i.find(".fr-modal-body")},l.helpers.isMobile()||i.addClass("fr-desktop"),i.appendTo("body:first"),l.events.bindClick(i,"i.fr-modal-close",function(){o(n)}),f[n].$body.css("margin-top",f[n].$head.outerHeight()),l.events.$on(i,"keydown",function(e){var t=e.which;return t==ze.FE.KEYCODE.ESC?(o(n),l.accessibility.focusModalButton(i),!1):!(!ze(e.currentTarget).is("input[type=text], textarea")&&t!=ze.FE.KEYCODE.ARROW_UP&&t!=ze.FE.KEYCODE.ARROW_DOWN&&!l.keys.isBrowserAction(e)&&(e.preventDefault(),e.stopPropagation(),1))},!0),o(n,!0)}return f[n]}function n(){for(var e in f){var t=f[e];t&&t.$modal&&t.$modal.removeData().remove()}u&&u.removeData().remove(),f={}}function i(e){if(f[e]){var t=f[e].$modal;t.data("instance",l),t.show(),u.show(),ze(l.o_doc).find("body:first").addClass("prevent-scroll"),l.helpers.isMobile()&&ze(l.o_doc).find("body:first").addClass("fr-mobile"),t.addClass("fr-active"),l.accessibility.focusModal(t)}}function o(e,t){if(f[e]){var n=f[e].$modal,i=n.data("instance")||l;i.events.enableBlur(),n.hide(),u.hide(),ze(i.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),n.removeClass("fr-active"),t||(l.accessibility.restoreSelection(i),l.events.trigger("modals.hide"))}}function s(e){if(f[e]){var t=f[e],n=t.$modal,i=t.$body,r=ze(l.o_win).height(),o=n.find(".fr-modal-wrapper"),s=r-o.outerHeight(!0)+(o.height()-(i.outerHeight(!0)-i.height())),a="auto";s<i.get(0).scrollHeight&&(a=s),i.height(a)}}function a(e){var t;if("string"==typeof e){if(!f[e])return;t=f[e].$modal}else t=e;return t&&l.node.hasClass(t,"fr-active")&&l.core.sameInstance(t)||!1}function c(e){for(var t in f)if(f.hasOwnProperty(t)&&a(t)&&(void 0===e||f[t].$modal.data("instance")==e))return f[t].$modal;return!1}function d(){l.events.on("shared.destroy",n,!0)}l.shared.modals||(l.shared.modals={});var u,f=l.shared.modals;return{_init:d,get:e,create:t,show:i,hide:o,resize:s,isVisible:a,areVisible:c}},ze.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},ze.FE.RegisterTemplate=function(e,t){ze.FE.POPUP_TEMPLATES[e]=t},ze.FE.MODULES.popups=function(l){function c(e,t){t.is(":visible")||(t=l.$sc),t.is(T[e].data("container"))||(T[e].data("container",t),t.append(T[e]))}function e(e,t,n,i){if(d(e)||(u()&&0<l.$el.find(".fr-marker").length?(l.events.disableBlur(),l.selection.restore()):(l.events.disableBlur(),l.events.focus(),l.events.enableBlur())),f([e]),!T[e])return!1;var r=l.button.getButtons(".fr-dropdown.fr-active");r.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),r.next().attr("aria-hidden",!0),T[e].data("instance",l),l.$tb&&l.$tb.data("instance",l);var o=T[e].outerWidth(),s=d(e);T[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var a=T[e].data("container");l.opts.toolbarInline&&a&&l.$tb&&a.get(0)==l.$tb.get(0)&&(c(e,l.$sc),n=l.$tb.offset().top-l.helpers.getPX(l.$tb.css("margin-top")),t=l.$tb.offset().left+l.$tb.outerWidth()/2+(parseFloat(l.$tb.find(".fr-arrow").css("margin-left"))||0)+l.$tb.find(".fr-arrow").outerWidth()/2,l.node.hasClass(l.$tb.get(0),"fr-above")&&n&&(n+=l.$tb.outerHeight()),i=0),a=T[e].data("container"),!l.opts.iframe||i||s||(t&&(t-=l.$iframe.offset().left),n&&(n-=l.$iframe.offset().top)),a.is(l.$tb)?l.$tb.css("zIndex",(l.opts.zIndex||1)+4):T[e].css("zIndex",(l.opts.zIndex||1)+4),t&&(t-=o/2),l.opts.toolbarBottom&&a&&l.$tb&&a.get(0)==l.$tb.get(0)&&(T[e].addClass("fr-above"),n&&(n-=T[e].outerHeight())),T[e].removeClass("fr-active"),l.position.at(t,n,T[e],i||0),T[e].addClass("fr-active"),s||l.accessibility.focusPopup(T[e]),l.opts.toolbarInline&&l.toolbar.hide(),l.events.trigger("popups.show."+e),v(e)._repositionPopup(),h()}function t(e,t){l.events.on("popups.show."+e,t)}function d(e){return T[e]&&l.node.hasClass(T[e],"fr-active")&&l.core.sameInstance(T[e])||!1}function u(e){for(var t in T)if(T.hasOwnProperty(t)&&d(t)&&(void 0===e||T[t].data("instance")==e))return T[t];return!1}function n(e){var t=null;(t="string"!=typeof e?e:T[e])&&l.node.hasClass(t,"fr-active")&&(t.removeClass("fr-active fr-above"),l.events.trigger("popups.hide."+e),l.$tb&&(1<l.opts.zIndex?l.$tb.css("zIndex",l.opts.zIndex+1):l.$tb.css("zIndex","")),l.events.disableBlur(),t.find("input, textarea, button").filter(":focus").blur(),t.find("input, textarea").attr("disabled","disabled"))}function i(e,t){l.events.on("popups.hide."+e,t)}function r(e){var t=T[e];return t&&!t.data("inst"+l.id)&&b(v(e),e),t}function o(e,t){l.events.on("popups.refresh."+e,t)}function s(e){T[e].data("instance",l),l.events.trigger("popups.refresh."+e);for(var t=T[e].find(".fr-command"),n=0;n<t.length;n++){var i=ze(t[n]);0===i.parents(".fr-dropdown-menu").length&&l.button.refresh(i)}}function f(e){for(var t in void 0===e&&(e=[]),T)T.hasOwnProperty(t)&&e.indexOf(t)<0&&n(t)}function a(){l.shared.exit_flag=!0}function h(){l.shared.exit_flag=!1}function p(){return l.shared.exit_flag}function g(e,t){var n=ze.FE.POPUP_TEMPLATES[e];for(var i in"function"==typeof n&&(n=n.apply(l)),t)t.hasOwnProperty(i)&&(n=n.replace("[_"+i.toUpperCase()+"_]",t[i]));return n}function m(e,t){var n=g(e,t),i=ze('<div class="fr-popup'+(l.helpers.isMobile()?" fr-mobile":" fr-desktop")+(l.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+n+"</div>");l.opts.theme&&i.addClass(l.opts.theme+"-theme"),1<l.opts.zIndex&&l.$tb.css("z-index",l.opts.zIndex+2),"auto"!=l.opts.direction&&i.removeClass("fr-ltr fr-rtl").addClass("fr-"+l.opts.direction),i.find("input, textarea").attr("dir",l.opts.direction).attr("disabled","disabled");var r=ze("body:first");return r.append(i),i.data("container",r),T[e]=i,l.button.bindCommands(i,!1),i}function v(i){var r=T[i];return{_windowResize:function(){var e=r.data("instance")||l;!e.helpers.isMobile()&&r.is(":visible")&&(e.events.disableBlur(),e.popups.hide(i),e.events.enableBlur())},_inputFocus:function(e){var t=r.data("instance")||l,n=ze(e.currentTarget);if(n.is("input:file")&&n.closest(".fr-layer").addClass("fr-input-focus"),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.events.enableBlur()},100),t.helpers.isMobile()){var i=ze(t.o_win).scrollTop();setTimeout(function(){ze(t.o_win).scrollTop(i)},0)}},_inputBlur:function(e){var t=r.data("instance")||l,n=ze(e.currentTarget);n.is("input:file")&&n.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&ze(this).is(":visible")&&(t.events.blurActive()&&t.events.trigger("blur"),t.events.enableBlur())},_editorKeydown:function(e){var t=r.data("instance")||l;t.keys.ctrlKey(e)||e.which==ze.FE.KEYCODE.ALT||e.which==ze.FE.KEYCODE.ESC||(d(i)&&r.find(".fr-back:visible").length?t.button.exec(r.find(".fr-back:visible:first")):e.which!=ze.FE.KEYCODE.ALT&&t.popups.hide(i))},_preventFocus:function(e){var t=r.data("instance")||l,n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;"mouseup"==e.type||ze(n).is(":focus")||t.events.disableBlur(),"mouseup"!=e.type||ze(n).hasClass("fr-command")||0<ze(n).parents(".fr-command").length||l.button.hideActiveDropdowns(r),(l.browser.safari||l.browser.mozilla)&&"mousedown"==e.type&&ze(n).is("input[type=file]")&&t.events.disableBlur();var i="input, textarea, button, select, label, .fr-command";if(n&&!ze(n).is(i)&&0===ze(n).parents(i).length)return e.stopPropagation(),!1;n&&ze(n).is(i)&&e.stopPropagation(),h()},_editorMouseup:function(){r.is(":visible")&&p()&&0<r.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length&&l.events.disableBlur()},_windowMouseup:function(e){if(!l.core.sameInstance(r))return!0;var t=r.data("instance")||l;r.is(":visible")&&p()&&(e.stopPropagation(),t.markers.remove(),t.popups.hide(i),h())},_windowKeydown:function(e){if(!l.core.sameInstance(r))return!0;var t=r.data("instance")||l,n=e.which;if(ze.FE.KEYCODE.ESC==n){if(t.popups.isVisible(i)&&t.opts.toolbarInline)return e.stopPropagation(),t.popups.isVisible(i)&&(r.find(".fr-back:visible").length?(t.button.exec(r.find(".fr-back:visible:first")),t.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?t.button.exec(r.find(".fr-dismiss:visible:first")):(t.popups.hide(i),t.toolbar.showInline(null,!0),t.accessibility.FocusPopupButton(r))),!1;if(t.popups.isVisible(i))return r.find(".fr-back:visible").length?(t.button.exec(r.find(".fr-back:visible:first")),t.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?t.button.exec(r.find(".fr-dismiss:visible:first")):(t.popups.hide(i),t.accessibility.focusPopupButton(r)),!1}},_doPlaceholder:function(){0===ze(this).next().length&&ze(this).attr("placeholder")&&ze(this).after('<label for="'+ze(this).attr("id")+'">'+ze(this).attr("placeholder")+"</label>"),ze(this).toggleClass("fr-not-empty",""!==ze(this).val())},_repositionPopup:function(){if(!l.opts.height&&!l.opts.heightMax||l.opts.toolbarInline)return!0;if(l.$wp&&d(i)&&r.parent().get(0)==l.$sc.get(0)){var e=r.offset().top-l.$wp.offset().top,t=l.$wp.outerHeight();l.node.hasClass(r.get(0),"fr-above")&&(e+=r.outerHeight()),t<e||e<0?r.addClass("fr-hidden"):r.removeClass("fr-hidden")}}}}function b(e,t){l.events.on("mouseup",e._editorMouseup,!0),l.$wp&&l.events.on("keydown",e._editorKeydown),l.events.on("blur",function(){u()&&l.markers.remove(),f()}),l.$wp&&!l.helpers.isMobile()&&l.events.$on(l.$wp,"scroll.popup"+t,e._repositionPopup),l.events.on("window.mouseup",e._windowMouseup,!0),l.events.on("window.keydown",e._windowKeydown,!0),T[t].data("inst"+l.id,!0),l.events.on("destroy",function(){l.core.sameInstance(T[t])&&T[t].removeClass("fr-active").appendTo("body:first")},!0)}function E(e,t){var n=m(e,t),i=v(e);return b(i,e),l.events.$on(n,"mousedown mouseup touchstart touchend touch","*",i._preventFocus,!0),l.events.$on(n,"focus","input, textarea, button, select",i._inputFocus,!0),l.events.$on(n,"blur","input, textarea, button, select",i._inputBlur,!0),l.accessibility.registerPopup(e),l.events.$on(n,"keydown keyup change input","input, textarea",i._doPlaceholder,!0),l.helpers.isIOS()&&l.events.$on(n,"touchend","label",function(){ze("#"+ze(this).attr("for")).prop("checked",function(e,t){return!t})},!0),l.events.$on(ze(l.o_win),"resize",i._windowResize,!0),n}function _(){for(var e in T)if(T.hasOwnProperty(e)){var t=T[e];t&&(t.html("").removeData().remove(),T[e]=null)}T=[]}function y(){l.events.on("shared.destroy",_,!0),l.events.on("window.mousedown",a),l.events.on("window.touchmove",h),l.events.on("mousedown",function(e){u()&&(e.stopPropagation(),l.$el.find(".fr-marker").remove(),a(),l.events.disableBlur())})}l.shared.popups||(l.shared.popups={});var T=l.shared.popups;return l.shared.exit_flag=!1,{_init:y,create:E,get:r,show:e,hide:n,onHide:i,hideAll:f,setContainer:c,refresh:s,onRefresh:o,onShow:t,isVisible:d,areVisible:u}},ze.FE.MODULES.position=function(E){function r(){var e=E.selection.ranges(0).getBoundingClientRect();if(0===e.top&&0===e.left&&0===e.width||0===e.height){var t=!1;0===E.$el.find(".fr-marker").length&&(E.selection.save(),t=!0);var n=E.$el.find(".fr-marker:first");n.css("display","inline"),n.css("line-height","");var i=n.offset(),r=n.outerHeight();n.css("display","none"),n.css("line-height",0),(e={}).left=i.left,e.width=0,e.height=r,e.top=i.top-(E.helpers.isMobile()?0:E.helpers.scrollTop()),e.right=1,e.bottom=1,e.ok=!0,t&&E.selection.restore()}return e}function a(e,t,n){var i=e.outerHeight(!0);if(!E.helpers.isMobile()&&E.$tb&&e.parent().get(0)!=E.$tb.get(0)){var r=e.parent().offset().top,o=t-i-(n||0);e.parent().get(0)==E.$sc.get(0)&&(r-=e.parent().position().top);var s=E.$sc.get(0).scrollHeight;r+t+i>E.$sc.offset().top+s&&0<e.parent().offset().top+o&&0<o?(t=o,e.addClass("fr-above")):e.removeClass("fr-above")}return t}function l(e,t){var n=e.outerWidth(!0);return e.parent().offset().left+t+n>E.$sc.get(0).clientWidth-E.$sc.position().left-10&&(t=E.$sc.get(0).clientWidth-e.parent().offset().left-n-10),t<0&&(t=10),t}function e(e){var t=r();e.css({top:0,left:0});var n=t.top+t.height,i=t.left+t.width/2-e.get(0).offsetWidth/2+E.helpers.scrollLeft();E.opts.iframe||(n+=E.helpers.scrollTop()),o(i,n,e,t.height)}function o(e,t,n,i){var r=n.data("container");!r||"BODY"===r.get(0).tagName&&"static"==r.css("position")||(e&&(e-=r.offset().left),t&&(t-=r.offset().top),"BODY"!=r.get(0).tagName?(e&&(e+=r.get(0).scrollLeft),t&&(t+=r.get(0).scrollTop)):"absolute"==r.css("position")&&(e&&(e+=r.position().left),t&&(t+=r.position().top))),E.opts.iframe&&r&&E.$tb&&r.get(0)!=E.$tb.get(0)&&(e&&(e+=E.$iframe.offset().left),t&&(t+=E.$iframe.offset().top));var o=l(n,e);if(e){n.css("left",o);var s=n.data("fr-arrow");s||(s=n.find(".fr-arrow"),n.data("fr-arrow",s)),s.data("margin-left")||s.data("margin-left",E.helpers.getPX(s.css("margin-left"))),s.css("margin-left",e-o+s.data("margin-left"))}t&&n.css("top",a(n,t,i))}function n(e){var n=ze(e),t=n.is(".fr-sticky-on"),i=n.data("sticky-top"),r=n.data("sticky-scheduled");if(void 0===i){n.data("sticky-top",0);var o=ze('<div class="fr-sticky-dummy" style="height: '+n.outerHeight()+'px;"></div>');E.$box.prepend(o)}else E.$box.find(".fr-sticky-dummy").css("height",n.outerHeight());if(E.core.hasFocus()||0<E.$tb.find("input:visible:focus").length){var s=E.helpers.scrollTop(),a=Math.min(Math.max(s-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-n.outerHeight());a!=i&&a!=r&&(clearTimeout(n.data("sticky-timeout")),n.data("sticky-scheduled",a),n.outerHeight()<s-E.$tb.parent().offset().top&&n.addClass("fr-opacity-0"),n.data("sticky-timeout",setTimeout(function(){var e=E.helpers.scrollTop(),t=Math.min(Math.max(e-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-n.outerHeight());0<t&&"BODY"==E.$tb.parent().get(0).tagName&&(t+=E.$tb.parent().position().top),t!=i&&(n.css("top",Math.max(t,0)),n.data("sticky-top",t),n.data("sticky-scheduled",t)),n.removeClass("fr-opacity-0")},100))),t||(n.css("top","0"),n.width(E.$tb.parent().width()),n.addClass("fr-sticky-on"),E.$box.addClass("fr-sticky-box"))}else clearTimeout(ze(e).css("sticky-timeout")),n.css("top","0"),n.css("position",""),n.width(""),n.data("sticky-top",0),n.removeClass("fr-sticky-on"),E.$box.removeClass("fr-sticky-box")}function t(e){if(e.offsetWidth){var t,n,i=ze(e),r=i.outerHeight(),o=i.data("sticky-position"),s=ze("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer).outerHeight(),a=0,l=0;"body"!==E.opts.scrollableContainer&&(a=E.$sc.offset().top,l=ze(E.o_win).outerHeight()-a-s);var c="body"==E.opts.scrollableContainer?E.helpers.scrollTop():a,d=i.is(".fr-sticky-on");i.data("sticky-parent")||i.data("sticky-parent",i.parent());var u=i.data("sticky-parent"),f=u.offset().top,h=u.outerHeight();if(i.data("sticky-offset")||(i.data("sticky-offset",!0),i.after('<div class="fr-sticky-dummy" style="height: '+r+'px;"></div>')),!o){var p="auto"!==i.css("top")||"auto"!==i.css("bottom");p||i.css("position","fixed"),o={top:E.node.hasClass(i.get(0),"fr-top"),bottom:E.node.hasClass(i.get(0),"fr-bottom")},p||i.css("position",""),i.data("sticky-position",o),i.data("top",E.node.hasClass(i.get(0),"fr-top")?i.css("top"):"auto"),i.data("bottom",E.node.hasClass(i.get(0),"fr-bottom")?i.css("bottom"):"auto")}var g=function(){return f<c+t&&c+t<=f+h-r},m=function(){return f+r<c+s-n&&c+s-n<f+h};t=E.helpers.getPX(i.data("top")),n=E.helpers.getPX(i.data("bottom"));var v=o.top&&g(),b=o.bottom&&m();v||b?(i.css("width",u.get(0).getBoundingClientRect().width+"px"),d||(i.addClass("fr-sticky-on"),i.removeClass("fr-sticky-off"),i.css("top")&&("auto"!=i.data("top")?i.css("top",E.helpers.getPX(i.data("top"))+a):i.data("top","auto")),i.css("bottom")&&("auto"!=i.data("bottom")?i.css("bottom",E.helpers.getPX(i.data("bottom"))+l):i.css("bottom","auto")))):E.node.hasClass(i.get(0),"fr-sticky-off")||(i.width(""),i.removeClass("fr-sticky-on"),i.addClass("fr-sticky-off"),i.css("top")&&"auto"!=i.data("top")&&o.top&&i.css("top",0),i.css("bottom")&&"auto"!=i.data("bottom")&&o.bottom&&i.css("bottom",0))}}function i(){var e=document.createElement("test").style;return e.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==e.position.indexOf("sticky")&&!E.helpers.isIOS()&&!E.helpers.isAndroid()&&!E.browser.chrome}function s(){if(!i())if(E._stickyElements=[],E.helpers.isIOS()){var t=function(){E.helpers.requestAnimationFrame()(t);for(var e=0;e<E._stickyElements.length;e++)n(E._stickyElements[e])};t(),E.events.$on(ze(E.o_win),"scroll",function(){if(E.core.hasFocus())for(var e=0;e<E._stickyElements.length;e++){var t=ze(E._stickyElements[e]),n=t.parent(),i=E.helpers.scrollTop();t.outerHeight()<i-n.offset().top&&(t.addClass("fr-opacity-0"),t.data("sticky-top",-1),t.data("sticky-scheduled",-1))}},!0)}else E.events.$on(ze("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer),"scroll",c,!0),E.events.$on(ze(E.o_win),"resize",c,!0),E.events.on("initialized",c),E.events.on("focus",c),E.events.$on(ze(E.o_win),"resize","textarea",c,!0);E.events.on("destroy",function(){E._stickyElements=[]})}function c(){if(E._stickyElements)for(var e=0;e<E._stickyElements.length;e++)t(E._stickyElements[e])}function d(e){e.addClass("fr-sticky"),E.helpers.isIOS()&&e.addClass("fr-sticky-ios"),i()||(e.removeClass("fr-sticky"),E._stickyElements.push(e.get(0)))}function u(){s()}return{_init:u,forSelection:e,addSticky:d,refresh:c,at:o,getBoundingRect:r}},ze.FE.MODULES.refresh=function(r){function e(e){o(e,!r.undo.canDo())}function t(e){o(e,!r.undo.canRedo())}function n(e){if(r.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var t=r.selection.blocks(),n=0;n<t.length;n++){for(var i=t[n].previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;if("LI"!=t[n].tagName||i)return o(e,!1),!0;o(e,!0)}}function i(e){if(r.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var t=r.selection.blocks(),n=0;n<t.length;n++){var i="rtl"==r.opts.direction||"rtl"==ze(t[n]).css("direction")?"margin-right":"margin-left";if("LI"==t[n].tagName||"LI"==t[n].parentNode.tagName)return o(e,!1),!0;if(0<r.helpers.getPX(ze(t[n]).css(i)))return o(e,!1),!0}o(e,!0)}function o(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:e,redo:t,outdent:i,indent:n}},ze.extend(ze.FE.DEFAULTS,{editInPopup:!1}),ze.FE.MODULES.textEdit=function(n){function e(){var e={edit:'<div id="fr-text-edit-'+n.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+n.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+n.language.translate("Update")+"</button></div></div>"};n.popups.create("text.edit",e)}function t(){var e,t=n.popups.get("text.edit");e="INPUT"===n.$el.prop("tagName")?n.$el.attr("placeholder"):n.$el.text(),t.find("input").val(e).trigger("change"),n.popups.setContainer("text.edit",n.$sc),n.popups.show("text.edit",n.$el.offset().left+n.$el.outerWidth()/2,n.$el.offset().top+n.$el.outerHeight(),n.$el.outerHeight())}function i(){n.events.$on(n.$el,n._mouseup,function(){setTimeout(function(){t()},10)})}function r(){var e=n.popups.get("text.edit").find("input").val();0===e.length&&(e=n.opts.placeholderText),"INPUT"===n.$el.prop("tagName")?n.$el.attr("placeholder",e):n.$el.text(e),n.events.trigger("contentChanged"),n.popups.hide("text.edit")}function o(){n.opts.editInPopup&&(e(),i())}return{_init:o,update:r}},ze.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),ze.extend(ze.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","embedly","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),ze.FE.MODULES.toolbar=function(r){function i(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function e(){var e=ze.merge([],o());i(e,r.opts.toolbarButtonsXS||[]),i(e,r.opts.toolbarButtonsSM||[]),i(e,r.opts.toolbarButtonsMD||[]),i(e,r.opts.toolbarButtons);for(var t=e.length-1;0<=t;t--)"-"!=e[t]&&"|"!=e[t]&&e.indexOf(e[t])<t&&e.splice(t,1);var n=r.button.buildList(e,o());r.$tb.append(n),r.button.bindCommands(r.$tb)}function o(){var e=r.helpers.screenSize();return E[e]}function t(){var e=o();r.$tb.find(".fr-separator").remove(),r.$tb.find("> .fr-command").addClass("fr-hidden");for(var t=0;t<e.length;t++)if("|"==e[t]||"-"==e[t])r.$tb.append(r.button.buildList([e[t]]));else{var n=r.$tb.find('> .fr-command[data-cmd="'+e[t]+'"]'),i=null;r.node.hasClass(n.next().get(0),"fr-dropdown-menu")&&(i=n.next()),n.removeClass("fr-hidden").appendTo(r.$tb),i&&i.appendTo(r.$tb)}}function n(){r.events.$on(ze(r.o_win),"resize",t),r.events.$on(ze(r.o_win),"orientationchange",t)}function s(e,t){setTimeout(function(){if((!e||e.which!=ze.FE.KEYCODE.ESC)&&r.selection.inEditor()&&r.core.hasFocus()&&!r.popups.areVisible()&&(r.opts.toolbarVisibleWithoutSelection||!r.selection.isCollapsed()&&!r.keys.isIME()||t)){if(r.$tb.data("instance",r),!1===r.events.trigger("toolbar.show",[e]))return!1;r.$tb.show(),r.opts.toolbarContainer||r.position.forSelection(r.$tb),1<r.opts.zIndex?r.$tb.css("z-index",r.opts.zIndex+1):r.$tb.css("z-index",null)}},0)}function a(e){return!(!e||"keydown"!==e.type||!r.keys.ctrlKey(e))||!!r.button.getButtons(".fr-dropdown.fr-active").next().find(r.o_doc.activeElement).length||void(!1!==r.events.trigger("toolbar.hide")&&r.$tb.hide())}function l(){if(!1===r.events.trigger("toolbar.show"))return!1;r.$tb.show()}function c(e){clearTimeout(_),e&&e.which==ze.FE.KEYCODE.ESC||(_=setTimeout(s,r.opts.typingTimer))}function d(){r.events.on("window.mousedown",a),r.events.on("keydown",a),r.events.on("blur",a),r.events.on("window.mouseup",s),r.helpers.isMobile()?r.helpers.isIOS()||(r.events.on("window.touchend",s),r.browser.mozilla&&setInterval(s,200)):r.events.on("window.keyup",c),r.events.on("keydown",function(e){e&&e.which==ze.FE.KEYCODE.ESC&&a()}),r.events.on("keydown",function(e){if(e.which==ze.FE.KEYCODE.ALT)return e.stopPropagation(),!1},!0),r.events.$on(r.$wp,"scroll.toolbar",s),r.events.on("commands.after",s),r.helpers.isMobile()&&(r.events.$on(r.$doc,"selectionchange",c),r.events.$on(r.$doc,"orientationchange",s))}function u(){r.opts.toolbarInline?(r.$sc.append(r.$tb),r.$tb.data("container",r.$sc),r.$tb.addClass("fr-inline"),r.$tb.prepend('<span class="fr-arrow"></span>'),d(),r.opts.toolbarBottom=!1):(r.opts.toolbarBottom&&!r.helpers.isIOS()?(r.$box.append(r.$tb),r.$tb.addClass("fr-bottom"),r.$box.addClass("fr-bottom")):(r.opts.toolbarBottom=!1,r.$box.prepend(r.$tb),r.$tb.addClass("fr-top"),r.$box.addClass("fr-top")),r.$tb.addClass("fr-basic"),r.opts.toolbarSticky&&(r.opts.toolbarStickyOffset&&(r.opts.toolbarBottom?r.$tb.css("bottom",r.opts.toolbarStickyOffset):r.$tb.css("top",r.opts.toolbarStickyOffset)),r.position.addSticky(r.$tb)))}function f(){r.$tb.html("").removeData().remove(),r.$tb=null}function h(){r.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),r.$box.find(".fr-sticky-dummy").remove()}function p(){r.opts.theme&&r.$tb.addClass(r.opts.theme+"-theme"),1<r.opts.zIndex&&r.$tb.css("z-index",r.opts.zIndex+1),"auto"!=r.opts.direction&&r.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+r.opts.direction),r.helpers.isMobile()?r.$tb.addClass("fr-mobile"):r.$tb.addClass("fr-desktop"),r.opts.toolbarContainer?(r.opts.toolbarInline&&(d(),a()),r.opts.toolbarBottom?r.$tb.addClass("fr-bottom"):r.$tb.addClass("fr-top")):u(),b=r.$tb.get(0).ownerDocument,"defaultView"in b?b.defaultView:b.parentWindow,e(),n(),r.accessibility.registerToolbar(r.$tb),r.events.$on(r.$tb,r._mousedown+" "+r._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(t&&"INPUT"!=t.tagName&&!r.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function g(){if(r.$sc=ze(r.opts.scrollableContainer).first(),!r.$wp)return!1;r.opts.toolbarContainer?(r.shared.$tb?(r.$tb=r.shared.$tb,r.opts.toolbarInline&&d()):(r.shared.$tb=ze('<div class="fr-toolbar"></div>'),r.$tb=r.shared.$tb,ze(r.opts.toolbarContainer).append(r.$tb),p(),r.$tb.data("instance",r)),r.opts.toolbarInline?r.$box.addClass("fr-inline"):r.$box.addClass("fr-basic"),r.events.on("focus",function(){r.$tb.data("instance",r)},!0),r.opts.toolbarInline=!1):r.opts.toolbarInline?(r.$box.addClass("fr-inline"),r.shared.$tb?(r.$tb=r.shared.$tb,d()):(r.shared.$tb=ze('<div class="fr-toolbar"></div>'),r.$tb=r.shared.$tb,p())):(r.$box.addClass("fr-basic"),r.$tb=ze('<div class="fr-toolbar"></div>'),p(),r.$tb.data("instance",r)),r.events.on("destroy",h,!0),r.events.on(r.opts.toolbarInline||r.opts.toolbarContainer?"shared.destroy":"destroy",f,!0)}function m(){!y&&r.$tb&&(r.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),y=!0)}function v(){y&&r.$tb&&(r.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),y=!1),r.button.bulkRefresh()}var b,E=[];E[ze.FE.XS]=r.opts.toolbarButtonsXS||r.opts.toolbarButtons,E[ze.FE.SM]=r.opts.toolbarButtonsSM||r.opts.toolbarButtons,E[ze.FE.MD]=r.opts.toolbarButtonsMD||r.opts.toolbarButtons,E[ze.FE.LG]=r.opts.toolbarButtons;var _=null,y=!1;return{_init:g,hide:a,show:l,showInline:s,disable:m,enable:v}},ze.FE.PLUGINS.align=function(r){function e(e){r.selection.save(),r.html.wrap(!0,!0,!0,!0),r.selection.restore();for(var t=r.selection.blocks(),n=0;n<t.length;n++)r.helpers.getAlignment(ze(t[n].parentNode))==e?ze(t[n]).css("text-align","").removeClass("fr-temp-div"):ze(t[n]).css("text-align",e).removeClass("fr-temp-div"),""===ze(t[n]).attr("class")&&ze(t[n]).removeAttr("class"),""===ze(t[n]).attr("style")&&ze(t[n]).removeAttr("style");r.selection.save(),r.html.unwrap(),r.selection.restore()}function t(e){var t=r.selection.blocks();if(t.length){var n=r.helpers.getAlignment(ze(t[0]));e.find("> *:first").replaceWith(r.icon.create("align-"+n))}}function n(e,t){var n=r.selection.blocks();if(n.length){var i=r.helpers.getAlignment(ze(n[0]));t.find('a.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:e,refresh:t,refreshOnShow:n}},ze.FE.DefineIcon("align",{NAME:"align-left"}),ze.FE.DefineIcon("align-left",{NAME:"align-left"}),ze.FE.DefineIcon("align-right",{NAME:"align-right"}),ze.FE.DefineIcon("align-center",{NAME:"align-center"}),ze.FE.DefineIcon("align-justify",{NAME:"align-justify"}),ze.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.align.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(t[n])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),ze.extend(ze.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),ze.FE.PLUGINS.charCounter=function(n){function i(){return n.el.textContent.length}function e(e){if(n.opts.charCounterMax<0)return!0;if(i()<n.opts.charCounterMax)return!0;var t=e.which;return!(!n.keys.ctrlKey(e
)&&n.keys.isCharacter(t)||t===ze.FE.KEYCODE.IME)||(e.preventDefault(),e.stopPropagation(),n.events.trigger("charCounter.exceeded"),!1)}function t(e){return n.opts.charCounterMax<0?e:ze("<div>").html(e).text().length+i()<=n.opts.charCounterMax?e:(n.events.trigger("charCounter.exceeded"),"")}function r(){if(n.opts.charCounterCount){var e=i()+(0<n.opts.charCounterMax?"/"+n.opts.charCounterMax:"");s.text(e),n.opts.toolbarBottom&&s.css("margin-bottom",n.$tb.outerHeight(!0));var t=n.$wp.get(0).offsetWidth-n.$wp.get(0).clientWidth;0<=t&&("rtl"==n.opts.direction?s.css("margin-left",t):s.css("margin-right",t))}}function o(){return!!n.$wp&&!!n.opts.charCounterCount&&((s=ze('<span class="fr-counter"></span>')).css("bottom",n.$wp.css("border-bottom-width")),n.$box.append(s),n.events.on("keydown",e,!0),n.events.on("paste.afterCleanup",t),n.events.on("keyup contentChanged input",function(){n.events.trigger("charCounter.update")}),n.events.on("charCounter.update",r),n.events.trigger("charCounter.update"),void n.events.on("destroy",function(){ze(n.o_win).off("resize.char"+n.id),s.removeData().remove(),s=null}))}var s;return{_init:o,count:i}},ze.FE.PLUGINS.codeBeautifier=function(){function e(e,t){function s(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}function n(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=r,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:h,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)d&&"\n"==e&&this.newlines<=u&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(b){var n=this.input.substr(this.pos,3);if("{{#"==n||"{{/"==n)break;if("{{!"==n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),r=i?i.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?this.tags[e+"count"]++:this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level,this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,i="",r=[],o="",s=!1,a=!0,l=this.pos,c=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=c),r.length?r.join(""):["","TK_EOF"];if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace))s=!0;else{if("'"!=i&&'"'!=i||(i+=this.get_unformatted(i),s=!0),"="==i&&(s=!1),r.length&&"="!=r[r.length-1]&&">"!=i&&s){if(this.space_or_wrap(r),s=!1,!a&&"force"==E&&"/"!=i){this.print_newline(!0,r),this.print_indentation(r);for(var d=0;d<_;d++)r.push(m)}for(var u=0;u<r.length;u++)if(" "==r[u]){a=!1;break}}if(b&&"<"==n&&i+this.input.charAt(this.pos)=="{{"&&(i+=this.get_unformatted("}}"),r.length&&" "!=r[r.length-1]&&"<"!=r[r.length-1]&&(i=" "+i),s=!0),"<"!=i||n||(t=this.pos-1,n="<"),b&&!n&&2<=r.length&&"{"==r[r.length-1]&&"{"==r[r.length-2]&&(t="#"==i||"/"==i||"!"==i?this.pos-3:this.pos-2,n="{"),this.line_char_count++,r.push(i),r[1]&&("!"==r[1]||"?"==r[1]||"%"==r[1])){r=[this.get_comment(t)];break}if(b&&r[1]&&"{"==r[1]&&r[2]&&"!"==r[2]){r=[this.get_comment(t)];break}if(b&&"{"==n&&2<r.length&&"}"==r[r.length-2]&&"}"==r[r.length-1])break}}while(">"!=i);var f,h,p=r.join("");f=-1!=p.indexOf(" ")?p.indexOf(" "):"{"==p[0]?p.indexOf("}"):p.indexOf(">"),h="<"!=p[0]&&b?"#"==p[2]?3:2:1;var g=p.substring(h,f).toLowerCase();return"/"==p.charAt(p.length-2)||this.Utils.in_array(g,this.Utils.single_token)?e||(this.tag_type="SINGLE"):b&&"{"==p[0]&&"else"==g?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(g,v)?(o=this.get_unformatted("</"+g+">",p),r.push(o),this.pos,this.tag_type="SINGLE"):"script"==g&&(-1==p.search("type")||-1<p.search("type")&&-1<p.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?e||(this.record_tag(g),this.tag_type="SCRIPT"):"style"==g&&(-1==p.search("type")||-1<p.search("type")&&-1<p.search("text/css"))?e||(this.record_tag(g),this.tag_type="STYLE"):"!"==g.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==g.charAt(0)?(this.retrieve_tag(g.substring(1)),this.tag_type="END"):(this.record_tag(g),"html"!=g.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(r),this.Utils.in_array(g,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=c),r.join("")},this.get_comment=function(e){var t="",n=">",i=!1;this.pos=e;var r=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((t+=r)[t.length-1]!=n[n.length-1]||-1==t.indexOf(n));)!i&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(n="]]>",i=!0):0===t.indexOf("<![")?(n="]>",i=!0):0===t.indexOf("<!--")?(n="-->",i=!0):0===t.indexOf("{{!")?(n="}}",i=!0):0===t.indexOf("<?")?(n="?>",i=!0):0===t.indexOf("<%")&&(n="%>",i=!0)),r=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var n="",i="",r=0,o=!0;do{if(this.pos>=this.input.length)return i;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"==n||"\r"==n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,o=!0,b&&"{"==n&&i.length&&"{"==i[i.length-2]&&(r=(i+=this.get_unformatted("}}")).length)}while(-1==i.toLowerCase().indexOf(e,r));return i},this.get_token=function(){var e;if("TK_TAG_SCRIPT"!=this.last_token&&"TK_TAG_STYLE"!=this.last_token)return"CONTENT"==this.current_mode?"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"]:"TAG"==this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0;var t=this.last_token.substr(7);return"string"!=typeof(e=this.get_contents_to(t))?e:[e,"TK_"+t]},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(n&&!this.Utils.in_array(n,t))},this.printer=function(e,t,n,i,r){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=r,this.indent_level=0,this.wrap_line_length=i;for(var o=this.line_char_count=0;o<this.indent_size;o++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=a(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=s(e)),this.print_token_raw(e))},this.print_token_raw=function(e){0<this.newlines&&(e=a(e)),e&&""!==e&&(1<e.length&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(0<t,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){0<this.indent_level&&this.indent_level--}},this}var i,r,o,m,l,c,v,d,u,b,E,_,f,h;for(void 0!==(t=t||{}).wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),r=void 0!==t.indent_inner_html&&t.indent_inner_html,o=void 0===t.indent_size?4:parseInt(t.indent_size,10),m=void 0===t.indent_char?" ":t.indent_char,c=void 0===t.brace_style?"collapse":t.brace_style,l=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),v=t.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],d=void 0===t.preserve_newlines||t.preserve_newlines,u=d?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,b=void 0!==t.indent_handlebars&&t.indent_handlebars,E=void 0===t.wrap_attributes?"auto":t.wrap_attributes,_=void 0===t.wrap_attributes_indent_size?o:parseInt(t.wrap_attributes_indent_size,10)||o,f=void 0!==t.end_with_newline&&t.end_with_newline,h=Array.isArray(t.extra_liners)?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),t.indent_with_tabs&&(m="\t",o=1),(i=new n).printer(e,m,o,l,c);;){var p=i.get_token();if(i.token_text=p[0],i.token_type=p[1],"TK_EOF"==i.token_type)break;switch(i.token_type){case"TK_TAG_START":i.print_newline(!1,i.output),i.print_token(i.token_text),i.indent_content&&(i.indent(),i.indent_content=!1),i.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":i.print_newline(!1,i.output),i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==i.last_token&&""===i.last_text){var g=i.token_text.match(/\w+/)[0],y=null;i.output.length&&(y=i.output[i.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==y||y[1]!=g&&!i.Utils.in_array(y[1],v))&&i.print_newline(!1,i.output)}i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var T=i.token_text.match(/^\s*<([a-z-]+)/i);T&&i.Utils.in_array(T[1],v)||i.print_newline(!1,i.output),i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":i.print_token(i.token_text),i.indent_content&&(i.indent(),i.indent_content=!1),i.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":i.print_token(i.token_text),i.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==i.token_text){i.print_newline(!1,i.output);var C,A=i.token_text,S=1;"TK_SCRIPT"==i.token_type?C="function"==typeof N&&N:"TK_STYLE"==i.token_type&&(C="function"==typeof D&&D),"keep"==t.indent_scripts?S=0:"separate"==t.indent_scripts&&(S=-i.indent_level);var w=i.get_full_indent(S);if(C)A=C(A.replace(/^\s*/,w),t);else{var x=A.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(i.indent_string).length-1,R=i.get_full_indent(S-x);A=A.replace(/^\s*/,w).replace(/\r\n|\r|\n/g,"\n"+R).replace(/\s+$/,"")}A&&(i.print_token_raw(A),i.print_newline(!0,i.output))}i.current_mode="TAG";break;default:""!==i.token_text&&i.print_token(i.token_text)}i.last_token=i.token_type,i.last_text=i.token_text}var I=i.output.join("").replace(/[\r\n\t ]+$/,"");return f&&(I+="\n"),I}function D(i,e){function r(){return(y=i.charAt(++C))||""}function n(e){var t="",n=C;return e&&s(),t=i.charAt(C+1)||"",C=n-1,r(),t}function o(e){for(var t=C;r();)if("\\"===y)r();else{if(-1!==e.indexOf(y))break;if("\n"===y)break}return i.substring(t,C+1)}function t(e){var t=C,n=o(e);return C=t-1,r(),n}function s(){for(var e="";T.test(n());)r(),e+=y;return e}function a(){var e="";for(y&&T.test(y)&&(e=y);T.test(r());)e+=y;return e}function l(e){var t=C;for(e="/"===n(),r();r();){if(!e&&"*"===y&&"/"===n()){r();break}if(e&&"\n"===y)return i.substring(t,C)}return i.substring(t,C)+y}function c(e){return i.substring(C-e.length,C).toLowerCase()===e}function d(){for(var e=0,t=C+1;t<i.length;t++){var n=i.charAt(t);if("{"===n)return!0;if("("===n)e+=1;else if(")"===n){if(0==e)return!1;e-=1}else if(";"===n||"}"===n)return!1}return!1}function u(){x++,S+=w}function f(){x--,S=S.slice(0,-g)}var h={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},p={"@media":!0,"@supports":!0,"@document":!0};e=e||{},i=(i=i||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n");var g=e.indent_size||4,m=e.indent_char||" ",v=void 0===e.selector_separator_newline||e.selector_separator_newline,b=void 0!==e.end_with_newline&&e.end_with_newline,E=void 0===e.newline_between_rules||e.newline_between_rules,_=e.eol?e.eol:"\n";"string"==typeof g&&(g=parseInt(g,10)),e.indent_with_tabs&&(m="\t",g=1),_=_.replace(/\\r/,"\r").replace(/\\n/,"\n");for(var y,T=/^\s+$/,C=-1,A=0,S=i.match(/^[\t ]*/)[0],w=new Array(g+1).join(m),x=0,R=0,I={"{":function(e){I.singleSpace(),D.push(e),I.newLine()},"}":function(e){I.newLine(),D.push(e),I.newLine()},_lastCharWhitespace:function(){return T.test(D[D.length-1])},newLine:function(e){D.length&&(e||"\n"===D[D.length-1]||I.trim(),D.push("\n"),S&&D.push(S))},singleSpace:function(){D.length&&!I._lastCharWhitespace()&&D.push(" ")},preserveSingleSpace:function(){P&&I.singleSpace()},trim:function(){for(;I._lastCharWhitespace();)D.pop()}},D=[],N=!1,O=!1,L=!1,k="",M="";;){var F=a(),P=""!==F,$=-1!==F.indexOf("\n");if(M=k,!(k=y))break;if("/"===y&&"*"===n()){var H=0===x;($||H)&&I.newLine(),D.push(l()),I.newLine(),H&&I.newLine(!0)}else if("/"===y&&"/"===n())$||"{"===M||I.trim(),I.singleSpace(),D.push(l()),I.newLine();else if("@"===y){I.preserveSingleSpace(),D.push(y);var B=t(": ,;{}()[]/='\"");B.match(/[ :]$/)&&(r(),B=o(": ").replace(/\s$/,""),D.push(B),I.singleSpace()),(B=B.replace(/\s$/,""))in h&&(R+=1,B in p&&(L=!0))}else"#"===y&&"{"===n()?(I.preserveSingleSpace(),D.push(o("}"))):"{"===y?"}"===n(!0)?(s(),r(),I.singleSpace(),D.push("{}"),I.newLine(),E&&0===x&&I.newLine(!0)):(u(),I["{"](y),L?(L=!1,N=R<x):N=R<=x):"}"===y?(f(),I["}"](y),O=N=!1,R&&R--,E&&0===x&&I.newLine(!0)):":"===y?(s(),!N&&!L||c("&")||d()?":"===n()?(r(),D.push("::")):D.push(":"):(O=!0,D.push(":"),I.singleSpace())):'"'===y||"'"===y?(I.preserveSingleSpace(),D.push(o(y))):";"===y?(O=!1,D.push(y),I.newLine()):"("===y?c("url")?(D.push(y),s(),r()&&(")"!==y&&'"'!==y&&"'"!==y?D.push(o(")")):C--)):(A++,I.preserveSingleSpace(),D.push(y),s()):")"===y?(D.push(y),A--):","===y?(D.push(y),s(),v&&!O&&A<1?I.newLine():I.singleSpace()):("]"===y||("["===y?I.preserveSingleSpace():"="===y?(s(),y="="):I.preserveSingleSpace()),D.push(y))}var W="";return S&&(W+=S),W+=D.join("").replace(/[\r\n\t ]+$/,""),b&&(W+="\n"),"\n"!=_&&(W=W.replace(/[\n]/g,_)),W}function Z(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function J(e){return e.replace(/^\s+|\s+$/g,"")}function ee(e){return e.replace(/^\s+/g,"")}function N(e,t){return new n(e,t).beautify()}function n(i,e){function t(e,t){var n=0;return e&&(n=e.indentation_level,!F.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:F.get_line_number(),ternary_depth:0}}function r(e){var t=e.newlines;if(G.keep_array_indentation&&f(K.mode))for(n=0;n<t;n+=1)a(0<n);else if(G.max_preserve_newlines&&t>G.max_preserve_newlines&&(t=G.max_preserve_newlines),G.preserve_newlines&&1<e.newlines){a();for(var n=1;n<t;n+=1)a(!0)}q[(H=e).type]()}function s(e){for(var t=[],n=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}function n(e){if(e=void 0!==e&&e,!F.just_added_newline())if(G.preserve_newlines&&H.wanted_newline||e)a(!1,!0);else if(G.wrap_line_length){F.current_line.get_character_count()+H.text.length+(F.space_before_token?1:0)>=G.wrap_line_length&&a(!1,!0)}}function a(e,t){if(!t&&";"!==K.last_text&&","!==K.last_text&&"="!==K.last_text&&"TK_OPERATOR"!==B)for(;K.mode===re.Statement&&!K.if_block&&!K.do_block;)p();F.add_new_line(e)&&(K.multiline_frame=!0)}function o(){F.just_added_newline()&&(G.keep_array_indentation&&f(K.mode)&&H.wanted_newline?(F.current_line.push(H.whitespace_before),F.space_before_token=!1):F.set_indent(K.indentation_level)&&(K.line_indent_level=K.indentation_level))}function l(e){F.raw?F.add_raw_token(H):(G.comma_first&&"TK_COMMA"===B&&F.just_added_newline()&&","===F.previous_line.last()&&(F.previous_line.pop(),o(),F.add_token(","),F.space_before_token=!0),e=e||H.text,o(),F.add_token(e))}function c(){K.indentation_level+=1}function d(){0<K.indentation_level&&(!K.parent||K.indentation_level>K.parent.indentation_level)&&(K.indentation_level-=1)}function u(e){K?(j.push(K),z=K):z=t(null,e),K=t(z,e)}function f(e){return e===re.ArrayLiteral}function h(e){return Z(e,[re.Expression,re.ForInitializer,re.Conditional])}function p(){0<j.length&&(z=K,K=j.pop(),z.mode===re.Statement&&F.remove_redundant_indentation(z))}function g(){return K.parent.mode===re.ObjectLiteral&&K.mode===re.Statement&&(":"===K.last_text&&0===K.ternary_depth||"TK_RESERVED"===B&&Z(K.last_text,["get","set"]))}function m(){return!!("TK_RESERVED"===B&&Z(K.last_text,["var","let","const"])&&"TK_WORD"===H.type||"TK_RESERVED"===B&&"do"===K.last_text||"TK_RESERVED"===B&&"return"===K.last_text&&!H.wanted_newline||"TK_RESERVED"===B&&"else"===K.last_text&&("TK_RESERVED"!==H.type||"if"!==H.text)||"TK_END_EXPR"===B&&(z.mode===re.ForInitializer||z.mode===re.Conditional)||"TK_WORD"===B&&K.mode===re.BlockStatement&&!K.in_case&&"--"!==H.text&&"++"!==H.text&&"function"!==W&&"TK_WORD"!==H.type&&"TK_RESERVED"!==H.type||K.mode===re.ObjectLiteral&&(":"===K.last_text&&0===K.ternary_depth||"TK_RESERVED"===B&&Z(K.last_text,["get","set"])))&&(u(re.Statement),c(),"TK_RESERVED"===B&&Z(K.last_text,["var","let","const"])&&"TK_WORD"===H.type&&(K.declaration_statement=!0),g()||n("TK_RESERVED"===H.type&&Z(H.text,["do","for","if","while"])),!0)}function v(e,t){for(var n=0;n<e.length;n++)if(J(e[n]).charAt(0)!==t)return!1;return!0}function b(e,t){for(var n,i=0,r=e.length;i<r;i++)if((n=e[i])&&0!==n.indexOf(t))return!1;return!0}function E(e){return Z(e,["case","return","do","if","throw","else"])}function _(e){var t=P+(e||0);return t<0||t>=V.length?null:V[t]}function y(){m();var e=re.Expression;if("["===H.text){if("TK_WORD"===B||")"===K.last_text)return"TK_RESERVED"===B&&Z(K.last_text,$.line_starters)&&(F.space_before_token=!0),u(e),l(),c(),void(G.space_in_paren&&(F.space_before_token=!0));e=re.ArrayLiteral,f(K.mode)&&("["!==K.last_text&&(","!==K.last_text||"]"!==W&&"}"!==W)||G.keep_array_indentation||a())}else"TK_RESERVED"===B&&"for"===K.last_text?e=re.ForInitializer:"TK_RESERVED"===B&&Z(K.last_text,["if","while"])&&(e=re.Conditional);";"===K.last_text||"TK_START_BLOCK"===B?a():"TK_END_EXPR"===B||"TK_START_EXPR"===B||"TK_END_BLOCK"===B||"."===K.last_text?n(H.wanted_newline):"TK_RESERVED"===B&&"("===H.text||"TK_WORD"===B||"TK_OPERATOR"===B?"TK_RESERVED"===B&&("function"===K.last_word||"typeof"===K.last_word)||"*"===K.last_text&&"function"===W?G.space_after_anon_function&&(F.space_before_token=!0):"TK_RESERVED"!==B||!Z(K.last_text,$.line_starters)&&"catch"!==K.last_text||G.space_before_conditional&&(F.space_before_token=!0):F.space_before_token=!0,"("===H.text&&"TK_RESERVED"===B&&"await"===K.last_word&&(F.space_before_token=!0),"("===H.text&&("TK_EQUALS"!==B&&"TK_OPERATOR"!==B||g()||n()),u(e),l(),G.space_in_paren&&(F.space_before_token=!0),c()}function T(){for(;K.mode===re.Statement;)p();K.multiline_frame&&n("]"===H.text&&f(K.mode)&&!G.keep_array_indentation),G.space_in_paren&&("TK_START_EXPR"!==B||G.space_in_empty_paren?F.space_before_token=!0:(F.trim(),F.space_before_token=!1)),"]"===H.text&&G.keep_array_indentation?(l(),p()):(p(),l()),F.remove_redundant_indentation(z),K.do_while&&z.mode===re.Conditional&&(z.mode=re.Expression,K.do_block=!1,K.do_while=!1)}function C(){var e=_(1),t=_(2);u(t&&(":"===t.text&&Z(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||Z(e.text,["get","set"])&&Z(t.type,["TK_WORD","TK_RESERVED"]))?Z(W,["class","interface"])?re.BlockStatement:re.ObjectLiteral:re.BlockStatement);var n=!e.comments_before.length&&"}"===e.text&&"function"===K.last_word&&"TK_END_EXPR"===B;"expand"===G.brace_style||"none"===G.brace_style&&H.wanted_newline?"TK_OPERATOR"!==B&&(n||"TK_EQUALS"===B||"TK_RESERVED"===B&&E(K.last_text)&&"else"!==K.last_text)?F.space_before_token=!0:a(!1,!0):"TK_OPERATOR"!==B&&"TK_START_EXPR"!==B?"TK_START_BLOCK"===B?a():F.space_before_token=!0:f(z.mode)&&","===K.last_text&&("}"===W?F.space_before_token=!0:a()),l(),c()}function A(){for(;K.mode===re.Statement;)p();var e="TK_START_BLOCK"===B;"expand"===G.brace_style?e||a():e||(f(K.mode)&&G.keep_array_indentation?(G.keep_array_indentation=!1,a(),G.keep_array_indentation=!0):a()),p(),l()}function S(){if("TK_RESERVED"===H.type&&K.mode!==re.ObjectLiteral&&Z(H.text,["set","get"])&&(H.type="TK_WORD"),"TK_RESERVED"===H.type&&K.mode===re.ObjectLiteral&&":"==_(1).text&&(H.type="TK_WORD"),m()||!H.wanted_newline||h(K.mode)||"TK_OPERATOR"===B&&"--"!==K.last_text&&"++"!==K.last_text||"TK_EQUALS"===B||!G.preserve_newlines&&"TK_RESERVED"===B&&Z(K.last_text,["var","let","const","set","get"])||a(),K.do_block&&!K.do_while){if("TK_RESERVED"===H.type&&"while"===H.text)return F.space_before_token=!0,l(),F.space_before_token=!0,void(K.do_while=!0);a(),K.do_block=!1}if(K.if_block)if(K.else_block||"TK_RESERVED"!==H.type||"else"!==H.text){for(;K.mode===re.Statement;)p();K.if_block=!1,K.else_block=!1}else K.else_block=!0;if("TK_RESERVED"===H.type&&("case"===H.text||"default"===H.text&&K.in_case_statement))return a(),(K.case_body||G.jslint_happy)&&(d(),K.case_body=!1),l(),K.in_case=!0,void(K.in_case_statement=!0);if("TK_RESERVED"===H.type&&"function"===H.text&&((Z(K.last_text,["}",";"])||F.just_added_newline()&&!Z(K.last_text,["[","{",":","=",","]))&&(F.just_added_blankline()||H.comments_before.length||(a(),a(!0))),"TK_RESERVED"===B||"TK_WORD"===B?"TK_RESERVED"===B&&Z(K.last_text,["get","set","new","return","export","async"])?F.space_before_token=!0:"TK_RESERVED"===B&&"default"===K.last_text&&"export"===W?F.space_before_token=!0:a():"TK_OPERATOR"===B||"="===K.last_text?F.space_before_token=!0:(K.multiline_frame||!h(K.mode)&&!f(K.mode))&&a()),"TK_COMMA"!==B&&"TK_START_EXPR"!==B&&"TK_EQUALS"!==B&&"TK_OPERATOR"!==B||g()||n(),"TK_RESERVED"===H.type&&Z(H.text,["function","get","set"]))return l(),void(K.last_word=H.text);if(Y="NONE","TK_END_BLOCK"===B?"TK_RESERVED"===H.type&&Z(H.text,["else","catch","finally"])?"expand"===G.brace_style||"end-expand"===G.brace_style||"none"===G.brace_style&&H.wanted_newline?Y="NEWLINE":(Y="SPACE",F.space_before_token=!0):Y="NEWLINE":"TK_SEMICOLON"===B&&K.mode===re.BlockStatement?Y="NEWLINE":"TK_SEMICOLON"===B&&h(K.mode)?Y="SPACE":"TK_STRING"===B?Y="NEWLINE":"TK_RESERVED"===B||"TK_WORD"===B||"*"===K.last_text&&"function"===W?Y="SPACE":"TK_START_BLOCK"===B?Y="NEWLINE":"TK_END_EXPR"===B&&(F.space_before_token=!0,Y="NEWLINE"),"TK_RESERVED"===H.type&&Z(H.text,$.line_starters)&&")"!==K.last_text&&(Y="else"===K.last_text||"export"===K.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===H.type&&Z(H.text,["else","catch","finally"]))if("TK_END_BLOCK"!==B||"expand"===G.brace_style||"end-expand"===G.brace_style||"none"===G.brace_style&&H.wanted_newline)a();else{F.trim(!0),"}"!==F.current_line.last()&&a(),F.space_before_token=!0}else"NEWLINE"===Y?"TK_RESERVED"===B&&E(K.last_text)?F.space_before_token=!0:"TK_END_EXPR"!==B?"TK_START_EXPR"===B&&"TK_RESERVED"===H.type&&Z(H.text,["var","let","const"])||":"===K.last_text||("TK_RESERVED"===H.type&&"if"===H.text&&"else"===K.last_text?F.space_before_token=!0:a()):"TK_RESERVED"===H.type&&Z(H.text,$.line_starters)&&")"!==K.last_text&&a():K.multiline_frame&&f(K.mode)&&","===K.last_text&&"}"===W?a():"SPACE"===Y&&(F.space_before_token=!0);l(),K.last_word=H.text,"TK_RESERVED"===H.type&&"do"===H.text&&(K.do_block=!0),"TK_RESERVED"===H.type&&"if"===H.text&&(K.if_block=!0)}function w(){for(m()&&(F.space_before_token=!1);K.mode===re.Statement&&!K.if_block&&!K.do_block;)p();l()}function x(){m()?F.space_before_token=!0:"TK_RESERVED"===B||"TK_WORD"===B?F.space_before_token=!0:"TK_COMMA"===B||"TK_START_EXPR"===B||"TK_EQUALS"===B||"TK_OPERATOR"===B?g()||n():a(),l()}function R(){m(),K.declaration_statement&&(K.declaration_assignment=!0),F.space_before_token=!0,l(),F.space_before_token=!0}function I(){if(K.declaration_statement)return h(K.parent.mode)&&(K.declaration_assignment=!1),l(),void(K.declaration_assignment?a(K.declaration_assignment=!1,!0):(F.space_before_token=!0,G.comma_first&&n()));l(),K.mode===re.ObjectLiteral||K.mode===re.Statement&&K.parent.mode===re.ObjectLiteral?(K.mode===re.Statement&&p(),a()):(F.space_before_token=!0,G.comma_first&&n())}function D(){if(m(),"TK_RESERVED"===B&&E(K.last_text))return F.space_before_token=!0,void l();if("*"!==H.text||"TK_DOT"!==B){if(":"===H.text&&K.in_case)return K.case_body=!0,c(),l(),a(),void(K.in_case=!1);if("::"!==H.text){"TK_OPERATOR"===B&&n();var e=!0,t=!0;Z(H.text,["--","++","!","~"])||Z(H.text,["-","+"])&&(Z(B,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||Z(K.last_text,$.line_starters)||","===K.last_text)?(t=e=!1,!H.wanted_newline||"--"!==H.text&&"++"!==H.text||a(!1,!0),";"===K.last_text&&h(K.mode)&&(e=!0),"TK_RESERVED"===B?e=!0:"TK_END_EXPR"===B?e=!("]"===K.last_text&&("--"===H.text||"++"===H.text)):"TK_OPERATOR"===B&&(e=Z(H.text,["--","-","++","+"])&&Z(K.last_text,["--","-","++","+"]),Z(H.text,["+","-"])&&Z(K.last_text,["--","++"])&&(t=!0)),K.mode!==re.BlockStatement&&K.mode!==re.Statement||"{"!==K.last_text&&";"!==K.last_text||a()):":"===H.text?0===K.ternary_depth?e=!1:K.ternary_depth-=1:"?"===H.text?K.ternary_depth+=1:"*"===H.text&&"TK_RESERVED"===B&&"function"===K.last_text&&(t=e=!1),F.space_before_token=F.space_before_token||e,l(),F.space_before_token=t}else l()}else l()}function N(){if(F.raw)return F.add_raw_token(H),void(H.directives&&"end"===H.directives.preserve&&(G.test_output_raw||(F.raw=!1)));if(H.directives)return a(!1,!0),l(),"start"===H.directives.preserve&&(F.raw=!0),void a(!1,!0);if(!ie.newline.test(H.text)&&!H.wanted_newline)return F.space_before_token=!0,l(),void(F.space_before_token=!0);var e,t=s(H.text),n=!1,i=!1,r=H.whitespace_before,o=r.length;for(a(!1,!0),1<t.length&&(v(t.slice(1),"*")?n=!0:b(t.slice(1),r)&&(i=!0)),l(t[0]),e=1;e<t.length;e++)a(!1,!0),n?l(" "+ee(t[e])):i&&t[e].length>o?l(t[e].substring(o)):F.add_token(t[e]);a(!1,!0)}function O(){H.wanted_newline?a(!1,!0):F.trim(!0),F.space_before_token=!0,l(),a(!1,!0)}function L(){m(),"TK_RESERVED"===B&&E(K.last_text)?F.space_before_token=!0:n(")"===K.last_text&&G.break_chained_methods),l()}function k(){l(),"\n"===H.text[H.text.length-1]&&a()}function M(){for(;K.mode===re.Statement;)p()}var F,P,$,H,B,W,U,K,z,j,Y,q,G,V=[],X="";for(q={TK_START_EXPR:y,TK_END_EXPR:T,TK_START_BLOCK:C,TK_END_BLOCK:A,TK_WORD:S,TK_RESERVED:S,TK_SEMICOLON:w,TK_STRING:x,TK_EQUALS:R,TK_OPERATOR:D,TK_COMMA:I,TK_BLOCK_COMMENT:N,TK_COMMENT:O,TK_DOT:L,TK_UNKNOWN:k,TK_EOF:M},G={},void 0!==(e=e||{}).braces_on_own_line&&(G.brace_style=e.braces_on_own_line?"expand":"collapse"),G.brace_style=e.brace_style?e.brace_style:G.brace_style?G.brace_style:"collapse","expand-strict"===G.brace_style&&(G.brace_style="expand"),G.indent_size=e.indent_size?parseInt(e.indent_size,10):4,G.indent_char=e.indent_char?e.indent_char:" ",G.eol=e.eol?e.eol:"\n",G.preserve_newlines=void 0===e.preserve_newlines||e.preserve_newlines,G.break_chained_methods=void 0!==e.break_chained_methods&&e.break_chained_methods,G.max_preserve_newlines=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),G.space_in_paren=void 0!==e.space_in_paren&&e.space_in_paren,G.space_in_empty_paren=void 0!==e.space_in_empty_paren&&e.space_in_empty_paren,G.jslint_happy=void 0!==e.jslint_happy&&e.jslint_happy,G.space_after_anon_function=void 0!==e.space_after_anon_function&&e.space_after_anon_function,G.keep_array_indentation=void 0!==e.keep_array_indentation&&e.keep_array_indentation,G.space_before_conditional=void 0===e.space_before_conditional||e.space_before_conditional,G.unescape_strings=void 0!==e.unescape_strings&&e.unescape_strings,G.wrap_line_length=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),G.e4x=void 0!==e.e4x&&e.e4x,G.end_with_newline=void 0!==e.end_with_newline&&e.end_with_newline,G.comma_first=void 0!==e.comma_first&&e.comma_first,G.test_output_raw=void 0!==e.test_output_raw&&e.test_output_raw,G.jslint_happy&&(G.space_after_anon_function=!0),e.indent_with_tabs&&(G.indent_char="\t",G.indent_size=1),G.eol=G.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),U="";0<G.indent_size;)U+=G.indent_char,G.indent_size-=1;var Q=0;if(i&&i.length){for(;" "===i.charAt(Q)||"\t"===i.charAt(Q);)X+=i.charAt(Q),Q+=1;i=i.substring(Q)}B="TK_START_BLOCK",W="",(F=new te(U,X)).raw=G.test_output_raw,j=[],u(re.BlockStatement),this.beautify=function(){var e,t;for($=new ne(i,G,U),V=$.tokenize(),P=0;e=_();){for(var n=0;n<e.comments_before.length;n++)r(e.comments_before[n]);r(e),W=K.last_text,B=e.type,K.last_text=e.text,P+=1}return t=F.get_code(),G.end_with_newline&&(t+="\n"),"\n"!=G.eol&&(t=t.replace(/[\n]/g,G.eol)),t}}function r(t){var n=0,i=-1,r=[],o=!0;this.set_indent=function(e){n=t.baseIndentLength+e*t.indent_length,i=e},this.get_character_count=function(){return n},this.is_empty=function(){return o},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),n+=e.length,o=!1},this.pop=function(){var e=null;return o||(e=r.pop(),n-=e.length,o=0===r.length),e},this.remove_indent=function(){0<i&&(i-=1,n-=t.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),n-=1;o=0===r.length},this.toString=function(){var e="";return this._empty||(0<=i&&(e=t.indent_cache[i]),e+=r.join("")),e}}function te(t,n){n=n||"",this.indent_cache=[n],this.baseIndentLength=n.length,this.indent_length=t.length,this.raw=!1;var i=[];this.baseIndentString=n,this.indent_string=t,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new r(this),i.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return i.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return i.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(1<i.length){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},
this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==re.ForInitializer&&e.mode!==re.Conditional)for(var t=e.start_line_index,n=i.length;t<n;)i[t].remove_indent(),t++},this.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim(t,n);e&&1<i.length&&this.current_line.is_empty();)i.pop(),this.current_line=i[i.length-1],this.current_line.trim();this.previous_line=1<i.length?i[i.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===i.length||i[i.length-2].is_empty())}}function ne(S,w){function x(e){if(!e.match(i))return null;var t={};r.lastIndex=0;for(var n=r.exec(e);n;)t[n[1]]=n[2],n=r.exec(e);return t}function s(){var e,t,n=[];if(k=0,M="",H<=$)return["","TK_EOF"];t=P.length?P[P.length-1]:new j("TK_START_BLOCK","{");var i=S.charAt($);for($+=1;Z(i,I);){if(ie.newline.test(i)?"\n"===i&&"\r"===S.charAt($-2)||(k+=1,n=[]):n.push(i),H<=$)return["","TK_EOF"];i=S.charAt($),$+=1}if(n.length&&(M=n.join("")),D.test(i)){var r=!0,o=!0,s=D;for("0"===i&&$<H&&/[Xxo]/.test(S.charAt($))?(o=r=!1,i+=S.charAt($),$+=1,s=/[o]/.test(S.charAt($))?N:O):(i="",$-=1);$<H&&s.test(S.charAt($));)i+=S.charAt($),$+=1,r&&$<H&&"."===S.charAt($)&&(i+=S.charAt($),$+=1,r=!1),o&&$<H&&/[Ee]/.test(S.charAt($))&&(i+=S.charAt($),($+=1)<H&&/[+-]/.test(S.charAt($))&&(i+=S.charAt($),$+=1),r=o=!1);return[i,"TK_WORD"]}if(ie.isIdentifierStart(S.charCodeAt($-1))){if($<H)for(;ie.isIdentifierChar(S.charCodeAt($))&&(i+=S.charAt($),($+=1)!==H););return"TK_DOT"===t.type||"TK_RESERVED"===t.type&&Z(t.text,["set","get"])||!Z(i,B)?[i,"TK_WORD"]:"in"===i?[i,"TK_OPERATOR"]:[i,"TK_RESERVED"]}if("("===i||"["===i)return[i,"TK_START_EXPR"];if(")"===i||"]"===i)return[i,"TK_END_EXPR"];if("{"===i)return[i,"TK_START_BLOCK"];if("}"===i)return[i,"TK_END_BLOCK"];if(";"===i)return[i,"TK_SEMICOLON"];if("/"===i){var a="";if("*"===S.charAt($)){var l;$+=1,W.lastIndex=$,a="/*"+(l=W.exec(S))[0],$+=l[0].length;var c=x(a);return c&&"start"===c.ignore&&(K.lastIndex=$,a+=(l=K.exec(S))[0],$+=l[0].length),[a=a.replace(ie.lineBreak,"\n"),"TK_BLOCK_COMMENT",c]}if("/"===S.charAt($))return $+=1,U.lastIndex=$,a="//"+(l=U.exec(S))[0],$+=l[0].length,[a,"TK_COMMENT"]}if("`"===i||"'"===i||'"'===i||("/"===i||w.e4x&&"<"===i&&S.slice($-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===t.type&&Z(t.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===t.type&&")"===t.text&&t.parent&&"TK_RESERVED"===t.parent.type&&Z(t.parent.text,["if","while","for"])||Z(t.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var d=i,u=!1,f=!1;if(e=i,"/"===d)for(var h=!1;$<H&&(u||h||S.charAt($)!==d)&&!ie.newline.test(S.charAt($));)e+=S.charAt($),u?u=!1:(u="\\"===S.charAt($),"["===S.charAt($)?h=!0:"]"===S.charAt($)&&(h=!1)),$+=1;else if(w.e4x&&"<"===d){var p=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,g=S.slice($-1),m=p.exec(g);if(m&&0===m.index){for(var v=m[2],b=0;m;){var E=!!m[1],_=m[2],y=!!m[m.length-1]||"![CDATA["===_.slice(0,8);if(_!==v||y||(E?--b:++b),b<=0)break;m=p.exec(g)}var T=m?m.index+m[0].length:g.length;return g=g.slice(0,T),$+=T-1,[g=g.replace(ie.lineBreak,"\n"),"TK_STRING"]}}else for(;$<H&&(u||S.charAt($)!==d&&("`"===d||!ie.newline.test(S.charAt($))));)(u||"`"===d)&&ie.newline.test(S.charAt($))?("\r"===S.charAt($)&&"\n"===S.charAt($+1)&&($+=1),e+="\n"):e+=S.charAt($),u?("x"!==S.charAt($)&&"u"!==S.charAt($)||(f=!0),u=!1):u="\\"===S.charAt($),$+=1;if(f&&w.unescape_strings&&(e=R(e)),$<H&&S.charAt($)===d&&(e+=d,$+=1,"/"===d))for(;$<H&&ie.isIdentifierStart(S.charCodeAt($));)e+=S.charAt($),$+=1;return[e,"TK_STRING"]}if("#"===i){if(0===P.length&&"!"===S.charAt($)){for(e=i;$<H&&"\n"!==i;)e+=i=S.charAt($),$+=1;return[J(e)+"\n","TK_UNKNOWN"]}var C="#";if($<H&&D.test(S.charAt($))){for(;C+=i=S.charAt($),($+=1)<H&&"#"!==i&&"="!==i;);return"#"===i||("["===S.charAt($)&&"]"===S.charAt($+1)?(C+="[]",$+=2):"{"===S.charAt($)&&"}"===S.charAt($+1)&&(C+="{}",$+=2)),[C,"TK_WORD"]}}if("<"===i&&("?"===S.charAt($)||"%"===S.charAt($))){z.lastIndex=$-1;var A=z.exec(S);if(A)return i=A[0],$+=i.length-1,[i=i.replace(ie.lineBreak,"\n"),"TK_STRING"]}if("<"===i&&"<!--"===S.substring($-1,$+3)){for($+=3,i="<!--";!ie.newline.test(S.charAt($))&&$<H;)i+=S.charAt($),$++;return F=!0,[i,"TK_COMMENT"]}if("-"===i&&F&&"-->"===S.substring($-1,$+2))return F=!1,$+=2,["-->","TK_COMMENT"];if("."===i)return[i,"TK_DOT"];if(Z(i,L)){for(;$<H&&Z(i+S.charAt($),L)&&(i+=S.charAt($),!(($+=1)>=H)););return","===i?[i,"TK_COMMA"]:"="===i?[i,"TK_EQUALS"]:[i,"TK_OPERATOR"]}return[i,"TK_UNKNOWN"]}function R(e){for(var t,n=!1,i="",r=0,o="",s=0;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)o=e.substr(r,2),r+=2;else{if("u"!==t){i+="\\"+t;continue}o=e.substr(r,4),r+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(0<=(s=parseInt(o,16))&&s<32){i+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===s||39===s||92===s)i+="\\"+String.fromCharCode(s);else{if("x"===t&&126<s&&s<=255)return e;i+=String.fromCharCode(s)}}else"\\"===t?n=!0:i+=t;return i}var I="\n\r\t ".split(""),D=/[0-9]/,N=/[01234567]/,O=/[0123456789abcdefABCDEF]/,L="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var k,M,F,P,$,H,B=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),W=/([\s\S]*?)((?:\*\/)|$)/g,U=/([^\n\r\u2028\u2029]*)/g,i=/\/\* beautify( \w+[:]\w+)+ \*\//g,r=/ (\w+)[:](\w+)/g,K=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,z=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){H=S.length,$=0,F=!1,P=[];for(var e,t,n,i=null,r=[],o=[];!t||"TK_EOF"!==t.type;){for(n=s(),e=new j(n[1],n[0],k,M);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=n[2]),o.push(e),n=s(),e=new j(n[1],n[0],k,M);o.length&&(e.comments_before=o,o=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,r.push(i),i=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&i&&("]"===e.text&&"["===i.text||")"===e.text&&"("===i.text||"}"===e.text&&"{"===i.text)&&(e.parent=i.parent,i=r.pop()),P.push(e),t=e}return P}}var t,i,o,s,a,ie={};t=ie,i="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",o="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",s=new RegExp("["+i+"]"),a=new RegExp("["+i+o+"]"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g"),t.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||170<=e&&s.test(String.fromCharCode(e)))},t.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||170<=e&&a.test(String.fromCharCode(e))))};var re={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},j=function(e,t,n,i){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=0<n,this.whitespace_before=i||"",this.parent=null,this.directives=null};return{run:e}},ze.extend(ze.FE.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),ze.FE.PLUGINS.codeView=function(a){function n(){return a.$box.hasClass("fr-code-view")}function i(){return d?d.getValue():c.val()}function r(e){var t=i();a.html.set(t),a.$el.blur(),a.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),a.events.focus(!0),a.placeholder.refresh(),a.undo.saveStep()}function o(e){c||(l(),!d&&a.opts.codeMirror?d=a.opts.codeMirror.fromTextArea(c.get(0),a.opts.codeMirrorOptions):a.events.$on(c,"keydown keyup change input",function(){a.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")})),a.undo.saveStep(),a.html.cleanEmptyTags(),a.html.cleanWhiteTags(!0),a.core.hasFocus()&&(a.core.isEmpty()||(a.selection.save(),a.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),a.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var t,n,i=a.html.get(!1,!0);if(a.$el.find("span.fr-tmp").remove(),a.$box.toggleClass("fr-code-view",!0),a.core.hasFocus()&&a.$el.blur(),i=(i=i.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),a.codeBeautifier&&(i=a.codeBeautifier.run(i,a.opts.codeBeautifierOptions)),d){t=i.indexOf("FROALA-SM"),(n=i.indexOf("FROALA-EM"))<t?t=n:n-=9;var r=(i=i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,t).length-i.substring(0,t).replace(/\n/g,"").length,o=i.substring(0,n).length-i.substring(0,n).replace(/\n/g,"").length;t=i.substring(0,t).length-i.substring(0,i.substring(0,t).lastIndexOf("\n")+1).length,n=i.substring(0,n).length-i.substring(0,i.substring(0,n).lastIndexOf("\n")+1).length,d.setSize(null,a.opts.height?a.opts.height:"auto"),a.opts.heightMin&&a.$box.find(".CodeMirror-scroll").css("min-height",a.opts.heightMin),d.setValue(i),d.focus(),d.setSelection({line:r,ch:t},{line:o,ch:n}),d.refresh(),d.clearHistory()}else{t=i.indexOf("FROALA-SM"),n=i.indexOf("FROALA-EM")-9,a.opts.heightMin&&c.css("min-height",a.opts.heightMin),a.opts.height&&c.css("height",a.opts.height),a.opts.heightMax&&c.css("max-height",a.opts.height||a.opts.heightMax),c.val(i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var s=ze(a.o_doc).scrollTop();c.focus(),c.get(0).setSelectionRange(t,n),ze(a.o_doc).scrollTop(s)}a.$tb.find(" > .fr-command").not(e).filter(function(){return a.opts.codeViewKeepActiveButtons.indexOf(ze(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),e.addClass("fr-active").attr("aria-pressed",!0),!a.helpers.isMobile()&&a.opts.toolbarInline&&a.toolbar.hide()}function t(e){void 0===e&&(e=!n());var t=a.$tb.find('.fr-command[data-cmd="html"]');e?(a.popups.hideAll(),o(t)):(a.$box.toggleClass("fr-code-view",!1),r(t))}function s(){n()&&t(!1),d&&d.toTextArea(),c.val("").removeData().remove(),c=null,u&&(u.remove(),u=null)}function l(){c=ze('<textarea class="fr-code" tabIndex="-1">'),a.$wp.append(c),c.attr("dir",a.opts.direction),a.$box.hasClass("fr-basic")||(u=ze('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(a.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),a.$box.append(u),a.events.bindClick(a.$box,"a.html-switch",function(){t(!1)}));var e=function(){return!n()};a.events.on("buttons.refresh",e),a.events.on("copy",e,!0),a.events.on("cut",e,!0),a.events.on("paste",e,!0),a.events.on("destroy",s,!0),a.events.on("html.set",function(){n()&&t(!0)}),a.events.on("form.submit",function(){n()&&(a.html.set(i()),a.events.trigger("contentChanged",[],!0))},!0)}function e(){if(!a.$wp)return!1}var c,d,u;return{_init:e,toggle:t,isActive:n,get:i}},ze.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),ze.FE.DefineIcon("html",{NAME:"code"}),ze.extend(ze.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),ze.extend(ze.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),ze.FE.PLUGINS.colors=function(p){function e(){var e=p.$tb.find('.fr-command[data-cmd="color"]'),t=p.popups.get("colors.picker");if(t||(t=r()),!t.hasClass("fr-active"))if(p.popups.setContainer("colors.picker",p.$tb),l(t.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(p.opts.toolbarBottom?10:e.outerHeight()-10);p.popups.show("colors.picker",n,i,e.outerHeight())}else p.position.forSelection(t),p.popups.show("colors.picker")}function t(){p.popups.hide("colors.picker")}function r(){var e='<div class="fr-buttons fr-colors-buttons">';p.opts.toolbarInline&&0<p.opts.colorsButtons.length&&(e+=p.button.buildList(p.opts.colorsButtons)),e+=o()+"</div>";var t="";p.opts.colorsHEXInput&&(t='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+p.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+p.id+'" type="text" placeholder="'+p.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+p.language.translate("OK")+"</button></div></div>");var n={buttons:e,text_colors:s("text"),background_colors:s("background"),custom_color:t},i=p.popups.create("colors.picker",n);return a(i),i}function o(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==p.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=p.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+p.language.translate("Text")+'">'+p.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==p.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==p.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+p.language.translate("Background")+'">'+p.language.translate("Background")+"</span>")+"</div>"}function s(e){for(var t="text"==e?p.opts.colorsText:p.opts.colorsBackground,n='<div class="fr-color-set fr-'+e+"-color"+(p.opts.colorsDefaultTab==e||"text"!=p.opts.colorsDefaultTab&&"background"!=p.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',i=0;i<t.length;i++)0!==i&&i%p.opts.colorsStep==0&&(n+="<br>"),"REMOVE"!=t[i]?n+='<span class="fr-command fr-select-color" style="background: '+t[i]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+t[i]+'"><span class="fr-sr-only">'+p.language.translate("Color")+" "+t[i]+"&nbsp;&nbsp;&nbsp;</span></span>":n+='<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+p.language.translate("Clear Formatting")+'">'+p.icon.create("remove")+'<span class="fr-sr-only">'+p.language.translate("Clear Formatting")+"</span></span>";return n+"</div>"}function a(h){p.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!p.popups.isVisible("colors.picker")||!t.is("span"))return!0;var n=e.which,i=!0;if(ze.FE.KEYCODE.TAB==n){var r=h.find(".fr-buttons");i=!p.accessibility.focusToolbar(r,!!e.shiftKey)}else if(ze.FE.KEYCODE.ARROW_UP==n||ze.FE.KEYCODE.ARROW_DOWN==n||ze.FE.KEYCODE.ARROW_LEFT==n||ze.FE.KEYCODE.ARROW_RIGHT==n){if(t.is("span.fr-select-color")){var o=t.parent().find("span.fr-select-color"),s=o.index(t),a=p.opts.colorsStep,l=Math.floor(o.length/a),c=s%a,d=Math.floor(s/a)*a+c,u=l*a;ze.FE.KEYCODE.ARROW_UP==n?d=((d-a)%u+u)%u:ze.FE.KEYCODE.ARROW_DOWN==n?d=(d+a)%u:ze.FE.KEYCODE.ARROW_LEFT==n?d=((d-1)%u+u)%u:ze.FE.KEYCODE.ARROW_RIGHT==n&&(d=(d+1)%u);var f=ze(o.get(d));p.events.disableBlur(),f.focus(),i=!1}}else ze.FE.KEYCODE.ENTER==n&&(p.button.exec(t),i=!1);return!1===i&&(e.preventDefault(),e.stopPropagation()),i},!0)}function l(e){var t,n=p.popups.get("colors.picker"),i=ze(p.selection.element());t="background"==e?"background-color":"color";var r=n.find(".fr-"+e+"-color .fr-select-color");for(r.find(".fr-selected-color").remove(),r.removeClass("fr-active-item"),r.not('[data-param1="REMOVE"]').attr("aria-selected",!1);i.get(0)!=p.el;){if("transparent"!=i.css(t)&&"rgba(0, 0, 0, 0)"!=i.css(t)){var o=n.find(".fr-"+e+'-color .fr-select-color[data-param1="'+p.helpers.RGBToHex(i.css(t))+'"]');o.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'),o.addClass("fr-active-item").attr("aria-selected",!0);break}i=i.parent()}var s=n.find(".fr-color-hex-layer input");s.length&&s.val(p.helpers.RGBToHex(i.css(t))).trigger("change")}function n(e,t){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+t+"-color").addClass("fr-selected-set"),l(t)),p.accessibility.focusPopup(e.parents(".fr-popup"))}function i(e){"REMOVE"!=e?p.format.applyStyle("background-color",p.helpers.HEXtoRGB(e)):p.format.removeStyle("background-color"),t()}function c(e){"REMOVE"!=e?p.format.applyStyle("color",p.helpers.HEXtoRGB(e)):p.format.removeStyle("color"),t()}function d(){p.popups.hide("colors.picker"),p.toolbar.showInline()}function u(){var e=p.popups.get("colors.picker"),t=e.find(".fr-color-hex-layer input");if(t.length){var n=t.val();"background"==e.find(".fr-selected-tab").attr("data-param1")?i(n):c(n)}}return{showColorsPopup:e,hideColorsPopup:t,changeSet:n,background:i,customColor:u,text:c,back:d}},ze.FE.DefineIcon("colors",{NAME:"tint"}),ze.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),ze.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),ze.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),ze.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),ze.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),ze.FE.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),ze.FE.DefineIcon("remove",{NAME:"eraser"}),ze.extend(ze.FE.DEFAULTS,{dragInline:!0}),ze.FE.PLUGINS.draggable=function(c){function e(e){return!(!e.originalEvent||!e.originalEvent.target||e.originalEvent.target.nodeType!=Node.TEXT_NODE)||(e.target&&"A"==e.target.tagName&&1==e.target.childNodes.length&&"IMG"==e.target.childNodes[0].tagName&&(e.target=e.target.childNodes[0]),ze(e.target).hasClass("fr-draggable")?(c.undo.canDo()||c.undo.saveStep(),c.opts.dragInline?c.$el.attr("contenteditable",!0):c.$el.attr("contenteditable",!1),c.opts.toolbarInline&&c.toolbar.hide(),ze(e.target).addClass("fr-dragging"),c.browser.msie||c.browser.edge||c.selection.clear(),void e.originalEvent.dataTransfer.setData("text","Froala")):(e.preventDefault(),!1))}function d(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||c.node.isElement(e)))}function u(e,t,n){c.opts.iframe&&(e+=c.$iframe.offset().top,t+=c.$iframe.offset().left),f.offset().top!=e&&f.css("top",e),f.offset().left!=t&&f.css("left",t),f.width()!=n&&f.css("width",n)}function t(e){var t=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset);if(!d(t)){for(var n=0,i=t;!d(i)&&i==t&&0<e.originalEvent.pageY-c.win.pageYOffset-n;)n++,i=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset-n);(!d(i)||f&&0===c.$el.find(i).length&&i!=f.get(0))&&(i=null);for(var r=0,o=t;!d(o)&&o==t&&e.originalEvent.pageY-c.win.pageYOffset+r<ze(c.doc).height();)r++,o=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset+r);(!d(o)||f&&0===c.$el.find(o).length&&o!=f.get(0))&&(o=null),t=null==o&&i?i:o&&null==i?o:o&&i?n<r?i:o:null}if(ze(t).hasClass("fr-drag-helper"))return!1;if(t&&!c.node.isBlock(t)&&(t=c.node.blockParent(t)),t&&0<=["TD","TH","TR","THEAD","TBODY"].indexOf(t.tagName)&&(t=ze(t).parents("table").get(0)),t&&0<=["LI"].indexOf(t.tagName)&&(t=ze(t).parents("UL, OL").get(0)),t&&!ze(t).hasClass("fr-drag-helper")){var s;f||(ze.FE.$draggable_helper||(ze.FE.$draggable_helper=ze('<div class="fr-drag-helper"></div>')),f=ze.FE.$draggable_helper,c.events.on("shared.destroy",function(){f.html("").removeData().remove(),f=null},!0)),s=e.originalEvent.pageY<ze(t).offset().top+ze(t).outerHeight()/2;var a=ze(t),l=0;s||0!==a.next().length?(s||(a=a.next()),"before"==f.data("fr-position")&&a.is(f.data("fr-tag"))||(0<a.prev().length&&(l=parseFloat(a.prev().css("margin-bottom"))||0),l=Math.max(l,parseFloat(a.css("margin-top"))||0),u(a.offset().top-l/2-c.$box.offset().top,a.offset().left-c.win.pageXOffset-c.$box.offset().left,a.width()),f.data("fr-position","before"))):"after"==f.data("fr-position")&&a.is(f.data("fr-tag"))||(l=parseFloat(a.css("margin-bottom"))||0,u(a.offset().top+ze(t).height()+l/2-c.$box.offset().top,a.offset().left-c.win.pageXOffset-c.$box.offset().left,a.width()),f.data("fr-position","after")),f.data("fr-tag",a),f.addClass("fr-visible"),f.appendTo(c.$box)}else f&&0<c.$box.find(f).length&&f.removeClass("fr-visible")}function n(e){e.originalEvent.dataTransfer.dropEffect="move",c.opts.dragInline?o()||!c.browser.msie&&!c.browser.edge||e.preventDefault():(e.preventDefault(),t(e))}function i(e){e.originalEvent.dataTransfer.dropEffect="move",c.opts.dragInline||e.preventDefault()}function r(e){c.$el.attr("contenteditable",!0);var t=c.$el.find(".fr-dragging");f&&f.hasClass("fr-visible")&&c.$box.find(f).length?s(e):t.length&&(e.preventDefault(),e.stopPropagation()),f&&c.$box.find(f).length&&f.removeClass("fr-visible"),t.removeClass("fr-dragging")}function o(){for(var e=null,t=0;t<ze.FE.INSTANCES.length;t++)if((e=ze.FE.INSTANCES[t].$el.find(".fr-dragging")).length)return e.get(0)}function s(e){for(var t,n,i=0;i<ze.FE.INSTANCES.length;i++)if((t=ze.FE.INSTANCES[i].$el.find(".fr-dragging")).length){n=ze.FE.INSTANCES[i];break}if(t.length){if(e.preventDefault(),e.stopPropagation(),f&&f.hasClass("fr-visible")&&c.$box.find(f).length)f.data("fr-tag")[f.data("fr-position")]('<span class="fr-marker"></span>'),f.removeClass("fr-visible");else if(!1===c.markers.insertAtPoint(e.originalEvent))return!1;if(!1===(t=c.events.chainTrigger("element.beforeDrop",t)))return!1;t.removeClass("fr-dragging");var r=t;if(t.parent().is("A")&&(r=t.parent()),c.core.isEmpty()?c.events.focus():(c.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),c.selection.restore()),n==c||c.undo.canDo()||c.undo.saveStep(),c.core.isEmpty())c.$el.html(r);else{var o=c.markers.insert();0===r.find(o).length?ze(o).replaceWith(r):ze(o).replaceWith(t),t.after(ze.FE.MARKERS),c.selection.restore()}return c.popups.hideAll(),c.selection.save(),c.$el.find(c.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),c.html.wrap(),c.html.fillEmptyBlocks(),c.selection.restore(),c.undo.saveStep(),c.opts.iframe&&c.size.syncIframe(),n!=c&&(n.popups.hideAll(),n.$el.find(n.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),n.html.wrap(),n.html.fillEmptyBlocks(),n.undo.saveStep(),n.events.trigger("element.dropped"),n.opts.iframe&&n.size.syncIframe()),c.events.trigger("element.dropped",[r]),!1}f&&f.removeClass("fr-visible"),c.undo.canDo()||c.undo.saveStep(),setTimeout(function(){c.undo.saveStep()},0)}function a(e){if(e&&"DIV"==e.tagName&&c.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("div.fr-drag-helper"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])}function l(){c.opts.enter==ze.FE.ENTER_BR&&(c.opts.dragInline=!0),c.events.on("dragstart",e,!0),c.events.on("dragover",n,!0),c.events.on("dragenter",i,!0),c.events.on("document.dragend",r,!0),c.events.on("document.drop",r,!0),c.events.on("drop",s,!0),c.events.on("html.processGet",a)}var f;return{_init:l}},ze.extend(ze.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),ze.extend(ze.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",
desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),ze.FE.PLUGINS.emoticons=function(g){function e(){var e=g.$tb.find('.fr-command[data-cmd="emoticons"]'),t=g.popups.get("emoticons");if(t||(t=r()),!t.hasClass("fr-active")){g.popups.refresh("emoticons"),g.popups.setContainer("emoticons",g.$tb);var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(g.opts.toolbarBottom?10:e.outerHeight()-10);g.popups.show("emoticons",n,i,e.outerHeight())}}function t(){g.popups.hide("emoticons")}function r(){var e="";g.opts.toolbarInline&&0<g.opts.emoticonsButtons.length&&(e='<div class="fr-buttons fr-emoticons-buttons">'+g.button.buildList(g.opts.emoticonsButtons)+"</div>");var t={buttons:e,emoticons:i()},n=g.popups.create("emoticons",t);return g.tooltip.bind(n,".fr-emoticon"),s(n),n}function o(){if(!g.selection.isCollapsed())return!1;var e=g.selection.element(),t=g.selection.endElement();if(e&&g.node.hasClass(e,"fr-emoticon"))return e;if(t&&g.node.hasClass(t,"fr-emoticon"))return t;var n=g.selection.ranges(0),i=n.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&0<i.childNodes.length&&0<n.startOffset){var r=i.childNodes[n.startOffset-1];if(g.node.hasClass(r,"fr-emoticon"))return r}return!1}function i(){for(var e='<div style="text-align: center">',t=0;t<g.opts.emoticonsSet.length;t++)0!==t&&t%g.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+g.language.translate(g.opts.emoticonsSet[t].desc)+'" role="button" data-param1="'+g.opts.emoticonsSet[t].code+'">'+(g.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+g.opts.emoticonsSet[t].code+'.svg"/>':"&#x"+g.opts.emoticonsSet[t].code+";")+'<span class="fr-sr-only">'+g.language.translate(g.opts.emoticonsSet[t].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return g.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+"</div>"}function s(p){g.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!g.popups.isVisible("emoticons")||!t.is("span, a"))return!0;var n,i,r,o=e.which;if(ze.FE.KEYCODE.TAB==o){if(t.is("span.fr-emoticon")&&e.shiftKey||t.is("a")&&!e.shiftKey){var s=p.find(".fr-buttons");n=!g.accessibility.focusToolbar(s,!!e.shiftKey)}if(!1!==n){var a=p.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");t.is("span.fr-emoticon")&&(a=a.not("span.fr-emoticon:not(:focus)")),i=a.index(t),i=e.shiftKey?((i-1)%a.length+a.length)%a.length:(i+1)%a.length,r=a.get(i),g.events.disableBlur(),r.focus(),n=!1}}else if(ze.FE.KEYCODE.ARROW_UP==o||ze.FE.KEYCODE.ARROW_DOWN==o||ze.FE.KEYCODE.ARROW_LEFT==o||ze.FE.KEYCODE.ARROW_RIGHT==o){if(t.is("span.fr-emoticon")){var l=t.parent().find("span.fr-emoticon");i=l.index(t);var c=g.opts.emoticonsStep,d=Math.floor(l.length/c),u=i%c,f=Math.floor(i/c)*c+u,h=d*c;ze.FE.KEYCODE.ARROW_UP==o?f=((f-c)%h+h)%h:ze.FE.KEYCODE.ARROW_DOWN==o?f=(f+c)%h:ze.FE.KEYCODE.ARROW_LEFT==o?f=((f-1)%h+h)%h:ze.FE.KEYCODE.ARROW_RIGHT==o&&(f=(f+1)%h),r=ze(l.get(f)),g.events.disableBlur(),r.focus(),n=!1}}else ze.FE.KEYCODE.ENTER==o&&(t.is("a")?t[0].click():g.button.exec(t),n=!1);return!1===n&&(e.preventDefault(),e.stopPropagation()),n},!0)}function n(e,t){var n=o(),i=g.selection.ranges(0);n?(0===i.startOffset&&g.selection.element()===n?ze(n).before(ze.FE.MARKERS+ze.FE.INVISIBLE_SPACE):0<i.startOffset&&g.selection.element()===n&&i.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&ze(n).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS),g.selection.restore(),g.html.insert('<span class="fr-emoticon fr-deletable'+(t?" fr-emoticon-img":"")+'"'+(t?' style="background: url('+t+');"':"")+">"+(t?"&nbsp;":e)+"</span>&nbsp;"+ze.FE.MARKERS,!0)):g.html.insert('<span class="fr-emoticon fr-deletable'+(t?" fr-emoticon-img":"")+'"'+(t?' style="background: url('+t+');"':"")+">"+(t?"&nbsp;":e)+"</span>&nbsp;",!0)}function a(){g.popups.hide("emoticons"),g.toolbar.showInline()}function l(){var e=function(){for(var e=g.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),t=0;t<e.length;t++)e[t].className+=" fr-deletable"};e(),g.events.on("html.set",e),g.events.on("keydown",function(e){if(g.keys.isCharacter(e.which)&&g.selection.inEditor()){var t=g.selection.ranges(0),n=o();g.node.hasClass(n,"fr-emoticon-img")&&n&&(0===t.startOffset&&g.selection.element()===n?ze(n).before(ze.FE.MARKERS+ze.FE.INVISIBLE_SPACE):ze(n).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS),g.selection.restore())}}),g.events.on("keyup",function(e){for(var t=g.el.querySelectorAll(".fr-emoticon"),n=0;n<t.length;n++)void 0!==t[n].textContent&&0===t[n].textContent.replace(/\u200B/gi,"").length&&ze(t[n]).remove();if(!(e.which>=ze.FE.KEYCODE.ARROW_LEFT&&e.which<=ze.FE.KEYCODE.ARROW_DOWN)){var i=o();g.node.hasClass(i,"fr-emoticon-img")&&(ze(i).append(ze.FE.MARKERS),g.selection.restore())}})}return{_init:l,insert:n,showEmoticonsPopup:e,hideEmoticonsPopup:t,back:a}},ze.FE.DefineIcon("emoticons",{NAME:"smile-o"}),ze.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),ze.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),ze.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),ze.extend(ze.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),ze.FE.PLUGINS.entities=function(r){function i(e){var t=e.textContent;if(t.match(a)){for(var n="",i=0;i<t.length;i++)l[t[i]]?n+=l[t[i]]:n+=t[i];e.textContent=n}}function o(e){if(e&&0<=["STYLE","SCRIPT","svg","IFRAME"].indexOf(e.tagName))return!0;for(var t=r.node.contents(e),n=0;n<t.length;n++)t[n].nodeType==Node.TEXT_NODE?i(t[n]):o(t[n]);e.nodeType==Node.TEXT_NODE&&i(e)}function s(e){return 0===e.length?"":r.clean.exec(e,o).replace(/\&amp;/g,"&")}function e(){r.opts.htmlSimpleAmpersand||(r.opts.entities=r.opts.entities+"&amp;");var e=ze("<div>").html(r.opts.entities).text(),t=r.opts.entities.split(";");l={},a="";for(var n=0;n<e.length;n++){var i=e.charAt(n);l[i]=t[n]+";",a+="\\"+i+(n<e.length-1?"|":"")}a=new RegExp("("+a+")","g"),r.events.on("html.get",s,!0)}var a,l;return{_init:e}},ze.extend(ze.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),ze.extend(ze.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),ze.FE.PLUGINS.file=function(a){function e(){var e=a.$tb.find('.fr-command[data-cmd="insertFile"]'),t=a.popups.get("file.insert");if(t||(t=b()),r(),!t.hasClass("fr-active"))if(a.popups.refresh("file.insert"),a.popups.setContainer("file.insert",a.$tb),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(a.opts.toolbarBottom?10:e.outerHeight()-10);a.popups.show("file.insert",n,i,e.outerHeight())}else a.position.forSelection(t),a.popups.show("file.insert")}function l(){var e=a.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),i(a.language.translate("Uploading"),0)}function r(e){var t=a.popups.get("file.insert");t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-file-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e&&(a.events.focus(),a.popups.hide("file.insert")))}function i(e,t){var n=a.popups.get("file.insert");if(n){var i=n.find(".fr-file-progress-bar-layer");i.find("h3").text(e+(t?" "+t+"%":"")),i.removeClass("fr-error"),t?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",t+"%")):i.find("div").addClass("fr-indeterminate")}}function n(e){l();var t=a.popups.get("file.insert").find(".fr-file-progress-bar-layer");t.addClass("fr-error");var n=t.find("h3");n.text(e),a.events.disableBlur(),n.focus()}function c(e,t,n){a.edit.on(),a.events.focus(!0),a.selection.restore(),a.opts.fileUseSelectedText&&a.selection.text().length&&(t=a.selection.text()),a.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+t+"</a>");var i=a.$el.find("#fr-inserted-file");i.removeAttr("id"),a.popups.hide("file.insert"),a.undo.saveStep(),T(),a.events.trigger("file.inserted",[i,n])}function d(e){try{if(!1===a.events.trigger("file.uploaded",[e],!0))return a.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(g(S,e),!1)}catch(l){return g(x,e),!1}}function u(e){try{var t=ze(e).find("Location").text(),n=ze(e).find("Key").text();return!1===a.events.trigger("file.uploadedToS3",[t,n,e],!0)?(a.edit.on(),!1):t}catch(i){return g(x,e),!1}}function f(e){var t=this.status,n=this.response,i=this.responseXML,r=this.responseText;try{if(a.opts.fileUploadToS3)if(201==t){var o=u(i);o&&c(o,e,n||i)}else g(x,n||i);else if(200<=t&&t<300){var s=d(r);s&&c(s.link,e,n||r)}else g(w,n||r)}catch(h){g(x,n||r)}}function h(){g(x,this.response||this.responseText||this.responseXML)}function p(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;i(a.language.translate("Uploading"),t)}}function g(e,t){a.edit.on(),n(a.language.translate("Something went wrong. Please try again.")),a.events.trigger("file.error",[{code:e,message:D[e]},t])}function m(){a.edit.on(),r(!0)}function o(e){if(void 0!==e&&0<e.length){if(!1===a.events.trigger("file.beforeUpload",[e]))return!1;var t,n=e[0];if(n.size>a.opts.fileMaxSize)return g(R),!1;if(a.opts.fileAllowedTypes.indexOf("*")<0&&a.opts.fileAllowedTypes.indexOf(n.type.replace(/file\//g,""))<0)return g(I),!1;if(a.drag_support.formdata&&(t=a.drag_support.formdata?new FormData:null),t){var i;if(!1!==a.opts.fileUploadToS3)for(i in t.append("key",a.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),t.append("success_action_status","201"),t.append("X-Requested-With","xhr"),t.append("Content-Type",n.type),a.opts.fileUploadToS3.params)a.opts.fileUploadToS3.params.hasOwnProperty(i)&&t.append(i,a.opts.fileUploadToS3.params[i]);for(i in a.opts.fileUploadParams)a.opts.fileUploadParams.hasOwnProperty(i)&&t.append(i,a.opts.fileUploadParams[i]);t.append(a.opts.fileUploadParam,n);var r=a.opts.fileUploadURL;a.opts.fileUploadToS3&&(r=a.opts.fileUploadToS3.uploadURL?a.opts.fileUploadToS3.uploadURL:"https://"+a.opts.fileUploadToS3.region+".amazonaws.com/"+a.opts.fileUploadToS3.bucket);var o=a.core.getXHR(r,a.opts.fileUploadMethod);o.onload=function(){f.call(o,n.name)},o.onerror=h,o.upload.onprogress=p,o.onabort=m,l(),a.edit.off();var s=a.popups.get("file.insert");s&&s.off("abortUpload").on("abortUpload",function(){4!=o.readyState&&o.abort()}),o.send(t)}}}function s(n){a.events.$on(n,"dragover dragenter",".fr-file-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),a.events.$on(n,"dragleave dragend",".fr-file-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),a.events.$on(n,"drop",".fr-file-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;t&&t.files&&(n.data("instance")||a).file.upload(t.files)},!0),a.helpers.isIOS()&&a.events.$on(n,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){ze(this).trigger("click")}),a.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',function(){this.files&&(n.data("instance")||a).file.upload(this.files),ze(this).val("")},!0)}function v(){r()}function b(e){if(e)return a.popups.onHide("file.insert",v),!0;var t={buttons:'<div class="fr-buttons">'+a.button.buildList(a.opts.fileInsertButtons)+"</div>",upload_layer:'<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+a.id+'"><strong>'+a.language.translate("Drop file")+"</strong><br>("+a.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+a.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+a.id+'" role="button"></div></div>',progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},n=a.popups.create("file.insert",t);return s(n),n}function t(e){a.node.hasClass(e,"fr-file")}function E(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var n=t.files[0];if(n&&void 0!==n.type&&n.type.indexOf("image")<0&&(0<=a.opts.fileAllowedTypes.indexOf(n.type)||0<=a.opts.fileAllowedTypes.indexOf("*"))){a.markers.remove(),a.markers.insertAtPoint(e.originalEvent),a.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),a.popups.hideAll();var i=a.popups.get("file.insert");return i||(i=b()),a.popups.setContainer("file.insert",a.$sc),a.popups.show("file.insert",e.originalEvent.pageX,e.originalEvent.pageY),l(),o(t.files),e.preventDefault(),e.stopPropagation(),!1}}}function _(){a.events.on("drop",E),a.events.$on(a.$win,"keydown",function(e){var t=e.which,n=a.popups.get("file.insert");n&&t==ze.FE.KEYCODE.ESC&&n.trigger("abortUpload")}),a.events.on("destroy",function(){var e=a.popups.get("file.insert");e&&e.trigger("abortUpload")})}function y(){a.events.disableBlur(),a.selection.restore(),a.events.enableBlur(),a.popups.hide("file.insert"),a.toolbar.showInline()}function T(){var e,t=Array.prototype.slice.call(a.el.querySelectorAll("a.fr-file")),n=[];for(e=0;e<t.length;e++)n.push(t[e].getAttribute("href"));if(A)for(e=0;e<A.length;e++)n.indexOf(A[e].getAttribute("href"))<0&&a.events.trigger("file.unlink",[A[e]]);A=t}function C(){_(),a.events.on("link.beforeRemove",t),a.$wp&&(T(),a.events.on("contentChanged",T)),b(!0)}var A,S=2,w=3,x=4,R=5,I=6,D={};return D[1]="File cannot be loaded from the passed link.",D[S]="No link in upload response.",D[w]="Error during file upload.",D[x]="Parsing response failed.",D[R]="File is too large.",D[I]="File file type is invalid.",D[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",{_init:C,showInsertPopup:e,upload:o,insert:c,back:y,hideProgressBar:r}},ze.FE.DefineIcon("insertFile",{NAME:"file-o"}),ze.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),ze.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),ze.extend(ze.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),ze.FE.PLUGINS.fontFamily=function(r){function e(e){r.format.applyStyle("font-family",e)}function t(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),i=t.find(".fr-active").parent();i.length?n.parent().scrollTop(i.offset().top-n.offset().top-(n.parent().outerHeight()/2-i.outerHeight()/2)):n.parent().scrollTop(0)}function o(e){var t=e.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return ze.grep(t,function(e){return 0<e.length})}function s(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n]==t[i])return[n,i];return null}function a(){var e=o(ze(r.selection.element()).css("font-family")),t=[];for(var n in r.opts.fontFamily)if(r.opts.fontFamily.hasOwnProperty(n)){var i=s(e,o(n));i&&t.push([n,i])}return 0===t.length?null:(t.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),t[0][0])}function n(e){if(r.opts.fontFamilySelection){var t=ze(r.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");e.find("> span").text(r.opts.fontFamily[a()]||t[0]||r.language.translate(r.opts.fontFamilyDefaultSelection))}}return{apply:e,refreshOnShow:t,refresh:n}},ze.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+"</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),ze.FE.DefineIcon("fontFamily",{NAME:"font"}),ze.extend(ze.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),ze.FE.PLUGINS.fontSize=function(o){function e(e){o.format.applyStyle("font-size",e)}function t(e,t){var n=ze(o.selection.element()).css("font-size");t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active").attr("aria-selected",!0);var i=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?i.parent().scrollTop(r.offset().top-i.offset().top-(i.parent().outerHeight()/2-r.outerHeight()/2)):i.parent().scrollTop(0)}function n(e){if(o.opts.fontSizeSelection){var t=o.helpers.getPX(ze(o.selection.element()).css("font-size"));e.find("> span").text(t)}}return{apply:e,refreshOnShow:t,refresh:n}},ze.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var i=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+i+'px" title="'+i+'">'+i+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),ze.FE.DefineIcon("fontSize",{NAME:"text-height"}),ze.extend(ze.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),ze.FE.PLUGINS.forms=function(o){function e(e){e.preventDefault(),o.selection.clear(),ze(this).data("mousedown",!0)}function t(e){ze(this).data("mousedown")&&(e.stopPropagation(),ze(this).removeData("mousedown"),l(v=this)),e.preventDefault()}function n(){o.$el.find("input, textarea, button").removeData("mousedown")}function i(){ze(this).removeData("mousedown")}function r(){o.events.$on(o.$el,o._mousedown,"input, textarea, button",e),o.events.$on(o.$el,o._mouseup,"input, textarea, button",t),o.events.$on(o.$el,"touchmove","input, textarea, button",i),o.events.$on(o.$el,o._mouseup,n),o.events.$on(o.$win,o._mouseup,n),u(!0)}function s(){return v||null}function a(){var e="";0<o.opts.formEditButtons.length&&(e='<div class="fr-buttons">'+o.button.buildList(o.opts.formEditButtons)+"</div>");var t={buttons:e},n=o.popups.create("forms.edit",t);return o.$wp&&o.events.$on(o.$wp,"scroll.link-edit",function(){s()&&o.popups.isVisible("forms.edit")&&l(s())}),n}function l(e){var t=o.popups.get("forms.edit");t||(t=a());var n=ze(v=e);o.popups.refresh("forms.edit"),o.popups.setContainer("forms.edit",o.$sc);var i=n.offset().left+n.outerWidth()/2,r=n.offset().top+n.outerHeight();o.popups.show("forms.edit",i,r,n.outerHeight())}function c(){var e=o.popups.get("forms.update"),t=s();if(t){var n=ze(t);n.is("button")?e.find('input[type="text"][name="text"]').val(n.text()):e.find('input[type="text"][name="text"]').val(n.attr("placeholder"))}e.find('input[type="text"][name="text"]').trigger("change")}function d(){v=null}function u(e){if(e)return o.popups.onRefresh("forms.update",c),o.popups.onHide("forms.update",d),!0;var t="";1<=o.opts.formUpdateButtons.length&&(t='<div class="fr-buttons">'+o.button.buildList(o.opts.formUpdateButtons)+"</div>");var n="",i=0;n='<div class="fr-forms-text-layer fr-layer fr-active">',n+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++i+'"></div>';var r={buttons:t,text_layer:n+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++i+'" type="button">'+o.language.translate("Update")+"</button></div></div>"};return o.popups.create("forms.update",r)}function f(){var e=s();if(e){var t=ze(e),n=o.popups.get("forms.update");n||(n=u()),o.popups.isVisible("forms.update")||o.popups.refresh("forms.update"),o.popups.setContainer("forms.update",o.$sc);var i=t.offset().left+t.outerWidth()/2,r=t.offset().top+t.outerHeight();o.popups.show("forms.update",i,r,t.outerHeight())}}function h(e,t,n){void 0===t&&(t=o.opts.formStyles),void 0===n&&(n=o.opts.formMultipleStyles);var i=s();if(!i)return!1;if(!n){var r=Object.keys(t);r.splice(r.indexOf(e),1),ze(i).removeClass(r.join(" "))}ze(i).toggleClass(e)}function p(){o.events.disableBlur(),o.selection.restore(),o.events.enableBlur();var e=s();e&&o.$wp&&("BUTTON"==e.tagName&&o.selection.restore(),l(e))}function g(){var e=o.popups.get("forms.update"),t=s();if(t){var n=ze(t),i=e.find('input[type="text"][name="text"]').val()||"";i.length&&(n.is("button")?n.text(i):n.attr("placeholder",i)),o.popups.hide("forms.update"),l(t)}}function m(){r(),o.events.$on(o.$el,"submit","form",function(e){return e.preventDefault(),!1})}var v;return{_init:m,updateInput:g,getInput:s,applyStyle:h,showUpdatePopup:f,showEditPopup:l,back:p}},ze.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),ze.FE.DefineIcon("inputStyle",{NAME:"magic"}),ze.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){var n=this.forms.getInput();n&&(this.forms.applyStyle(t),this.forms.showEditPopup(n))},refreshOnShow:function(e,t){var n=this.forms.getInput();if(n){var i=ze(n);t.find(".fr-command").each(function(){var e=ze(this).data("param1");ze(this).toggleClass("fr-active",i.hasClass(e))})}}}),ze.FE.DefineIcon("inputEdit",{NAME:"edit"}),ze.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),ze.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),ze.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),ze.FE.PLUGINS.fullscreen=function(n){function i(){return n.$box.hasClass("fr-fullscreen")}function e(){a=n.helpers.scrollTop(),n.$box.toggleClass("fr-fullscreen"),ze("body:first").toggleClass("fr-fullscreen"),l=ze('<div style="display: none;"></div>'),n.$box.after(l),n.helpers.isMobile()&&(n.$tb.data("parent",n.$tb.parent()),n.$tb.prependTo(n.$box),n.$tb.data("sticky-dummy")&&n.$tb.after(n.$tb.data("sticky-dummy"))),c=n.opts.height,d=n.opts.heightMax,u=n.opts.zIndex,n.opts.height=n.o_win.innerHeight-(n.opts.toolbarInline?0:n.$tb.outerHeight()),n.opts.zIndex=2147483641,n.opts.heightMax=null,n.size.refresh(),n.opts.toolbarInline&&n.toolbar.showInline();for(var e=n.$box.parent();!e.is("body:first");)e.data("z-index",e.css("z-index")).data("overflow",e.css("overflow")).css("z-index","2147483640").css("overflow","visible"),e=e.parent();n.events.trigger("charCounter.update"),n.$win.trigger("scroll")}function t(){n.$box.toggleClass("fr-fullscreen"),ze("body:first").toggleClass("fr-fullscreen"),n.$tb.prependTo(n.$tb.data("parent")),n.$tb.data("sticky-dummy")&&n.$tb.after(n.$tb.data("sticky-dummy")),n.opts.height=c,n.opts.heightMax=d,n.opts.zIndex=u,n.size.refresh(),ze(n.o_win).scrollTop(a),n.opts.toolbarInline&&n.toolbar.showInline(),n.events.trigger("charCounter.update"),n.opts.toolbarSticky&&n.opts.toolbarStickyOffset&&(n.opts.toolbarBottom?n.$tb.css("bottom",n.opts.toolbarStickyOffset).data("bottom",n.opts.toolbarStickyOffset):n.$tb.css("top",n.opts.toolbarStickyOffset).data("top",n.opts.toolbarStickyOffset));for(var e=n.$box.parent();!e.is("body:first");)e.data("z-index")&&(e.css("z-index",""),e.css("z-index")!=e.data("z-index")&&e.css("z-index",e.data("z-index")),e.removeData("z-index")),e.data("overflow")?(e.css("overflow",""),e.css("overflow")!=e.data("overflow")&&e.css("overflow",e.data("overflow"))):e.css("overflow",""),e.removeData("overflow"),e=e.parent();n.$win.trigger("scroll")}function r(){i()?t():e(),o(n.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function o(e){var t=i();e.toggleClass("fr-active",t).attr("aria-pressed",t),e.find("> *:not(.fr-sr-only)").replaceWith(t?n.icon.create("fullscreenCompress"):n.icon.create("fullscreen"))}function s(){if(!n.$wp)return!1;n.events.$on(ze(n.o_win),"resize",function(){i()&&(t(),e())}),n.events.on("toolbar.hide",function(){if(i()&&n.helpers.isMobile())return!1}),n.events.on("destroy",function(){i()&&t()},!0)}var a,l,c,d,u;return{_init:s,toggle:r,refresh:o,isActive:i}},ze.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),ze.FE.DefineIcon("fullscreen",{NAME:"expand"}),ze.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),ze.extend(ze.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert Link"},{val:"OSkeyP",desc:"Insert Image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select All"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Increase Indent"},{val:"OSkey[",desc:"Decrease Indent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),ze.FE.PLUGINS.help=function(s){function e(){}function i(){for(var e='<div class="fr-help-modal">',t=0;t<ze.FE.DEFAULTS.helpSets.length;t++){var n=ze.FE.DEFAULTS.helpSets[t],i="<table>";i+="<thead><tr><th>"+s.language.translate(n.title)+"</th></tr></thead>",i+="<tbody>";for(var r=0;r<n.commands.length;r++){var o=n.commands[r];i+="<tr>",i+="<td>"+s.language.translate(o.desc)+"</td>",i+="<td>"+o.val.replace("OSkey",s.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",i+="</tr>"}e+=i+="</tbody></table>"}return e+"</div>"}function t(){if(!r){var e="<h4>"+s.language.translate("Shortcuts")+"</h4>",t=i(),n=s.modals.create(o,e,t);r=n.$modal,n.$head,n.$body,s.events.$on(ze(s.o_win),"resize",function(){s.modals.resize(o)})}s.modals.show(o),s.modals.resize(o)}function n(){s.modals.hide(o)}var r,o="help";return{_init:e,show:t,hide:n}},ze.FroalaEditor.DefineIcon("help",{NAME:"question"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.SLASH,"help",null,"/"),ze.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),ze.extend(
ze.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),ze.FE.PLUGINS.image=function(d){function c(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),Re&&e.val(Re.attr("src")),e.trigger("change")}function n(){var e=d.$tb.find('.fr-command[data-cmd="insertImage"]'),t=d.popups.get("image.insert");if(t||(t=P()),b(),!t.hasClass("fr-active"))if(d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$tb),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(d.opts.toolbarBottom?10:e.outerHeight()-10);d.popups.show("image.insert",n,i,e.outerHeight())}else d.position.forSelection(t),d.popups.show("image.insert")}function r(){var e=d.popups.get("image.edit");if(e||(e=m()),e){var t=Ae();we()&&(t=t.find(".fr-img-wrap")),d.popups.setContainer("image.edit",d.$sc),d.popups.refresh("image.edit");var n=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();d.popups.show("image.edit",n,i,t.outerHeight())}}function u(){b()}function i(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+pe(e)[0]),e.addClass("fr-di"+ge(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function o(e){fe(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":pe(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function a(){for(var e="IMG"==d.el.tagName?[d.el]:d.el.querySelectorAll("img"),t=0;t<e.length;t++){var n=ze(e[t]);!d.opts.htmlUntouched&&d.opts.useClasses?((0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&i(n),d.opts.imageTextNear||n.removeClass("fr-dii").addClass("fr-dib")):d.opts.htmlUntouched||d.opts.useClasses||(0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&o(n),d.opts.iframe&&n.on("load",d.size.syncIframe)}}function f(e){void 0===e&&(e=!0);var t,n=Array.prototype.slice.call(d.el.querySelectorAll("img")),i=[];for(t=0;t<n.length;t++)i.push(n[t].getAttribute("src")),ze(n[t]).toggleClass("fr-draggable",d.opts.imageMove),""===n[t].getAttribute("class")&&n[t].removeAttribute("class"),""===n[t].getAttribute("style")&&n[t].removeAttribute("style");if(We)for(t=0;t<We.length;t++)i.indexOf(We[t].getAttribute("src"))<0&&d.events.trigger("image.removed",[ze(We[t])]);if(We&&e){var r=[];for(t=0;t<We.length;t++)r.push(We[t].getAttribute("src"));for(t=0;t<n.length;t++)r.indexOf(n[t].getAttribute("src"))<0&&d.events.trigger("image.loaded",[ze(n[t])])}We=n}function l(){if(Ie||X(),!Re)return!1;var e=d.$wp||d.$sc;e.append(Ie),Ie.data("instance",d);var t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),n=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);n-=d.helpers.getPX(e.css("border-left-width")),t-=d.helpers.getPX(e.css("border-top-width")),d.$el.is("img")&&d.$sc.is("body")&&(n=t=0);var i=Ae();we()&&(i=i.find(".fr-img-wrap")),Ie.css("top",(d.opts.iframe?i.offset().top:i.offset().top+t)-1).css("left",(d.opts.iframe?i.offset().left:i.offset().left+n)-1).css("width",i.get(0).getBoundingClientRect().width).css("height",i.get(0).getBoundingClientRect().height).addClass("fr-active")}function t(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function s(e){if(!d.core.sameInstance(Ie))return!0;if(e.preventDefault(),e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;d.undo.canDo()||d.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var n=d.$oel.get(0).ownerDocument,i=n.defaultView||n.parentWindow,r=!1;try{r=i.location!=i.parent.location&&!(i.$&&i.$.FE)}catch(l){}r&&i.frameElement&&(t+=d.helpers.getPX(ze(i.frameElement).offset().left)+i.frameElement.clientLeft)}(De=ze(this)).data("start-x",t),De.data("start-width",Re.width()),De.data("start-height",Re.height());var o=Re.width();if(d.opts.imageResizeWithPercent){var s=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;Re.css("width",(o/ze(s).outerWidth()*100).toFixed(2)+"%")}else Re.css("width",o);Ne.show(),d.popups.hideAll(),de()}function h(e){if(!d.core.sameInstance(Ie))return!0;var t;if(De&&Re){if(e.preventDefault(),d.$el.find("img.fr-error").left)return!1;var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!n)return!1;var i=n-De.data("start-x"),r=De.data("start-width");if((De.hasClass("fr-hnw")||De.hasClass("fr-hsw"))&&(i=0-i),d.opts.imageResizeWithPercent){var o=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;r=((r+i)/ze(o).outerWidth()*100).toFixed(2),d.opts.imageRoundPercent&&(r=Math.round(r)),Re.css("width",r+"%"),(t=(d.helpers.getPX(Re.css("width"))/ze(o).outerWidth()*100).toFixed(2))!==r&&Re.css("width",t+"%"),Re.css("height","").removeAttr("height")}else r+i>=d.opts.imageMinWidth&&(we()&&Re.parent().css("width",r+i),Re.css("width",r+i)),(t=d.helpers.getPX(Re.css("width")))!==r+i&&Re.css("width",t),(Re.attr("style")||"").match(/(^height:)|(; *height:)/)&&Re.css("height",De.data("start-height")*Re.width()/De.data("start-width"));l(),d.events.trigger("image.resize",[Ce()])}}function p(e){if(!d.core.sameInstance(Ie))return!0;if(De&&Re){if(e&&e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;De=null,Ne.hide(),l(),r(),d.undo.saveStep(),d.events.trigger("image.resizeEnd",[Ce()])}}function g(e,t,n){d.edit.on(),Re&&Re.addClass("fr-error"),_(d.language.translate("Something went wrong. Please try again.")),!Re&&n&&Q(n),d.events.trigger("image.error",[{code:e,message:Be[e]},t,n])}function m(e){if(e)return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.edit")&&(d.events.disableBlur(),y(Re))}),!0;var t="";if(0<d.opts.imageEditButtons.length){t+='<div class="fr-buttons">',t+=d.button.buildList(d.opts.imageEditButtons);var n={buttons:t+="</div>"};return d.popups.create("image.edit",n)}return!1}function v(e){var t=d.popups.get("image.insert");if(t||(t=P()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),Re){var n=Ae();d.popups.setContainer("image.insert",d.$sc);var i=n.offset().left+n.width()/2,r=n.offset().top+n.height();d.popups.show("image.insert",i,r,n.outerHeight())}void 0===e&&E(d.language.translate("Uploading"),0)}function b(e){var t=d.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||d.$el.find("img.fr-error").length)){if(d.events.focus(),d.$el.find("img.fr-error").length&&(d.$el.find("img.fr-error").remove(),d.undo.saveStep(),d.undo.run(),d.undo.dropRedo()),!d.$wp&&Re){var n=Re;le(!0),d.selection.setAfter(n.get(0)),d.selection.restore()}d.popups.hide("image.insert")}}function E(e,t){var n=d.popups.get("image.insert");if(n){var i=n.find(".fr-image-progress-bar-layer");i.find("h3").text(e+(t?" "+t+"%":"")),i.removeClass("fr-error"),t?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",t+"%")):i.find("div").addClass("fr-indeterminate")}}function _(e){v();var t=d.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var n=t.find("h3");n.text(e),d.events.disableBlur(),n.focus()}function e(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");if(0<e.val().length){if(v(),E(d.language.translate("Loading image")),d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var t=new XMLHttpRequest;t.open("GET",d.opts.imageCORSProxy+"/"+e.val(),!0),t.responseType="blob",t.onload=function(){200==this.status&&O([new Blob([this.response],{type:"image/png"})],Re)},t.send()}else C(e.val(),!0,[],Re);e.val(""),e.blur()}}function y(e){ae.call(e.get(0))}function T(){var e=ze(this);d.popups.hide("image.insert"),e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),y(e),d.events.trigger("image.loaded",[e])}function C(s,e,a,l,c){d.edit.off(),E(d.language.translate("Loading image")),e&&(s=d.helpers.sanitizeURL(s));var t=new Image;t.onload=function(){var e,t;if(l){d.undo.canDo()||l.hasClass("fr-uploading")||d.undo.saveStep();var n=l.data("fr-old-src");l.data("fr-image-pasted")&&(n=null),d.$wp?((e=l.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),n&&l.attr("src",n),l.replaceWith(e)):e=l;for(var i=e.get(0).attributes,r=0;r<i.length;r++){var o=i[r];0===o.nodeName.indexOf("data-")&&e.removeAttr(o.nodeName)}if(void 0!==a)for(t in a)a.hasOwnProperty(t)&&"link"!=t&&e.attr("data-"+t,a[t]);e.on("load",T),e.attr("src",s),d.edit.on(),f(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger(n?"image.replaced":"image.inserted",[e,c])}else e=I(s,a,T),f(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger("image.inserted",[e,c])},t.onerror=function(){g(Le)},v(d.language.translate("Loading image")),t.src=s}function A(e){try{if(!1===d.events.trigger("image.uploaded",[e],!0))return d.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(g(ke,e),!1)}catch(n){return g(Fe,e),!1}}function S(e){try{var t=ze(e).find("Location").text(),n=ze(e).find("Key").text();return!1===d.events.trigger("image.uploadedToS3",[t,n,e],!0)?(d.edit.on(),!1):t}catch(u){return g(Fe,e),!1}}function w(e){E(d.language.translate("Loading image"));var t=this.status,n=this.response,i=this.responseXML,r=this.responseText;try{if(d.opts.imageUploadToS3)if(201==t){var o=S(i);o&&C(o,!1,[],e,n||i)}else g(Fe,n||i,e);else if(200<=t&&t<300){var s=A(r);s&&C(s.link,!1,s,e,n||r)}else g(Me,n||r,e)}catch(a){g(Fe,n||r,e)}}function x(){g(Fe,this.response||this.responseText||this.responseXML)}function R(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;E(d.language.translate("Uploading"),t)}}function I(e,t,n){var i,r="";if(t&&void 0!==t)for(i in t)t.hasOwnProperty(i)&&"link"!=i&&(r+=" data-"+i+'="'+t[i]+'"');var o=d.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=d.opts.imageResizeWithPercent?"%":"px");var s=ze('<img src="'+e+'"'+r+(o?' style="width: '+o+';"':"")+">");fe(s,d.opts.imageDefaultDisplay,d.opts.imageDefaultAlign),s.on("load",n),s.on("error",function(){g(He)}),d.edit.on(),d.events.focus(!0),d.selection.restore(),d.undo.saveStep(),d.opts.imageSplitHTML?d.markers.split():d.markers.insert();var a=d.$el.find(".fr-marker");return a.length?(a.parent().is("hr")&&a.parent().after(a),d.node.isLastSibling(a)&&a.parent().hasClass("fr-deletable")&&a.insertAfter(a.parent()),a.replaceWith(s)):d.$el.append(s),d.html.wrap(),d.selection.clear(),s}function D(){d.edit.on(),b(!0)}function N(t,n,e,r){function o(){var e=ze(this);e.off("load"),e.addClass("fr-uploading"),e.next().is("br")&&e.next().remove(),d.placeholder.refresh(),y(e),l(),v(),d.edit.off(),t.onload=function(){w.call(t,e)},t.onerror=x,t.upload.onprogress=R,t.onabort=D,e.off("abortUpload").on("abortUpload",function(){4!=t.readyState&&t.abort()}),t.send(n)}var s=new FileReader;s.addEventListener("load",function(){var e=s.result;if(s.result.indexOf("svg+xml")<0){for(var t=atob(s.result.split(",")[1]),n=[],i=0;i<t.length;i++)n.push(t.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:"image/jpeg"}))}r?(r.on("load",o),r.one("error",function(){r.off("load"),r.attr("src",r.data("fr-old-src")),g(He)}),d.edit.on(),d.undo.saveStep(),r.data("fr-old-src",r.attr("src")),r.attr("src",e)):I(e,null,o)},!1),s.readAsDataURL(e)}function O(e,t){if(void 0!==e&&0<e.length){if(!1===d.events.trigger("image.beforeUpload",[e,t]))return!1;var n,i=e[0];if(i.name||(i.name=(new Date).getTime()+".jpg"),i.size>d.opts.imageMaxSize)return g(Pe),!1;if(d.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))<0)return g($e),!1;if(d.drag_support.formdata&&(n=d.drag_support.formdata?new FormData:null),n){var r;if(!1!==d.opts.imageUploadToS3)for(r in n.append("key",d.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),n.append("success_action_status","201"),n.append("X-Requested-With","xhr"),n.append("Content-Type",i.type),d.opts.imageUploadToS3.params)d.opts.imageUploadToS3.params.hasOwnProperty(r)&&n.append(r,d.opts.imageUploadToS3.params[r]);for(r in d.opts.imageUploadParams)d.opts.imageUploadParams.hasOwnProperty(r)&&n.append(r,d.opts.imageUploadParams[r]);n.append(d.opts.imageUploadParam,i,i.name);var o=d.opts.imageUploadURL;d.opts.imageUploadToS3&&(o=d.opts.imageUploadToS3.uploadURL?d.opts.imageUploadToS3.uploadURL:"https://"+d.opts.imageUploadToS3.region+".amazonaws.com/"+d.opts.imageUploadToS3.bucket),N(d.core.getXHR(o,d.opts.imageUploadMethod),n,i,t||Re)}}}function L(i){d.events.$on(i,"dragover dragenter",".fr-image-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),d.events.$on(i,"dragleave dragend",".fr-image-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),d.events.$on(i,"drop",".fr-image-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var n=i.data("instance")||d;n.events.disableBlur(),n.image.upload(t.files),n.events.enableBlur()}},!0),d.helpers.isIOS()&&d.events.$on(i,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){ze(this).trigger("click")},!0),d.events.$on(i,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var e=i.data("instance")||d;e.events.disableBlur(),i.find("input:focus").blur(),e.events.enableBlur(),e.image.upload(this.files,Re)}ze(this).val("")},!0)}function k(e){if(e.is("img")&&0<e.parents(".fr-img-caption").length)return e.parents(".fr-img-caption")}function M(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var n=t.files[0];if(n&&n.type&&-1!==n.type.indexOf("image")){if(!d.opts.imageUpload)return e.preventDefault(),e.stopPropagation(),!1;d.markers.remove(),d.markers.insertAtPoint(e.originalEvent),d.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),0===d.$el.find(".fr-marker").length&&d.selection.setAtEnd(d.el),d.popups.hideAll();var i=d.popups.get("image.insert");i||(i=P()),d.popups.setContainer("image.insert",d.$sc);var r=e.originalEvent.pageX,o=e.originalEvent.pageY;return d.opts.iframe&&(o+=d.$iframe.offset().top,r+=d.$iframe.offset().left),d.popups.show("image.insert",r,o),v(),0<=d.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))?(le(!0),O(t.files)):g($e),e.preventDefault(),e.stopPropagation(),!1}}}function F(){d.events.$on(d.$el,d._mousedown,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;d.helpers.isMobile()||d.selection.clear(),Oe=!0,d.popups.areVisible()&&d.events.disableBlur(),d.browser.msie&&(d.events.disableBlur(),d.$el.attr("contenteditable",!1)),d.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),d.events.$on(d.$el,d._mouseup,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;Oe&&(Oe=!1,e.stopPropagation(),d.browser.msie&&(d.$el.attr("contenteditable",!0),d.events.enableBlur()))}),d.events.on("keyup",function(e){if(e.shiftKey&&""===d.selection.text().replace(/\n/g,"")&&d.keys.isArrow(e.which)){var t=d.selection.element(),n=d.selection.endElement();t&&"IMG"==t.tagName?y(ze(t)):n&&"IMG"==n.tagName&&y(ze(n))}},!0),d.events.on("drop",M),d.events.on("element.beforeDrop",k),d.events.on("mousedown window.mousedown",ce),d.events.on("window.touchmove",de),d.events.on("mouseup window.mouseup",function(){if(Re)return le(),!1;de()}),d.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&le()}),d.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){le(!(Oe=!1))}),d.events.on("modals.hide",function(){Re&&(ye(),d.selection.clear())})}function P(e){if(e)return d.popups.onRefresh("image.insert",c),d.popups.onHide("image.insert",u),!0;var t,n="";d.opts.imageUpload||d.opts.imageInsertButtons.splice(d.opts.imageInsertButtons.indexOf("imageUpload"),1),1<d.opts.imageInsertButtons.length&&(n='<div class="fr-buttons">'+d.button.buildList(d.opts.imageInsertButtons)+"</div>");var i=d.opts.imageInsertButtons.indexOf("imageUpload"),r=d.opts.imageInsertButtons.indexOf("imageByURL"),o="";0<=i&&(t=" fr-active",0<=r&&r<i&&(t=""),o='<div class="fr-image-upload-layer'+t+' fr-layer" id="fr-image-upload-layer-'+d.id+'"><strong>'+d.language.translate("Drop image")+"</strong><br>("+d.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+d.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+d.id+'" role="button"></div></div>');var s="";0<=r&&(t=" fr-active",0<=i&&i<r&&(t=""),s='<div class="fr-image-by-url-layer'+t+' fr-layer" id="fr-image-by-url-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+d.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+d.language.translate("Insert")+"</button></div></div>");var a={buttons:n,upload_layer:o,by_url_layer:s,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},l=d.popups.create("image.insert",a);return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.insert")&&_e()}),L(l),l}function $(){Re&&d.popups.get("image.alt").find("input").val(Re.attr("alt")||"").trigger("change")}function H(){var e=d.popups.get("image.alt");e||(e=B()),b(),d.popups.refresh("image.alt"),d.popups.setContainer("image.alt",d.$sc);var t=Ae();we()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();d.popups.show("image.alt",n,i,t.outerHeight())}function B(e){if(e)return d.popups.onRefresh("image.alt",$),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+d.id+'" type="text" placeholder="'+d.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},n=d.popups.create("image.alt",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-alt",function(){Re&&d.popups.isVisible("image.alt")&&H()}),n}function W(e){if(Re){var t=d.popups.get("image.alt");Re.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),y(Re)}}function U(){if(Re){var e=d.popups.get("image.size");e.find('input[name="width"]').val(Re.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Re.get(0).style.height).trigger("change")}}function K(){var e=d.popups.get("image.size");e||(e=z()),b(),d.popups.refresh("image.size"),d.popups.setContainer("image.size",d.$sc);var t=Ae();we()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();d.popups.show("image.size",n,i,t.outerHeight())}function z(e){if(e)return d.popups.onRefresh("image.size",U),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+d.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+d.id+'" type="text" name="width" placeholder="'+d.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+d.id+'" type="text" name="height" placeholder="'+d.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},n=d.popups.create("image.size",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-size",function(){Re&&d.popups.isVisible("image.size")&&K()}),n}function j(e,t){if(Re){var n=d.popups.get("image.size");e=e||n.find('input[name="width"]').val()||"",t=t||n.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;e.match(i)?Re.css("width",e):Re.css("width",""),t.match(i)?Re.css("height",t):Re.css("height",""),we()&&(e.match(i)?Re.parent().css("width",e):Re.parent().css("width",""),t.match(i)?Re.parent().css("height",t):Re.parent().css("height","")),n.find("input:focus").blur(),y(Re)}}function Y(e){var t,n,i=d.popups.get("image.insert");if(Re||d.opts.toolbarInline){if(Re){var r=Ae();we()&&(r=r.find(".fr-img-wrap")),n=r.offset().top+r.outerHeight(),t=r.offset().left+r.outerWidth()/2}}else{var o=d.$tb.find('.fr-command[data-cmd="insertImage"]');t=o.offset().left+o.outerWidth()/2,n=o.offset().top+(d.opts.toolbarBottom?10:o.outerHeight()-10)}!Re&&d.opts.toolbarInline&&(n=i.offset().top-d.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(n+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),d.popups.show("image.insert",t,n,Re?Re.outerHeight():0),d.accessibility.focusPopup(i)}function q(e){d.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e){d.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function V(e,t,n,i){return e.pageX=t,s.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,i)),h.call(this,e),p.call(this,e),++i}function X(){var e;if(d.shared.$image_resizer?(Ie=d.shared.$image_resizer,Ne=d.shared.$img_overlay,d.events.on("destroy",function(){Ie.removeClass("fr-active").appendTo(ze("body:first"))},!0)):(d.shared.$image_resizer=ze('<div class="fr-image-resizer"></div>'),Ie=d.shared.$image_resizer,d.events.$on(Ie,"mousedown",function(e){e.stopPropagation()},!0),d.opts.imageResize&&(Ie.append(t("nw")+t("ne")+t("sw")+t("se")),d.shared.$img_overlay=ze('<div class="fr-image-overlay"></div>'),Ne=d.shared.$img_overlay,e=Ie.get(0).ownerDocument,ze(e).find("body:first").append(Ne))),d.events.on("shared.destroy",function(){Ie.html("").removeData().remove(),Ie=null,d.opts.imageResize&&(Ne.remove(),Ne=null)},!0),d.helpers.isMobile()||d.events.$on(ze(d.o_win),"resize",function(){Re&&!Re.hasClass("fr-uploading")?le(!0):Re&&(l(),_e(),v(!1))}),d.opts.imageResize){e=Ie.get(0).ownerDocument,d.events.$on(Ie,d._mousedown,".fr-handler",s),d.events.$on(ze(e),d._mousemove,h),d.events.$on(ze(e.defaultView||e.parentWindow),d._mouseup,p),d.events.$on(Ne,"mouseleave",p);var i=1,r=null,o=0;d.events.on("keydown",function(e){if(Re){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,n=e.which;(n!==r||200<e.timeStamp-o)&&(i=1),(n==ze.FE.KEYCODE.EQUALS||d.browser.mozilla&&n==ze.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?i=V.call(this,e,1,1,i):(n==ze.FE.KEYCODE.HYPHEN||d.browser.mozilla&&n==ze.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?i=V.call(this,e,2,-1,i):d.keys.ctrlKey(e)||n!=ze.FE.KEYCODE.ENTER||(Re.before("<br>"),y(Re)),r=n,o=e.timeStamp}},!0),d.events.on("keyup",function(){i=1})}}function Q(e){(e=e||Ae())&&!1!==d.events.trigger("image.beforeRemove",[e])&&(d.popups.hideAll(),ye(),le(!0),d.undo.canDo()||d.undo.saveStep(),e.get(0)==d.el?e.removeAttr("src"):("A"==e.get(0).parentNode.tagName?(d.selection.setBefore(e.get(0).parentNode)||d.selection.setAfter(e.get(0).parentNode)||e.parent().after(ze.FE.MARKERS),ze(e.get(0).parentNode).remove()):(d.selection.setBefore(e.get(0))||d.selection.setAfter(e.get(0))||e.after(ze.FE.MARKERS),e.remove()),d.html.fillEmptyBlocks(),d.selection.restore()),d.undo.saveStep())}function Z(e){var t=e.which;if(Re&&(t==ze.FE.KEYCODE.BACKSPACE||t==ze.FE.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),Q(),!1;if(Re&&t==ze.FE.KEYCODE.ESC){var n=Re;return le(!0),d.selection.setAfter(n.get(0)),d.selection.restore(),e.preventDefault(),!1}if(!Re||t!=ze.FE.KEYCODE.ARROW_LEFT&&t!=ze.FE.KEYCODE.ARROW_RIGHT)return Re&&t!=ze.FE.KEYCODE.F10&&!d.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0;var i=Re.get(0);return le(!0),t==ze.FE.KEYCODE.ARROW_LEFT?d.selection.setBefore(i):d.selection.setAfter(i),d.selection.restore(),e.preventDefault(),!1}function J(e){if(e&&"IMG"==e.tagName)d.node.hasClass(e,"fr-uploading")||d.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):d.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),n=0;n<t.length;n++)J(t[n])}function ee(){var i;(F(),"IMG"==d.el.tagName&&d.$el.addClass("fr-view"),d.events.$on(d.$el,d.helpers.isMobile()&&!d.helpers.isWindowsPhone()?"touchend":"click","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',ae),d.helpers.isMobile()&&(d.events.$on(d.$el,"touchstart","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(){Ue=!1}),d.events.$on(d.$el,"touchmove",function(){Ue=!0})),d.$wp?(d.events.on("window.keydown keydown",Z,!0),d.events.on("keyup",function(e){if(Re&&e.which==ze.FE.KEYCODE.ENTER)return!1},!0)):d.events.$on(d.$win,"keydown",Z),d.events.on("toolbar.esc",function(){if(Re){if(d.$wp)d.events.disableBlur(),d.events.focus();else{var e=Re;le(!0),d.selection.setAfter(e.get(0)),d.selection.restore()}return!1}},!0),d.events.on("toolbar.focusEditor",function(){if(Re)return!1},!0),d.events.on("window.cut window.copy",function(e){Re&&d.popups.isVisible("image.edit")&&!d.popups.get("image.edit").find(":focus").length&&(ye(),d.paste.saveCopiedText(Re.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){y(Re)}):(le(!0),d.undo.saveStep(),setTimeout(function(){d.undo.saveStep()},0)))},!0),d.browser.msie&&d.events.on("keydown",function(e){if(!d.selection.isCollapsed()||!Re)return!0;var t=e.which;t==ze.FE.KEYCODE.C&&d.keys.ctrlKey(e)?d.events.trigger("window.copy"):t==ze.FE.KEYCODE.X&&d.keys.ctrlKey(e)&&d.events.trigger("window.cut")}),d.events.$on(ze(d.o_win),"keydown",function(e){var t=e.which;if(Re&&t==ze.FE.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),d.events.$on(d.$win,"keydown",function(e){var t=e.which;Re&&Re.hasClass("fr-uploading")&&t==ze.FE.KEYCODE.ESC&&Re.trigger("abortUpload")}),d.events.on("destroy",function(){Re&&Re.hasClass("fr-uploading")&&Re.trigger("abortUpload")}),d.events.on("paste.before",oe),d.events.on("paste.beforeCleanup",se),d.events.on("paste.after",ne),d.events.on("html.set",a),d.events.on("html.inserted",a),a(),d.events.on("destroy",function(){We=[]}),d.events.on("html.processGet",J),d.opts.imageOutputSize)&&d.events.on("html.beforeGet",function(){i=d.el.querySelectorAll("img");for(var e=0;e<i.length;e++){var t=i[e].style.width||ze(i[e]).width(),n=i[e].style.height||ze(i[e]).height();t&&i[e].setAttribute("width",(""+t).replace(/px/,"")),n&&i[e].setAttribute("height",(""+n).replace(/px/,""))}});d.opts.iframe&&d.events.on("image.loaded",d.size.syncIframe),d.$wp&&(f(),d.events.on("contentChanged",f)),d.events.$on(ze(d.o_win),"orientationchange.image",function(){setTimeout(function(){Re&&y(Re)},100)}),m(!0),P(!0),z(!0),B(!0),d.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Q(e),!1})}function te(e){if(!1===d.events.trigger("image.beforePasteUpload",[e]))return!1;Re=ze(e),l(),r(),_e(),v();for(var t=atob(ze(e).attr("src").split(",")[1]),n=[],i=0;i<t.length;i++)n.push(t.charCodeAt(i));O([new Blob([new Uint8Array(n)],{type:"image/jpeg"})],Re)}function ne(){d.opts.imagePaste?d.$el.find("img[data-fr-image-pasted]").each(function(e,n){if(d.opts.imagePasteProcess){var t=d.opts.imageDefaultWidth;t&&"auto"!=t&&(t+=d.opts.imageResizeWithPercent?"%":"px"),ze(n).css("width",t).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:""))}if(0===n.src.indexOf("data:"))te(n);else if(0===n.src.indexOf("blob:")||0===n.src.indexOf("http")&&d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=d.o_doc.createElement("CANVAS"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),n.src=e.toDataURL("image/png"),te(n)},i.src=(0===n.src.indexOf("blob:")?"":d.opts.imageCORSProxy+"/")+n.src}else 0!==n.src.indexOf("http")||0===n.src.indexOf("https://mail.google.com/mail")?(d.selection.save(),ze(n).remove(),d.selection.restore()):ze(n).removeAttr("data-fr-image-pasted")}):d.$el.find("img[data-fr-image-pasted]").remove()}function ie(e){var t=e.target.result,n=d.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=d.opts.imageResizeWithPercent?"%":"px"),d.html.insert('<img data-fr-image-pasted="true" class="'+(d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:"")+'" src="'+t+'"'+(n?' style="width: '+n+';"':"")+">"),d.events.trigger("paste.after")}function re(e){var t=new FileReader;t.onload=ie,t.readAsDataURL(e)}function oe(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var n=0;n<e.clipboardData.items.length&&!(t=e.clipboardData.items[n].getAsFile());n++);if(t)return re(t),!1}}function se(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ae(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(e&&"touchend"==e.type&&Ue)return!0;if(e&&d.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<ze.FE.INSTANCES.length;t++)ze.FE.INSTANCES[t]!=d&&ze.FE.INSTANCES[t].events.trigger("image.hideResizer");d.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),d.helpers.isMobile()&&(d.events.disableBlur(),d.$el.blur(),d.events.enableBlur()),d.opts.iframe&&d.size.syncIframe(),Re=ze(this),d.browser.msie||ye(),l(),r(),d.browser.msie||d.selection.clear(),d.helpers.isIOS()&&(d.events.disableBlur(),d.$el.blur()),d.button.bulkRefresh(),d.events.trigger("video.hideResizer")}function le(e){Re&&(ue()||!0===e)&&(d.toolbar.enable(),Ie.removeClass("fr-active"),d.popups.hide("image.edit"),Re=null,de())}function ce(){Ke=!0}function de(){Ke=!1}function ue(){return Ke}function fe(e,t,n){!d.opts.htmlUntouched&&d.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),n&&e.addClass("fr-fi"+n[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:d.opts.imageDefaultMargin}),"center"==n?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*d.opts.imageDefaultMargin+"px)"}):"left"==n?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,
maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:d.opts.imageDefaultMargin+"px auto"}),"left"==n?e.css({marginLeft:0}):"right"==n&&e.css({marginRight:0}))}function he(e){var t=Ae();t.removeClass("fr-fir fr-fil"),!d.opts.htmlUntouched&&d.opts.useClasses?"left"==e?t.addClass("fr-fil"):"right"==e&&t.addClass("fr-fir"):fe(t,ge(),e),ye(),l(),r(),d.selection.clear()}function pe(e){if(void 0===e&&(e=Ae()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ge(e){void 0===e&&(e=Ae());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function me(e){Re&&e.find("> *:first").replaceWith(d.icon.create("image-align-"+pe()))}function ve(e,t){Re&&t.find('.fr-command[data-param1="'+pe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(e){var t=Ae();t.removeClass("fr-dii fr-dib"),!d.opts.htmlUntouched&&d.opts.useClasses?"inline"==e?t.addClass("fr-dii"):"block"==e&&t.addClass("fr-dib"):fe(t,e,pe()),ye(),l(),r(),d.selection.clear()}function Ee(e,t){Re&&t.find('.fr-command[data-param1="'+ge()+'"]').addClass("fr-active").attr("aria-selected",!0)}function _e(){var e=d.popups.get("image.insert");e||(e=P()),d.popups.isVisible("image.insert")||(b(),d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$sc));var t=Ae();we()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();d.popups.show("image.insert",n,i,t.outerHeight(!0))}function ye(){if(Re){d.events.disableBlur(),d.selection.clear();var e=d.doc.createRange();e.selectNode(Re.get(0)),d.selection.get().addRange(e),d.events.enableBlur()}}function Te(){Re?(d.events.disableBlur(),ze(".fr-popup input:focus").blur(),y(Re)):(d.events.disableBlur(),d.selection.restore(),d.events.enableBlur(),d.popups.hide("image.insert"),d.toolbar.showInline())}function Ce(){return Re}function Ae(){return we()?Re.parents(".fr-img-caption:first"):Re}function Se(e,t,n){if(void 0===t&&(t=d.opts.imageStyles),void 0===n&&(n=d.opts.imageMultipleStyles),!Re)return!1;if(!n){var i=Object.keys(t);i.splice(i.indexOf(e),1),Re.removeClass(i.join(" "))}"object"==typeof t[e]?(Re.removeAttr("style"),Re.css(t[e].style)):Re.toggleClass(e),y(Re)}function we(){return!!Re&&0<Re.parents(".fr-img-caption").length}function xe(){var e;Re&&!we()?((e=Re).parent().is("a")&&(e=Re.parent()),e.wrap('<span contenteditable="false" class="fr-img-caption '+Re.attr("class")+'" draggable="false"></span>'),e.wrap('<span class="fr-img-wrap"></span>'),e.after('<span class="fr-inner" contenteditable="true">'+ze.FE.START_MARKER+"Image caption"+ze.FE.END_MARKER+"</span>"),Re.removeAttr("class"),Re.parent().css("width",Re.width()),le(!0),d.selection.restore()):(e=Ae(),Re.insertAfter(e),Re.attr("class",e.attr("class").replace("fr-img-caption","")),e.remove(),y(Re))}var Re,Ie,De,Ne,Oe=!1,Le=1,ke=2,Me=3,Fe=4,Pe=5,$e=6,He=8,Be={};Be[Le]="Image cannot be loaded from the passed link.",Be[ke]="No link in upload response.",Be[Me]="Error during file upload.",Be[Fe]="Parsing response failed.",Be[Pe]="File is too large.",Be[$e]="Image file type is invalid.",Be[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var We,Ue,Ke=!(Be[He]="Image file is corrupted.");return{_init:ee,showInsertPopup:n,showLayer:Y,refreshUploadButton:q,refreshByURLButton:G,upload:O,insertByURL:e,align:he,refreshAlign:me,refreshAlignOnShow:ve,display:be,refreshDisplayOnShow:Ee,replace:_e,back:Te,get:Ce,getEl:Ae,insert:C,showProgressBar:v,remove:Q,hideProgressBar:b,applyStyle:Se,showAltPopup:H,showSizePopup:K,setAlt:W,setSize:j,toggleCaption:xe,hasCaption:we,exitEdit:le,edit:y}},ze.FE.DefineIcon("insertImage",{NAME:"image"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.P,"insertImage",null,"P"),ze.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),ze.FE.DefineIcon("imageUpload",{NAME:"upload"}),ze.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),ze.FE.DefineIcon("imageByURL",{NAME:"link"}),ze.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),ze.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),ze.FE.DefineIcon("imageDisplay",{NAME:"star"}),ze.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),ze.FE.DefineIcon("image-align",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-left",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-right",{NAME:"align-right"}),ze.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),ze.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),ze.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.imageAlign.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.icon.create("image-align-"+n)+'<span class="fr-sr-only">'+this.language.translate(t[n])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),ze.FE.DefineIcon("imageReplace",{NAME:"exchange"}),ze.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),ze.FE.DefineIcon("imageRemove",{NAME:"trash"}),ze.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),ze.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),ze.FE.DefineIcon("imageStyle",{NAME:"magic"}),ze.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"==typeof i&&(i=i.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(i)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var n=this.image.get();n&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=n.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("imageAlt",{NAME:"info"}),ze.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),ze.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),ze.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),ze.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),ze.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),ze.FE.DefineIcon("imageCaption",{NAME:"commenting"}),ze.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}}),ze.extend(ze.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),ze.FE.PLUGINS.imageManager=function(a){function n(){if(!A){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+a.sid+'" title="'+a.language.translate("Tags")+'"></i><h4 data-text="true">'+a.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var t='<img class="fr-preloader" id="fr-preloader" alt="'+a.language.translate("Loading")+'.." src="'+a.opts.imageManagerPreloader+'" style="display: none;">';t+='<div class="fr-image-list" id="fr-image-list"></div>';var n=a.modals.create(M,e,t);A=n.$modal,S=n.$head,w=n.$body}A.data("current-image",a.image.get()),a.modals.show(M),x||T(),o()}function e(){a.modals.hide(M)}function i(){var e=ze(window).outerWidth();return e<768?2:e<1200?3:4}function r(){R.empty();for(var e=0;e<k;e++)R.append('<div class="fr-list-column"></div>')}function o(){x.show(),R.find(".fr-list-column").empty(),a.opts.imageManagerLoadURL?ze.ajax({url:a.opts.imageManagerLoadURL,method:a.opts.imageManagerLoadMethod,data:a.opts.imageManagerLoadParams,dataType:"json",crossDomain:a.opts.requestWithCORS,xhrFields:{withCredentials:a.opts.requestWithCredentials},headers:a.opts.requestHeaders}).done(function(e,t,n){a.events.trigger("imageManager.imagesLoaded",[e]),s(e,n.response),x.hide()}).fail(function(){var e=this.xhr();v(P,e.response||e.responseText)}):v($)}function s(e,t){try{R.find(".fr-list-column").empty(),L=O=N=0,D=e,l()}catch(n){v(H,t)}}function l(){if(O<D.length&&(R.outerHeight()<=w.outerHeight()+a.opts.imageManagerScrollOffset||w.scrollTop()+a.opts.imageManagerScrollOffset>R.outerHeight()-w.outerHeight())){N++;for(var e=a.opts.imageManagerPageSize*(N-1);e<Math.min(D.length,a.opts.imageManagerPageSize*N);e++)t(D[e])}}function t(r){var o=new Image,s=ze('<div class="fr-image-container fr-empty fr-image-'+L+++'" data-loading="'+a.language.translate("Loading")+'.." data-deleting="'+a.language.translate("Deleting")+'..">');f(!1),o.onload=function(){s.height(Math.floor(s.width()/o.width*o.height));var n=ze("<img/>");if(r.thumb)n.attr("src",r.thumb);else{if(v(B,r),!r.url)return v(W,r),!1;n.attr("src",r.url)}if(r.url&&n.attr("data-url",r.url),r.tag)if(S.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),S.find(".fr-modal-tags").show(),0<=r.tag.indexOf(",")){for(var e=r.tag.split(","),t=0;t<e.length;t++)e[t]=e[t].trim(),0===I.find('a[title="'+e[t]+'"]').length&&I.append('<a role="button" title="'+e[t]+'">'+e[t]+"</a>");n.attr("data-tag",e.join())}else 0===I.find('a[title="'+r.tag.trim()+'"]').length&&I.append('<a role="button" title="'+r.tag.trim()+'">'+r.tag.trim()+"</a>"),n.attr("data-tag",r.tag.trim());for(var i in r.name&&n.attr("alt",r.name),r)r.hasOwnProperty(i)&&"thumb"!=i&&"url"!=i&&"tag"!=i&&n.attr("data-"+i,r[i]);s.append(n).append(ze(a.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",a.language.translate("Delete"))).append(ze(a.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",a.language.translate("Insert"))),I.find(".fr-selected-tag").each(function(e,t){y(n,t.text)||s.hide()}),n.on("load",function(){s.removeClass("fr-empty"),s.height("auto"),O++,u(d(parseInt(n.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),f(!1),O%a.opts.imageManagerPageSize==0&&l()}),a.events.trigger("imageManager.imageLoaded",[n])},o.onerror=function(){O++,s.remove(),u(d(parseInt(s.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),v(F,r),O%a.opts.imageManagerPageSize==0&&l()},o.src=r.thumb||r.url,c().append(s)}function c(){var i,r;return R.find(".fr-list-column").each(function(e,t){var n=ze(t);0===e?(r=n.outerHeight(),i=n):n.outerHeight()<r&&(r=n.outerHeight(),i=n)}),i}function d(e){void 0===e&&(e=0);for(var t=[],n=L-1;e<=n;n--){var i=R.find(".fr-image-"+n);i.length&&(t.push(i),ze('<div id="fr-image-hidden-container">').append(i),R.find(".fr-image-"+n).remove())}return t}function u(e){for(var t=e.length-1;0<=t;t--)c().append(e[t])}function f(e){if(void 0===e&&(e=!0),!A.is(":visible"))return!0;var t=i();if(t!=k){k=t;var n=d();r(),u(n)}a.modals.resize(M),e&&l()}function h(e){var t={},n=e.data();for(var i in n)n.hasOwnProperty(i)&&"url"!=i&&"tag"!=i&&(t[i]=n[i]);return t}function p(e){var t=ze(e.currentTarget).siblings("img"),n=A.data("instance")||a,i=A.data("current-image");if(a.modals.hide(M),n.image.showProgressBar(),i)i.data("fr-old-src",i.attr("src")),i.trigger("click");else{n.events.focus(!0),n.selection.restore();var r=n.position.getBoundingRect(),o=r.left+r.width/2+ze(a.doc).scrollLeft(),s=r.top+r.height+ze(a.doc).scrollTop();n.popups.setContainer("image.insert",a.$sc),n.popups.show("image.insert",o,s)}n.image.insert(t.data("url"),!1,h(t),i)}function g(){A.find("#fr-modal-tags > a").each(function(){0===A.find('#fr-image-list [data-tag*="'+ze(this).text()+'"]').length&&ze(this).removeClass("fr-selected-tag").hide()}),E()}function m(e){var n=ze(e.currentTarget).siblings("img"),t=a.language.translate("Are you sure? Image will be deleted.");confirm(t)&&(a.opts.imageManagerDeleteURL?!1!==a.events.trigger("imageManager.beforeDeleteImage",[n])&&(n.parent().addClass("fr-image-deleting"),ze.ajax({method:a.opts.imageManagerDeleteMethod,url:a.opts.imageManagerDeleteURL,data:ze.extend(ze.extend({src:n.attr("src")},h(n)),a.opts.imageManagerDeleteParams),crossDomain:a.opts.requestWithCORS,xhrFields:{withCredentials:a.opts.requestWithCredentials},headers:a.opts.requestHeaders}).done(function(e){a.events.trigger("imageManager.imageDeleted",[e]);var t=d(parseInt(n.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);n.parent().remove(),u(t),g(),f(!0)}).fail(function(){var e=this.xhr();v(U,e.response||e.responseText)})):v(K))}function v(e,t){10<=e&&e<20?x.hide():20<=e&&e<30&&ze(".fr-image-deleting").removeClass("fr-image-deleting"),a.events.trigger("imageManager.error",[{code:e,message:z[e]},t])}function b(){var e=S.find(".fr-modal-head-line").outerHeight(),t=I.outerHeight();S.toggleClass("fr-show-tags"),S.hasClass("fr-show-tags")?(S.css("height",e+t),I.find("a").css("opacity",1)):(S.css("height",e),I.find("a").css("opacity",0))}function E(){var e=I.find(".fr-selected-tag");0<e.length?(R.find("img").parent().show(),e.each(function(e,i){R.find("img").each(function(e,t){var n=ze(t);y(n,i.text)||n.parent().hide()})})):R.find("img").parent().show(),u(d()),l()}function _(e){e.preventDefault();var t=ze(e.currentTarget);t.toggleClass("fr-selected-tag"),a.opts.imageManagerToggleTags&&t.siblings("a").removeClass("fr-selected-tag"),E()}function y(e,t){for(var n=(e.attr("data-tag")||"").split(","),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1}function T(){x=A.find("#fr-preloader"),R=A.find("#fr-image-list"),I=A.find("#fr-modal-tags"),k=i(),r(),S.css("height",S.find(".fr-modal-head-line").outerHeight()),a.events.$on(ze(a.o_win),"resize",function(){f(!!D)}),a.helpers.isMobile()&&(a.events.bindClick(R,"div.fr-image-container",function(e){A.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),ze(e.currentTarget).addClass("fr-mobile-selected")}),A.on(a._mousedown,function(){A.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),a.events.bindClick(R,".fr-insert-img",p),a.events.bindClick(R,".fr-delete-img",m),A.on(a._mousedown+" "+a._mouseup,function(e){e.stopPropagation()}),A.on(a._mousedown,"*",function(){a.events.disableBlur()}),w.on("scroll",l),a.events.bindClick(A,"i#fr-modal-more-"+a.sid,b),a.events.bindClick(I,"a",_)}function C(){if(!a.$wp&&"IMG"!=a.el.tagName)return!1}var A,S,w,x,R,I,D,N,O,L,k,M="image_manager",F=10,P=11,$=12,H=13,B=14,W=15,U=21,K=22,z={};return z[F]="Image cannot be loaded from the passed link.",z[P]="Error during load images request.",z[$]="Missing imageManagerLoadURL option.",z[H]="Parsing load response failed.",z[B]="Missing image thumb.",z[W]="Missing image URL.",z[U]="Error during delete image request.",z[K]="Missing imageManagerDeleteURL option.",{require:["image"],_init:C,show:n,hide:e}},!ze.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");ze.FE.DEFAULTS.imageInsertButtons.push("imageManager"),ze.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),ze.FE.DefineIcon("imageManager",{NAME:"folder"}),ze.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),ze.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),ze.extend(ze.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),ze.FE.PLUGINS.inlineStyle=function(t){function e(e){""!==t.selection.text()?t.html.insert(ze.FE.START_MARKER+'<span style="'+e+'">'+t.selection.text()+"</span>"+ze.FE.END_MARKER):t.html.insert('<span style="'+e+'">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>")}return{apply:e}},ze.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><span style="'+t[n]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+"</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),ze.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),ze.extend(ze.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly",".fr-img-caption"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),ze.FE.PLUGINS.lineBreaker=function(f){function a(e,t){var n,i,r,o,s,a,l,c;if(null==e)s=(o=t.parent()).offset().top,n=(l=t.offset().top)-Math.min((l-s)/2,f.opts.lineBreakerOffset),r=o.outerWidth(),i=o.offset().left;else if(null==t)a=(o=e.parent()).offset().top+o.outerHeight(),n=(c=e.offset().top+e.outerHeight())+Math.min((a-c)/2,f.opts.lineBreakerOffset),r=o.outerWidth(),i=o.offset().left;else{o=e.parent();var d=e.offset().top+e.height(),u=t.offset().top;if(u<d)return!1;n=(d+u)/2,r=o.outerWidth(),i=o.offset().left}f.opts.iframe&&(i+=f.$iframe.offset().left-f.helpers.scrollLeft(),n+=f.$iframe.offset().top-f.helpers.scrollTop()),f.$box.append(m),m.css("top",n-f.win.pageYOffset),m.css("left",i-f.win.pageXOffset),m.css("width",r),m.data("tag1",e),m.data("tag2",t),m.addClass("fr-visible").data("instance",f)}function r(e,t){var n,i,r=e.offset().top,o=e.offset().top+e.outerHeight();if(Math.abs(o-t)<=f.opts.lineBreakerOffset||Math.abs(t-r)<=f.opts.lineBreakerOffset)if(Math.abs(o-t)<Math.abs(t-r)){for(var s=(i=e.get(0)).nextSibling;s&&s.nodeType==Node.TEXT_NODE&&0===s.textContent.length;)s=s.nextSibling;if(!s)return a(e,null),!0;if(n=l(s))return a(e,n),!0}else{if(!(i=e.get(0)).previousSibling)return a(null,e),!0;if(n=l(i.previousSibling))return a(n,e),!0}m.removeClass("fr-visible").removeData("instance")}function l(e){if(e){var t=ze(e);if(0===f.$el.find(t).length)return null;if(e.nodeType!=Node.TEXT_NODE&&t.is(f.opts.lineBreakerTags.join(",")))return t;if(0<t.parents(f.opts.lineBreakerTags.join(",")).length)return e=t.parents(f.opts.lineBreakerTags.join(",")).get(0),0!==f.$el.find(e).length&&ze(e).is(f.opts.lineBreakerTags.join(","))?ze(e):null}return null}function i(e){if(void 0!==e.inFroalaWrapper)return e.inFroalaWrapper;for(var t=e;e.parentNode&&e.parentNode!==f.$wp.get(0);)e=e.parentNode;return t.inFroalaWrapper=e.parentNode==f.$wp.get(0),t.inFroalaWrapper}function o(e,t){var n=f.doc.elementFromPoint(e,t);return n&&!n.closest(".fr-line-breaker")&&!f.node.isElement(n)&&n!=f.$wp.get(0)&&i(n)?n:null}function s(e,t,n){for(var i=n,r=null;i<=f.opts.lineBreakerOffset&&!r;)(r=o(e,t-i))||(r=o(e,t+i)),i+=n;return r}function c(e,t,n){for(var i=null,r=100;!i&&e>f.$box.offset().left&&e<f.$box.offset().left+f.$box.outerWidth()&&0<r;)(i=o(e,t))||(i=s(e,t,5)),"left"==n?e-=f.opts.lineBreakerHorizontalOffset:e+=f.opts.lineBreakerHorizontalOffset,r-=f.opts.lineBreakerHorizontalOffset;return i}function t(e){var t=b=null,n=null,i=f.doc.elementFromPoint(e.pageX-f.win.pageXOffset,e.pageY-f.win.pageYOffset);i&&("HTML"==i.tagName||"BODY"==i.tagName||f.node.isElement(i)||0<=(i.getAttribute("class")||"").indexOf("fr-line-breaker"))?((n=s(e.pageX-f.win.pageXOffset,e.pageY-f.win.pageYOffset,1))||(n=c(e.pageX-f.win.pageXOffset-f.opts.lineBreakerHorizontalOffset,e.pageY-f.win.pageYOffset,"left")),n||(n=c(e.pageX-f.win.pageXOffset+f.opts.lineBreakerHorizontalOffset,e.pageY-f.win.pageYOffset,"right")),t=l(n)):t=l(i),t?r(t,e.pageY):f.core.sameInstance(m)&&m.removeClass("fr-visible").removeData("instance")}function e(e){return!(m.hasClass("fr-visible")&&!f.core.sameInstance(m))&&(f.popups.areVisible()||f.el.querySelector(".fr-selected-cell")?(m.removeClass("fr-visible"),!0):void(!1!==v||f.edit.isDisabled()||(b&&clearTimeout(b),b=setTimeout(t,30,e))))}function n(){b&&clearTimeout(b),m.hasClass("fr-visible")&&m.removeClass("fr-visible").removeData("instance")}function d(){v=!0,n()}function u(){v=!1}function h(e){if(!f.core.sameInstance(m))return!0;e.preventDefault(),m.removeClass("fr-visible").removeData("instance");var t=m.data("tag1"),n=m.data("tag2"),i=f.html.defaultTag();null==t?i&&"TD"!=n.parent().get(0).tagName&&0===n.parents(i).length?n.before("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):n.before(ze.FE.MARKERS+"<br>"):i&&"TD"!=t.parent().get(0).tagName&&0===t.parents(i).length?t.after("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):t.after(ze.FE.MARKERS+"<br>"),f.selection.restore()}function p(){f.shared.$line_breaker||(f.shared.$line_breaker=ze('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+f.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),m=f.shared.$line_breaker,f.events.on("shared.destroy",function(){m.html("").removeData().remove(),m=null},!0),f.events.on("destroy",function(){m.removeData("instance").removeClass("fr-visible").appendTo("body:first"),clearTimeout(b)},!0),f.events.$on(m,"mousemove",function(e){e.stopPropagation()},!0),f.events.$on(m,"mousedown","a",function(e){e.stopPropagation()},!0),f.events.$on(m,"click","a",h,!0)}function g(){if(!f.$wp)return!1;p(),v=!1,f.events.$on(f.$win,"mousemove",e),f.events.$on(ze(f.win),"scroll",n),f.events.on("popups.show.table.edit",n),f.events.on("commands.after",n),f.events.$on(ze(f.win),"mousedown",d),f.events.$on(ze(f.win),"mouseup",u)}var m,v,b;return{_init:g}},ze.extend(ze.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),ze.FE.PLUGINS.link=function(u){function f(){var e=u.image?u.image.get():null;if(e||!u.$wp)return"A"==u.el.tagName?u.el:e&&e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?e.get(0).parentNode:void 0;var t=u.selection.ranges(0).commonAncestorContainer;if(t&&(t.contains&&t.contains(u.el)||!u.el.contains(t)||u.el==t)&&(t=null),t&&"A"===t.tagName)return t;var n=u.selection.element(),i=u.selection.endElement();return"A"==n.tagName||u.node.isElement(n)||(n=ze(n).parentsUntil(u.$el,"a:first").get(0)),"A"==i.tagName||u.node.isElement(i)||(i=ze(i).parentsUntil(u.$el,"a:first").get(0)),i&&(i.contains&&i.contains(u.el)||!u.el.contains(i)||u.el==i)&&(i=null),n&&(n.contains&&n.contains(u.el)||!u.el.contains(n)||u.el==n)&&(n=null),i&&i==n&&"A"==i.tagName?n:null}function h(){var e,t,n,i,r=u.image?u.image.get():null,o=[];if(r)"A"==r.get(0).parentNode.tagName&&o.push(r.get(0).parentNode);else if(u.win.getSelection){var s=u.win.getSelection();if(s.getRangeAt&&s.rangeCount){i=u.doc.createRange();for(var a=0;a<s.rangeCount;++a)if((t=(e=s.getRangeAt(a)).commonAncestorContainer)&&1!=t.nodeType&&(t=t.parentNode),t&&"a"==t.nodeName.toLowerCase())o.push(t);else{n=t.getElementsByTagName("a");for(var l=0;l<n.length;++l)i.selectNodeContents(n[l]),i.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<i.compareBoundaryPoints(e.START_TO_END,e)&&o.push(n[l])}}}else if(u.doc.selection&&"Control"!=u.doc.selection.type)if("a"==(t=(e=u.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())o.push(t);else{n=t.getElementsByTagName("a"),i=u.doc.body.createTextRange();for(var c=0;c<n.length;++c)i.moveToElementText(n[c]),-1<i.compareEndPoints("StartToEnd",e)&&i.compareEndPoints("EndToStart",e)<1&&o.push(n[c])}return o}function p(r){if(u.core.hasFocus()){if(s(),r&&"keyup"===r.type&&(r.altKey||r.which==ze.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var e=f(),t=u.image?u.image.get():null;if(e&&!t){if(u.image){var n=u.node.contents(e);if(1==n.length&&"IMG"==n[0].tagName){var i=u.selection.ranges(0);return 0===i.startOffset&&0===i.endOffset?ze(e).before(ze.FE.MARKERS):ze(e).after(ze.FE.MARKERS),u.selection.restore(),!1}}r&&r.stopPropagation(),o(e)}}},u.helpers.isIOS()?100:0)}}function o(e){var t=u.popups.get("link.edit");t||(t=a());var n=ze(e);u.popups.isVisible("link.edit")||u.popups.refresh("link.edit"),u.popups.setContainer("link.edit",u.$sc);var i=n.offset().left+ze(e).outerWidth()/2,r=n.offset().top+n.outerHeight();u.popups.show("link.edit",i,r,n.outerHeight())}function s(){u.popups.hide("link.edit")}function a(){var e="";1<u.opts.linkEditButtons.length&&("A"==u.el.tagName&&0<=u.opts.linkEditButtons.indexOf("linkRemove")&&u.opts.linkEditButtons.splice(u.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+u.button.buildList(u.opts.linkEditButtons)+"</div>");var t={buttons:e},n=u.popups.create("link.edit",t);return u.$wp&&u.events.$on(u.$wp,"scroll.link-edit",function(){f()&&u.popups.isVisible("link.edit")&&o(f())}),n}function c(){}function d(){var e=u.popups.get("link.insert"),t=f();if(t){var n,i,r=ze(t),o=e.find('input.fr-link-attr[type="text"]'),s=e.find('input.fr-link-attr[type="checkbox"]');for(n=0;n<o.length;n++)(i=ze(o[n])).val(r.attr(i.attr("name")||""));for(s.prop("checked",!1),n=0;n<s.length;n++)i=ze(s[n]),r.attr(i.attr("name"))==i.data("checked")&&i.prop("checked",!0);e.find('input.fr-link-attr[type="text"][name="text"]').val(r.text())}else e.find('input.fr-link-attr[type="text"]').val(""),e.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),e.find('input.fr-link-attr[type="text"][name="text"]').val(u.selection.text());e.find("input.fr-link-attr").trigger("change"),u.image&&u.image.get()?e.find('.fr-link-attr[name="text"]').parent().hide():e.find('.fr-link-attr[name="text"]').parent().show()}function e(){var e=u.$tb.find('.fr-command[data-cmd="insertLink"]'),t=u.popups.get("link.insert");if(t||(t=l()),!t.hasClass("fr-active"))if(u.popups.refresh("link.insert"),u.popups.setContainer("link.insert",u.$tb||u.$sc),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(u.opts.toolbarBottom?10:e.outerHeight()-10);u.popups.show("link.insert",n,i,e.outerHeight())}else u.position.forSelection(t),u.popups.show("link.insert")}function l(e){if(e)return u.popups.onRefresh("link.insert",d),u.popups.onHide("link.insert",c),!0;var t="";1<=u.opts.linkInsertButtons.length&&(t='<div class="fr-buttons">'+u.button.buildList(u.opts.linkInsertButtons)+"</div>");var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',i="",r=0;for(var o in i='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+u.id+'">',i+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+u.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++r+'"></div>',u.opts.linkText&&(i+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+u.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+u.language.translate("Text")+'" tabIndex="'+ ++r+'"></div>'),u.opts.linkAttributes)if(u.opts.linkAttributes.hasOwnProperty(o)){var s=u.opts.linkAttributes[o];i+='<div class="fr-input-line"><input name="'+o+'" type="text" class="fr-link-attr" placeholder="'+u.language.translate(s)+'" tabIndex="'+ ++r+'"></div>'}u.opts.linkAlwaysBlank||(i+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+u.id+'" tabIndex="'+ ++r+'"><span>'+n+'</span></span><label for="fr-link-target-'+u.id+'">'+u.language.translate("Open in new tab")+"</label></div>");var a={buttons:t,input_layer:i+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++r+'" type="button">'+u.language.translate("Insert")+"</button></div></div>"},l=u.popups.create("link.insert",a);return u.$wp&&u.events.$on(u.$wp,"scroll.link-insert",function(){(u.image?u.image.get():null)&&u.popups.isVisible("link.insert")&&E(),f&&u.popups.isVisible("link.insert")&&v()}),l}function t(){var e=f(),t=u.image?u.image.get():null;if(!1===u.events.trigger("link.beforeRemove",[e]))return!1;t&&e?(t.unwrap(),u.image.edit(t)):e&&(u.selection.save(),ze(e).replaceWith(ze(e).html()),u.selection.restore(),s())}function n(){u.events.on("keyup",function(e){e.which!=ze.FE.KEYCODE.ESC&&p(e)}),u.events.on("window.mouseup",p),u.events.$on(u.$el,"click","a",function(e){u.edit.isDisabled()&&e.preventDefault()}),u.helpers.isMobile()&&u.events.$on(u.$doc,"selectionchange",p),l(!0),"A"==u.el.tagName&&u.$el.addClass("fr-view"),u.events.on("toolbar.esc",function(){if(u.popups.isVisible("link.edit"))return u.events.disableBlur(),u.events.focus(),!1},!0)}function i(e){var t,n,i=u.opts.linkList[e],r=u.popups.get("link.insert"),o=r.find('input.fr-link-attr[type="text"]'),s=r.find('input.fr-link-attr[type="checkbox"]');for(n=0;n<o.length;n++)i[(t=ze(o[n])).attr("name")]?t.val(i[t.attr("name")]):"text"!=t.attr("name")&&t.val("");for(n=0;n<s.length;n++)(t=ze(s[n])).prop("checked",t.data("checked")==i[t.attr("name")]);u.accessibility.focusPopup(r)}function r(){var e,t,n=u.popups.get("link.insert"),i=n.find('input.fr-link-attr[type="text"]'),r=n.find('input.fr-link-attr[type="checkbox"]'),o=i.filter('[name="href"]').val(),s=i.filter('[name="text"]').val(),a={};for(t=0;t<i.length;t++)e=ze(i[t]),["href","text"].indexOf(e.attr("name"))<0&&(a[e.attr("name")]=e.val());for(t=0;t<r.length;t++)(e=ze(r[t])).is(":checked")?a[e.attr("name")]=e.data("checked"):a[e.attr("name")]=e.data("unchecked")||null;var l=u.helpers.scrollTop();m(o,s,a),ze(u.o_win).scrollTop(l)}function g(){if(!u.selection.isCollapsed()){
u.selection.save();for(var e=u.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();e.length;){var t=ze(e.pop());t.removeClass("fr-unprocessed");var n=u.node.deepestParent(t.get(0));if(n){for(var i=t.get(0),r="",o="";i=i.parentNode,u.node.isBlock(i)||(r+=u.node.closeTagString(i),o=u.node.openTagString(i)+o),i!=n;);var s=u.node.openTagString(t.get(0))+t.html()+u.node.closeTagString(t.get(0));t.replaceWith('<span id="fr-break"></span>');var a=n.outerHTML;a=a.replace(/<span id="fr-break"><\/span>/g,r+s+o),n.outerHTML=a}e=u.$el.find(".fr-marker.fr-unprocessed").toArray()}u.html.cleanEmptyTags(),u.selection.restore()}}function m(e,t,n){if(void 0===n&&(n={}),!1===u.events.trigger("link.beforeInsert",[e,t,n]))return!1;var i=u.image?u.image.get():null;i||"A"==u.el.tagName?"A"==u.el.tagName&&u.$el.focus():(u.selection.restore(),u.popups.hide("link.insert"));var r=e;u.opts.linkConvertEmailAddress&&ze.FE.MAIL_REGEX.test(e)&&!/^mailto:.*/i.test(e)&&(e="mailto:"+e);var o=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===u.opts.linkAutoPrefix||new RegExp("^("+ze.FE.LinkProtocols.join("|")+"):.","i").test(e)||/^data:image.*/i.test(e)||/^(https?:|ftps?:|file:|)\/\//i.test(e)||o.test(e)||["/","{","[","#","("].indexOf((e||"")[0])<0&&(e=u.opts.linkAutoPrefix+e),e=u.helpers.sanitizeURL(e),u.opts.linkAlwaysBlank&&(n.target="_blank"),u.opts.linkAlwaysNoFollow&&(n.rel="nofollow"),"_blank"==n.target?n.rel?n.rel+=" noopener noreferrer":n.rel="noopener noreferrer":null==n.target&&(n.rel?n.rel=n.rel.replace(/noopener/,"").replace(/noreferrer/,""):n.rel=null),t=t||"",e===u.opts.linkAutoPrefix)return u.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),u.events.trigger("link.bad",[r]),!1;var s,a=f();if(a)(s=ze(a)).attr("href",e),0<t.length&&s.text()!=t&&!i&&s.text(t),i||s.prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER),s.attr(n),i||u.selection.restore();else{i?i.wrap('<a href="'+e+'"></a>'):(u.format.remove("a"),u.selection.isCollapsed()?(t=0===t.length?r:t,u.html.insert('<a href="'+e+'">'+ze.FE.START_MARKER+t+ze.FE.END_MARKER+"</a>"),u.selection.restore()):0<t.length&&t!=u.selection.text().replace(/\n/g,"")?(u.selection.remove(),u.html.insert('<a href="'+e+'">'+ze.FE.START_MARKER+t+ze.FE.END_MARKER+"</a>"),u.selection.restore()):(g(),u.format.apply("a",{href:e})));for(var l=h(),c=0;c<l.length;c++)(s=ze(l[c])).attr(n),s.removeAttr("_moz_dirty");1==l.length&&u.$wp&&!i&&(ze(l[0]).prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER),u.selection.restore())}if(i){var d=u.popups.get("link.insert");d&&d.find("input:focus").blur(),u.image.edit(i)}else p()}function v(){s();var e=f();if(e){var t=u.popups.get("link.insert");t||(t=l()),u.popups.isVisible("link.insert")||(u.popups.refresh("link.insert"),u.selection.save(),u.helpers.isMobile()&&(u.events.disableBlur(),u.$el.blur(),u.events.enableBlur())),u.popups.setContainer("link.insert",u.$sc);var n=(u.image?u.image.get():null)||ze(e),i=n.offset().left+n.outerWidth()/2,r=n.offset().top+n.outerHeight();u.popups.show("link.insert",i,r,n.outerHeight())}}function b(){u.image&&u.image.get()?u.image.back():(u.events.disableBlur(),u.selection.restore(),u.events.enableBlur(),f()&&u.$wp?(u.selection.restore(),s(),p()):"A"==u.el.tagName?(u.$el.focus(),p()):(u.popups.hide("link.insert"),u.toolbar.showInline()))}function E(){var e=u.image?u.image.getEl():null;if(e){var t=u.popups.get("link.insert");u.image.hasCaption()&&(e=e.find(".fr-img-wrap")),t||(t=l()),d(!0),u.popups.setContainer("link.insert",u.$sc);var n=e.offset().left+e.outerWidth(!0)/2,i=e.offset().top+e.outerHeight(!0);u.popups.show("link.insert",n,i,e.outerHeight())}}function _(e,t,n){void 0===n&&(n=u.opts.linkMultipleStyles),void 0===t&&(t=u.opts.linkStyles);var i=f();if(!i)return!1;if(!n){var r=Object.keys(t);r.splice(r.indexOf(e),1),ze(i).removeClass(r.join(" "))}ze(i).toggleClass(e),p()}return{_init:n,remove:t,showInsertPopup:e,usePredefined:i,insertCallback:r,insert:m,update:v,get:f,allSelected:h,back:b,imageLink:E,applyStyle:_}},ze.FE.DefineIcon("insertLink",{NAME:"link"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.K,"insertLink",null,"K"),ze.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),ze.FE.DefineIcon("linkOpen",{NAME:"external-link"}),ze.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)},plugin:"link"}),ze.FE.DefineIcon("linkEdit",{NAME:"edit"}),ze.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),ze.FE.DefineIcon("linkRemove",{NAME:"unlink"}),ze.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),ze.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();this.image&&this.image.get()||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),ze.FE.DefineIcon("linkList",{NAME:"search"}),ze.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+"</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),ze.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),ze.FE.DefineIcon("imageLink",{NAME:"link"}),ze.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),ze.FE.DefineIcon("linkStyle",{NAME:"magic"}),ze.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(e,t){var n=this.link.get();if(n){var i=ze(n);t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}},plugin:"link"}),ze.FE.PLUGINS.lists=function(u){function f(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function h(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function c(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i].parentNode;"LI"==e[i].tagName&&r.tagName!=t&&n.indexOf(r)<0&&n.push(r)}for(i=n.length-1;0<=i;i--){var o=ze(n[i]);o.replaceWith("<"+t.toLowerCase()+">"+o.html()+"</"+t.toLowerCase()+">")}}function i(e,t){c(e,t);var n,i=u.html.defaultTag(),r=null;e.length&&(n="rtl"==u.opts.direction||"rtl"==ze(e[0]).css("direction")?"margin-right":"margin-left");for(var o=0;o<e.length;o++)if("LI"!=e[o].tagName){var s=u.helpers.getPX(ze(e[o]).css(n))||0;(e[o].style.marginLeft=null)===r&&(r=s);var a=0<r?"<"+t+' style="'+n+": "+r+'px;">':"<"+t+">",l="</"+t+">";for(s-=r;0<s/u.opts.indentMargin;)a+="<"+t+">",l+=l,s-=u.opts.indentMargin;i&&e[o].tagName.toLowerCase()==i?ze(e[o]).replaceWith(a+"<li"+u.node.attributes(e[o])+">"+ze(e[o]).html()+"</li>"+l):ze(e[o]).wrap(a+"<li></li>"+l)}u.clean.lists()}function r(e){var t,n;for(t=e.length-1;0<=t;t--)for(n=t-1;0<=n;n--)if(ze(e[n]).find(e[t]).length||e[n]==e[t]){e.splice(t,1);break}var i=[];for(t=0;t<e.length;t++){var r=ze(e[t]),o=e[t].parentNode,s=r.attr("class");if(r.before(h(o.tagName)),"LI"==o.parentNode.tagName)r.before(h("LI")),r.after(f("LI"));else{var a="";s&&(a+=' class="'+s+'"');var l="rtl"==u.opts.direction||"rtl"==r.css("direction")?"margin-right":"margin-left";u.helpers.getPX(ze(o).css(l))&&(a+=' style="'+l+":"+u.helpers.getPX(ze(o).css(l))+'px;"'),a&&r.wrapInner("<"+u.html.defaultTag()+a+"></"+u.html.defaultTag()+">"),u.node.isEmpty(r.get(0),!0)||0!==r.find(u.html.blockTagsQuery()).length||r.append("<br>"),r.append(f("LI")),r.prepend(h("LI"))}r.after(f(o.tagName)),"LI"==o.parentNode.tagName&&(o=o.parentNode.parentNode),i.indexOf(o)<0&&i.push(o)}for(t=0;t<i.length;t++){var c=ze(i[t]),d=c.html();d=(d=d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),c.replaceWith(u.node.openTagString(c.get(0))+d+u.node.closeTagString(c.get(0)))}u.$el.find("li:empty").remove(),u.$el.find("ul:empty, ol:empty").remove(),u.clean.lists(),u.html.wrap()}function o(e,t){for(var n=!0,i=0;i<e.length;i++){if("LI"!=e[i].tagName)return!1;e[i].parentNode.tagName!=t&&(n=!1)}return n}function e(e){u.selection.save(),u.html.wrap(!0,!0,!0,!0),u.selection.restore();for(var t=u.selection.blocks(),n=0;n<t.length;n++)"LI"!=t[n].tagName&&"LI"==t[n].parentNode.tagName&&(t[n]=t[n].parentNode);u.selection.save(),o(t,e)?r(t):i(t,e),u.html.unwrap(),u.selection.restore()}function t(e,t){var n=ze(u.selection.element());if(n.get(0)!=u.el){var i=n.get(0);(i="LI"!=i.tagName&&i.firstElementChild&&"LI"!=i.firstElementChild.tagName?n.parents("li").get(0):"LI"==i.tagName||i.firstElementChild?i.firstElementChild&&"LI"==i.firstElementChild.tagName?n.get(0).firstChild:n.get(0):n.parents("li").get(0))&&i.parentNode.tagName==t&&u.el.contains(i.parentNode)&&e.addClass("fr-active")}}function s(e){u.selection.save();for(var t=0;t<e.length;t++){var n=e[t].previousSibling;if(n){var i=ze(e[t]).find("> ul, > ol").last().get(0);if(i){for(var r=ze("<li>").prependTo(ze(i)),o=u.node.contents(e[t])[0];o&&!u.node.isList(o);){var s=o.nextSibling;r.append(o),o=s}ze(n).append(ze(i)),ze(e[t]).remove()}else{var a=ze(n).find("> ul, > ol").last().get(0);if(a)ze(a).append(ze(e[t]));else{var l=ze("<"+e[t].parentNode.tagName+">");ze(n).append(l),l.append(ze(e[t]))}}}}u.clean.lists(),u.selection.restore()}function a(e){u.selection.save(),r(e),u.selection.restore()}function n(e){if("indent"==e||"outdent"==e){for(var t=!1,n=u.selection.blocks(),i=[],r=0;r<n.length;r++)"LI"==n[r].tagName?(t=!0,i.push(n[r])):"LI"==n[r].parentNode.tagName&&(t=!0,i.push(n[r].parentNode));t&&("indent"==e?s(i):a(i))}}function l(){u.events.on("commands.after",n),u.events.on("keydown",function(e){if(e.which==ze.FE.KEYCODE.TAB){for(var t=u.selection.blocks(),n=[],i=0;i<t.length;i++)"LI"==t[i].tagName?n.push(t[i]):"LI"==t[i].parentNode.tagName&&n.push(t[i].parentNode);if(1<n.length||n.length&&(u.selection.info(n[0]).atStart||u.node.isEmpty(n[0])))return e.preventDefault(),e.stopPropagation(),e.shiftKey?a(n):s(n),!1}},!0)}return{_init:l,format:e,refresh:t}},ze.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),ze.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),ze.FE.DefineIcon("formatUL",{NAME:"list-ul"}),ze.FE.DefineIcon("formatOL",{NAME:"list-ol"}),ze.extend(ze.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),ze.FE.PLUGINS.paragraphFormat=function(s){function r(e,t){var n=s.html.defaultTag();if(t&&t.toLowerCase()!=n)if(0<e.find("ul, ol").length){var i=ze("<"+t+">");e.prepend(i);for(var r=s.node.contents(e.get(0))[0];r&&["UL","OL"].indexOf(r.tagName)<0;){var o=r.nextSibling;i.append(r),r=o}}else e.html("<"+t+">"+e.html()+"</"+t+">")}function o(e,t){var n=s.html.defaultTag();t||(t='div class="fr-temp-div" data-empty="true"'),t.toLowerCase()==n?e.replaceWith(e.html()):e.replaceWith(ze("<"+t+">").html(e.html()))}function a(e,t){var n=s.html.defaultTag();t||(t='div class="fr-temp-div"'+(s.node.isEmpty(e.get(0),!0)?' data-empty="true"':"")),t.toLowerCase()==n?(s.node.isEmpty(e.get(0),!0)||e.append("<br/>"),e.replaceWith(e.html())):e.replaceWith(ze("<"+t+">").html(e.html()))}function l(e,t){t||(t='div class="fr-temp-div"'+(s.node.isEmpty(e.get(0),!0)?' data-empty="true"':"")),e.replaceWith(ze("<"+t+" "+s.node.attributes(e.get(0))+">").html(e.html()).removeAttr("data-empty"))}function e(e){"N"==e&&(e=s.html.defaultTag()),s.selection.save(),s.html.wrap(!0,!0,!0,!0),s.selection.restore();var t=s.selection.blocks();s.selection.save(),s.$el.find("pre").attr("skip",!0);for(var n=0;n<t.length;n++)if(t[n].tagName!=e&&!s.node.isList(t[n])){var i=ze(t[n]);"LI"==t[n].tagName?r(i,e):"LI"==t[n].parentNode.tagName&&t[n]?o(i,e):0<=["TD","TH"].indexOf(t[n].parentNode.tagName)?a(i,e):l(i,e)}s.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){ze(this).prev().append("<br>"+ze(this).html()),ze(this).remove()}),s.$el.find("pre").removeAttr("skip"),s.html.unwrap(),s.selection.restore()}function t(e,t){var n=s.selection.blocks();if(n.length){var i=n[0],r="N",o=s.html.defaultTag();i.tagName.toLowerCase()!=o&&i!=s.el&&(r=i.tagName),t.find('.fr-command[data-param1="'+r+'"]').addClass("fr-active").attr("aria-selected",!0)}else t.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function n(e){if(s.opts.paragraphFormatSelection){var t=s.selection.blocks();if(t.length){var n=t[0],i="N",r=s.html.defaultTag();n.tagName.toLowerCase()!=r&&n!=s.el&&(i=n.tagName),0<=["LI","TD","TH"].indexOf(i)&&(i="N"),e.find("> span").text(s.language.translate(s.opts.paragraphFormat[i]))}else e.find("> span").text(s.language.translate(s.opts.paragraphFormat.N))}}return{apply:e,refreshOnShow:t,refresh:n}},ze.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var i=this.shortcuts.get("paragraphFormat."+n);i=i?'<span class="fr-shortcut">'+i+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+"</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),ze.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),ze.extend(ze.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),ze.FE.PLUGINS.paragraphStyle=function(a){function e(e,t,n){void 0===t&&(t=a.opts.paragraphStyles),void 0===n&&(n=a.opts.paragraphMultipleStyles);var i="";n||((i=Object.keys(t)).splice(i.indexOf(e),1),i=i.join(" ")),a.selection.save(),a.html.wrap(!0,!0,!0,!0),a.selection.restore();var r=a.selection.blocks();a.selection.save();for(var o=ze(r[0]).hasClass(e),s=0;s<r.length;s++)ze(r[s]).removeClass(i).toggleClass(e,!o),ze(r[s]).hasClass("fr-temp-div")&&ze(r[s]).removeClass("fr-temp-div"),""===ze(r[s]).attr("class")&&ze(r[s]).removeAttr("class");a.html.unwrap(),a.selection.restore()}function t(e,t){var n=a.selection.blocks();if(n.length){var i=ze(n[0]);t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}function n(){}return{_init:n,apply:e,refreshOnShow:t}},ze.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command '+n+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),ze.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),ze.FE.PLUGINS.print=function(r){function e(){var e=r.$el.html(),t=null;r.shared.print_iframe?t=r.shared.print_iframe:((t=document.createElement("iframe")).name="fr-print",t.style.position="fixed",t.style.top="0",t.style.left="-9999px",t.style.height="100%",t.style.width="0",t.style.overflow="hidden",t.style["z-index"]="2147483647",t.style.tabIndex="-1",document.body.appendChild(t),t.onload=function(){setTimeout(function(){r.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),r.$win.get(0).focus(),r.events.disableBlur(),r.events.focus()},0)},r.events.on("shared.destroy",function(){t.remove()}),r.shared.print_iframe=t);var n=t.contentWindow;n.document.open(),n.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(e){e=e.cloneNode(!0),n.document.write(e.outerHTML)});var i=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(i,function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",n.document.write(t.outerHTML)}),n.document.write('</head><body style="text-align: '+("rtl"==r.opts.direction?"right":"left")+"; direction: "+r.opts.direction+';"><div class="fr-view">'),n.document.write(e),n.document.write("</div></body></html>"),n.document.close()}return{run:e}},ze.FE.DefineIcon("print",{NAME:"print"}),ze.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),ze.extend(ze.FE.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),ze.FE.QUICK_INSERT_BUTTONS={},ze.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),ze.FE.RegisterQuickInsertButton=function(e,t){ze.FE.QUICK_INSERT_BUTTONS[e]=ze.extend({undo:!0},t)},ze.FE.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var e=this;e.shared.$qi_image_input||(e.shared.$qi_image_input=ze('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),ze("body:first").append(e.shared.$qi_image_input),e.events.$on(e.shared.$qi_image_input,"change",function(){var e=ze(this).data("inst");this.files&&(e.quickInsert.hide(),e.image.upload(this.files)),ze(this).val("")},!0)),e.$qi_image_input=e.shared.$qi_image_input,e.helpers.isMobile()&&e.selection.save(),e.$qi_image_input.data("inst",e).trigger("click")}}),ze.FE.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),ze.FE.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),ze.FE.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),ze.FE.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),ze.FE.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),ze.FE.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),ze.FE.PLUGINS.quickInsert=function(s){function t(e){var t,n,i;t=e.offset().top-s.$box.offset().top,n=0-c.outerWidth(),i=(c.outerHeight()-e.outerHeight())/2,s.opts.iframe&&(t+=s.$iframe.offset().top-s.helpers.scrollTop()),c.hasClass("fr-on")&&0<=t&&d.css("top",t-i),0<=t&&t-i<=s.$box.outerHeight()-e.outerHeight()?(c.hasClass("fr-hidden")&&(c.hasClass("fr-on")&&r(),c.removeClass("fr-hidden")),c.css("top",t-i)):c.hasClass("fr-visible")&&(c.addClass("fr-hidden"),a()),c.css("left",n)}function n(e){c||o(),c.hasClass("fr-on")&&a(),s.$box.append(c),t(e),c.data("tag",e),c.addClass("fr-visible")}function e(){if(s.core.hasFocus()){var e=s.selection.element();s.node.isBlock(e)||(e=s.node.blockParent(e)),e&&s.node.isEmpty(e)&&s.node.isElement(e.parentNode)&&0<=s.opts.quickInsertTags.indexOf(e.tagName.toLowerCase())?c&&c.data("tag").is(ze(e))&&c.hasClass("fr-on")?a():s.selection.isCollapsed()&&n(ze(e)):i()}}function i(){c&&(s.html.checkIfEmpty(),c.hasClass("fr-on")&&a(),c.removeClass("fr-visible fr-on"),c.css("left",-9999).css("top",-9999))}function r(e){if(e&&e.preventDefault(),c.hasClass("fr-on")&&!c.hasClass("fr-hidden"))a();else{if(!s.shared.$qi_helper){for(var t=s.opts.quickInsertButtons,n='<div class="fr-qi-helper">',i=0,r=0;r<t.length;r++){var o=ze.FE.QUICK_INSERT_BUTTONS[t[r]];o&&(!o.requiredPlugin||ze.FE.PLUGINS[o.requiredPlugin]&&0<=s.opts.pluginsEnabled.indexOf(o.requiredPlugin))&&(n+='<a class="fr-btn fr-floating-btn" role="button" title="'+s.language.translate(o.title)+'" tabIndex="-1" data-cmd="'+t[r]+'" style="transition-delay: '+.025*i+++'s;">'+s.icon.create(o.icon)+"</a>")}n+="</div>",s.shared.$qi_helper=ze(n),s.tooltip.bind(s.shared.$qi_helper,"> a.fr-btn")}(d=s.shared.$qi_helper).appendTo(s.$box),setTimeout(function(){d.css("top",parseFloat(c.css("top"))),d.css("left",parseFloat(c.css("left"))+c.outerWidth()),d.find("a").addClass("fr-size-1"),c.addClass("fr-on")},10)}}function a(){var e=s.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),c.hasClass("fr-hidden")||c.removeClass("fr-on"))}function o(){s.shared.$quick_insert||(s.shared.$quick_insert=ze('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+s.language.translate("Quick Insert")+'">'+s.icon.create("quickInsert")+"</a></div>")),c=s.shared.$quick_insert,s.tooltip.bind(s.$box,".fr-quick-insert > a.fr-floating-btn"),s.events.on("destroy",function(){c.removeClass("fr-on").appendTo(ze("body:first")).css("left",-9999).css("top",-9999),d&&(a(),d.appendTo(ze("body:first")))},!0),s.events.on("shared.destroy",function(){c.html("").removeData().remove(),c=null,d&&(d.html("").removeData().remove(),d=null)},!0),s.events.on("commands.before",i),s.events.on("commands.after",function(){s.popups.areVisible()||e()}),s.events.bindClick(s.$box,".fr-quick-insert > a",r),s.events.bindClick(s.$box,".fr-qi-helper > a.fr-btn",function(e){var t=ze(e.currentTarget).data("cmd");ze.FE.QUICK_INSERT_BUTTONS[t].callback.apply(s,[e.currentTarget]),ze.FE.QUICK_INSERT_BUTTONS[t].undo&&s.undo.saveStep(),s.quickInsert.hide()}),s.events.$on(s.$wp,"scroll",function(){c.hasClass("fr-visible")&&t(c.data("tag"))})}function l(){if(!s.$wp)return!1;s.opts.iframe&&s.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),s.popups.onShow("image.edit",i),s.events.on("mouseup",e),s.helpers.isMobile()&&s.events.$on(ze(s.o_doc),"selectionchange",e),s.events.on("blur",i),s.events.on("keyup",e),s.events.on("keydown",function(){setTimeout(function(){e()},0)})}var c,d;return{_init:l,hide:i}},ze.FE.PLUGINS.quote=function(i){function r(e){for(;e.parentNode&&e.parentNode!=i.el;)e=e.parentNode;return e}function t(){var e,t=i.selection.blocks();for(e=0;e<t.length;e++)t[e]=r(t[e]);i.selection.save();var n=ze("<blockquote>");for(n.insertBefore(t[0]),e=0;e<t.length;e++)n.append(t[e]);i.html.unwrap(),i.selection.restore()}function n(){var e,t=i.selection.blocks();for(e=0;e<t.length;e++)"BLOCKQUOTE"!=t[e].tagName&&(t[e]=ze(t[e]).parentsUntil(i.$el,"BLOCKQUOTE").get(0));for(i.selection.save(),e=0;e<t.length;e++)t[e]&&ze(t[e]).replaceWith(t[e].innerHTML);i.html.unwrap(),i.selection.restore()}function e(e){i.selection.save(),i.html.wrap(!0,!0,!0,!0),i.selection.restore(),"increase"==e?t():"decrease"==e&&n()}return{apply:e}},ze.FE.RegisterShortcut(ze.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),ze.FE.RegisterShortcut(ze.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),ze.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),ze.FE.DefineIcon("quote",{NAME:"quote-left"}),ze.extend(ze.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),ze.FE.PLUGINS.save=function(o){function s(e,t){o.events.trigger("save.error",[{code:e,message:f[e]},t])}function t(t){if(void 0===t&&(t=o.html.get()),!1===o.events.trigger("save.before"))return!1;if(o.opts.saveURL){var e={};for(var n in o.opts.saveParams)if(o.opts.saveParams.hasOwnProperty(n)){var i=o.opts.saveParams[n];e[n]="function"==typeof i?i.call(this):i}var r={};r[o.opts.saveParam]=t,ze.ajax({type:o.opts.saveMethod,url:o.opts.saveURL,data:ze.extend(r,e),crossDomain:o.opts.requestWithCORS,xhrFields:{withCredentials:o.opts.requestWithCredentials},headers:o.opts.requestHeaders}).done(function(e){l=t,o.events.trigger("save.after",[e])}).fail(function(e){s(u,e.response||e.responseText)})}else s(d)}function e(){clearTimeout(a),a=setTimeout(function(){var e=o.html.get();(l!=e||c)&&(c=!1,t(l=e))},o.opts.saveInterval)}function n(){e(),c=!1}function i(){c=!0}function r(){o.opts.saveInterval&&(l=o.html.get(),o.events.on("contentChanged",e),o.events.on("keydown destroy",function(){clearTimeout(a)}))}var a=null,l=null,c=!1,d=1,u=2,f={};return f[d]="Missing saveURL option.",f[u]="Something went wrong during save.",{_init:r,save:t,reset:n,force:i}},ze.FE.DefineIcon("save",{NAME:"floppy-o"}),ze.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),ze.extend(ze.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{"char":"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{"char":"&cent;",desc:"CENT SIGN"},{"char":"&pound;",desc:"POUND SIGN"},{"char":"&curren;",desc:"CURRENCY SIGN"},{"char":"&yen;",desc:"YEN SIGN"},{"char":"&brvbar;",desc:"BROKEN BAR"},{"char":"&sect;",desc:"SECTION SIGN"},{"char":"&uml;",desc:"DIAERESIS"},{"char":"&copy;",desc:"COPYRIGHT SIGN"},{"char":"&trade;",desc:"TRADEMARK SIGN"},{"char":"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{"char":"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&not;",desc:"NOT SIGN"},{"char":"&reg;",desc:"REGISTERED SIGN"},{"char":"&macr;",desc:"MACRON"},{"char":"&deg;",desc:"DEGREE SIGN"},{"char":"&plusmn;",desc:"PLUS-MINUS SIGN"},{"char":"&sup2;",desc:"SUPERSCRIPT TWO"},{"char":"&sup3;",desc:"SUPERSCRIPT THREE"},{"char":"&acute;",desc:"ACUTE ACCENT"},{"char":"&micro;",desc:"MICRO SIGN"},{"char":"&para;",desc:"PILCROW SIGN"},{"char":"&middot;",desc:"MIDDLE DOT"},{"char":"&cedil;",desc:"CEDILLA"},{"char":"&sup1;",desc:"SUPERSCRIPT ONE"},{"char":"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{"char":"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{"char":"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{"char":"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{"char":"&iquest;",desc:"INVERTED QUESTION MARK"},{"char":"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{"char":"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{"char":"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{"char":"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{"char":"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{"char":"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{"char":"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{"char":"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{"char":"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{"char":"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{"char":"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{"char":"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{"char":"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{"char":"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{"char":"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{"char":"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{"char":"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{"char":"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{"char":"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{"char":"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{"char":"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{"char":"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{"char":"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{"char":"&times;",desc:"MULTIPLICATION SIGN"},{"char":"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{"char":"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{"char":"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{"char":"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{"char":"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{"char":"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{"char":"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{"char":"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{"char":"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{"char":"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{"char":"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{"char":"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{"char":"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{"char":"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{"char":"&aelig;",desc:"LATIN SMALL LETTER AE"},{"char":"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{"char":"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{"char":"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{"char":"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{"char":"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{"char":"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{"char":"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{"char":"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{"char":"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{"char":"&eth;",desc:"LATIN SMALL LETTER ETH"},{"char":"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{"char":"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{"char":"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{"char":"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{"char":"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{"char":"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{"char":"&divide;",desc:"DIVISION SIGN"},{"char":"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{"char":"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{"char":"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{"char":"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{"char":"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{"char":"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{"char":"&thorn;",desc:"LATIN SMALL LETTER THORN"},{
"char":"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{"char":"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{"char":"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{"char":"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{"char":"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{"char":"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{"char":"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{"char":"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{"char":"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{"char":"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{"char":"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{"char":"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{"char":"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{"char":"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{"char":"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{"char":"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{"char":"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{"char":"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{"char":"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{"char":"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{"char":"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{"char":"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{"char":"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{"char":"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{"char":"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{"char":"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{"char":"&beta;",desc:"GREEK SMALL LETTER BETA"},{"char":"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{"char":"&delta;",desc:"GREEK SMALL LETTER DELTA"},{"char":"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{"char":"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{"char":"&eta;",desc:"GREEK SMALL LETTER ETA"},{"char":"&theta;",desc:"GREEK SMALL LETTER THETA"},{"char":"&iota;",desc:"GREEK SMALL LETTER IOTA"},{"char":"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{"char":"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{"char":"&mu;",desc:"GREEK SMALL LETTER MU"},{"char":"&nu;",desc:"GREEK SMALL LETTER NU"},{"char":"&xi;",desc:"GREEK SMALL LETTER XI"},{"char":"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{"char":"&pi;",desc:"GREEK SMALL LETTER PI"},{"char":"&rho;",desc:"GREEK SMALL LETTER RHO"},{"char":"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{"char":"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{"char":"&tau;",desc:"GREEK SMALL LETTER TAU"},{"char":"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{"char":"&phi;",desc:"GREEK SMALL LETTER PHI"},{"char":"&chi;",desc:"GREEK SMALL LETTER CHI"},{"char":"&psi;",desc:"GREEK SMALL LETTER PSI"},{"char":"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{"char":"&thetasym;",desc:"GREEK THETA SYMBOL"},{"char":"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{"char":"&straightphi;",desc:"GREEK PHI SYMBOL"},{"char":"&piv;",desc:"GREEK PI SYMBOL"},{"char":"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{"char":"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{"char":"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{"char":"&varrho;",desc:"GREEK RHO SYMBOL"},{"char":"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{"char":"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{"char":"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{"char":"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{"char":"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{"char":"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{"char":"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{"char":"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{"char":"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{"char":"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{"char":"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{"char":"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{"char":"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{"char":"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{"char":"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{"char":"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{"char":"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{"char":"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{"char":"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{"char":"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{"char":"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{"char":"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{"char":"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{"char":"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{"char":"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{"char":"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{"char":"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{"char":"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{"char":"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{"char":"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{"char":"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{"char":"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{"char":"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{"char":"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{"char":"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{"char":"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{"char":"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{"char":"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{"char":"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{"char":"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{"char":"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{"char":"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{"char":"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{"char":"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{"char":"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{"char":"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{"char":"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{"char":"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{"char":"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{"char":"&#x430",desc:"CYRILLIC SMALL LETTER A"},{"char":"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{"char":"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{"char":"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{"char":"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{"char":"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{"char":"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{"char":"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{"char":"&#x438",desc:"CYRILLIC SMALL LETTER I"},{"char":"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{"char":"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{"char":"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{"char":"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{"char":"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{"char":"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{"char":"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{"char":"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{"char":"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{"char":"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{"char":"&#x443",desc:"CYRILLIC SMALL LETTER U"},{"char":"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{"char":"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{"char":"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{"char":"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{"char":"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{"char":"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{"char":"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{"char":"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{"char":"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{"char":"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{"char":"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{"char":"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{"char":"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{"char":"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{"char":"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{"char":"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{"char":"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{"char":"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{"char":"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{"char":"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{"char":"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{"char":"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{"char":"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{"char":"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{"char":"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{"char":"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{"char":"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{"char":"&ndash;",desc:"EN DASH"},{"char":"&mdash;",desc:"EM DASH"},{"char":"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{"char":"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{"char":"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{"char":"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{"char":"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{"char":"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{"char":"&dagger;",desc:"DAGGER"},{"char":"&Dagger;",desc:"DOUBLE DAGGER"},{"char":"&bull;",desc:"BULLET"},{"char":"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{"char":"&permil;",desc:"PER MILLE SIGN"},{"char":"&prime;",desc:"PRIME"},{"char":"&Prime;",desc:"DOUBLE PRIME"},{"char":"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{"char":"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{"char":"&oline;",desc:"OVERLINE"},{"char":"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{"char":"&#x20A0",desc:"EURO-CURRENCY SIGN"},{"char":"&#x20A1",desc:"COLON SIGN"},{"char":"&#x20A2",desc:"CRUZEIRO SIGN"},{"char":"&#x20A3",desc:"FRENCH FRANC SIGN"},{"char":"&#x20A4",desc:"LIRA SIGN"},{"char":"&#x20A5",desc:"MILL SIGN"},{"char":"&#x20A6",desc:"NAIRA SIGN"},{"char":"&#x20A7",desc:"PESETA SIGN"},{"char":"&#x20A8",desc:"RUPEE SIGN"},{"char":"&#x20A9",desc:"WON SIGN"},{"char":"&#x20AA",desc:"NEW SHEQEL SIGN"},{"char":"&#x20AB",desc:"DONG SIGN"},{"char":"&#x20AC",desc:"EURO SIGN"},{"char":"&#x20AD",desc:"KIP SIGN"},{"char":"&#x20AE",desc:"TUGRIK SIGN"},{"char":"&#x20AF",desc:"DRACHMA SIGN"},{"char":"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{"char":"&#x20B1",desc:"PESO SIGN"},{"char":"&#x20B2",desc:"GUARANI SIGN"},{"char":"&#x20B3",desc:"AUSTRAL SIGN"},{"char":"&#x20B4",desc:"HRYVNIA SIGN"},{"char":"&#x20B5",desc:"CEDI SIGN"},{"char":"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{"char":"&#x20B7",desc:"SPESMILO SIGN"},{"char":"&#x20B8",desc:"TENGE SIGN"},{"char":"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{"char":"&#x2190",desc:"LEFTWARDS ARROW"},{"char":"&#x2191",desc:"UPWARDS ARROW"},{"char":"&#x2192",desc:"RIGHTWARDS ARROW"},{"char":"&#x2193",desc:"DOWNWARDS ARROW"},{"char":"&#x2194",desc:"LEFT RIGHT ARROW"},{"char":"&#x2195",desc:"UP DOWN ARROW"},{"char":"&#x2196",desc:"NORTH WEST ARROW"},{"char":"&#x2197",desc:"NORTH EAST ARROW"},{"char":"&#x2198",desc:"SOUTH EAST ARROW"},{"char":"&#x2199",desc:"SOUTH WEST ARROW"},{"char":"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{"char":"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{"char":"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{"char":"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{"char":"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{"char":"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{"char":"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{"char":"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{"char":"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{"char":"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{"char":"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{"char":"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{"char":"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{"char":"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{"char":"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{"char":"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{"char":"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{"char":"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{"char":"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{"char":"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{"char":"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{"char":"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{"char":"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{"char":"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{"char":"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{"char":"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{"char":"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{"char":"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{"char":"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{"char":"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{"char":"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{"char":"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{"char":"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{"char":"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{"char":"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{"char":"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{"char":"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{"char":"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{"char":"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{"char":"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{"char":"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{"char":"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{"char":"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{"char":"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{"char":"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{"char":"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{"char":"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{"char":"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{"char":"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{"char":"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{"char":"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{"char":"&#x21E1",desc:"UPWARDS DASHED ARROW"},{"char":"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{"char":"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{"char":"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{"char":"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{"char":"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{"char":"&#x21E7",desc:"UPWARDS WHITE ARROW"},{"char":"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{"char":"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{"char":"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{"char":"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{"char":"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{"char":"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{"char":"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{"char":"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{"char":"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{"char":"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{"char":"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{"char":"&#x21F3",desc:"UP DOWN WHITE ARROW"},{"char":"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{"char":"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{"char":"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{"char":"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{"char":"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{"char":"&forall;",desc:"FOR ALL"},{"char":"&part;",desc:"PARTIAL DIFFERENTIAL"},{"char":"&exist;",desc:"THERE EXISTS"},{"char":"&empty;",desc:"EMPTY SET"},{"char":"&nabla;",desc:"NABLA"},{"char":"&isin;",desc:"ELEMENT OF"},{"char":"&notin;",desc:"NOT AN ELEMENT OF"},{"char":"&ni;",desc:"CONTAINS AS MEMBER"},{"char":"&prod;",desc:"N-ARY PRODUCT"},{"char":"&sum;",desc:"N-ARY SUMMATION"},{"char":"&minus;",desc:"MINUS SIGN"},{"char":"&lowast;",desc:"ASTERISK OPERATOR"},{"char":"&radic;",desc:"SQUARE ROOT"},{"char":"&prop;",desc:"PROPORTIONAL TO"},{"char":"&infin;",desc:"INFINITY"},{"char":"&ang;",desc:"ANGLE"},{"char":"&and;",desc:"LOGICAL AND"},{"char":"&or;",desc:"LOGICAL OR"},{"char":"&cap;",desc:"INTERSECTION"},{"char":"&cup;",desc:"UNION"},{"char":"&int;",desc:"INTEGRAL"},{"char":"&there4;",desc:"THEREFORE"},{"char":"&sim;",desc:"TILDE OPERATOR"},{"char":"&cong;",desc:"APPROXIMATELY EQUAL TO"},{"char":"&asymp;",desc:"ALMOST EQUAL TO"},{"char":"&ne;",desc:"NOT EQUAL TO"},{"char":"&equiv;",desc:"IDENTICAL TO"},{"char":"&le;",desc:"LESS-THAN OR EQUAL TO"},{"char":"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{"char":"&sub;",desc:"SUBSET OF"},{"char":"&sup;",desc:"SUPERSET OF"},{"char":"&nsub;",desc:"NOT A SUBSET OF"},{"char":"&sube;",desc:"SUBSET OF OR EQUAL TO"},{"char":"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{"char":"&oplus;",desc:"CIRCLED PLUS"},{"char":"&otimes;",desc:"CIRCLED TIMES"},{"char":"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{"char":"&spades;",desc:"BLACK SPADE SUIT"},{"char":"&clubs;",desc:"BLACK CLUB SUIT"},{"char":"&hearts;",desc:"BLACK HEART SUIT"},{"char":"&diams;",desc:"BLACK DIAMOND SUIT"},{"char":"&#x2669",desc:"QUARTER NOTE"},{"char":"&#x266A",desc:"EIGHTH NOTE"},{"char":"&#x266B",desc:"BEAMED EIGHTH NOTES"},{"char":"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{"char":"&#x266D",desc:"MUSIC FLAT SIGN"},{"char":"&#x266E",desc:"MUSIC NATURAL SIGN"},{"char":"&#x2600",desc:"BLACK SUN WITH RAYS"},{"char":"&#x2601",desc:"CLOUD"},{"char":"&#x2602",desc:"UMBRELLA"},{"char":"&#x2603",desc:"SNOWMAN"},{"char":"&#x2615",desc:"HOT BEVERAGE"},{"char":"&#x2618",desc:"SHAMROCK"},{"char":"&#x262F",desc:"YIN YANG"},{"char":"&#x2714",desc:"HEAVY CHECK MARK"},{"char":"&#x2716",desc:"HEAVY MULTIPLICATION X"},{"char":"&#x2744",desc:"SNOWFLAKE"},{"char":"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x2764",desc:"HEAVY BLACK HEART"}]}]}),ze.FE.PLUGINS.specialCharacters=function(a){function e(){}function i(){for(var e='<div class="fr-special-characters-modal">',t=0;t<ze.FE.DEFAULTS.specialCharactersSets.length;t++){for(var n=ze.FE.DEFAULTS.specialCharactersSets[t],i=n.list,r='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+a.language.translate(n.title)+"</p>",o=0;o<i.length;o++){var s=i[o];r+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+s["char"]+'" title="'+s.desc+'">'+s["char"]+'<span class="fr-sr-only">'+a.language.translate(s.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}e+=r+"</div>"}return e+"</div>"}function s(e,t){a.events.disableBlur(),e.focus(),t.preventDefault(),t.stopPropagation()}function r(){a.events.$on(c,"keydown",function(e){var t=e.which,n=c.find("span.fr-special-character:focus:first");if(!(n.length||t!=ze.FE.KEYCODE.F10||a.keys.ctrlKey(e)||e.shiftKey)&&e.altKey)return s(c.find("span.fr-special-character:first"),e),!1;if(t==ze.FE.KEYCODE.TAB||t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT){var i=null,r=null,o=!1;return t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT?(r=t==ze.FE.KEYCODE.ARROW_RIGHT,o=!0):r=!e.shiftKey,n.length?(o&&(i=r?n.nextAll("span.fr-special-character:first"):n.prevAll("span.fr-special-character:first")),i&&i.length||((i=r?n.parent().next().find("span.fr-special-character:first"):n.parent().prev().find("span.fr-special-character:"+(o?"last":"first"))).length||(i=c.find("span.fr-special-character:"+(r?"first":"last"))))):i=c.find("span.fr-special-character:"+(r?"first":"last")),s(i,e),!1}if(t!=ze.FE.KEYCODE.ENTER||!n.length)return!0;(l.data("instance")||a).specialCharacters.insert(n)},!0)}function t(){if(!l){var e="<h4>"+a.language.translate("Special Characters")+"</h4>",t=i(),n=a.modals.create(d,e,t);l=n.$modal,n.$head,c=n.$body,a.events.$on(ze(a.o_win),"resize",function(){(l.data("instance")||a).modals.resize(d)}),a.events.bindClick(c,".fr-special-character",function(e){var t=l.data("instance")||a,n=ze(e.currentTarget);t.specialCharacters.insert(n)}),r()}a.modals.show(d),a.modals.resize(d)}function n(){a.modals.hide(d)}function o(e){a.specialCharacters.hide(),a.undo.saveStep(),a.html.insert(e.attr("value"),!0),a.undo.saveStep()}var l,c,d="special_characters";return{_init:e,show:t,hide:n,insert:o}},ze.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),ze.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"specialCharacters",showOnMobile:!1}),ze.extend(ze.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),ze.extend(ze.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),ze.FE.PLUGINS.table=function(_){function e(){var e=_.$tb.find('.fr-command[data-cmd="insertTable"]'),t=_.popups.get("table.insert");if(t||(t=o()),!t.hasClass("fr-active")){_.popups.refresh("table.insert"),_.popups.setContainer("table.insert",_.$tb);var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(_.opts.toolbarBottom?10:e.outerHeight()-10);_.popups.show("table.insert",n,i,e.outerHeight())}}function h(){var e=L();if(e){var t=_.popups.get("table.edit");if(t||(t=l()),t){_.popups.setContainer("table.edit",_.$sc);var n=W(e),i=(n.left+n.right)/2,r=n.bottom;_.popups.show("table.edit",i,r,n.bottom-n.top),_.edit.isDisabled()&&(_.toolbar.disable(),_.$el.removeClass("fr-no-selection"),_.edit.on(),_.button.bulkRefresh(),_.selection.setAtEnd(_.$el.find(".fr-selected-cell:last").get(0)),_.selection.restore())}}}function i(){var e=L();if(e){var t=_.popups.get("table.colors");t||(t=c()),_.popups.setContainer("table.colors",_.$sc);var n=W(e),i=(n.left+n.right)/2,r=n.bottom;p(),_.popups.show("table.colors",i,r,n.bottom-n.top)}}function r(){0===ve().length&&_.toolbar.enable()}function o(e){if(e)return _.popups.onHide("table.insert",function(){_.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var t="";0<_.opts.tableInsertButtons.length&&(t='<div class="fr-buttons">'+_.button.buildList(_.opts.tableInsertButtons)+"</div>");var n={buttons:t,rows_columns:s()},i=_.popups.create("table.insert",n);return _.events.$on(i,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(e){u(ze(e.currentTarget))},!0),a(i),i}function u(e){var t=e.data("row"),n=e.data("col"),i=e.parent();i.siblings(".fr-table-size-info").html(t+" &times; "+n),i.find("> span").removeClass("hover fr-active-item");for(var r=1;r<=_.opts.tableInsertMaxSize;r++)for(var o=0;o<=_.opts.tableInsertMaxSize;o++){var s=i.find('> span[data-row="'+r+'"][data-col="'+o+'"]');r<=t&&o<=n?s.addClass("hover"):r<=t+1||r<=2&&!_.helpers.isMobile()?s.css("display","inline-block"):2<r&&!_.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function s(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',t=1;t<=_.opts.tableInsertMaxSize;t++){for(var n=1;n<=_.opts.tableInsertMaxSize;n++){var i="inline-block";2<t&&!_.helpers.isMobile()&&(i="none");var r="fr-table-cell ";1==t&&1==n&&(r+=" hover"),e+='<span class="fr-command '+r+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+t+'" data-col="'+n+'" data-param1="'+t+'" data-param2="'+n+'" style="display: '+i+';" role="button"><span></span><span class="fr-sr-only">'+t+" &times; "+n+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+"</div></div>"}function a(e){_.events.$on(e,"focus","[tabIndex]",function(e){u(ze(e.currentTarget))}),_.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!_.popups.isVisible("table.insert")||!t.is("span, a"))return!0;var n,i=e.which;if(ze.FE.KEYCODE.ARROW_UP==i||ze.FE.KEYCODE.ARROW_DOWN==i||ze.FE.KEYCODE.ARROW_LEFT==i||ze.FE.KEYCODE.ARROW_RIGHT==i){if(t.is("span.fr-table-cell")){var r=t.parent().find("span.fr-table-cell"),o=r.index(t),s=_.opts.tableInsertMaxSize,a=o%s,l=Math.floor(o/s);ze.FE.KEYCODE.ARROW_UP==i?l=Math.max(0,l-1):ze.FE.KEYCODE.ARROW_DOWN==i?l=Math.min(_.opts.tableInsertMaxSize-1,l+1):ze.FE.KEYCODE.ARROW_LEFT==i?a=Math.max(0,a-1):ze.FE.KEYCODE.ARROW_RIGHT==i&&(a=Math.min(_.opts.tableInsertMaxSize-1,a+1));var c=l*s+a,d=ze(r.get(c));u(d),_.events.disableBlur(),d.focus(),n=!1}}else ze.FE.KEYCODE.ENTER==i&&(_.button.exec(t),n=!1);return!1===n&&(e.preventDefault(),e.stopPropagation()),n},!0)}function l(e){if(e)return _.popups.onHide("table.edit",r),!0;if(0<_.opts.tableEditButtons.length){var t={buttons:'<div class="fr-buttons">'+_.button.buildList(_.opts.tableEditButtons)+"</div>"},n=_.popups.create("table.edit",t);return _.events.$on(_.$wp,"scroll.table-edit",function(){_.popups.isVisible("table.edit")&&h()}),n}return!1}function c(){var e="";0<_.opts.tableColorsButtons.length&&(e='<div class="fr-buttons fr-table-colors-buttons">'+_.button.buildList(_.opts.tableColorsButtons)+"</div>");var t={buttons:e,colors:d()},n=_.popups.create("table.colors",t);return _.events.$on(_.$wp,"scroll.table-colors",function(){_.popups.isVisible("table.colors")&&i()}),f(n),n}function d(){for(var e='<div class="fr-table-colors">',t=0;t<_.opts.tableColors.length;t++)0!==t&&t%_.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=_.opts.tableColors[t]?e+='<span class="fr-command" style="background: '+_.opts.tableColors[t]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+_.opts.tableColors[t]+'"><span class="fr-sr-only">'+_.language.translate("Color")+" "+_.opts.tableColors[t]+"&nbsp;&nbsp;&nbsp;</span></span>":e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+_.language.translate("Clear Formatting")+'">'+_.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+_.language.translate("Clear Formatting")+"</span></span>";return e+"</div>"}function f(h){_.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!_.popups.isVisible("table.colors")||!t.is("span"))return!0;var n=e.which,i=!0;if(ze.FE.KEYCODE.TAB==n){var r=h.find(".fr-buttons");i=!_.accessibility.focusToolbar(r,!!e.shiftKey)}else if(ze.FE.KEYCODE.ARROW_UP==n||ze.FE.KEYCODE.ARROW_DOWN==n||ze.FE.KEYCODE.ARROW_LEFT==n||ze.FE.KEYCODE.ARROW_RIGHT==n){var o=t.parent().find("span.fr-command"),s=o.index(t),a=_.opts.colorsStep,l=Math.floor(o.length/a),c=s%a,d=Math.floor(s/a)*a+c,u=l*a;ze.FE.KEYCODE.ARROW_UP==n?d=((d-a)%u+u)%u:ze.FE.KEYCODE.ARROW_DOWN==n?d=(d+a)%u:ze.FE.KEYCODE.ARROW_LEFT==n?d=((d-1)%u+u)%u:ze.FE.KEYCODE.ARROW_RIGHT==n&&(d=(d+1)%u);var f=ze(o.get(d));_.events.disableBlur(),f.focus(),i=!1}else ze.FE.KEYCODE.ENTER==n&&(_.button.exec(t),i=!1);return!1===i&&(e.preventDefault(),e.stopPropagation()),i},!0)}function p(){var e=_.popups.get("table.colors"),t=_.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+_.helpers.RGBToHex(t.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function t(e,t){var n,i,r='<table style="width: 100%;" class="fr-inserted-table"><tbody>',o=100/t;for(n=0;n<e;n++){for(r+="<tr>",i=0;i<t;i++)r+='<td style="width: '+o.toFixed(4)+'%;">',0===n&&0===i&&(r+=ze.FE.MARKERS),r+="<br></td>";r+="</tr>"}r+="</tbody></table>",_.html.insert(r),_.selection.restore();var s=_.$el.find(".fr-inserted-table");s.removeClass("fr-inserted-table"),_.events.trigger("table.inserted",[s.get(0)])}function g(){if(0<ve().length){var e=be();_.selection.setBefore(e.get(0))||_.selection.setAfter(e.get(0)),_.selection.restore(),_.popups.hide("table.edit"),e.remove(),_.toolbar.enable()}}function n(){var e=be();if(0<e.length&&0===e.find("th").length){var t,n="<thead><tr>",i=0;for(e.find("tr:first > td").each(function(){var e=ze(this);i+=parseInt(e.attr("colspan"),10)||1}),t=0;t<i;t++)n+="<th><br></th>";n+="</tr></thead>",e.prepend(n),h()}}function m(){var e=be(),t=e.find("thead");if(0<t.length)if(0===e.find("tbody tr").length)g();else if(t.remove(),0<ve().length)h();else{_.popups.hide("table.edit");var n=e.find("tbody tr:first td:first").get(0);n&&(_.selection.setAtEnd(n),_.selection.restore())}}function v(e){var t=be();if(0<t.length){if(0<_.$el.find("th.fr-selected-cell").length&&"above"==e)return;var n,i,r,o=L(),s=H(o);i="above"==e?s.min_i:s.max_i;var a="<tr>";for(n=0;n<o[i].length;n++)if("below"==e&&i<o.length-1&&o[i][n]==o[i+1][n]||"above"==e&&0<i&&o[i][n]==o[i-1][n]){if(0===n||0<n&&o[i][n]!=o[i][n-1]){var l=ze(o[i][n]);l.attr("rowspan",parseInt(l.attr("rowspan"),10)+1)}}else a+="<td><br></td>";a+="</tr>",r=ze(0<_.$el.find("th.fr-selected-cell").length&&"below"==e?t.find("tbody").not(t.find("table tbody")):t.find("tr").not(t.find("table tr")).get(i)),"below"==e?"TBODY"==r.prop("tagName")?r.prepend(a):r.after(a):"above"==e&&(r.before(a),_.popups.isVisible("table.edit")&&h())}}function b(){var e=be();if(0<e.length){var t,n,i,r=L(),o=H(r);if(0===o.min_i&&o.max_i==r.length-1)g();else{for(t=o.max_i;t>=o.min_i;t--){for(i=ze(e.find("tr").not(e.find("table tr")).get(t)),n=0;n<r[t].length;n++)if(0===n||r[t][n]!=r[t][n-1]){var s=ze(r[t][n]);if(1<parseInt(s.attr("rowspan"),10)){var a=parseInt(s.attr("rowspan"),10)-1;1==a?s.removeAttr("rowspan"):s.attr("rowspan",a)}if(t<r.length-1&&r[t][n]==r[t+1][n]&&(0===t||r[t][n]!=r[t-1][n])){for(var l=r[t][n],c=n;0<c&&r[t][c]==r[t][c-1];)c--;0===c?ze(e.find("tr").not(e.find("table tr")).get(t+1)).prepend(l):ze(r[t+1][c-1]).after(l)}}var d=i.parent();i.remove(),0===d.find("tr").length&&d.remove(),r=L(e)}S(0,r.length-1,0,r[0].length-1,e),0<o.min_i?_.selection.setAtEnd(r[o.min_i-1][0]):_.selection.setAtEnd(r[0][0]),_.selection.restore(),_.popups.hide("table.edit")}}}function E(l){var e=be();if(0<e.length){var c,d=L(),t=H(d);c="before"==l?t.min_j:t.max_j;var n,u=100/d[0].length,f=100/(d[0].length+1);e.find("th, td").each(function(){(n=ze(this)).data("old-width",n.outerWidth()/e.outerWidth()*100)}),e.find("tr").not(e.find("table tr")).each(function(e){for(var t,n=ze(this),i=0,r=0;i-1<c;){if(!(t=n.find("> th, > td").get(r))){t=null;break}t==d[e][i]?(i+=parseInt(ze(t).attr("colspan"),10)||1,r++):(i+=parseInt(ze(d[e][i]).attr("colspan"),10)||1,"after"==l&&(t=0===r?-1:n.find("> th, > td").get(r-1)))}var o,s=ze(t);if("after"==l&&c<i-1||"before"==l&&0<c&&d[e][c]==d[e][c-1]){if(0===e||0<e&&d[e][c]!=d[e-1][c]){var a=parseInt(s.attr("colspan"),10)+1;s.attr("colspan",a),s.css("width",(s.data("old-width")*f/u+f).toFixed(4)+"%"),s.removeData("old-width")}}else o=0<n.find("th").length?'<th style="width: '+f.toFixed(4)+'%;"><br></th>':'<td style="width: '+f.toFixed(4)+'%;"><br></td>',-1==t?n.prepend(o):null==t?n.append(o):"before"==l?s.before(o):"after"==l&&s.after(o)}),e.find("th, td").each(function(){(n=ze(this)).data("old-width")&&(n.css("width",(n.data("old-width")*f/u).toFixed(4)+"%"),n.removeData(
"old-width"))}),_.popups.isVisible("table.edit")&&h()}}function y(){var e=be();if(0<e.length){var t,n,i,r=L(),o=H(r);if(0===o.min_j&&o.max_j==r[0].length-1)g();else{var s=100/r[0].length,a=100/(r[0].length-o.max_j+o.min_j-1);for(e.find("th, td").each(function(){(i=ze(this)).hasClass("fr-selected-cell")||i.data("old-width",i.outerWidth()/e.outerWidth()*100)}),n=o.max_j;n>=o.min_j;n--)for(t=0;t<r.length;t++)if(0===t||r[t][n]!=r[t-1][n])if(i=ze(r[t][n]),1<(parseInt(i.attr("colspan"),10)||1)){var l=parseInt(i.attr("colspan"),10)-1;1==l?i.removeAttr("colspan"):i.attr("colspan",l),i.css("width",((i.data("old-width")-ce(n,r))*a/s).toFixed(4)+"%"),i.removeData("old-width")}else{var c=ze(i.parent().get(0));i.remove(),0===c.find("> th, > td").length&&(0===c.prev().length||0===c.next().length||c.prev().find("> th[rowspan], > td[rowspan]").length<c.prev().find("> th, > td").length)&&c.remove()}S(0,r.length-1,0,r[0].length-1,e),0<o.min_j?_.selection.setAtEnd(r[o.min_i][o.min_j-1]):_.selection.setAtEnd(r[o.min_i][0]),_.selection.restore(),_.popups.hide("table.edit"),e.find("th, td").each(function(){(i=ze(this)).data("old-width")&&(i.css("width",(i.data("old-width")*a/s).toFixed(4)+"%"),i.removeData("old-width"))})}}}function T(e,t,n){var i,r,o,s,a,l=0,c=L(n);for(t=Math.min(t,c[0].length-1),r=e;r<=t;r++)if(!(e<r&&c[0][r]==c[0][r-1])&&1<(s=parseInt(c[0][r].getAttribute("colspan"),10)||1)&&c[0][r]==c[0][r+1])for(l=s-1,i=1;i<c.length;i++)if(c[i][r]!=c[i-1][r]){for(o=r;o<r+s;o++)if(1<(a=parseInt(c[i][o].getAttribute("colspan"),10)||1)&&c[i][o]==c[i][o+1])o+=l=Math.min(l,a-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&A(c,l,"colspan",0,c.length-1,e,t)}function C(e,t,n){var i,r,o,s,a,l=0,c=L(n);for(t=Math.min(t,c.length-1),i=e;i<=t;i++)if(!(e<i&&c[i][0]==c[i-1][0])&&1<(s=parseInt(c[i][0].getAttribute("rowspan"),10)||1)&&c[i][0]==c[i+1][0])for(l=s-1,r=1;r<c[0].length;r++)if(c[i][r]!=c[i][r-1]){for(o=i;o<i+s;o++)if(1<(a=parseInt(c[o][r].getAttribute("rowspan"),10)||1)&&c[o][r]==c[o+1][r])o+=l=Math.min(l,a-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&A(c,l,"rowspan",e,t,0,c[0].length-1)}function A(e,t,n,i,r,o,s){var a,l,c;for(a=i;a<=r;a++)for(l=o;l<=s;l++)i<a&&e[a][l]==e[a-1][l]||o<l&&e[a][l]==e[a][l-1]||1<(c=parseInt(e[a][l].getAttribute(n),10)||1)&&(1<c-t?e[a][l].setAttribute(n,c-t):e[a][l].removeAttribute(n))}function S(e,t,n,i,r){C(e,t,r),T(n,i,r)}function w(){if(1<ve().length&&(0===_.$el.find("th.fr-selected-cell").length||0===_.$el.find("td.fr-selected-cell").length)){F();var e,t,n=H(L()),i=_.$el.find(".fr-selected-cell"),r=ze(i[0]),o=r.parent().find(".fr-selected-cell"),s=r.closest("table"),a=r.html(),l=0;for(e=0;e<o.length;e++)l+=ze(o[e]).outerWidth();for(r.css("width",(l/s.outerWidth()*100).toFixed(4)+"%"),n.min_j<n.max_j&&r.attr("colspan",n.max_j-n.min_j+1),n.min_i<n.max_i&&r.attr("rowspan",n.max_i-n.min_i+1),e=1;e<i.length;e++)"<br>"!=(t=ze(i[e])).html()&&""!==t.html()&&(a+="<br>"+t.html()),t.remove();r.html(a),_.selection.setAtEnd(r.get(0)),_.selection.restore(),_.toolbar.enable(),C(n.min_i,n.max_i,s);var c=s.find("tr:empty");for(e=c.length-1;0<=e;e--)ze(c[e]).remove();T(n.min_j,n.max_j,s),h()}}function x(){if(1==ve().length){var e=_.$el.find(".fr-selected-cell"),t=e.parent(),n=e.closest("table"),i=parseInt(e.attr("rowspan"),10),r=L(),o=k(e.get(0),r),s=e.clone().html("<br>");if(1<i){var a=Math.ceil(i/2);1<a?e.attr("rowspan",a):e.removeAttr("rowspan"),1<i-a?s.attr("rowspan",i-a):s.removeAttr("rowspan");for(var l=o.row+a,c=0===o.col?o.col:o.col-1;0<=c&&(r[l][c]==r[l][c-1]||0<l&&r[l][c]==r[l-1][c]);)c--;-1==c?ze(n.find("tr").not(n.find("table tr")).get(l)).prepend(s):ze(r[l][c]).after(s)}else{var d,u=ze("<tr>").append(s);for(d=0;d<r[0].length;d++)if(0===d||r[o.row][d]!=r[o.row][d-1]){var f=ze(r[o.row][d]);f.is(e)||f.attr("rowspan",(parseInt(f.attr("rowspan"),10)||1)+1)}t.after(u)}P(),_.popups.hide("table.edit")}}function R(){if(1==ve().length){var e=_.$el.find(".fr-selected-cell"),t=parseInt(e.attr("colspan"),10)||1,n=e.parent().outerWidth(),i=e.outerWidth(),r=e.clone().html("<br>"),o=L(),s=k(e.get(0),o);if(1<t){var a=Math.ceil(t/2);i=de(s.col,s.col+a-1,o)/n*100;var l=de(s.col+a,s.col+t-1,o)/n*100;1<a?e.attr("colspan",a):e.removeAttr("colspan"),1<t-a?r.attr("colspan",t-a):r.removeAttr("colspan"),e.css("width",i.toFixed(4)+"%"),r.css("width",l.toFixed(4)+"%")}else{var c;for(c=0;c<o.length;c++)if(0===c||o[c][s.col]!=o[c-1][s.col]){var d=ze(o[c][s.col]);if(!d.is(e)){var u=(parseInt(d.attr("colspan"),10)||1)+1;d.attr("colspan",u)}}i=i/n*100/2,e.css("width",i.toFixed(4)+"%"),r.css("width",i.toFixed(4)+"%")}e.after(r),P(),_.popups.hide("table.edit")}}function I(e){"REMOVE"!=e?_.$el.find(".fr-selected-cell").css("background-color",_.helpers.HEXtoRGB(e)):_.$el.find(".fr-selected-cell").css("background-color","")}function D(e){_.$el.find(".fr-selected-cell").css("vertical-align",e)}function N(e){_.$el.find(".fr-selected-cell").css("text-align",e)}function O(e,t,n,i){if(0<t.length){if(!n){var r=Object.keys(i);r.splice(r.indexOf(e),1),t.removeClass(r.join(" "))}t.toggleClass(e)}}function L(e){var c=[];if(null==(e=e||null)&&0<ve().length&&(e=be()),e)return e.find("tr").not(e.find("table tr")).each(function(a,e){var t=ze(e),l=0;t.find("> th, > td").each(function(e,t){for(var n=ze(t),i=parseInt(n.attr("colspan"),10)||1,r=parseInt(n.attr("rowspan"),10)||1,o=a;o<a+r;o++)for(var s=l;s<l+i;s++)c[o]||(c[o]=[]),c[o][s]?l++:c[o][s]=t;l+=i})}),c}function k(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(t[n][i]==e)return{row:n,col:i}}function M(e,t,n){for(var i=e+1,r=t+1;i<n.length;){if(n[i][t]!=n[e][t]){i--;break}i++}for(i==n.length&&i--;r<n[e].length;){if(n[e][r]!=n[e][t]){r--;break}r++}return r==n[e].length&&r--,{row:i,col:r}}function F(){_.el.querySelector(".fr-cell-fixed")&&_.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),_.el.querySelector(".fr-cell-handler")&&_.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function P(){var e=_.$el.find(".fr-selected-cell");0<e.length&&e.each(function(){var e=ze(this);e.removeClass("fr-selected-cell"),""===e.attr("class")&&e.removeAttr("class")}),F()}function $(){setTimeout(function(){_.selection.clear(),_.$el.addClass("fr-no-selection"),_.$el.blur()},0)}function H(e){var t=_.$el.find(".fr-selected-cell");if(0<t.length){var n,i=e.length,r=0,o=e[0].length,s=0;for(n=0;n<t.length;n++){var a=k(t[n],e),l=M(a.row,a.col,e);i=Math.min(a.row,i),r=Math.max(l.row,r),o=Math.min(a.col,o),s=Math.max(l.col,s)}return{min_i:i,max_i:r,min_j:o,max_j:s}}return null}function B(e,t,n,i,r){var o,s,a,l,c=e,d=t,u=n,f=i;for(o=c;o<=d;o++)(1<(parseInt(ze(r[o][u]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[o][u]).attr("colspan"),10)||1))&&(l=M((a=k(r[o][u],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),u=Math.min(a.col,u),f=Math.max(l.col,f)),(1<(parseInt(ze(r[o][f]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[o][f]).attr("colspan"),10)||1))&&(l=M((a=k(r[o][f],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),u=Math.min(a.col,u),f=Math.max(l.col,f));for(s=u;s<=f;s++)(1<(parseInt(ze(r[c][s]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[c][s]).attr("colspan"),10)||1))&&(l=M((a=k(r[c][s],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),u=Math.min(a.col,u),f=Math.max(l.col,f)),(1<(parseInt(ze(r[d][s]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[d][s]).attr("colspan"),10)||1))&&(l=M((a=k(r[d][s],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),u=Math.min(a.col,u),f=Math.max(l.col,f));return c==e&&d==t&&u==n&&f==i?{min_i:e,max_i:t,min_j:n,max_j:i}:B(c,d,u,f,r)}function W(e){var t=H(e),n=ze(e[t.min_i][t.min_j]),i=ze(e[t.min_i][t.max_j]),r=ze(e[t.max_i][t.min_j]);return{left:n.offset().left,right:i.offset().left+i.outerWidth(),top:n.offset().top,bottom:r.offset().top+r.outerHeight()}}function U(e,t){if(ze(e).is(t))P(),_.edit.on(),ze(e).addClass("fr-selected-cell");else{$(),_.edit.off();var n=L(),i=k(e,n),r=k(t,n),o=B(Math.min(i.row,r.row),Math.max(i.row,r.row),Math.min(i.col,r.col),Math.max(i.col,r.col),n);P(),e.classList.add("fr-cell-fixed"),t.classList.add("fr-cell-handler");for(var s=o.min_i;s<=o.max_i;s++)for(var a=o.min_j;a<=o.max_j;a++)ze(n[s][a]).addClass("fr-selected-cell")}}function K(e){var t=null,n=ze(e.target);return"TD"==e.target.tagName||"TH"==e.target.tagName?t=e.target:0<n.closest("td").length?t=n.closest("td").get(0):0<n.closest("th").length&&(t=n.closest("th").get(0)),0===_.$el.find(t).length?null:t}function z(){P(),_.popups.hide("table.edit")}function j(e){var t=K(e);if(0<ve().length&&!t&&z(),!_.edit.isDisabled()||_.popups.isVisible("table.edit"))if(1!=e.which||1==e.which&&_.helpers.isMac()&&e.ctrlKey)(3==e.which||1==e.which&&_.helpers.isMac()&&e.ctrlKey)&&t&&z();else if(Se=!0,t){0<ve().length&&!e.shiftKey&&z(),e.stopPropagation(),_.events.trigger("image.hideResizer"),_.events.trigger("video.hideResizer"),Ae=!0;var n=t.tagName.toLowerCase();e.shiftKey&&0<_.$el.find(n+".fr-selected-cell").length?ze(_.$el.find(n+".fr-selected-cell").closest("table")).is(ze(t).closest("table"))?U(we,t):$():((_.keys.ctrlKey(e)||e.shiftKey)&&(1<ve().length||0===ze(t).find(_.selection.element()).length&&!ze(t).is(_.selection.element()))&&$(),U(we=t,we))}}function Y(e){if(Ae||_.$tb.is(e.target)||_.$tb.is(ze(e.target).closest(_.$tb.get(0)))||(0<ve().length&&_.toolbar.enable(),P()),!(1!=e.which||1==e.which&&_.helpers.isMac()&&e.ctrlKey)&&(Se=!1,Ae&&(Ae=!1,K(e)||1!=ve().length?0<ve().length&&(_.selection.isCollapsed()?h():P()):P()),Re)){Re=!1,Te.removeClass("fr-moving"),_.$el.removeClass("fr-no-selection"),_.edit.on();var t=parseFloat(Te.css("left"))+_.opts.tableResizerOffset;_.opts.iframe&&(t-=_.$iframe.offset().left),Te.data("release-position",t),Te.removeData("max-left"),Te.removeData("max-right"),le(e),ee()}}function q(e){if(!0===Ae){if(ze(e.currentTarget).closest("table").is(be())){if("TD"==e.currentTarget.tagName&&0===_.$el.find("th.fr-selected-cell").length)return void U(we,e.currentTarget);if("TH"==e.currentTarget.tagName&&0===_.$el.find("td.fr-selected-cell").length)return void U(we,e.currentTarget)}$()}}function G(e,t){for(var n=e;n&&"TABLE"!=n.tagName&&n.parentNode!=_.el;)n=n.parentNode;if(n&&"TABLE"==n.tagName){var i=L(ze(n));"up"==t?X(k(e,i),n,i):"down"==t&&Q(k(e,i),n,i)}}function V(e,t,n,i){for(var r,o=t;o!=_.el&&"TD"!=o.tagName&&"TH"!=o.tagName&&("up"==i?r=o.previousElementSibling:"down"==i&&(r=o.nextElementSibling),!r);)o=o.parentNode;"TD"==o.tagName||"TH"==o.tagName?G(o,i):r&&("up"==i&&_.selection.setAtEnd(r),"down"==i&&_.selection.setAtStart(r))}function X(e,t,n){0<e.row?_.selection.setAtEnd(n[e.row-1][e.col]):V(e,t,n,"up")}function Q(e,t,n){var i=parseInt(n[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<n.length-i?_.selection.setAtStart(n[e.row+i][e.col]):V(e,t,n,"down")}function Z(e){var t=e.which,n=_.selection.blocks();if(n.length&&("TD"==(n=n[0]).tagName||"TH"==n.tagName)){for(var i=n;i&&"TABLE"!=i.tagName&&i.parentNode!=_.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName&&(ze.FE.KEYCODE.ARROW_LEFT==t||ze.FE.KEYCODE.ARROW_UP==t||ze.FE.KEYCODE.ARROW_RIGHT==t||ze.FE.KEYCODE.ARROW_DOWN==t)&&(0<ve().length&&z(),_.browser.webkit&&(ze.FE.KEYCODE.ARROW_UP==t||ze.FE.KEYCODE.ARROW_DOWN==t))){var r=_.selection.ranges(0).startContainer;if(r.nodeType==Node.TEXT_NODE&&(ze.FE.KEYCODE.ARROW_UP==t&&r.previousSibling||ze.FE.KEYCODE.ARROW_DOWN==t&&r.nextSibling))return;e.preventDefault(),e.stopPropagation();var o=L(ze(i)),s=k(n,o);return ze.FE.KEYCODE.ARROW_UP==t?X(s,i,o):ze.FE.KEYCODE.ARROW_DOWN==t&&Q(s,i,o),_.selection.restore(),!1}}}function J(){_.shared.$table_resizer||(_.shared.$table_resizer=ze('<div class="fr-table-resizer"><div></div></div>')),Te=_.shared.$table_resizer,_.events.$on(Te,"mousedown",function(e){return!_.core.sameInstance(Te)||(0<ve().length&&z(),1==e.which?(_.selection.save(),Re=!0,Te.addClass("fr-moving"),$(),_.edit.off(),Te.find("div").css("opacity",1),!1):void 0)}),_.events.$on(Te,"mousemove",function(e){if(!_.core.sameInstance(Te))return!0;Re&&(_.opts.iframe&&(e.pageX-=_.$iframe.offset().left),ue(e))}),_.events.on("shared.destroy",function(){Te.html("").removeData().remove(),Te=null},!0),_.events.on("destroy",function(){_.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Te.hide().appendTo(ze("body:first"))},!0)}function ee(){Te&&(Te.find("div").css("opacity",0),Te.css("top",0),Te.css("left",0),Te.css("height",0),Te.find("div").css("height",0),Te.hide())}function te(){Ce&&Ce.removeClass("fr-visible").css("left","-9999px")}function ne(e,t){var n=ze(t),i=n.closest("table"),r=i.parent();if(t&&"TD"!=t.tagName&&"TH"!=t.tagName&&(0<n.closest("td").length?t=n.closest("td"):0<n.closest("th").length&&(t=n.closest("th"))),!t||"TD"!=t.tagName&&"TH"!=t.tagName)Te&&n.get(0)!=Te.get(0)&&n.parent().get(0)!=Te.get(0)&&_.core.sameInstance(Te)&&ee();else{if(n=ze(t),0===_.$el.find(n).length)return!1;var o=n.offset().left-1,s=o+n.outerWidth();if(Math.abs(e.pageX-o)<=_.opts.tableResizerOffset||Math.abs(s-e.pageX)<=_.opts.tableResizerOffset){var a,l,c,d,u,f=L(i),h=k(t,f),p=M(h.row,h.col,f),g=i.offset().top,m=i.outerHeight()-1;"rtl"!=_.opts.direction?e.pageX-o<=_.opts.tableResizerOffset?(c=o,0<h.col?(d=o-ce(h.col-1,f)+_.opts.tableResizingLimit,u=o+ce(h.col,f)-_.opts.tableResizingLimit,a=h.col-1,l=h.col):(a=null,l=0,d=i.offset().left-1-parseInt(i.css("margin-left"),10),u=i.offset().left-1+i.width()-f[0].length*_.opts.tableResizingLimit)):s-e.pageX<=_.opts.tableResizerOffset&&(c=s,p.col<f[p.row].length&&f[p.row][p.col+1]?(d=s-ce(p.col,f)+_.opts.tableResizingLimit,u=s+ce(p.col+1,f)-_.opts.tableResizingLimit,a=p.col,l=p.col+1):(a=p.col,l=null,d=i.offset().left-1+f[0].length*_.opts.tableResizingLimit,u=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):s-e.pageX<=_.opts.tableResizerOffset?(c=s,0<h.col?(d=s-ce(h.col,f)+_.opts.tableResizingLimit,u=s+ce(h.col-1,f)-_.opts.tableResizingLimit,a=h.col,l=h.col-1):(a=null,l=0,d=i.offset().left+f[0].length*_.opts.tableResizingLimit,u=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):e.pageX-o<=_.opts.tableResizerOffset&&(c=o,p.col<f[p.row].length&&f[p.row][p.col+1]?(d=o-ce(p.col+1,f)+_.opts.tableResizingLimit,u=o+ce(p.col,f)-_.opts.tableResizingLimit,a=p.col+1,l=p.col):(a=p.col,l=null,d=r.offset().left+parseFloat(r.css("padding-left")),u=i.offset().left-1+i.width()-f[0].length*_.opts.tableResizingLimit)),Te||J(),Te.data("table",i),Te.data("first",a),Te.data("second",l),Te.data("instance",_),_.$wp.append(Te);var v=c-_.win.pageXOffset-_.opts.tableResizerOffset,b=g-_.win.pageYOffset;_.opts.iframe&&(v+=_.$iframe.offset().left-_.helpers.scrollLeft(),b+=_.$iframe.offset().top-_.helpers.scrollTop(),d+=_.$iframe.offset().left,u+=_.$iframe.offset().left),Te.data("max-left",d),Te.data("max-right",u),Te.data("origin",c-_.win.pageXOffset),Te.css("top",b),Te.css("left",v),Te.css("height",m),Te.find("div").css("height",m),Te.css("padding-left",_.opts.tableResizerOffset),Te.css("padding-right",_.opts.tableResizerOffset),Te.show()}else _.core.sameInstance(Te)&&ee()}}function ie(e,t){if(_.$box.find(".fr-line-breaker").is(":visible"))return!1;Ce||pe(),_.$box.append(Ce),Ce.data("instance",_);var n,i=ze(t).find("tr:first"),r=e.pageX,o=0,s=0;_.opts.iframe&&(o+=_.$iframe.offset().left-_.helpers.scrollLeft(),s+=_.$iframe.offset().top-_.helpers.scrollTop()),i.find("th, td").each(function(){var e=ze(this);return e.offset().left<=r&&r<e.offset().left+e.outerWidth()/2?(n=parseInt(Ce.find("a").css("width"),10),Ce.css("top",s+e.offset().top-_.win.pageYOffset-n-5),Ce.css("left",o+e.offset().left-_.win.pageXOffset-n/2),Ce.data("selected-cell",e),Ce.data("position","before"),Ce.addClass("fr-visible"),!1):e.offset().left+e.outerWidth()/2<=r&&r<e.offset().left+e.outerWidth()?(n=parseInt(Ce.find("a").css("width"),10),Ce.css("top",s+e.offset().top-_.win.pageYOffset-n-5),Ce.css("left",o+e.offset().left+e.outerWidth()-_.win.pageXOffset-n/2),Ce.data("selected-cell",e),Ce.data("position","after"),Ce.addClass("fr-visible"),!1):void 0})}function re(e,t){if(_.$box.find(".fr-line-breaker").is(":visible"))return!1;Ce||pe(),_.$box.append(Ce),Ce.data("instance",_);var n,i=ze(t),r=e.pageY,o=0,s=0;_.opts.iframe&&(o+=_.$iframe.offset().left-_.helpers.scrollLeft(),s+=_.$iframe.offset().top-_.helpers.scrollTop()),i.find("tr").each(function(){var e=ze(this);return e.offset().top<=r&&r<e.offset().top+e.outerHeight()/2?(n=parseInt(Ce.find("a").css("width"),10),Ce.css("top",s+e.offset().top-_.win.pageYOffset-n/2),Ce.css("left",o+e.offset().left-_.win.pageXOffset-n-5),Ce.data("selected-cell",e.find("td:first")),Ce.data("position","above"),Ce.addClass("fr-visible"),!1):e.offset().top+e.outerHeight()/2<=r&&r<e.offset().top+e.outerHeight()?(n=parseInt(Ce.find("a").css("width"),10),Ce.css("top",s+e.offset().top+e.outerHeight()-_.win.pageYOffset-n/2),Ce.css("left",o+e.offset().left-_.win.pageXOffset-n-5),Ce.data("selected-cell",e.find("td:first")),Ce.data("position","below"),Ce.addClass("fr-visible"),!1):void 0})}function oe(e,t){if(0===ve().length){var n,i,r;if(t&&("HTML"==t.tagName||"BODY"==t.tagName||_.node.isElement(t)))for(n=1;n<=_.opts.tableInsertHelperOffset;n++){if(i=_.doc.elementFromPoint(e.pageX-_.win.pageXOffset,e.pageY-_.win.pageYOffset+n),ze(i).hasClass("fr-tooltip"))return!0;if(i&&("TH"==i.tagName||"TD"==i.tagName||"TABLE"==i.tagName)&&(ze(i).parents(".fr-wrapper").length||_.opts.iframe))return ie(e,ze(i).closest("table")),!0;if(r=_.doc.elementFromPoint(e.pageX-_.win.pageXOffset+n,e.pageY-_.win.pageYOffset),ze(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(ze(r).parents(".fr-wrapper").length||_.opts.iframe))return re(e,ze(r).closest("table")),!0}_.core.sameInstance(Ce)&&te()}}function se(e){xe=null;var t=_.doc.elementFromPoint(e.pageX-_.win.pageXOffset,e.pageY-_.win.pageYOffset);_.opts.tableResizer&&(!_.popups.areVisible()||_.popups.areVisible()&&_.popups.isVisible("table.edit"))&&ne(e,t),!_.opts.tableInsertHelper||_.popups.areVisible()||_.$tb.hasClass("fr-inline")&&_.$tb.is(":visible")||oe(e,t)}function ae(){if(Re){var e=Te.data("table").offset().top-_.win.pageYOffset;_.opts.iframe&&(e+=_.$iframe.offset().top-_.helpers.scrollTop()),Te.css("top",e)}}function le(){var e=Te.data("origin"),t=Te.data("release-position");if(e!==t){var n=Te.data("first"),i=Te.data("second"),r=Te.data("table"),o=r.outerWidth();if(_.undo.canDo()||_.undo.saveStep(),null!==n&&null!==i){var s,a,l,c=L(r),d=[],u=[],f=[],h=[];for(s=0;s<c.length;s++)a=ze(c[s][n]),l=ze(c[s][i]),d[s]=a.outerWidth(),f[s]=l.outerWidth(),u[s]=d[s]/o*100,h[s]=f[s]/o*100;for(s=0;s<c.length;s++){a=ze(c[s][n]),l=ze(c[s][i]);var p=(u[s]*(d[s]+t-e)/d[s]).toFixed(4);a.css("width",p+"%"),l.css("width",(u[s]+h[s]-p).toFixed(4)+"%")}}else{var g,m=r.parent(),v=o/m.width()*100,b=(parseInt(r.css("margin-left"),10)||0)/m.width()*100,E=(parseInt(r.css("margin-right"),10)||0)/m.width()*100;"rtl"==_.opts.direction&&0===i||"rtl"!=_.opts.direction&&0!==i?(g=(o+t-e)/o*v,r.css("margin-right","calc(100% - "+Math.round(g).toFixed(4)+"% - "+Math.round(b).toFixed(4)+"%)")):("rtl"==_.opts.direction&&0!==i||"rtl"!=_.opts.direction&&0===i)&&(g=(o-t+e)/o*v,r.css("margin-left","calc(100% - "+Math.round(g).toFixed(4)+"% - "+Math.round(E).toFixed(4)+"%)")),r.css("width",Math.round(g).toFixed(4)+"%")}_.selection.restore(),_.undo.saveStep()}Te.removeData("origin"),Te.removeData("release-position"),Te.removeData("first"),Te.removeData("second"),Te.removeData("table")}function ce(e,t){var n,i=ze(t[0][e]).outerWidth();for(n=1;n<t.length;n++)i=Math.min(i,ze(t[n][e]).outerWidth());return i}function de(e,t,n){var i,r=0;for(i=e;i<=t;i++)r+=ce(i,n);return r}function ue(e){if(1<ve().length&&Se&&$(),!1===Se&&!1===Ae&&!1===Re)xe&&clearTimeout(xe),_.edit.isDisabled()&&!_.popups.isVisible("table.edit")||(xe=setTimeout(se,30,e));else if(Re){var t=e.pageX-_.win.pageXOffset;_.opts.iframe&&(t+=_.$iframe.offset().left);var n=Te.data("max-left"),i=Te.data("max-right");n<=t&&t<=i?Te.css("left",t-_.opts.tableResizerOffset):t<n&&parseFloat(Te.css("left"),10)>n-_.opts.tableResizerOffset?Te.css("left",n-_.opts.tableResizerOffset):i<t&&parseFloat(Te.css("left"),10)<i-_.opts.tableResizerOffset&&Te.css("left",i-_.opts.tableResizerOffset)}else Se&&te()}function fe(e){_.node.isEmpty(e.get(0))?e.prepend(ze.FE.MARKERS):e.prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER)}function he(e){if(e.which==ze.FE.KEYCODE.TAB){var t;if(0<ve().length)t=_.$el.find(".fr-selected-cell:last");else{var n=_.selection.element();"TD"==n.tagName||"TH"==n.tagName?t=ze(n):n!=_.el&&(0<ze(n).parentsUntil(_.$el,"td").length?t=ze(n).parents("td:first"):0<ze(n).parentsUntil(_.$el,"th").length&&(t=ze(n).parents("th:first")))}if(t)return e.preventDefault(),0<ze(_.selection.element()).parents("ol, ul").length||(z(),e.shiftKey?0<t.prev().length?fe(t.prev()):0<t.closest("tr").length&&0<t.closest("tr").prev().length?fe(t.closest("tr").prev().find("td:last")):0<t.closest("tbody").length&&0<t.closest("table").find("thead tr").length&&fe(t.closest("table").find("thead tr th:last")):0<t.next().length?fe(t.next()):0<t.closest("tr").length&&0<t.closest("tr").next().length?fe(t.closest("tr").next().find("td:first")):0<t.closest("thead").length&&0<t.closest("table").find("tbody tr").length?fe(t.closest("table").find("tbody tr td:first")):(t.addClass("fr-selected-cell"),v("below"),P(),fe(t.closest("tr").next().find("td:first"))),_.selection.restore(),!1)}}function pe(){_.shared.$ti_helper||(_.shared.$ti_helper=ze('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+_.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),_.events.bindClick(_.shared.$ti_helper,"a",function(){var e=Ce.data("selected-cell"),t=Ce.data("position"),n=Ce.data("instance")||_;"before"==t?(e.addClass("fr-selected-cell"),n.table.insertColumn(t),e.removeClass("fr-selected-cell")):"after"==t?(e.addClass("fr-selected-cell"),n.table.insertColumn(t),e.removeClass("fr-selected-cell")):"above"==t?(e.addClass("fr-selected-cell"),n.table.insertRow(t),e.removeClass("fr-selected-cell")):"below"==t&&(e.addClass("fr-selected-cell"),n.table.insertRow(t),e.removeClass("fr-selected-cell")),te()}),_.events.on("shared.destroy",function(){_.shared.$ti_helper.html("").removeData().remove(),_.shared.$ti_helper=null},!0),_.events.$on(_.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),_.events.$on(ze(_.o_win),"scroll",function(){te()},!0),_.events.$on(_.$wp,"scroll",function(){te()},!0)),Ce=_.shared.$ti_helper,_.events.on("destroy",function(){Ce=null}),_.tooltip.bind(_.$box,".fr-insert-helper > a.fr-floating-btn")}function ge(){we=null,clearTimeout(xe)}function me(){0<ve().length?h():(_.popups.hide("table.insert"),_.toolbar.showInline())}function ve(){return _.el.querySelectorAll(".fr-selected-cell")}function be(){var e=ve();if(e.length){for(var t=e[0];t&&"TABLE"!=t.tagName&&t.parentNode!=_.el;)t=t.parentNode;return ze(t&&"TABLE"==t.tagName?t:[])}return ze([])}function Ee(e){if(e.altKey&&e.which==ze.FE.KEYCODE.SPACE){var t,n=_.selection.element();if("TD"==n.tagName||"TH"==n.tagName?t=n:0<ze(n).closest("td").length?t=ze(n).closest("td").get(0):0<ze(n).closest("th").length&&(t=ze(n).closest("th").get(0)),t)return e.preventDefault(),U(t,t),h(),!1}}function _e(e){var t=ve();if(0<t.length){var n,i,r=L(),o=e.which;1==t.length?i=n=t[0]:(n=_.el.querySelector(".fr-cell-fixed"),i=_.el.querySelector(".fr-cell-handler"));var s=k(i,r);if(ze.FE.KEYCODE.ARROW_RIGHT==o){if(s.col<r[0].length-1)return U(n,r[s.row][s.col+1]),!1}else if(ze.FE.KEYCODE.ARROW_DOWN==o){if(s.row<r.length-1)return U(n,r[s.row+1][s.col]),!1}else if(ze.FE.KEYCODE.ARROW_LEFT==o){if(0<s.col)return U(n,r[s.row][s.col-1]),!1}else if(ze.FE.KEYCODE.ARROW_UP==o&&0<s.row)return U(n,r[s.row-1][s.col]),!1}}function ye(){if(!_.$wp)return!1;if(!_.helpers.isMobile()){Re=Ae=Se=!1,_.events.$on(_.$el,"mousedown",j),_.popups.onShow("image.edit",function(){P(),Ae=Se=!1}),_.popups.onShow("link.edit",function(){P(),Ae=Se=!1}),_.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&P()}),_.events.$on(_.$el,"mouseenter","th, td",q),_.events.$on(_.$win,"mouseup",Y),_.opts.iframe&&_.events.$on(ze(_.o_win),"mouseup",Y),_.events.$on(_.$win,"mousemove",ue),_.events.$on(ze(_.o_win),"scroll",ae),_.events.on("contentChanged",function(){0<ve().length&&(h(),_.$el.find("img").on("load.selected-cells",function(){ze(this).off("load.selected-cells"),0<ve().length&&h()}))}),_.events.$on(ze(_.o_win),"resize",function(){P()}),_.events.on("toolbar.esc",function(){if(0<ve().length)return _.events.disableBlur(),_.events.focus(),!1},!0),_.events.$on(_.$el,"keydown",function(e){e.shiftKey?!1===_e(e)&&setTimeout(function(){h()},0):Z(e)}),_.events.on("keydown",function(e){if(!1===he(e))return!1;var t=ve();if(0<t.length){if(0<t.length&&_.keys.ctrlKey(e)&&e.which==ze.FE.KEYCODE.A)return P(),_.popups.isVisible("table.edit")&&_.popups.hide("table.edit"),t=[],!0;if(e.which==ze.FE.KEYCODE.ESC&&_.popups.isVisible("table.edit"))return P(),_.popups.hide("table.edit"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!(t=[]);if(1<t.length&&e.which==ze.FE.KEYCODE.BACKSPACE){_.undo.saveStep();for(var n=0;n<t.length;n++)ze(t[n]).html("<br>"),n==t.length-1&&ze(t[n]).prepend(ze.FE.MARKERS);return _.selection.restore(),_.undo.saveStep(),!(t=[])}if(1<t.length&&e.which!=ze.FE.KEYCODE.F10&&!_.keys.isBrowserAction(e))return e.preventDefault(),!(t=[])}else if(!(t=[])===Ee(e))return!1},!0);var t=[];_.events.on("html.beforeGet",function(){t=ve();for(var e=0;e<t.length;e++)t[e].className=(t[e].className||"").replace(/fr-selected-cell/g,"")}),_.events.on("html.afterGet",function(){for(var e=0;e<t.length;e++)t[e].className=(t[e].className?t[e].className.trim()+" ":"")+"fr-selected-cell";t=[]}),o(!0),l(!0)}_.events.on("destroy",ge)}var Te,Ce,Ae,Se,we,xe,Re;return{_init:ye,insert:t,remove:g,insertRow:v,deleteRow:b,insertColumn:E,deleteColumn:y,mergeCells:w,splitCellVertically:R,splitCellHorizontally:x,addHeader:n,removeHeader:m,setBackground:I,showInsertPopup:e,showEditPopup:h,showColorsPopup:i,back:me,verticalAlign:D,horizontalAlign:N,applyStyle:O,selectedTable:be,selectedCells:ve}},ze.FE.DefineIcon("insertTable",{NAME:"table"}),ze.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),ze.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),ze.FE.DefineIcon("tableHeader",{NAME:"header"}),ze.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),ze.FE.DefineIcon("tableRows",{NAME:"bars"}),ze.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableRows.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),ze.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),ze.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableColumns.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),ze.FE.DefineIcon("tableCells",{NAME:"square-o"}),ze.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCells.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){1<this.$el.find(".fr-selected-cell").length?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),ze.FE.DefineIcon("tableRemove",{NAME:"trash"}),ze.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),ze.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),ze.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,t){var n=this.$el.find(".fr-selected-cell").closest("table");n&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=n.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),ze.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),ze.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),ze.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),ze.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCellVerticalAlign.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+n.toLowerCase()+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(n)+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),ze.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),ze.FE.DefineIcon("align-left",{
NAME:"align-left"}),ze.FE.DefineIcon("align-right",{NAME:"align-right"}),ze.FE.DefineIcon("align-center",{NAME:"align-center"}),ze.FE.DefineIcon("align-justify",{NAME:"align-justify"}),ze.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCellHorizontalAlign.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(t[n])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(e){var t=this.table.selectedCells();t.length&&e.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(ze(t[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),ze.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),ze.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,t){var n=this.$el.find(".fr-selected-cell:first");n&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=n.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("tableColorRemove",{NAME:"eraser"}),ze.FE.URLRegEx="(^| |\\u00A0)("+ze.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}))$",ze.FE.PLUGINS.url=function(a){function t(e,t,n){for(var i="";n.length&&"."==n[n.length-1];)i+=".",n=n.substring(0,n.length-1);var r=n;return a.opts.linkConvertEmailAddress&&ze.FE.MAIL_REGEX.test(r)&&!/^mailto:.*/i.test(r)&&(r="mailto:"+r),/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(r)||(r="//"+r),(t||"")+"<a"+(a.opts.linkAlwaysBlank?' target="_blank"':"")+(s?' rel="'+s+'"':"")+' href="'+r+'">'+n.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+i}function n(){return new RegExp(ze.FE.URLRegEx,"gi")}function l(e){return a.opts.linkAlwaysNoFollow&&(s="nofollow"),a.opts.linkAlwaysBlank&&(s?s+=" noopener noreferrer":s="noopener noreferrer"),e.replace(n(),t)}function i(e){return!!e&&("A"===e.tagName||!(!e.parentNode||e.parentNode==a.el)&&i(e.parentNode))}function r(e){var t=e.split(" ");return t[t.length-1]}function o(){var e=a.selection.ranges(0).startContainer;if(!e||e.nodeType!==Node.TEXT_NODE)return!1;if(i(e))return!1;if(n().test(r(e.textContent)))ze(e).before(l(e.textContent)),e.parentNode.removeChild(e);else if(e.previousSibling&&"A"===e.previousSibling.tagName){var t=e.previousSibling.innerText+e.textContent;n().test(r(t))&&(ze(e.previousSibling).replaceWith(l(t)),e.parentNode.removeChild(e))}}function e(){a.events.on("paste.afterCleanup",function(e){var t=a.doc.createElement("div");t.innerHTML=e;for(var n=a.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,a.node.filter(function(e){return new RegExp(ze.FE.URLRegEx,"gi").test(e.textContent)}),!1),i=[];n.nextNode();){var r=n.currentNode;i.push(r)}for(var o=0;o<i.length;o++){var s=i[o];ze(s).after(l(s.textContent)).remove()}return t.innerHTML}),a.events.on("keydown",function(e){var t=e.which;!a.selection.isCollapsed()||t!=ze.FE.KEYCODE.ENTER&&t!=ze.FE.KEYCODE.SPACE&&t!=ze.FE.KEYCODE.PERIOD||o()},!0)}var s=null;return{_init:e}},ze.extend(ze.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),ze.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/g,url_text:"//play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],ze.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,ze.FE.PLUGINS.video=function(u){function f(){var e=u.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var t=e.find(".fr-video-embed-layer textarea");t.val("").trigger("change"),(t=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function n(){var e=u.$tb.find('.fr-command[data-cmd="insertVideo"]'),t=u.popups.get("video.insert");if(t||(t=o()),c(),!t.hasClass("fr-active")){u.popups.refresh("video.insert"),u.popups.setContainer("video.insert",u.$tb);var n=e.offset().left+e.outerWidth()/2,i=e.offset().top+(u.opts.toolbarBottom?10:e.outerHeight()-10);u.popups.show("video.insert",n,i,e.outerHeight())}}function i(){var e=u.popups.get("video.edit");if(e||(e=z()),e){u.popups.setContainer("video.edit",u.$sc),u.popups.refresh("video.edit");var t=me.find("iframe, embed, video"),n=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();u.popups.show("video.edit",n,i,t.outerHeight())}}function o(e){if(e)return u.popups.onRefresh("video.insert",f),u.popups.onHide("image.insert",ie),!0;var t="";1<u.opts.videoInsertButtons.length&&(t='<div class="fr-buttons">'+u.button.buildList(u.opts.videoInsertButtons)+"</div>");var n,i="",r=u.opts.videoInsertButtons.indexOf("videoUpload"),o=u.opts.videoInsertButtons.indexOf("videoByURL"),s=u.opts.videoInsertButtons.indexOf("videoEmbed");0<=o&&(n=" fr-active",(r<o&&0<=r||s<o&&0<=s)&&(n=""),i='<div class="fr-video-by-url-layer fr-layer'+n+'" id="fr-video-by-url-layer-'+u.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+u.id+'" type="text" placeholder="'+u.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+u.language.translate("Insert")+"</button></div></div>");var a="";0<=s&&(n=" fr-active",(r<s&&0<=r||o<s&&0<=o)&&(n=""),a='<div class="fr-video-embed-layer fr-layer'+n+'" id="fr-video-embed-layer-'+u.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+u.id+'" type="text" placeholder="'+u.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+u.language.translate("Insert")+"</button></div></div>");var l="";0<=r&&(n=" fr-active",(s<r&&0<=s||o<r&&0<=o)&&(n=""),l='<div class="fr-video-upload-layer fr-layer'+n+'" id="fr-video-upload-layer-'+u.id+'"><strong>'+u.language.translate("Drop video")+"</strong><br>("+u.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+u.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+u.id+'" role="button"></div></div>');var c={buttons:t,by_url_layer:i,embed_layer:a,upload_layer:l,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},d=u.popups.create("video.insert",c);return W(d),d}function e(e){var t,n,i=u.popups.get("video.insert");if(!me&&!u.opts.toolbarInline){var r=u.$tb.find('.fr-command[data-cmd="insertVideo"]');t=r.offset().left+r.outerWidth()/2,n=r.offset().top+(u.opts.toolbarBottom?10:r.outerHeight()-10)}u.opts.toolbarInline&&(n=i.offset().top-u.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(n+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),u.popups.show("video.insert",t,n,0),u.accessibility.focusPopup(i)}function t(e){u.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function a(e){u.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function s(e){u.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function r(e){u.events.focus(!0),u.selection.restore();var t=!1;me&&(ne(),t=!0),u.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,u.opts.videoSplitHTML),u.popups.hide("video.insert");var n=u.$el.find(".fr-jiv");n.removeClass("fr-jiv"),re(n,u.opts.videoDefaultDisplay,u.opts.videoDefaultAlign),n.toggleClass("fr-draggable",u.opts.videoMove),u.events.trigger(t?"video.replaced":"video.inserted",[n])}function h(){var e=ze(this);u.popups.hide("video.insert"),e.removeClass("fr-uploading"),e.parent().next().is("br")&&e.parent().next().remove(),b(e.parent()),u.events.trigger("video.loaded",[e.parent()])}function l(a,e,l,c,d){u.edit.off(),g("Loading video"),e&&(a=u.helpers.sanitizeURL(a));var t=function(){var e,t;if(c){u.undo.canDo()||c.find("video").hasClass("fr-uploading")||u.undo.saveStep();var n=c.find("video").data("fr-old-src"),i=c.data("fr-replaced");c.data("fr-replaced",!1),u.$wp?((e=c.clone()).find("video").removeData("fr-old-src").removeClass("fr-uploading"),e.find("video").off("canplay"),n&&c.find("video").attr("src",n),c.replaceWith(e)):e=c;for(var r=e.find("video").get(0).attributes,o=0;o<r.length;o++){var s=r[o];0===s.nodeName.indexOf("data-")&&e.find("video").removeAttr(s.nodeName)}if(void 0!==l)for(t in l)l.hasOwnProperty(t)&&"link"!=t&&e.find("video").attr("data-"+t,l[t]);e.find("video").on("canplay",h),e.find("video").attr("src",a),u.edit.on(),O(),u.undo.saveStep(),u.$el.blur(),u.events.trigger(i?"video.replaced":"video.inserted",[e,d])}else e=S(a,l,h),O(),u.undo.saveStep(),u.events.trigger("video.inserted",[e,d])};p("Loading video"),t()}function p(e){var t=u.popups.get("video.insert");if(t||(t=o()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-video-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),me){var n=me.find("video");u.popups.setContainer("video.insert",u.$sc);var i=n.offset().left+n.width()/2,r=n.offset().top+n.height();u.popups.show("video.insert",i,r,n.outerHeight())}void 0===e&&g(u.language.translate("Uploading"),0)}function c(e){var t=u.popups.get("video.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-video-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||u.$el.find("video.fr-error").length)){if(u.events.focus(),u.$el.find("video.fr-error").length&&(u.$el.find("video.fr-error").parent().remove(),u.undo.saveStep(),u.undo.run(),u.undo.dropRedo()),!u.$wp&&me){var n=me;M(!0),u.selection.setAfter(n.find("video").get(0)),u.selection.restore()}u.popups.hide("video.insert")}}function g(e,t){var n=u.popups.get("video.insert");if(n){var i=n.find(".fr-video-progress-bar-layer");i.find("h3").text(e+(t?" "+t+"%":"")),i.removeClass("fr-error"),t?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",t+"%")):i.find("div").addClass("fr-indeterminate")}}function d(e){p();var t=u.popups.get("video.insert").find(".fr-video-progress-bar-layer");t.addClass("fr-error");var n=t.find("h3");n.text(e),u.events.disableBlur(),n.focus()}function m(e){void 0===e&&(e=u.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"");var t=null;if(/^http/.test(e)||(e="https://"+e),u.helpers.isURL(e))for(var n=0;n<ze.FE.VIDEO_PROVIDERS.length;n++){var i=ze.FE.VIDEO_PROVIDERS[n];if(i.test_regex.test(e)&&new RegExp(u.opts.videoAllowedProviders.join("|")).test(i.provider)){t=e.replace(i.url_regex,i.url_text),t=i.html.replace(/\{url\}/,t);break}}t?r(t):u.events.trigger("video.linkError",[e])}function v(e){void 0===e&&(e=u.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==e.length&&ze.FE.VIDEO_EMBED_REGEX.test(e)?r(e):u.events.trigger("video.codeError",[e])}function b(e){k.call(e.get(0))}function E(e){try{if(!1===u.events.trigger("video.uploaded",[e],!0))return u.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(K(Ee,e),!1)}catch(n){return K(ye,e),!1}}function _(e){try{var t=ze(e).find("Location").text(),n=ze(e).find("Key").text();return!1===u.events.trigger("video.uploadedToS3",[t,n,e],!0)?(u.edit.on(),!1):t}catch(o){return K(ye,e),!1}}function y(e){g("Loading video");var t=this.status,n=this.response,i=this.responseXML,r=this.responseText;try{if(u.opts.videoUploadToS3)if(201==t){var o=_(i);o&&l(o,!1,[],e,n||i)}else K(ye,n||i);else if(200<=t&&t<300){var s=E(r);s&&l(s.link,!1,s,e,n||r)}else K(_e,n||r)}catch(a){K(ye,n||r)}}function T(){K(ye,this.response||this.responseText||this.responseXML)}function C(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;g(u.language.translate("Uploading"),t)}}function A(){u.edit.on(),c(!0)}function S(e,t,n){var i,r="";if(t&&void 0!==t)for(i in t)t.hasOwnProperty(i)&&"link"!=i&&(r+=" data-"+i+'="'+t[i]+'"');var o=u.opts.videoDefaultWidth;o&&"auto"!=o&&(o+="px");var s=ze('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+u.opts.videoDefaultDisplay[0]+("center"!=u.opts.videoDefaultAlign?" fr-fv"+u.opts.videoDefaultAlign[0]:"")+'"><video src="'+e+'" '+r+(o?' style="width: '+o+';" ':"")+" controls>"+u.language.translate("Your browser does not support HTML5 video.")+"</video></span>");s.toggleClass("fr-draggable",u.opts.videoMove),u.edit.on(),u.events.focus(!0),u.selection.restore(),u.undo.saveStep(),u.opts.videoSplitHTML?u.markers.split():u.markers.insert();var a=u.$el.find(".fr-marker");return u.node.isLastSibling(a)&&a.parent().hasClass("fr-deletable")&&a.insertAfter(a.parent()),a.replaceWith(s),u.html.wrap(),u.selection.clear(),s.find("video").get(0).readyState>s.find("video").get(0).HAVE_FUTURE_DATA||u.helpers.isIOS()?n.call(s.find("video").get(0)):s.find("video").on("canplaythrough load",n),s}function w(e){if(!u.core.sameInstance(ge))return!0;e.preventDefault(),e.stopPropagation();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),n=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!n)return!1;if("mousedown"==e.type){var i=u.$oel.get(0).ownerDocument,r=i.defaultView||i.parentWindow,o=!1;try{o=r.location!=r.parent.location&&!(r.$&&r.$.FE)}catch(s){}o&&r.frameElement&&(t+=u.helpers.getPX(ze(r.frameElement).offset().left)+r.frameElement.clientLeft,n=e.clientY+u.helpers.getPX(ze(r.frameElement).offset().top)+r.frameElement.clientTop)}u.undo.canDo()||u.undo.saveStep(),(pe=ze(this)).data("start-x",t),pe.data("start-y",n),he.show(),u.popups.hideAll(),P()}function x(e){if(!u.core.sameInstance(ge))return!0;if(pe){e.preventDefault();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),n=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!n)return!1;var i=pe.data("start-x"),r=pe.data("start-y");pe.data("start-x",t),pe.data("start-y",n);var o=t-i,s=n-r,a=me.find("iframe, embed, video"),l=a.width(),c=a.height();(pe.hasClass("fr-hnw")||pe.hasClass("fr-hsw"))&&(o=0-o),(pe.hasClass("fr-hnw")||pe.hasClass("fr-hne"))&&(s=0-s),a.css("width",l+o),a.css("height",c+s),a.removeAttr("width"),a.removeAttr("height"),L()}}function R(e){if(!u.core.sameInstance(ge))return!0;pe&&me&&(e&&e.stopPropagation(),pe=null,he.hide(),L(),i(),u.undo.saveStep())}function I(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function D(e,t,n,i){return e.pageX=t,e.pageY=t,w.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,i)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,i)),x.call(this,e),R.call(this,e),++i}function N(){var e;if(u.shared.$video_resizer?(ge=u.shared.$video_resizer,he=u.shared.$vid_overlay,u.events.on("destroy",function(){ge.removeClass("fr-active").appendTo(ze("body:first"))},!0)):(u.shared.$video_resizer=ze('<div class="fr-video-resizer"></div>'),ge=u.shared.$video_resizer,u.events.$on(ge,"mousedown",function(e){e.stopPropagation()},!0),u.opts.videoResize&&(ge.append(I("nw")+I("ne")+I("sw")+I("se")),u.shared.$vid_overlay=ze('<div class="fr-video-overlay"></div>'),he=u.shared.$vid_overlay,e=ge.get(0).ownerDocument,ze(e).find("body:first").append(he))),u.events.on("shared.destroy",function(){ge.html("").removeData().remove(),ge=null,u.opts.videoResize&&(he.remove(),he=null)},!0),u.helpers.isMobile()||u.events.$on(ze(u.o_win),"resize.video",function(){M(!0)}),u.opts.videoResize){e=ge.get(0).ownerDocument,u.events.$on(ge,u._mousedown,".fr-handler",w),u.events.$on(ze(e),u._mousemove,x),u.events.$on(ze(e.defaultView||e.parentWindow),u._mouseup,R),u.events.$on(he,"mouseleave",R);var i=1,r=null,o=0;u.events.on("keydown",function(e){if(me){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,n=e.which;(n!==r||200<e.timeStamp-o)&&(i=1),(n==ze.FE.KEYCODE.EQUALS||u.browser.mozilla&&n==ze.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?i=D.call(this,e,1,1,i):(n==ze.FE.KEYCODE.HYPHEN||u.browser.mozilla&&n==ze.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey&&(i=D.call(this,e,2,-1,i)),r=n,o=e.timeStamp}}),u.events.on("keyup",function(){i=1})}}function O(){var e,t=Array.prototype.slice.call(u.el.querySelectorAll("video")),n=[];for(e=0;e<t.length;e++)n.push(t[e].getAttribute("src")),ze(t[e]).toggleClass("fr-draggable",u.opts.videoMove),""===t[e].getAttribute("class")&&t[e].removeAttribute("class"),""===t[e].getAttribute("style")&&t[e].removeAttribute("style");if(ve)for(e=0;e<ve.length;e++)n.indexOf(ve[e].getAttribute("src"))<0&&u.events.trigger("video.removed",[ze(ve[e])]);ve=t}function L(){ge||N(),(u.$wp||u.$sc).append(ge),ge.data("instance",u);var e=me.find("iframe, embed, video");ge.css("top",(u.opts.iframe?e.offset().top-1:e.offset().top-u.$wp.offset().top-1)+u.$wp.scrollTop()).css("left",(u.opts.iframe?e.offset().left-1:e.offset().left-u.$wp.offset().left-1)+u.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function k(e){if(e&&"touchend"==e.type&&be)return!0;if(e&&u.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;if(u.edit.isDisabled())return!1;for(var t=0;t<ze.FE.INSTANCES.length;t++)ze.FE.INSTANCES[t]!=u&&ze.FE.INSTANCES[t].events.trigger("video.hideResizer");u.toolbar.disable(),u.helpers.isMobile()&&(u.events.disableBlur(),u.$el.blur(),u.events.enableBlur()),me=ze(this),ze(this).addClass("fr-active"),u.opts.iframe&&u.size.syncIframe(),ce(),L(),i(),u.selection.clear(),u.button.bulkRefresh(),u.events.trigger("image.hideResizer")}function M(e){me&&($()||!0===e)&&(ge.removeClass("fr-active"),u.toolbar.enable(),me.removeClass("fr-active"),me=null,P())}function F(){u.shared.vid_exit_flag=!0}function P(){u.shared.vid_exit_flag=!1}function $(){return u.shared.vid_exit_flag}function H(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var n=t.files[0];if(n&&n.type&&-1!==n.type.indexOf("video")){u.markers.remove(),u.markers.insertAtPoint(e.originalEvent),u.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),u.popups.hideAll();var i=u.popups.get("video.insert");return i||(i=o()),u.popups.setContainer("video.insert",u.$sc),u.popups.show("video.insert",e.originalEvent.pageX,e.originalEvent.pageY),p(),0<=u.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))?B(t.files):K(Ce),e.preventDefault(),e.stopPropagation(),!1}}}function B(e){if(void 0!==e&&0<e.length){if(!1===u.events.trigger("video.beforeUpload",[e]))return!1;var t,n=e[0];if(n.size>u.opts.videoMaxSize)return K(Te),!1;if(u.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return K(Ce),!1;if(u.drag_support.formdata&&(t=u.drag_support.formdata?new FormData:null),t){var i;if(!1!==u.opts.videoUploadToS3)for(i in t.append("key",u.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),t.append("success_action_status","201"),t.append("X-Requested-With","xhr"),t.append("Content-Type",n.type),u.opts.videoUploadToS3.params)u.opts.videoUploadToS3.params.hasOwnProperty(i)&&t.append(i,u.opts.videoUploadToS3.params[i]);for(i in u.opts.videoUploadParams)u.opts.videoUploadParams.hasOwnProperty(i)&&t.append(i,u.opts.videoUploadParams[i]);t.append(u.opts.videoUploadParam,n);var r=u.opts.videoUploadURL;u.opts.videoUploadToS3&&(r=u.opts.videoUploadToS3.uploadURL?u.opts.videoUploadToS3.uploadURL:"https://"+u.opts.videoUploadToS3.region+".amazonaws.com/"+u.opts.videoUploadToS3.bucket);var o=u.core.getXHR(r,u.opts.videoUploadMethod);o.onload=function(){y.call(o,me)},o.onerror=T,o.upload.onprogress=C,o.onabort=A,p(),u.events.disableBlur(),u.edit.off(),u.events.enableBlur();var s=u.popups.get("video.insert");s&&s.off("abortUpload").on("abortUpload",function(){4!=o.readyState&&o.abort()}),o.send(t)}}}function W(i){u.events.$on(i,"dragover dragenter",".fr-video-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),u.events.$on(i,"dragleave dragend",".fr-video-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),u.events.$on(i,"drop",".fr-video-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var n=i.data("instance")||u;n.events.disableBlur(),n.video.upload(t.files),n.events.enableBlur()}},!0),u.helpers.isIOS()&&u.events.$on(i,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){ze(this).trigger("click")},!0),u.events.$on(i,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var e=i.data("instance")||u;e.events.disableBlur(),i.find("input:focus").blur(),e.events.enableBlur(),e.video.upload(this.files)}ze(this).val("")},!0)}function U(){u.events.on("drop",H,!0),u.events.on("mousedown window.mousedown",F),u.events.on("window.touchmove",P),u.events.on("mouseup window.mouseup",M),u.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&M()}),u.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){M(!0)})}function K(e,t){u.edit.on(),me&&me.find("video").addClass("fr-error"),d(u.language.translate("Something went wrong. Please try again.")),u.events.trigger("video.error",[{code:e,message:Ae[e]},t])}function z(){var e="";if(0<u.opts.videoEditButtons.length){e+='<div class="fr-buttons">',e+=u.button.buildList(u.opts.videoEditButtons);var t={buttons:e+="</div>"},n=u.popups.create("video.edit",t);return u.events.$on(u.$wp,"scroll.video-edit",function(){me&&u.popups.isVisible("video.edit")&&(u.events.disableBlur(),b(me))}),n}return!1}function j(){if(me){var e=u.popups.get("video.size"),t=me.find("iframe, embed, video");e.find('input[name="width"]').val(t.get(0).style.width||t.attr("width")).trigger("change"),e.find('input[name="height"]').val(t.get(0).style.height||t.attr("height")).trigger("change")}}function Y(){var e=u.popups.get("video.size");e||(e=q()),c(),u.popups.refresh("video.size"),u.popups.setContainer("video.size",u.$sc);var t=me.find("iframe, embed, video"),n=t.offset().left+t.width()/2,i=t.offset().top+t.height();u.popups.show("video.size",n,i,t.height())}function q(e){if(e)return u.popups.onRefresh("video.size",j),!0;var t={buttons:'<div class="fr-buttons">'+u.button.buildList(u.opts.videoSizeButtons)+"</div>",size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+u.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+u.id+'" type="text" name="width" placeholder="'+u.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+u.id+'" type="text" name="height" placeholder="'+u.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+u.language.translate("Update")+"</button></div></div>"},n=u.popups.create("video.size",t);return u.events.$on(u.$wp,"scroll",function(){me&&u.popups.isVisible("video.size")&&(u.events.disableBlur(),b(me))}),n}function G(e){if(void 0===e&&(e=me),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function V(e){me.removeClass("fr-fvr fr-fvl"),!u.opts.htmlUntouched&&u.opts.useClasses?"left"==e?me.addClass("fr-fvl"):"right"==e&&me.addClass("fr-fvr"):re(me,Z(),e),ce(),L(),i(),u.selection.clear()}function X(e){if(!me)return!1;e.find("> *:first").replaceWith(u.icon.create("video-align-"+G()))}function Q(e,t){me&&t.find('.fr-command[data-param1="'+G()+'"]').addClass("fr-active").attr("aria-selected",!0)}function Z(e){void 0===e&&(e=me);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function J(e){me.removeClass("fr-dvi fr-dvb"),!u.opts.htmlUntouched&&u.opts.useClasses?"inline"==e?me.addClass("fr-dvi"):"block"==e&&me.addClass("fr-dvb"):re(me,e,G()),ce(),L(),i(),u.selection.clear()}function ee(e,t){me&&t.find('.fr-command[data-param1="'+Z()+'"]').addClass("fr-active").attr("aria-selected",!0)}function te(){var e=u.popups.get("video.insert");e||(e=o()),u.popups.isVisible("video.insert")||(c(),u.popups.refresh("video.insert"),u.popups.setContainer("video.insert",u.$sc));var t=me.offset().left+me.width()/2,n=me.offset().top+me.height();u.popups.show("video.insert",t,n,me.outerHeight())}function ne(){if(me&&!1!==u.events.trigger("video.beforeRemove",[me])){var e=me;u.popups.hideAll(),M(!0),u.selection.setBefore(e.get(0))||u.selection.setAfter(e.get(0)),e.remove(),u.selection.restore(),u.html.fillEmptyBlocks(),u.events.trigger("video.removed",[e])}}function ie(){c()}function re(e,t,n){!u.opts.htmlUntouched&&u.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+n[0]+" fr-dv"+t[0])):"inline"==t?(e.css({display:"inline-block"}),"center"==n?e.css({"float":"none"}):"left"==n?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==n?e.css({textAlign:"left"}):"right"==n?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function oe(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fv"+G(e)[0]),e.addClass("fr-dv"+Z(e)[0]))}function se(e){re(e,e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":G(e)),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function ae(){u.$el.find("video").filter(function(){return 0===ze(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),u.$el.find("embed, iframe").filter(function(){if(u.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),0<ze(this).parents("span.fr-video").length)return!1;for(var e=ze(this).attr("src"),t=0;t<ze.FE.VIDEO_PROVIDERS.length;t++){var n=ze.FE.VIDEO_PROVIDERS[t];if(n.test_regex.test(e)&&new RegExp(u.opts.videoAllowedProviders.join("|")).test(n.provider))return!0}return!1}).map(function(){return 0===ze(this).parents("object").length?this:ze(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var e=u.$el.find("span.fr-video, video"),t=0;t<e.length;t++){var n=ze(e[t]);!u.opts.htmlUntouched&&u.opts.useClasses?(oe(n),u.opts.videoTextNear||n.removeClass("fr-dvi").addClass("fr-dvb")):u.opts.htmlUntouched||u.opts.useClasses||se(n)}e.toggleClass("fr-draggable",u.opts.videoMove)}function le(){U(),u.helpers.isMobile()&&(u.events.$on(u.$el,"touchstart","span.fr-video",function(){be=!1}),u.events.$on(u.$el,"touchmove",function(){be=!0})),u.events.on("html.set",ae),ae(),u.events.$on(u.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),u.events.$on(u.$el,"click touchend","span.fr-video",k),u.events.on("keydown",function(e){var t=e.which;return!me||t!=ze.FE.KEYCODE.BACKSPACE&&t!=ze.FE.KEYCODE.DELETE?me&&t==ze.FE.KEYCODE.ESC?(M(!0),e.preventDefault(),!1):me&&t!=ze.FE.KEYCODE.F10&&!u.keys.isBrowserAction(e)?(e.preventDefault(),!1):void 0:(e.preventDefault(),ne(),u.undo.saveStep(),!1)},!0),u.events.on("toolbar.esc",function(){if(me)return u.events.disableBlur(),u.events.focus(),!1},!0),u.events.on("toolbar.focusEditor",function(){if(me)return!1},!0),u.events.on("keydown",function(){u.$el.find("span.fr-video:empty").remove()}),o(!0),q(!0)}function ce(){if(me){u.selection.clear();var e=u.doc.createRange();e.selectNode(me.get(0)),u.selection.get().addRange(e)}}function de(){me?(u.events.disableBlur(),me.trigger("click")):(u.events.disableBlur(),u.selection.restore(),u.events.enableBlur(),u.popups.hide("video.insert"),u.toolbar.showInline())}function ue(e,t){if(me){var n=u.popups.get("video.size"),i=me.find("iframe, embed, video");i.css("width",e||n.find('input[name="width"]').val()),i.css("height",t||n.find('input[name="height"]').val()),i.get(0).style.width&&i.removeAttr("width"),i.get(0).style.height&&i.removeAttr("height"),n.find("input:focus").blur(),setTimeout(function(){me.trigger("click")},u.helpers.isAndroid()?50:0)}}function fe(){return me}var he,pe,ge,me,ve,be,Ee=2,_e=3,ye=4,Te=5,Ce=6,Ae={};return Ae[1]="Video cannot be loaded from the passed link.",Ae[Ee]="No link in upload response.",Ae[_e]="Error during file upload.",Ae[ye]="Parsing response failed.",Ae[Te]="File is too large.",Ae[Ce]="Video file type is invalid.",Ae[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",u.shared.vid_exit_flag=!1,{
_init:le,showInsertPopup:n,showLayer:e,refreshByURLButton:t,refreshEmbedButton:a,refreshUploadButton:s,upload:B,insertByURL:m,insertEmbed:v,insert:r,align:V,refreshAlign:X,refreshAlignOnShow:Q,display:J,refreshDisplayOnShow:ee,remove:ne,hideProgressBar:c,showSizePopup:Y,replace:te,back:de,setSize:ue,get:fe}},ze.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),ze.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),ze.FE.DefineIcon("videoByURL",{NAME:"link"}),ze.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),ze.FE.DefineIcon("videoEmbed",{NAME:"code"}),ze.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),ze.FE.DefineIcon("videoUpload",{NAME:"upload"}),ze.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),ze.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),ze.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),ze.FE.DefineIcon("videoDisplay",{NAME:"star"}),ze.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),ze.FE.DefineIcon("video-align",{NAME:"align-left"}),ze.FE.DefineIcon("video-align-left",{NAME:"align-left"}),ze.FE.DefineIcon("video-align-right",{NAME:"align-right"}),ze.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),ze.FE.DefineIcon("videoAlign",{NAME:"align-center"}),ze.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.videoAlign.options;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.icon.create("video-align-"+n)+'<span class="fr-sr-only">'+this.language.translate(t[n])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),ze.FE.DefineIcon("videoReplace",{NAME:"exchange"}),ze.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),ze.FE.DefineIcon("videoRemove",{NAME:"trash"}),ze.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),ze.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),ze.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),ze.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),ze.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),ze.extend(ze.FE.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom","text-decoration","font-weight","font-style"],wordPasteModal:!0}),ze.FE.PLUGINS.wordPaste=function(_){function e(){_.events.on("paste.wordPaste",function(e){return a=e,_.opts.wordPasteModal?t():i(!0),!1})}function r(){var e='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return e+='<p style="text-align: left;">'+_.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",(e+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+_.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+_.language.translate("Keep")+"</button></div>")+"</div>"}function t(){if(!s){var e='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+_.language.translate("Word Paste Detected")+"</h4>",t=r(),n=_.modals.create(w,e,t),i=n.$body;s=n.$modal,n.$modal.addClass("fr-middle"),_.events.bindClick(i,"button.fr-remove-word",function(){(s.data("instance")||_).wordPaste.clean()}),_.events.bindClick(i,"button.fr-keep-word",function(){(s.data("instance")||_).wordPaste.clean(!0)}),_.events.$on(ze(_.o_win),"resize",function(){_.modals.resize(w)})}_.modals.show(w),_.modals.resize(w)}function n(){_.modals.hide(w)}function i(e){var t=_.opts.wordAllowedStyleProps;e||(_.opts.wordAllowedStyleProps=[]),0===(a=(a=(a=a.replace(/^[\n\r]*/g,"").replace(/^ /g,"")).replace(/[\r\n]* {2,}/g," ").replace(/ {2,}[\r\n]*/g," ")).replace(/>[ \n\r]*</g,"><")).indexOf("<colgroup>")&&(a="<table>"+a+"</table>"),a=o(a,_.paste.getRtfClipboard()),a=_.paste.removeEmptyTags(a),n(),_.paste.clean(a,!0,!0),_.opts.wordAllowedStyleProps=t}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){if(t(e))for(var n=e.firstChild;n;){var i=n,r=n.previousSibling;n=n.nextSibling,l(i,t),i.previousSibling||i.nextSibling||i.parentNode||!n||r==n.previousSibling||!n.parentNode?i.previousSibling||i.nextSibling||i.parentNode||!n||n.previousSibling||n.nextSibling||n.parentNode||(r?n=r.nextSibling?r.nextSibling.nextSibling:null:e.firstChild&&(n=e.firstChild.nextSibling)):n=r?r.nextSibling:e.firstChild}}function T(e){if(!e.getAttribute("style")||!/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi,"")))return!1;try{if(!e.querySelector('[style="mso-list:Ignore"]'))return!1}catch(_){return!1}return!0}function h(e){return e.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1")}function p(e,t){var n=e.cloneNode(!0);if(n.firstElementChild&&"A"==n.firstElementChild.tagName&&(n=n.firstElementChild),-1!=["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName)){var i=document.createElement(e.tagName.toLowerCase());i.setAttribute("style",e.getAttribute("style")),i.innerHTML=n.innerHTML,n.innerHTML=i.outerHTML}l(n,function(e){return e.nodeType==Node.ELEMENT_NODE&&("mso-list:Ignore"==e.getAttribute("style")&&e.parentNode.removeChild(e),f(e,t)),!0});var r=n.innerHTML;return r.replace(/<!--[\s\S]*?-->/gi,"")}function g(e,t){var n=/[0-9a-zA-Z]./gi,i=!1;e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstChild&&!(i=i||n.test(e.firstElementChild.firstElementChild.firstChild.data||""))&&e.firstElementChild.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstElementChild.firstChild&&(i=i||n.test(e.firstElementChild.firstElementChild.firstElementChild.firstChild.data||""));var r=i?"ol":"ul",o=h(e),s="<"+r+"><li>"+p(e,t),a=e.nextElementSibling,l=e.parentNode;for(y(e),e=null;a&&T(a);){var c=a.previousElementSibling,d=h(a);if(o<d)s+=g(a,t).outerHTML;else{if(d<o)break;s+="</li><li>"+p(a,t)}if(o=d,a.previousElementSibling||a.nextElementSibling||a.parentNode){var u=a;a=a.nextElementSibling,y(u),u=null}else a=c?c.nextElementSibling:l.firstElementChild}s+="</li></"+r+">";var f=document.createElement("div");return f.innerHTML=s,f.firstElementChild}function m(e,t){for(var n=document.createElement(t),i=0;i<e.attributes.length;i++){var r=e.attributes[i].name;n.setAttribute(r,e.getAttribute(r))}return n.innerHTML=e.innerHTML,e.parentNode.replaceChild(n,e),n}function v(e,t){_.node.clearAttributes(e);for(var n=e.firstElementChild,i=0,r=!1,o=null;n;){n.firstElementChild&&-1!=n.firstElementChild.tagName.indexOf("W:")&&(n.innerHTML=n.firstElementChild.innerHTML),(o=n.getAttribute("width"))||r||(r=!0),i+=parseInt(o,10),(!n.firstChild||n.firstChild&&n.firstChild.data==ze.FE.UNICODE_NBSP)&&(n.firstChild&&y(n.firstChild),n.innerHTML="<br>");for(var s=n.firstElementChild,a=1==n.children.length;s;)"P"!=s.tagName||T(s)||a&&C(s),s=s.nextElementSibling;if(t){var l=n.getAttribute("class");if(l){var c=(l=A(l)).match(/xl[0-9]+/gi);if(c){var d="."+c[0];t[d]&&S(n,t[d])}}t.td&&S(n,t.td)}var u=n.getAttribute("style");u&&(u=A(u))&&";"!=u.slice(-1)&&(u+=";");var f=n.getAttribute("valign");if(!f&&u){var h=u.match(/vertical-align:.+?[; "]{1,1}/gi);h&&(f=h[h.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var p=null;if(u){var g=u.match(/text-align:.+?[; "]{1,1}/gi);g&&(p=g[g.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"==p&&(p=null)}var m=null;if(u){var v=u.match(/background:.+?[; "]{1,1}/gi);v&&(m=v[v.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var b=n.getAttribute("colspan"),E=n.getAttribute("rowspan");b&&n.setAttribute("colspan",b),E&&n.setAttribute("rowspan",E),f&&(n.style["vertical-align"]=f),p&&(n.style["text-align"]=p),m&&(n.style["background-color"]=m),o&&n.setAttribute("width",o),n=n.nextElementSibling}for(n=e.firstElementChild;n;)o=n.getAttribute("width"),r?n.removeAttribute("width"):n.setAttribute("width",100*parseInt(o,10)/i+"%"),n=n.nextElementSibling}function C(e){var t=e.parentNode,n=e.getAttribute("align");n&&(t&&"TD"==t.tagName?t.setAttribute("style",t.getAttribute("style")+"text-align:"+n+";"):e.style["text-align"]=n,e.removeAttribute("align"))}function A(e){return e.replace(/\n|\r|\n\r|&quot;/g,"")}function S(e,t,n){if(t){var i=e.getAttribute("style");i&&";"!=i.slice(-1)&&(i+=";"),t&&";"!=t.slice(-1)&&(t+=";"),t=t.replace(/\n/gi,"");var r=null;r=n?(i||"")+t:t+(i||""),e.setAttribute("style",r)}}function c(e){var t=e.getAttribute("style");if(t){(t=A(t))&&";"!=t.slice(-1)&&(t+=";");var n=t.match(/(^|\S+?):.+?;{1,1}/gi);if(n){for(var i={},r=0;r<n.length;r++){var o=n[r].split(":");2==o.length&&("text-align"==o[0]&&"SPAN"==e.tagName||(i[o[0]]=o[1]))}var s="";for(var a in i)if(i.hasOwnProperty(a)){if("font-size"==a&&"pt;"==i[a].slice(-3)){var l=null;try{l=parseFloat(i[a].slice(0,-3),10)}catch(h){}l&&(l=Math.round(1.33*l),i[a]=l+"px;")}s+=a+":"+i[a]}s&&e.setAttribute("style",s)}}}function u(e){for(var t=e.match(/[0-9a-f]{2}/gi),n=[],i=0;i<t.length;i++)n.push(String.fromCharCode(parseInt(t[i],16)));var r=n.join("");return btoa(r)}function d(e,t){if(t){var n;if("IMG"==e.tagName){var i=e.getAttribute("src");if(!i||-1==i.indexOf("file://"))return;n=x[e.getAttribute("v:shapes")]}else n=e.parentNode.getAttribute("o:spid");if(n){var r="hplid"+n.substring(8),o=t.split(r);if(!o||2==o.length){var s=o[1].split("bliptag");if(!(s&&s.length<2)){var a=null;if(-1!=s[0].indexOf("pngblip")?a="image/png":-1!=s[0].indexOf("jpegblip")&&(a="image/jpeg"),a){var l=s[1].split("}");if(!(l&&l.length<2)){var c;if(2<l.length&&-1!=l[0].indexOf("blipuid"))c=l[1].split(" ");else{if((c=l[0].split(" "))&&c.length<2)return;c.shift()}var d="data:"+a+";base64,"+u(c.join(""));"IMG"===e.tagName?(e.src=d,e.setAttribute("data-fr-image-pasted",!0)):ze(e.parentNode).before('<img data-fr-image-pasted="true" src="'+d+'" style="'+e.parentNode.getAttribute("style")+'">').remove()}}}}}}}function f(e,t){var n=e.tagName,i=n.toLowerCase();if(e.firstElementChild&&("I"==e.firstElementChild.tagName?m(e.firstElementChild,"em"):"B"==e.firstElementChild.tagName&&m(e.firstElementChild,"strong")),-1!=["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"].indexOf(n))return y(e),!1;"O:P"==n&&"&nbsp;"==e.innerHTML&&(e.innerHTML=ze.FE.INVISIBLE_SPACE);var r=-1,o=["META","LINK","XML","ST1:","O:","W:","FONT"];for(r=0;r<o.length;r++)if(-1!=n.indexOf(o[r]))return e.innerHTML&&(e.outerHTML=e.innerHTML),y(e),!1;if("TD"!=n){var s=e.getAttribute("class");if(t&&s){var a=(s=A(s)).split(" ");for(r=0;r<a.length;r++){var l=[],c="."+a[r];l.push(c),c=i+c,l.push(c);for(var d=0;d<l.length;d++)t[l[d]]&&S(e,t[l[d]])}e.removeAttribute("class")}t&&t[i]&&S(e,t[i])}if(-1!=["P","H1","H2","H3","H4","H5","H6","PRE"].indexOf(n)){var u=e.getAttribute("class");if(u&&(t&&t[n.toLowerCase()+"."+u]&&S(e,t[n.toLowerCase()+"."+u]),-1!=u.toLowerCase().indexOf("mso"))){var f=A(u);(f=f.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""))?e.setAttribute("class",f):e.removeAttribute("class")}var h=e.getAttribute("style");if(h){var p=h.match(/text-align:.+?[; "]{1,1}/gi);p&&p[p.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1")}C(e)}if("TR"==n&&v(e,t),"A"==n&&!e.attributes.getNamedItem("href")&&e.innerHTML&&(e.outerHTML=e.innerHTML),"TD"!=n&&"TH"!=n||e.innerHTML||(e.innerHTML="<br>"),"TABLE"==n&&(e.style.width="100%"),e.getAttribute("lang")&&e.removeAttribute("lang"),e.getAttribute("style")&&-1!=e.getAttribute("style").toLowerCase().indexOf("mso")){var g=A(e.getAttribute("style"));(g=g.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""))?e.setAttribute("style",g):e.removeAttribute("style")}return!0}function b(e){var t={},n=e.getElementsByTagName("style");if(n.length){var i=n[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(i)for(var r=0;r<i.length;r++){var o=i[r],s=o.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),a=o.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");s=s.replace(/^[\s]|[\s]$/gm,""),a=a.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/\n|\r|\n\r/g,""),a=a.replace(/\n|\r|\n\r/g,"");for(var l=s.split(", "),c=0;c<l.length;c++)t[l[c]]=a}}return t}function E(e){for(var t=e.split("v:shape"),n=1;n<t.length;n++){var i=t[n],r=i.split(' id="')[1];if(r&&1<r.length){r=r.split('"')[0];var o=i.split(' o:spid="')[1];o&&1<o.length&&(o=o.split('"')[0],x[r]=o)}}}function o(e,t){E(e=e.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/gi,"$1"));var n=(new DOMParser).parseFromString(e,"text/html"),i=n.head,r=n.body,o=b(i);l(r,function(e){if(e.nodeType==Node.TEXT_NODE&&/\n|\u00a0/.test(e.data)){if(!/\S| /.test(e.data))return e.data==ze.FE.UNICODE_NBSP?(e.data="\u200b",!0):(y(e),!1);e.data=e.data.replace(/\n/gi," ")}return!0}),l(r,function(e){return e.nodeType!=Node.ELEMENT_NODE||"V:IMAGEDATA"!=e.tagName&&"IMG"!=e.tagName||d(e,t),!0}),l(r,function(e){if(e.nodeType==Node.TEXT_NODE)return e.data=e.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(e.nodeType!=Node.ELEMENT_NODE)return e.nodeType!=Node.COMMENT_NODE||(y(e),!1);if(T(e)){var t=e.parentNode,n=e.previousSibling,i=g(e,o),r=null;return(r=n?n.nextSibling:t.firstChild)?t.insertBefore(i,r):t.appendChild(i),!1}return f(e,o)}),l(r,function(e){if(e.nodeType==Node.ELEMENT_NODE){var t=e.tagName;if(!e.innerHTML&&-1==["BR","IMG"].indexOf(t)){for(var n=e.parentNode;n&&(y(e),!(e=n).innerHTML);)n=e.parentNode;return!1}c(e)}return!0});var s=r.outerHTML,a=_.opts.htmlAllowedStyleProps;return _.opts.htmlAllowedStyleProps=_.opts.wordAllowedStyleProps,s=_.clean.html(s,_.opts.wordDeniedTags,_.opts.wordDeniedAttrs,!1),_.opts.htmlAllowedStyleProps=a,s}var s,a,w="word_paste",x={};return{_init:e,clean:i}}}),$(document).on("has_many_add:after",function(){initFroalaEditors()}),$(document).ready(function(){initFroalaEditors()}),function(){var e=this;(function(){(function(){var n=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new l.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?((t=document.createElement("a")).href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var e,t;if(e=1<=arguments.length?n.call(arguments,0):[],this.debugging)return e.push(Date.now()),(t=this.logger).log.apply(t,["[ActionCable]"].concat(n.call(e)))}}}).call(this)}).call(e);var l=e.ActionCable;(function(){(function(){var i=function(e,t){return function(){return e.apply(t,arguments)}};l.ConnectionMonitor=function(){function e(e){this.connection=e,this.visibilityDidChange=i(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,t,n;return e.pollInterval={min:3,max:30},e.staleThreshold=6,e.prototype.start=function(){if(!this.isRunning())return this.startedAt=t(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},e.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=t(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor stopped")},e.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},e.prototype.recordPing=function(){return this.pingedAt=t()},e.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,l.log("ConnectionMonitor recorded connect")},e.prototype.recordDisconnect=function(){return this.disconnectedAt=t(),l.log("ConnectionMonitor recorded disconnect")},e.prototype.startPolling=function(){return this.stopPolling(),this.poll()},e.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},e.prototype.poll=function(){return this.pollTimeout=setTimeout((e=this,function(){return e.reconnectIfStale(),e.poll()}),this.getPollInterval());var e},e.prototype.getPollInterval=function(){var e,t,n,i;return n=(i=this.constructor.pollInterval).min,t=i.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(e,n,t))},e.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return l.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?l.log("ConnectionMonitor skipping reopening recent disconnect"):(l.log("ConnectionMonitor reopening"),this.connection.reopen())},e.prototype.connectionIsStale=function(){var e;return n(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},e.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},e.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return l.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},t=function(){return(new Date).getTime()},n=function(e){return(t()-e)/1e3},r=function(e,t,n){return Math.max(t,Math.min(n,e))},e}()}).call(this),function(){var e,r,t,n,i,o=[].slice,s=function(e,t){return function(){return e.apply(t,arguments)}},a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n=l.INTERNAL,r=n.message_types,t=n.protocols,i=2<=t.length?o.call(t,0,e=t.length-1):(e=0,[]),t[e++],l.Connection=function(){function e(e){this.consumer=e,this.open=s(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new l.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(l.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(l.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+t),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new l.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(l.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,l.log("Failed to reopen WebSocket",e)}finally{l.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),0<=a.call(i,e)},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?o.call(arguments,0):[],e=this.getState(),0<=a.call(t,e)},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,n,i;if(this.isProtocolSupported())switch(t=(i=JSON.parse(e.data)).identifier,n=i.message,i.type){case r.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case r.ping:return this.monitor.recordPing();case r.confirmation:return this.subscriptions.notify(t,"connected");case r.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open:function(){if(l.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return l.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(l.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return l.log("WebSocket onerror event")}},e}()}.call(this),function(){var c=[].slice;l.Subscriptions=function(){function e(e){this.consumer=e,this.subscriptions=[]}return e.prototype.create=function(e,t){var n,i,r;return i="object"==typeof(n=e)?n:{channel:n},r=new l.Subscription(this.consumer,i,t),this.add(r)},e.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},e.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},e.prototype.reject=function(e){var t,n,i,r,o;for(r=[],t=0,n=(i=this.findAll(e)).length;t<n;t++)o=i[t],this.forget(o),this.notify(o,"rejected"),r.push(o);return r},e.prototype.forget=function(r){var o;return this.subscriptions=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.subscriptions).length;e<t;e++)(o=n[e])!==r&&i.push(o);return i}.call(this),r},e.prototype.findAll=function(e){var t,n,i,r,o;for(r=[],t=0,n=(i=this.subscriptions).length;t<n;t++)(o=i[t]).identifier===e&&r.push(o);return r},e.prototype.reload=function(){var e,t,n,i,r;for(i=[],e=0,t=(n=this.subscriptions).length;e<t;e++)r=n[e],i.push(this.sendCommand(r,"subscribe"));return i},e.prototype.notifyAll=function(e){var t,n,i,r,o,s,a;for(n=e,t=2<=arguments.length?c.call(arguments,1):[],s=[],i=0,r=(o=this.subscriptions).length;i<r;i++)a=o[i],s.push(this.notify.apply(this,[a,n].concat(c.call(t))));return s},e.prototype.notify=function(e,t){var n,i,r,o,s,a,l;for(a=e,i=t,n=3<=arguments.length?c.call(arguments,2):[],s=[],r=0,o=(l="string"==typeof a?this.findAll(a):[a]).length;r<o;r++)a=l[r],s.push("function"==typeof a[i]?a[i].apply(a,n):void 0);return s},e.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},e}()}.call(this),function(){l.Subscription=function(){function e(e,t,n){this.consumer=e,null==t&&(t={}),this.identifier=JSON.stringify(t),i(this,n)}var i;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},i=function(e,t){var n,i;if(null!=t)for(n in t)i=t[n],e[n]=i;return e},e}()}.call(this),function(){l.Consumer=function(){function e(e){this.url=e,this.subscriptions=new l.Subscriptions(this),this.connection=new l.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){}.call(this),function(){}.call(this),$(document).ready(function(){$(document).ready(function(){$(".parallax").parallax()})}),$(document).ready(function(){$(".flexslider").flexslider(),$("ul.names-list").on("click","li:not(.active-tab)",function(){$(this).addClass("active-tab").siblings().removeClass("active-tab").closest(".tabs-section").find("li.tab-content").removeClass("active-tab-content").eq($(this).index()).addClass("active-tab-content")})}),function(){}.call(this);